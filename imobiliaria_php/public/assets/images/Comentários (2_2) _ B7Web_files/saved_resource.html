<!DOCTYPE html>
<!-- saved from url=(0097)https://player-vz-2ba20d04-520.tv.pandavideo.com.br/embed/?v=d51dc7fe-cd84-4591-b107-b94eecb90dc7 -->
<html style="--plyr-color-main: #4874F1; --plyr-captions-text-color: #FFFFFF; --plyr-captions-background: #000000; --plyr-video-control-color: #FFFFFF; --plyr-video-control-color-hover: #FFFFFF; --plyr-menu-color: #4a5464; --live-indicator-color: #fc2d2d;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" href="./css"><script src="./cast_sender.js.download"></script><script src="./cast_framework.js.download"></script><script src="./cast_sender.js(1).download"></script><meta name="robots" content="noindex"><title>Panda Video - Hospedagem de video</title><style>@keyframes plyr-progress{to{background-position:25px 0;background-position:var(--plyr-progress-loading-size,25px) 0}}@keyframes plyr-popup{0%{opacity:.5;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes plyr-fade-in{from{opacity:0}to{opacity:1}}.plyr{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;align-items:center;direction:ltr;display:flex;flex-direction:column;font-family:inherit;font-family:var(--plyr-font-family,inherit);font-variant-numeric:tabular-nums;font-weight:400;font-weight:var(--plyr-font-weight-regular,400);line-height:1.7;line-height:var(--plyr-line-height,1.7);max-width:100%;min-width:200px;position:relative;text-shadow:none;transition:box-shadow .3s ease;z-index:0}.plyr audio,.plyr iframe,.plyr video{display:block;height:100%;width:100%}.plyr button{font:inherit;line-height:inherit;width:auto}.plyr:focus{outline:0}.plyr--full-ui{box-sizing:border-box}.plyr--full-ui *,.plyr--full-ui ::after,.plyr--full-ui ::before{box-sizing:inherit}.plyr--full-ui a,.plyr--full-ui button,.plyr--full-ui input,.plyr--full-ui label{touch-action:manipulation}.plyr__badge{background:#4a5464;background:var(--plyr-badge-background,#4a5464);border-radius:2px;border-radius:var(--plyr-badge-border-radius,2px);color:#fff;color:var(--plyr-badge-text-color,#fff);font-size:9px;font-size:var(--plyr-font-size-badge,9px);line-height:1;padding:3px 4px}.plyr--full-ui ::-webkit-media-text-track-container{display:none}.plyr__captions{animation:plyr-fade-in .3s ease;bottom:0;display:none;font-size:13px;font-size:var(--plyr-font-size-small,13px);left:0;padding:10px;padding:var(--plyr-control-spacing,10px);position:absolute;text-align:center;transition:transform .4s ease-in-out;width:100%}.plyr__captions span:empty{display:none}@media (min-width:480px){.plyr__captions{font-size:15px;font-size:var(--plyr-font-size-base,15px);padding:calc(10px * 2);padding:calc(var(--plyr-control-spacing,10px) * 2)}}@media (min-width:768px){.plyr__captions{font-size:18px;font-size:var(--plyr-font-size-large,18px)}}.plyr--captions-active .plyr__captions{display:block}.plyr:not(.plyr--hide-controls) .plyr__controls:not(:empty)~.plyr__captions{transform:translateY(calc(10px * -4));transform:translateY(calc(var(--plyr-control-spacing,10px) * -4))}.plyr__caption{background:rgba(0,0,0,.8);background:var(--plyr-captions-background,rgba(0,0,0,.8));border-radius:2px;-webkit-box-decoration-break:clone;box-decoration-break:clone;color:#fff;color:var(--plyr-captions-text-color,#fff);line-height:185%;padding:.2em .5em;white-space:pre-wrap}.plyr__caption div{display:inline}.plyr__control{background:0 0;border:0;border-radius:3px;border-radius:var(--plyr-control-radius,3px);color:inherit;cursor:pointer;flex-shrink:0;overflow:visible;padding:calc(10px * .7);padding:calc(var(--plyr-control-spacing,10px) * .7);position:relative;transition:all .3s ease}.plyr__control svg{display:block;fill:currentColor;height:18px;height:var(--plyr-control-icon-size,18px);pointer-events:none;width:18px;width:var(--plyr-control-icon-size,18px)}.plyr__control:focus{outline:0}.plyr__control.plyr__tab-focus{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}a.plyr__control{text-decoration:none}a.plyr__control::after,a.plyr__control::before{display:none}.plyr__control.plyr__control--pressed .icon--not-pressed,.plyr__control.plyr__control--pressed .label--not-pressed,.plyr__control:not(.plyr__control--pressed) .icon--pressed,.plyr__control:not(.plyr__control--pressed) .label--pressed{display:none}.plyr--full-ui ::-webkit-media-controls{display:none}.plyr__controls{align-items:center;display:flex;justify-content:flex-end;text-align:center}.plyr__controls .plyr__progress__container{flex:1;min-width:0}.plyr__controls .plyr__controls__item{margin-left:calc(10px / 4);margin-left:calc(var(--plyr-control-spacing,10px)/ 4)}.plyr__controls .plyr__controls__item:first-child{margin-left:0;margin-right:auto}.plyr__controls .plyr__controls__item.plyr__progress__container{padding-left:calc(10px / 4);padding-left:calc(var(--plyr-control-spacing,10px)/ 4)}.plyr__controls .plyr__controls__item.plyr__time{padding:0 calc(10px / 2);padding:0 calc(var(--plyr-control-spacing,10px)/ 2)}.plyr__controls .plyr__controls__item.plyr__progress__container:first-child,.plyr__controls .plyr__controls__item.plyr__time+.plyr__time,.plyr__controls .plyr__controls__item.plyr__time:first-child{padding-left:0}.plyr__controls:empty{display:none}.plyr [data-plyr=airplay],.plyr [data-plyr=captions],.plyr [data-plyr=fullscreen],.plyr [data-plyr=pip]{display:none}.plyr--airplay-supported [data-plyr=airplay],.plyr--captions-enabled [data-plyr=captions],.plyr--fullscreen-enabled [data-plyr=fullscreen],.plyr--pip-supported [data-plyr=pip]{display:inline-block}.plyr__menu{display:flex;position:relative}.plyr__menu .plyr__control svg{transition:transform .3s ease}.plyr__menu .plyr__control[aria-expanded=true] svg{transform:rotate(90deg)}.plyr__menu .plyr__control[aria-expanded=true] .plyr__tooltip{display:none}.plyr__menu__container{animation:plyr-popup .2s ease;background:rgba(255,255,255,.9);background:var(--plyr-menu-background,rgba(255,255,255,.9));border-radius:4px;bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);box-shadow:var(--plyr-menu-shadow,0 1px 2px rgba(0,0,0,.15));color:#4a5464;color:var(--plyr-menu-color,#4a5464);font-size:15px;font-size:var(--plyr-font-size-base,15px);margin-bottom:10px;position:absolute;right:-3px;text-align:left;white-space:nowrap;z-index:3}.plyr__menu__container>div{overflow:hidden;transition:height .35s cubic-bezier(.4,0,.2,1),width .35s cubic-bezier(.4,0,.2,1)}.plyr__menu__container::after{border:4px solid transparent;border:var(--plyr-menu-arrow-size,4px) solid transparent;border-top-color:rgba(255,255,255,.9);border-top-color:var(--plyr-menu-background,rgba(255,255,255,.9));content:'';height:0;position:absolute;right:calc(((18px / 2) + calc(10px * .7)) - (4px / 2));right:calc(((var(--plyr-control-icon-size,18px)/ 2) + calc(var(--plyr-control-spacing,10px) * .7)) - (var(--plyr-menu-arrow-size,4px)/ 2));top:100%;width:0}.plyr__menu__container [role=menu]{padding:calc(10px * .7);padding:calc(var(--plyr-control-spacing,10px) * .7)}.plyr__menu__container [role=menuitem],.plyr__menu__container [role=menuitemradio]{margin-top:2px}.plyr__menu__container [role=menuitem]:first-child,.plyr__menu__container [role=menuitemradio]:first-child{margin-top:0}.plyr__menu__container .plyr__control{align-items:center;color:#4a5464;color:var(--plyr-menu-color,#4a5464);display:flex;font-size:13px;font-size:var(--plyr-font-size-menu,var(--plyr-font-size-small,13px));padding-bottom:calc(calc(10px * .7)/ 1.5);padding-bottom:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 1.5);padding-left:calc(calc(10px * .7) * 1.5);padding-left:calc(calc(var(--plyr-control-spacing,10px) * .7) * 1.5);padding-right:calc(calc(10px * .7) * 1.5);padding-right:calc(calc(var(--plyr-control-spacing,10px) * .7) * 1.5);padding-top:calc(calc(10px * .7)/ 1.5);padding-top:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 1.5);-webkit-user-select:none;-ms-user-select:none;user-select:none;width:100%}.plyr__menu__container .plyr__control>span{align-items:inherit;display:flex;width:100%}.plyr__menu__container .plyr__control::after{border:4px solid transparent;border:var(--plyr-menu-item-arrow-size,4px) solid transparent;content:'';position:absolute;top:50%;transform:translateY(-50%)}.plyr__menu__container .plyr__control--forward{padding-right:calc(calc(10px * .7) * 4);padding-right:calc(calc(var(--plyr-control-spacing,10px) * .7) * 4)}.plyr__menu__container .plyr__control--forward::after{border-left-color:#728197;border-left-color:var(--plyr-menu-arrow-color,#728197);right:calc((calc(10px * .7) * 1.5) - 4px);right:calc((calc(var(--plyr-control-spacing,10px) * .7) * 1.5) - var(--plyr-menu-item-arrow-size,4px))}.plyr__menu__container .plyr__control--forward.plyr__tab-focus::after,.plyr__menu__container .plyr__control--forward:hover::after{border-left-color:currentColor}.plyr__menu__container .plyr__control--back{font-weight:400;font-weight:var(--plyr-font-weight-regular,400);margin:calc(10px * .7);margin:calc(var(--plyr-control-spacing,10px) * .7);margin-bottom:calc(calc(10px * .7)/ 2);margin-bottom:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 2);padding-left:calc(calc(10px * .7) * 4);padding-left:calc(calc(var(--plyr-control-spacing,10px) * .7) * 4);position:relative;width:calc(100% - (calc(10px * .7) * 2));width:calc(100% - (calc(var(--plyr-control-spacing,10px) * .7) * 2))}.plyr__menu__container .plyr__control--back::after{border-right-color:#728197;border-right-color:var(--plyr-menu-arrow-color,#728197);left:calc((calc(10px * .7) * 1.5) - 4px);left:calc((calc(var(--plyr-control-spacing,10px) * .7) * 1.5) - var(--plyr-menu-item-arrow-size,4px))}.plyr__menu__container .plyr__control--back::before{background:#dcdfe5;background:var(--plyr-menu-back-border-color,#dcdfe5);box-shadow:0 1px 0 #fff;box-shadow:0 1px 0 var(--plyr-menu-back-border-shadow-color,#fff);content:'';height:1px;left:0;margin-top:calc(calc(10px * .7)/ 2);margin-top:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 2);overflow:hidden;position:absolute;right:0;top:100%}.plyr__menu__container .plyr__control--back.plyr__tab-focus::after,.plyr__menu__container .plyr__control--back:hover::after{border-right-color:currentColor}.plyr__menu__container .plyr__control[role=menuitemradio]{padding-left:calc(10px * .7);padding-left:calc(var(--plyr-control-spacing,10px) * .7)}.plyr__menu__container .plyr__control[role=menuitemradio]::after,.plyr__menu__container .plyr__control[role=menuitemradio]::before{border-radius:100%}.plyr__menu__container .plyr__control[role=menuitemradio]::before{background:rgba(0,0,0,.1);content:'';display:block;flex-shrink:0;height:16px;margin-right:10px;margin-right:var(--plyr-control-spacing,10px);transition:all .3s ease;width:16px}.plyr__menu__container .plyr__control[role=menuitemradio]::after{background:#fff;border:0;height:6px;left:12px;opacity:0;top:50%;transform:translateY(-50%) scale(0);transition:transform .3s ease,opacity .3s ease;width:6px}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]::before{background:#00b3ff;background:var(--plyr-control-toggle-checked-background,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)))}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]::after{opacity:1;transform:translateY(-50%) scale(1)}.plyr__menu__container .plyr__control[role=menuitemradio].plyr__tab-focus::before,.plyr__menu__container .plyr__control[role=menuitemradio]:hover::before{background:rgba(35,40,47,.1)}.plyr__menu__container .plyr__menu__value{align-items:center;display:flex;margin-left:auto;margin-right:calc((calc(10px * .7) - 2) * -1);margin-right:calc((calc(var(--plyr-control-spacing,10px) * .7) - 2) * -1);overflow:hidden;padding-left:calc(calc(10px * .7) * 3.5);padding-left:calc(calc(var(--plyr-control-spacing,10px) * .7) * 3.5);pointer-events:none}.plyr--full-ui input[type=range]{-webkit-appearance:none;background:0 0;border:0;border-radius:calc(13px * 2);border-radius:calc(var(--plyr-range-thumb-height,13px) * 2);color:#00b3ff;color:var(--plyr-range-fill-background,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));display:block;height:calc((3px * 2) + 13px);height:calc((var(--plyr-range-thumb-active-shadow-width,3px) * 2) + var(--plyr-range-thumb-height,13px));margin:0;min-width:0;padding:0;transition:box-shadow .3s ease;width:100%}.plyr--full-ui input[type=range]::-webkit-slider-runnable-track{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-webkit-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-webkit-user-select:none;user-select:none;background-image:linear-gradient(to right,currentColor 0,transparent 0);background-image:linear-gradient(to right,currentColor var(--value,0),transparent var(--value,0))}.plyr--full-ui input[type=range]::-webkit-slider-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-webkit-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px);-webkit-appearance:none;margin-top:calc(((13px - 5px)/ 2) * -1);margin-top:calc(((var(--plyr-range-thumb-height,13px) - var(--plyr-range-track-height,5px))/ 2) * -1)}.plyr--full-ui input[type=range]::-moz-range-track{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-moz-transition:box-shadow .3s ease;transition:box-shadow .3s ease;user-select:none}.plyr--full-ui input[type=range]::-moz-range-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-moz-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px)}.plyr--full-ui input[type=range]::-moz-range-progress{background:currentColor;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px)}.plyr--full-ui input[type=range]::-ms-track{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none;color:transparent}.plyr--full-ui input[type=range]::-ms-fill-upper{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none}.plyr--full-ui input[type=range]::-ms-fill-lower{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none;background:currentColor}.plyr--full-ui input[type=range]::-ms-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-ms-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px);margin-top:0}.plyr--full-ui input[type=range]::-ms-tooltip{display:none}.plyr--full-ui input[type=range]:focus{outline:0}.plyr--full-ui input[type=range]::-moz-focus-outer{border:0}.plyr--full-ui input[type=range].plyr__tab-focus::-webkit-slider-runnable-track{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}.plyr--full-ui input[type=range].plyr__tab-focus::-moz-range-track{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}.plyr--full-ui input[type=range].plyr__tab-focus::-ms-track{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}.plyr__poster{background-color:#000;background-position:50% 50%;background-repeat:no-repeat;background-size:contain;height:100%;left:0;opacity:0;position:absolute;top:0;transition:opacity .2s ease;width:100%;z-index:1}.plyr--stopped.plyr__poster-enabled .plyr__poster{opacity:1}.plyr__time{font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px))}.plyr__time+.plyr__time::before{content:'\2044';margin-right:10px;margin-right:var(--plyr-control-spacing,10px)}@media (max-width:calc(768px - 1px)){.plyr__time+.plyr__time{display:none}}.plyr__tooltip{background:rgba(255,255,255,.9);background:var(--plyr-tooltip-background,rgba(255,255,255,.9));border-radius:3px;border-radius:var(--plyr-tooltip-radius,3px);bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);box-shadow:var(--plyr-tooltip-shadow,0 1px 2px rgba(0,0,0,.15));color:#4a5464;color:var(--plyr-tooltip-color,#4a5464);font-size:13px;font-size:var(--plyr-font-size-small,13px);font-weight:400;font-weight:var(--plyr-font-weight-regular,400);left:50%;line-height:1.3;margin-bottom:calc(calc(10px / 2) * 2);margin-bottom:calc(calc(var(--plyr-control-spacing,10px)/ 2) * 2);opacity:0;padding:calc(10px / 2) calc(calc(10px / 2) * 1.5);padding:calc(var(--plyr-control-spacing,10px)/ 2) calc(calc(var(--plyr-control-spacing,10px)/ 2) * 1.5);pointer-events:none;position:absolute;transform:translate(-50%,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s .1s ease,opacity .2s .1s ease;white-space:nowrap;z-index:2}.plyr__tooltip::before{border-left:4px solid transparent;border-left:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-right:4px solid transparent;border-right:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-top:4px solid rgba(255,255,255,.9);border-top:var(--plyr-tooltip-arrow-size,4px) solid var(--plyr-tooltip-background,rgba(255,255,255,.9));bottom:calc(4px * -1);bottom:calc(var(--plyr-tooltip-arrow-size,4px) * -1);content:'';height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;z-index:2}.plyr .plyr__control.plyr__tab-focus .plyr__tooltip,.plyr .plyr__control:hover .plyr__tooltip,.plyr__tooltip--visible{opacity:1;transform:translate(-50%,0) scale(1)}.plyr .plyr__control:hover .plyr__tooltip{z-index:3}.plyr__controls>.plyr__control:first-child .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip{left:0;transform:translate(0,10px) scale(.8);transform-origin:0 100%}.plyr__controls>.plyr__control:first-child .plyr__tooltip::before,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip::before{left:calc((18px / 2) + calc(10px * .7));left:calc((var(--plyr-control-icon-size,18px)/ 2) + calc(var(--plyr-control-spacing,10px) * .7))}.plyr__controls>.plyr__control:last-child .plyr__tooltip{left:auto;right:0;transform:translate(0,10px) scale(.8);transform-origin:100% 100%}.plyr__controls>.plyr__control:last-child .plyr__tooltip::before{left:auto;right:calc((18px / 2) + calc(10px * .7));right:calc((var(--plyr-control-icon-size,18px)/ 2) + calc(var(--plyr-control-spacing,10px) * .7));transform:translateX(50%)}.plyr__controls>.plyr__control:first-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control:hover .plyr__tooltip,.plyr__controls>.plyr__control:first-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child:hover .plyr__tooltip,.plyr__controls>.plyr__control:last-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:last-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:last-child:hover .plyr__tooltip{transform:translate(0,0) scale(1)}.plyr__progress{left:calc(13px * .5);left:calc(var(--plyr-range-thumb-height,13px) * .5);margin-right:13px;margin-right:var(--plyr-range-thumb-height,13px);position:relative}.plyr__progress input[type=range],.plyr__progress__buffer{margin-left:calc(13px * -.5);margin-left:calc(var(--plyr-range-thumb-height,13px) * -.5);margin-right:calc(13px * -.5);margin-right:calc(var(--plyr-range-thumb-height,13px) * -.5);width:calc(100% + 13px);width:calc(100% + var(--plyr-range-thumb-height,13px))}.plyr__progress input[type=range]{position:relative;z-index:2}.plyr__progress .plyr__tooltip{font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px));left:0}.plyr__progress__buffer{-webkit-appearance:none;background:0 0;border:0;border-radius:100px;height:5px;height:var(--plyr-range-track-height,5px);left:0;margin-top:calc((5px / 2) * -1);margin-top:calc((var(--plyr-range-track-height,5px)/ 2) * -1);padding:0;position:absolute;top:50%}.plyr__progress__buffer::-webkit-progress-bar{background:0 0}.plyr__progress__buffer::-webkit-progress-value{background:currentColor;border-radius:100px;min-width:5px;min-width:var(--plyr-range-track-height,5px);-webkit-transition:width .2s ease;transition:width .2s ease}.plyr__progress__buffer::-moz-progress-bar{background:currentColor;border-radius:100px;min-width:5px;min-width:var(--plyr-range-track-height,5px);-moz-transition:width .2s ease;transition:width .2s ease}.plyr__progress__buffer::-ms-fill{border-radius:100px;-ms-transition:width .2s ease;transition:width .2s ease}.plyr--loading .plyr__progress__buffer{animation:plyr-progress 1s linear infinite;background-image:linear-gradient(-45deg,rgba(35,40,47,.6) 25%,transparent 25%,transparent 50%,rgba(35,40,47,.6) 50%,rgba(35,40,47,.6) 75%,transparent 75%,transparent);background-image:linear-gradient(-45deg,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 25%,transparent 25%,transparent 50%,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 50%,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 75%,transparent 75%,transparent);background-repeat:repeat-x;background-size:25px 25px;background-size:var(--plyr-progress-loading-size,25px) var(--plyr-progress-loading-size,25px);color:transparent}.plyr--video.plyr--loading .plyr__progress__buffer{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25))}.plyr--audio.plyr--loading .plyr__progress__buffer{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6))}.plyr__volume{align-items:center;display:flex;max-width:110px;min-width:80px;position:relative;width:20%}.plyr__volume input[type=range]{margin-left:calc(10px / 2);margin-left:calc(var(--plyr-control-spacing,10px)/ 2);margin-right:calc(10px / 2);margin-right:calc(var(--plyr-control-spacing,10px)/ 2);position:relative;z-index:2}.plyr--is-ios .plyr__volume{min-width:0;width:auto}.plyr--audio{display:block}.plyr--audio .plyr__controls{background:#fff;background:var(--plyr-audio-controls-background,#fff);border-radius:inherit;color:#4a5464;color:var(--plyr-audio-control-color,#4a5464);padding:10px;padding:var(--plyr-control-spacing,10px)}.plyr--audio .plyr__control.plyr__tab-focus,.plyr--audio .plyr__control:hover,.plyr--audio .plyr__control[aria-expanded=true]{background:#00b3ff;background:var(--plyr-audio-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));color:#fff;color:var(--plyr-audio-control-color-hover,#fff)}.plyr--full-ui.plyr--audio input[type=range]::-webkit-slider-runnable-track{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]::-moz-range-track{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]::-ms-track{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(35,40,47,.1);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--full-ui.plyr--audio input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(35,40,47,.1);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--full-ui.plyr--audio input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(35,40,47,.1);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--audio .plyr__progress__buffer{color:rgba(193,200,209,.6);color:var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6))}.plyr--video{background:#000;overflow:hidden}.plyr--video.plyr--menu-open{overflow:visible}.plyr__video-wrapper{background:#000;height:100%;margin:auto;overflow:hidden;position:relative;width:100%}.plyr__video-embed,.plyr__video-wrapper--fixed-ratio{height:0;padding-bottom:56.25%}.plyr__video-embed iframe,.plyr__video-wrapper--fixed-ratio video{border:0;left:0;position:absolute;top:0}.plyr--full-ui .plyr__video-embed>.plyr__video-embed__container{padding-bottom:240%;position:relative;transform:translateY(-38.28125%)}.plyr--video .plyr__controls{background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.75));background:var(--plyr-video-controls-background,linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.75)));border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;bottom:0;color:#fff;color:var(--plyr-video-control-color,#fff);left:0;padding:calc(10px / 2);padding:calc(var(--plyr-control-spacing,10px)/ 2);padding-top:calc(10px * 2);padding-top:calc(var(--plyr-control-spacing,10px) * 2);position:absolute;right:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out;z-index:3}@media (min-width:480px){.plyr--video .plyr__controls{padding:10px;padding:var(--plyr-control-spacing,10px);padding-top:calc(10px * 3.5);padding-top:calc(var(--plyr-control-spacing,10px) * 3.5)}}.plyr--video.plyr--hide-controls .plyr__controls{opacity:0;pointer-events:none;transform:translateY(100%)}.plyr--video .plyr__control.plyr__tab-focus,.plyr--video .plyr__control:hover,.plyr--video .plyr__control[aria-expanded=true]{background:#00b3ff;background:var(--plyr-video-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));color:#fff;color:var(--plyr-video-control-color-hover,#fff)}.plyr__control--overlaid{background:#00b3ff;background:var(--plyr-video-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));border:0;border-radius:100%;color:#fff;color:var(--plyr-video-control-color,#fff);display:none;left:50%;opacity:.9;padding:calc(10px * 1.5);padding:calc(var(--plyr-control-spacing,10px) * 1.5);position:absolute;top:50%;transform:translate(-50%,-50%);transition:.3s;z-index:2}.plyr__control--overlaid svg{left:2px;position:relative}.plyr__control--overlaid:focus,.plyr__control--overlaid:hover{opacity:1}.plyr--playing .plyr__control--overlaid{opacity:0;visibility:hidden}.plyr--full-ui.plyr--video .plyr__control--overlaid{display:block}.plyr--full-ui.plyr--video input[type=range]::-webkit-slider-runnable-track{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25)))}.plyr--full-ui.plyr--video input[type=range]::-moz-range-track{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25)))}.plyr--full-ui.plyr--video input[type=range]::-ms-track{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25)))}.plyr--full-ui.plyr--video input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(255,255,255,.5);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(255,255,255,.5))}.plyr--full-ui.plyr--video input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(255,255,255,.5);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(255,255,255,.5))}.plyr--full-ui.plyr--video input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(255,255,255,.5);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(255,255,255,.5))}.plyr--video .plyr__progress__buffer{color:rgba(255,255,255,.25);color:var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25))}.plyr:-webkit-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-ms-fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-webkit-full-screen video{height:100%}.plyr:-ms-fullscreen video{height:100%}.plyr:fullscreen video{height:100%}.plyr:-webkit-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-ms-fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:-webkit-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-ms-fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-webkit-full-screen.plyr--hide-controls{cursor:none}.plyr:-ms-fullscreen.plyr--hide-controls{cursor:none}.plyr:fullscreen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-webkit-full-screen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}.plyr:-ms-fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}.plyr:fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr:-webkit-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-webkit-full-screen video{height:100%}.plyr:-webkit-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-webkit-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-webkit-full-screen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-webkit-full-screen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr:-moz-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-moz-full-screen video{height:100%}.plyr:-moz-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-moz-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-moz-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-moz-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-moz-full-screen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-moz-full-screen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr:-ms-fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-ms-fullscreen video{height:100%}.plyr:-ms-fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:-ms-fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-ms-fullscreen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-ms-fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr--fullscreen-fallback{background:#000;border-radius:0!important;height:100%;margin:0;width:100%;bottom:0;display:block;left:0;position:fixed;right:0;top:0;z-index:10000000}.plyr--fullscreen-fallback video{height:100%}.plyr--fullscreen-fallback .plyr__video-wrapper{height:100%;position:static}.plyr--fullscreen-fallback.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen{display:block}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr--fullscreen-fallback.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr--fullscreen-fallback .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr__ads{border-radius:inherit;bottom:0;cursor:pointer;left:0;overflow:hidden;position:absolute;right:0;top:0;z-index:-1}.plyr__ads>div,.plyr__ads>div iframe{height:100%;position:absolute;width:100%}.plyr__ads::after{background:#23282f;border-radius:2px;bottom:10px;bottom:var(--plyr-control-spacing,10px);color:#fff;content:attr(data-badge-text);font-size:11px;padding:2px 6px;pointer-events:none;position:absolute;right:10px;right:var(--plyr-control-spacing,10px);z-index:3}.plyr__ads::after:empty{display:none}.plyr__cues{background:currentColor;display:block;height:5px;height:var(--plyr-range-track-height,5px);left:0;margin:-var(--plyr-range-track-height,5px)/2 0 0;opacity:.8;position:absolute;top:50%;width:3px;z-index:3}.plyr__preview-thumb{background-color:rgba(255,255,255,.9);background-color:var(--plyr-tooltip-background,rgba(255,255,255,.9));border-radius:3px;bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);box-shadow:var(--plyr-tooltip-shadow,0 1px 2px rgba(0,0,0,.15));margin-bottom:calc(calc(10px / 2) * 2);margin-bottom:calc(calc(var(--plyr-control-spacing,10px)/ 2) * 2);opacity:0;padding:3px;padding:var(--plyr-tooltip-radius,3px);pointer-events:none;position:absolute;transform:translate(0,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s .1s ease,opacity .2s .1s ease;z-index:2}.plyr__preview-thumb--is-shown{opacity:1;transform:translate(0,0) scale(1)}.plyr__preview-thumb::before{border-left:4px solid transparent;border-left:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-right:4px solid transparent;border-right:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-top:4px solid rgba(255,255,255,.9);border-top:var(--plyr-tooltip-arrow-size,4px) solid var(--plyr-tooltip-background,rgba(255,255,255,.9));bottom:calc(4px * -1);bottom:calc(var(--plyr-tooltip-arrow-size,4px) * -1);content:'';height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;z-index:2}.plyr__preview-thumb__image-container{background:#c1c8d1;border-radius:calc(3px - 1px);border-radius:calc(var(--plyr-tooltip-radius,3px) - 1px);overflow:hidden;position:relative;z-index:0}.plyr__preview-thumb__image-container img{height:100%;left:0;max-height:none;max-width:none;position:absolute;top:0;width:100%}.plyr__preview-thumb__time-container{bottom:6px;left:0;position:absolute;right:0;white-space:nowrap;z-index:3}.plyr__preview-thumb__time-container span{background-color:rgba(0,0,0,.55);border-radius:calc(3px - 1px);border-radius:calc(var(--plyr-tooltip-radius,3px) - 1px);color:#fff;font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px));padding:3px 6px}.plyr__preview-scrubbing{bottom:0;filter:blur(1px);height:100%;left:0;margin:auto;opacity:0;overflow:hidden;pointer-events:none;position:absolute;right:0;top:0;transition:opacity .3s ease;width:100%;z-index:1}.plyr__preview-scrubbing--is-shown{opacity:1}.plyr__preview-scrubbing img{height:100%;left:0;max-height:none;max-width:none;object-fit:contain;position:absolute;top:0;width:100%}.plyr--no-transition{transition:none!important}.plyr__sr-only{clip:rect(1px,1px,1px,1px);overflow:hidden;border:0!important;height:1px!important;padding:0!important;position:absolute!important;width:1px!important}.plyr [hidden]{display:none!important}</style><style>html,
body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    width: 100%;
    height: 100%;
    display: flex;
    background: transparent;
    align-items: center;
    justify-content: center;
    font-family: 'Rubik', sans-serif;

}
.in-page-container{
    height: auto !important;
    margin: 0 !important;
}
:root{
    --max-height: 100vh;
    --muted-indicator-border-size: 2px;
}

.container {
    width: 100%;
    height: 100%;
    display: table;
}

video {
    width: 100%;
    height: 100%;
    visibility: hidden;
}
.plyr__poster {
    background-size: cover;
    opacity: 1;
}
.panda-forward-wrapper{
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: space-between;
    position: absolute;
    top: 0;
    left: 0;
}
.panda-forward-wrapper div{
    width: 50%;
    height: 100%;
}

.plyr__captions {
    font-size: 20px;
    z-index: 4;
}

.plyr--video .plyr__controls {
    z-index: 5;
}

@media (min-width: 480px) {
    .plyr__captions {
        font-size: 18px;
    }
}
.play-cta{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
}

@media (max-width: 350px) {
    .plyr__volume>input[type=range] {
        display: none;
    }

    .plyr__volume {
        min-width: 30px;
        width: 30px;
    }
}
@media (max-width: 480px) {
    .plyr__captions {
        font-size: 14px;
    }
}

@media (min-width: 768px) {
    .plyr__captions {
        font-size: 23px;
    }
}

@media (min-width: 1024px) {
    .plyr__captions {
        font-size: 26px;
    }
}

#live-time-indicator{
    background: none;
    outline: 0;
    border: 0;
    color: var(--live-indicator-color);
    display: flex;
    align-items: center;
    cursor: pointer;
}
#live-time-indicator div{
    width: 8px;
    height: 8px;
    border-radius: 5px;
    background: var(--live-indicator-color);
    margin-right: 4px;
}
.not-realtime{
    opacity: 0.5;
}
.hide-slyder-badge::-webkit-slider-thumb {
    opacity: 0;
}

.plyr audio,
.plyr iframe,
.plyr video {
    max-height: 100vh;
}
.end-cta{
    width: 100%;
    height: 100%;
}
.panda-branding-link {
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
    padding-bottom: 2px;
    margin-left: 2px;
    border-radius: 3px;
    transition: background .3s;
}

.panda-branding-link:hover {
    background: var(--plyr-color-main)
}

.plyr--video {
    height: 100%
}

.container-drm {
    height: 100%;
    width: 100%;
    display: table-cell;
    text-align: center;
    vertical-align: middle;
}

#drm-question {
    color: white;
    font-size: 1.8rem;
    margin: 0;
    margin-bottom: 20px;
    text-shadow: 0px 0 1px black;
}

#drm-answer {
    height: 33px;
    font-size: 1rem;
    margin-bottom: 15px;
    width: 50%;
    padding: 10px 15px;
    display: inline-block;
    border: .5px solid #ccc !important;
    border-radius: 4px;
    box-sizing: border-box;
}

#drm-answer:focus {
    outline: none;
}

#drm-button {
    position: absolute;
    height: 33px;
    width: 33px;
    border: none;
    border-top-right-radius: 4px;
    border-bottom-right-radius: 4px;
    margin-left: -32px;
}

.drm-search-icon svg {
    width: 30px;
    height: 30px;
    margin-left: -3px;
}

.drm-loading-icon svg {
    height: 40px;
    width: 40px;
    position: absolute;
    left: -2px;
    top: -3px;
}

.disabled {
    display: none  !important;
}

.panda-live-indicator {
    position: absolute;
    right: 20px;
    top: 5px;
    padding: 2px 16px;
    border-radius: 4px;
    font-weight: bold;
    background-color: var(--live-indicator-color);
    color: #fff;
    opacity: 0.85;
}

#error-indicator{
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1000;
    padding: 30px;
    line-height: 2em;
    background: rgba(0,0,0,0.6);
}

.panda-title-wrapper {
    position: absolute;
    top: calc(-100vh + 75px);
    left: 0;
    width: 100%;
    transition: transform .01s;
    height: 80px;
    background: var(--plyr-video-controls-background, linear-gradient(rgba(0, 0, 0, .85), rgba(0, 0, 0, 0)));
}

.plyr-controls-fix-index {
    z-index: 12 !important;
}
@media (max-width: 550px) {
    .plyr__controls .panda-branding-link {
        display: none;
    }

    .panda-title-wrapper {
        position: absolute;
        top: calc(-100vh + 55px);
        left: 0;
        width: 100%;
        transition: transform .01s;
        height: 80px;
        background: var(--plyr-video-controls-background, linear-gradient(rgba(0, 0, 0, .85), rgba(0, 0, 0, 0)));
    }
}

.plyr--video.plyr--hide-controls .plyr__controls {
    transform: translateY(0) !important;
}

.panda-title-wrapper p {
    color: var(--plyr-video-control-color);
    padding: 10px 20px;
    margin: 0;
    font-size: 18px;
    font-weight: bold;
    text-align: start;
}

.loading-icon svg {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
    -webkit-transform: translateX(-50%) translateY(-50%);
    -o-transform: translateX(-50%) translateY(-50%);
    width: 30%;
    height: 30%;
}
.live-offline-badge{
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: #040814;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
}
@keyframes pulsateLogo {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        transform: scale(1);
    }
}
.live-offline-badge img{
    width: 40%;
    max-width: 500px;
    animation: pulsateLogo 3s ease-in-out infinite;
}

.live-offline-badge p{
    font-size: 1rem;
    margin-top: 10px;
    font-weight: bold;
}

.live-thumb{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.live-thumb img{
    width: 100%;
    height: 100%;
}
.alternative-progress-wrapper{
    width: 100%;
    height: 20px;
    position: absolute;
    display: flex;
    align-items: flex-end;
    bottom: 0;
    left: 0;
    transition: width .1s;
}
.alternative-progress{
    --value-progress: 0%;
    background: var(--plyr-color-main);
    height: 100%;
    width: var(--value-progress);
    transition: width 0.7s;
    z-index: 100000;
}
@media (max-width: 550px) {
    .alternative-progress-wrapper{
        height: 20px;
    }
}
button[data-plyr="play"].plyr__control--overlaid{
    z-index: 5;
}
@media (max-width: 450px) {
    .alternative-progress-wrapper{
        height: 14px;
    }
}
@media (max-width: 380px) {
    .alternative-progress-wrapper{
        height: 10px;
    }
}
@media (max-width: 490px){
    button[data-plyr="rewind"]{
        display: none;
    }
    button[data-plyr="fast-forward"]{
        display: none;
    }
    button[data-plyr="play"]{
        margin-right: auto;
    }
    .no-progress button[data-plyr="play"].plyr__controls__item, .no-progress div.plyr__time--current,.no-progress  div.plyr__time{
        position: static !important;
    }
    .panda-bookmarks-div{
        position: relative;
    }
}
.panda-bookmarks-list-title{
    width: calc(100% - 20px);
    text-align: start;
    padding: 5px 10px;
    border-bottom: 1px solid #ccc;
    margin: 3px 10px;
    font-size: 13px;
}
.panda-bookmarks-list-wrapper{
    animation: plyr-popup .2s ease;
    position: absolute;
    bottom: 50px;
    right: 0px;
    color: var(--plyr-menu-color,#4a5464);
    background: var(--plyr-menu-background,rgba(255,255,255,.9));
    border-radius: 4px;
    opacity: 0.9;
}

.panda-bookmarks-list{ 
    list-style-type: none;
    padding: 5px 10px;
    padding-top: 0;
    max-height: calc(var(--max-height) - 110px);
    overflow-y: auto;
    margin-top: 0;
}
.panda-bookmarks-list::-webkit-scrollbar {
    width: 5px;
}
.panda-bookmarks-list::-webkit-scrollbar-track {
    background: var(--plyr-menu-background,rgba(255,255,255,.9));
    border-radius: 5px;
}
.panda-bookmarks-list::-webkit-scrollbar-thumb {
    background: #ccc; 
    border-radius: 5px;
}
.panda-bookmarks-list li {
    display: flex;
    padding: 3px 10px;
    min-width: 130px;
    max-width: 220px;
    text-align: start;
    cursor: pointer;
    border-radius: 2px;
}
.panda-bookmarks-list li:hover{
    background: var(--plyr-color-main);
    color: var(--plyr-video-control-color);
}
.panda-bookmarks-list  li span{
    font-size: 13px;
    font-weight: normal;
    line-height: 18px;
}
.panda-bookmarks-button{
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 3px;
    margin-left: 2px;
    transition: background .3s;
    border: 0;
    background: none;
}
.active-bookmark {
    background: var(--plyr-color-main);
}
.panda-bookmarks-button:hover {
    background: var(--plyr-color-main)
}
.panda-bookmark-progress-dot{
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--plyr-video-control-color);
    position: absolute;
    top: 7px;
    left: calc(var(--dot-percent) - 6px);
    z-index: 20;
}
.plyr__menu__container > div > div{
    max-height: calc(var(--max-height) - 50px);
    overflow-y: auto;
}
.plyr__menu__container > div > div::-webkit-scrollbar {
    width: 5px;
}
.plyr__menu__container > div > div::-webkit-scrollbar-track {
    background: var(--plyr-menu-background,rgba(255,255,255,.9));
    border-radius: 5px;
}
.plyr__menu__container > div > div::-webkit-scrollbar-thumb {
    background: #ccc; 
    border-radius: 5px;
}

.cta-overlay{
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1;
    width: 100%;
    height: 100%;
    outline: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}
.cta-overlay iframe{
    outline: 0;
    border: 0;
} 
.cta-skip-button{
    position: absolute;
    bottom: 0;
    right: 0;
    padding: 10px;
    cursor: pointer;
    background: rgba(255,255,255,0.4);
    border: 0;
    outline: 0;
}
.cta-container{
    position: absolute;
    display: flex;
    flex-direction: column;
    z-index: 1000;
}
.panda-resume-screen-wrapper{
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background: var(--plyr-color-main);
    z-index: 15;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
}
.panda-resume-screen-wrapper p{
    color: var(--plyr-video-control-color);
    font-size: 1.4em;
    font-weight: bold;
}
.panda-resume-screen-buttons{
    display: flex;
    flex-direction: row;
}
.panda-resume-screen-buttons button{
    background: none;
    border: 0;
    outline: 0;
    display: flex;
    align-items: center;
    padding: 10px 20px;
    cursor: pointer;
    color: var(--plyr-video-control-color);
    font-size: 1.1em;
}
.panda-resume-screen-buttons button svg{
    width: 1.9em;
    height: 1.9em;
}
.panda-resume-screen-buttons button span{
    padding-left: 4px;
}
@media (max-width: 450px) {
    .panda-resume-screen-wrapper{
        font-size: 0.8rem;
    }
}
@media (max-width: 350px) {
    .panda-resume-screen-wrapper{
        font-size: 0.7rem;
    }
}
@media (max-width: 275px) {
    .panda-resume-screen-wrapper{
        font-size: 0.6rem;
    }
}
@media (max-width: 230px) {
    .panda-resume-screen-wrapper{
        font-size: 0.5rem;
    }
}
.plyr--full-ui.fullscreen ::-webkit-media-text-track-container {
    display:block !important;
}
@keyframes plyr-popup{
    0%{
        opacity: 0;
        transform: translateY(10px);
    }
    100%{
        opacity: 1;
        transform: translateY(0px);
    }
}
#context-menu{
    position: absolute;
    display: flex;
    width: 170px;
    background: rgba(255,255,255,0.8);
    border-radius: 3px;
    z-index: 100;
}
#context-menu ul{
    display: flex;
    flex-direction: column;
    align-items: start;
    justify-content: space-around;
    padding: 0;
    width: 100%;
    height: 100%;
    margin: 0;
}
#context-menu ul li{
    list-style: none;
    display: flex;
    width: 100%;
}
#context-menu ul li:hover{
    opacity: 0.8;
    background: var(--plyr-color-main);
}
#context-menu ul li *:hover{
    color: var(--plyr-video-control-color);
}
#context-menu ul li a{
    text-decoration: none;
    color: #333;
    font-size: 0.8rem;
    padding: 10px;
    cursor: pointer;
    width: 100%;
}
#context-menu ul li button{
    color: #333;
    background: 0;
    outline: 0;
    border: 0;
    font-size: 0.8rem;
    cursor: pointer;
    width: 100%;
    text-align: start;
    padding: 10px;
}
#report-problem-dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
}
#copy-paste{
    display: flex;
    flex-direction: column;
    width: 520px;
    height: 300px;
    z-index: 100;
    background-color: #1b1b4b;
    border-radius: 5px;
}
.report-problem-text{
    display: flex;
    color: #fff;
    justify-content: center;
    align-items: center;
    font-weight: 600;
    font-size: 15px;
}
#copy-paste #report-first-step section {
    display: flex;
    flex-direction: column; 
    align-items: flex-start;
    margin: 10px 30px 0px 30px;
    color: #ccc;
    font-size: 16px;
}
#copy-paste #report-first-step section div {
    margin: 0 0 12px 0;
}
#copy-paste #report-first-step footer {
    display: flex;
    align-items: center;
    justify-content: center;
}
.report-problem-dialog-button {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #a6a2ec;
    border-radius: 6px;
    border-style: none;
    box-sizing: border-box;
    color: #FFFFFF;
    cursor: pointer;
    height: 35px;
    line-height: 20px;
    margin: 0;
    outline: none;
    padding: 10px 0px;
    position: relative;
    text-align: center;
    text-decoration: none;
    transition: color 100ms;
    vertical-align: baseline;
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;
    width: 140px;
    font-size: 0.8rem;
}
#copy-paste #report-first-step footer button:hover,
#copy-paste #report-first-step footer button:focus {
    background-color: #bab7eb;
}
#copy-paste #report-first-step footer > :first-child {
    margin-right: 20px;
}
.other-input {
    width: 100%;
    padding: 10px 20px;
    margin: 0px 0px 8px 0px;
    display: inline-block;
    border: .5px solid #ccc !important;
    border-radius: 4px;
    box-sizing: border-box;
}
#copy-paste #report-second-step {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    color: #fff;
    font-size: 16px;
    font-weight: 600;
    text-align: center;
    line-height: 1.3rem;
}
#copy-paste #report-second-step header {
    margin-top: 10px;
}
#copy-paste #report-second-step #second-step-text {
    margin-top: -10px;
}
#copy-paste #report-second-step #loading-div {
    width: 120px;
}
#copy-paste #report-third-step {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    color: #fff;
    font-size: 16px;
    font-weight: 600;
    text-align: center;
    line-height: 1.3rem;
}
#copy-paste #report-third-step.alone {
    margin-top: 40px;
}
#copy-paste #report-third-step header {
    margin-top: 15px;
    margin-bottom: 5px;
}
#copy-paste #report-third-step footer {
    margin-top: 15px;
}
.report-textfield-card {
    height: 40px;
    width: 97%;
    padding-left: 5px;
}
@media (max-width: 450px) {
    #copy-paste {
        width: 300px;
        height: 180px;
    }
    #copy-paste header p {
        margin: 5px 0px 0px 0px;
    }
    .report-problem-text {
        font-size: 9px;
    }
    .report-textfield-card {
        height: 32px;
        width: 94%;
        padding-left: 2px;
    }
    .report-problem-dialog-button {
        height: 20px;
        line-height: 14px;
        padding: 2px 0px;
        width: 80px;
        font-size: .5rem;
    }
    #copy-paste #report-first-step section div {
        margin: 0 0 2.4px 4px;
    }
    #copy-paste #report-first-step section {
        margin: 2px 4px 0px 2px;
        font-size: 10px;
    }
    #copy-paste #report-second-step #second-step-text {
        font-size: 12px;
    }
    #copy-paste #report-third-step footer {
        margin-top: 5px;
    }
    #panda-last-step-img {
        width: 50%;
    }
    .other-input {
        width: 100%;
        padding: 4px 8px;
        margin: 5px 0px;
        display: inline-block;
        border: .25px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        font-size: 10px;
    }
}
.customSettingsBtn {
    --max-height: 100vh;
    --plyr-captions-text-color: #FFF;
    --plyr-captions-background: #000;
    --plyr-video-control-color: #FFFFFFFF;
    --plyr-video-control-color-hover: #FFFFFFFF;
    --plyr-menu-color: #4a5464;
    --live-indicator-color: #fc2d2d;
    -webkit-font-smoothing: antialiased;
    direction: ltr;
    white-space: nowrap;
    box-sizing: inherit;
    background: 0 0;
    border: 0;
    border-radius: 3px;
    cursor: pointer;
    flex-shrink: 0;
    overflow: visible;
    position: relative;
    transition: all .3s ease;
    font: inherit;
    line-height: inherit;
    touch-action: manipulation;
    margin-top: 2px;
    align-items: center;
    color: var(--plyr-menu-color, #4a5464);
    display: flex;
    font-size: 13px !important;
    padding-bottom: calc(calc(10px * .7)/ 1.5);
    padding-left: calc(calc(10px * .7) * 1.5);
    padding-top: calc(calc(10px * .7)/ 1.5);
    user-select: none;
    width: 100% !important;
    padding-right: calc(calc(10px * .7) * 4);
}

.customSettingsBtn:hover {
color: #fff;
}
.small-muted-icon {
    width: 200px;
    position: absolute;
    top: 10px;
    left: 10px;
    background-color: var(--plyr-color-main);
    opacity: 0.8;
    display: flex;
    color: var(--plyr-video-control-color);
    align-items: center;
    border: 1px solid var(--plyr-video-control-color);
    border-radius: 3px;
}
button.small-muted-icon:after {
    display: block;
    width: 99999px;
    height: 99999px;
    position: absolute;
    content: '';
}
.small-muted-icon svg {
    width: 50px;
    height: 50px;
}
.small-muted-icon span{
    padding: 0 10px;
    font-weight: bold;
}

.blur {
    visibility: visible;
    position: absolute;
    top: 0;
    z-index: -1;
    filter: blur(4px);
    -webkit-filter: blur(4px);
}

button.panda-muted-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 80%;
    max-width: 400px;
    height: auto;
    border-radius: 10px;
    background-color: var(--muted-indicator-background);
    border: var(--muted-indicator-border-size) solid var(--muted-indicator-text);
    padding: 0.5em;
    text-align: center;
    transform: translate(-50%, -50%);
    z-index: 9999999;
    outline: none;
    cursor: pointer;
}
button.panda-muted-indicator:after {
    content: '';
    position: absolute;
    display: block;
    width: 99999px;
    height: 99999px;
}
button.panda-muted-indicator span {
    display: block;
    width: 100%;
    padding: 0.5em 0;
    box-sizing: border-box;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 24px;
    font-weight: 700;
    text-align: center;
    color: var(--muted-indicator-text);
    white-space: normal;
    line-height: 1.1em;
}
button.panda-muted-indicator-big-text span {
    font-size: 22px;
}
button.panda-muted-indicator svg {
    width: 36%;
    height: auto;
}
button.panda-muted-indicator svg,
button.panda-muted-indicator svg path,
button.panda-muted-indicator svg polygon {
    fill: var(--muted-indicator-text);
}
button.panda-muted-indicator.medium {
    transform: translate(-50%, -50%) scale(1.35);
    transform-origin: center;
}
button.panda-muted-indicator.large {
    width: 100%;
    max-width: 100%;
    height: 100%;
    border-radius: 0;
}
button.panda-muted-indicator.large svg {
    width: 24%;
}
button.panda-muted-indicator.large span {
    font-size: 250%;
}
@media(max-width: 680px) {
    button.panda-muted-indicator svg {
        width: 30%;
    }
    button.panda-muted-indicator span,
    button.panda-muted-indicator.large span {
        font-size: 20px;
    }
    button.panda-muted-indicator-big-text span,
    button.panda-muted-indicator-big-text.large span {
        font-size: 16px;
        line-height: 1em;
    }
}
@media(max-width: 380px) {
    button.panda-muted-indicator svg {
        width: 25%;
    }
    button.panda-muted-indicator span,
    button.panda-muted-indicator.large span {
        font-size: 16px;
        line-height: 1em;
    }
    button.panda-muted-indicator-big-text span,
    button.panda-muted-indicator-big-text.large span {
        font-size: 12px;
        line-height: 1em;
    }
}

button.panda-muted-indicator-impact-wrapper {
    --size-width: 80%;
    --size-height: 218px;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    z-index: 9999999;
    display: flex;
    width: 100%;
    height: 100%;
    padding: 0;
    border: none;
    background: rgba(0, 0, 0, 0);			
    flex-direction: column;
    align-items: center;
    justify-content: center;
    outline: none;
    cursor: pointer;
    overflow: hidden;
}
button.panda-muted-indicator-impact-wrapper:after {
    content: '';
    position: absolute;
    display: block;
    width: 100%;
    height: 100%;
}
button.panda-muted-indicator-impact-wrapper .text {
    position: absolute;
    display: block;
    width: calc(80% - 0.5em);
    max-width: calc(400px - 0.5em);
    padding: 0.5em 0;
    box-sizing: border-box;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 24px;
    font-weight: 700;
    text-align: center;
    color: var(--muted-indicator-text);
    white-space: normal;
    line-height: 1.1em;
}
button.panda-muted-indicator-impact-wrapper-big-text .text {
    font-size: 22px;
}
button.panda-muted-indicator-item .text.small-text {
    padding: 0.7em 0;
}
button.panda-muted-indicator-item .text.large-text {
    padding: 0;
}
button.panda-muted-indicator-item span.small-text {
    padding: 10px 0;
}
button.panda-muted-indicator-item span.large-text {
    padding: 8px 0;
}
button.panda-muted-indicator-impact-wrapper .text.top,
button.panda-muted-indicator-impact-wrapper-big-text .text.top {
    top: calc((50% - var(--size-height) / 2) + 0.5em - var(--muted-indicator-border-size));
}
button.panda-muted-indicator-impact-wrapper .text.bottom,
button.panda-muted-indicator-impact-wrapper-big-text .text.bottom {
    bottom: calc((50% - var(--size-height) / 2) + 0.5em - var(--muted-indicator-border-size));
}
button.panda-muted-indicator-impact-wrapper .panda-muted-indicator-impact-wrapper-canvas {
    position: absolute;
    top: 50%;
    left: 50%;
    z-index: -1;
    width: 80%;
    max-width: 400px;
    height: var(--size-height);
    background-color: var(--muted-indicator-background);
    border-radius: 10px;
    box-sizing: border-box;
    border: var(--muted-indicator-border-size) solid var(--muted-indicator-text);
    transform: translate(-50%, -50%);
    transform-origin: center;
}
button.panda-muted-indicator-impact-wrapper svg {
    position: absolute;
    width:var(--size-width);
    max-width: 400px;
}
button.panda-muted-indicator-impact-wrapper.medium {
    transform: scale(1.35);
}
button.panda-muted-indicator-impact-wrapper.large .panda-muted-indicator-impact-wrapper-canvas {
    --size-width: 100%;
    --size-height: 100%;
    width: 100%;
    max-width: 100%;
    border-radius: 0;
}
button.panda-muted-indicator-impact-wrapper.large {
    --size-width: 65%;
}
button.panda-muted-indicator-impact-wrapper.large svg {
    max-width: 500px;
}
button.panda-muted-indicator-impact-wrapper.large .text {
    font-size: 225%;
    width: 90%;
}
button.panda-muted-indicator-impact-wrapper.large .text.top {
    top: calc((var(--size-width) / 3) - 0.5em);
}
button.panda-muted-indicator-impact-wrapper.large .text.bottom {
    bottom: calc((var(--size-width) / 3) - 0.5em);
}
@media(max-width: 680px) {
    button.panda-muted-indicator-impact-wrapper {
        --size-height: 185px;
    }
    button.panda-muted-indicator-impact-wrapper svg {
        --size-width: 65%;
    }
    button.panda-muted-indicator-impact-wrapper.medium {
        transform: scale(1.15);
    }
    button.panda-muted-indicator-impact-wrapper .text,
    button.panda-muted-indicator-impact-wrapper.large .text {
        font-size: 20px;
    }
    button.panda-muted-indicator-impact-wrapper-big-text .text,
    button.panda-muted-indicator-impact-wrapper-big-text.large .text {
        font-size: 16px;
        line-height: 1em;
    }
}
@media(max-width: 380px) {
    button.panda-muted-indicator-impact-wrapper {
        --size-height: 140px;
    }
    button.panda-muted-indicator-impact-wrapper svg {
        --size-width: 52.5%;
    }
    button.panda-muted-indicator-impact-wrapper.medium {
        transform: initial;
    }
    button.panda-muted-indicator-impact-wrapper .text,
    button.panda-muted-indicator-impact-wrapper.large .text {
        font-size: 16px;
        line-height: 1em;
    }
    button.panda-muted-indicator-impact-wrapper-big-text .text,
    button.panda-muted-indicator-impact-wrapper-big-text.large .text {
        font-size: 12px;
        line-height: 1em;
    }
}
.panda-muted-indicator-custom{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    z-index: 999;
    outline: 0;
}
#trial-warning{
    position: absolute;
    bottom: 50px;
    right: 30px;
    color: white;
    text-align: center;
    background: rgba(0,0,0,0.5);
    opacity: 0.7;
    font-size: 0.8rem;
    padding: 5px 10px;
}
@media(max-width: 680px) {
    #trial-warning{
        font-size: 0.7rem;
    }
}
@media(max-width: 380px) {
    #trial-warning{
        font-size: 0.5rem;
    }
}

.plyr__controls .plyr__controls__item:first-child {
    margin-right: 0;
}
</style><style>.plyr__progress input {
  border-radius: 0px !important;
  -webkit-appearance: none;
  background: transparent;
}
.plyr__progress input[value]::-webkit-progress-bar {
  border-radius: 0px !important;
}
.plyr__progress input[value]::-webkit-progress-value {
  border-radius: 0px !important;
}
.plyr__progress__container {
  position: absolute;
  top: 14px;
  left: 10px;
  width: calc(100% - 24px);
}
@media (max-width: 480px) {
  .plyr__progress__container {
    top: -5px;
  }
}
.plyr__pb {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 100%;
  z-index: 3;
  margin-left: calc(var(--plyr-range-thumb-height, 13px) * -0.5);
  margin-right: -6.5px;
  margin-right: calc(var(--plyr-range-thumb-height, 13px) * -0.5);
  width: calc(100% + 13px);
  width: calc(100% + var(--plyr-range-thumb-height, 13px));
}
.plyr__preview-thumb {
  bottom: 22px;
  transition: bottom ease 0.1s;
}
.plyr__controls {
  padding-top: 70px;
}

.plyr--full-ui.plyr--video
  .plyr__progress
  input[type="range"]::-webkit-slider-runnable-track {
  background-color: transparent !important;
}
.plyr--full-ui.plyr--video
  .plyr__progress
  input[type="range"]::-moz-range-track {
  background-color: transparent !important;
}
.plyr--full-ui.plyr--video .plyr__progress input[type="range"]::-ms-track {
  background-color: transparent !important;
}

.plyr__progress input {
  background-color: transparent !important;
  color: transparent !important;
  top: -6px !important;
  z-index: 7 !important;
  cursor: pointer;
}
.plyr--full-ui.plyr--video
  .plyr__progress
  input[type="range"]::-webkit-slider-thumb {
  opacity: 0;
  transition: opacity ease 0.1s;
}
.plyr--full-ui.plyr--video
  .plyr__progress
  input[type="range"]::-moz-range-thumb {
  opacity: 0;
  transition: opacity ease 0.1s;
}
.plyr--full-ui.plyr--video .plyr__progress input[type="range"]::-ms-thumb {
  opacity: 0;
  transition: opacity ease 0.1s;
}
.plyr--full-ui.plyr--video
  .plyr__progress
  input[type="range"]:active::-webkit-slider-thumb {
  opacity: 1;
}
.plyr--full-ui.plyr--video
  .plyr__progress
  input[type="range"]:active::-moz-range-thumb {
  opacity: 1;
}
.plyr--full-ui.plyr--video
  .plyr__progress
  input[type="range"]:active::-ms-thumb {
  opacity: 1;
}

.sp__base {
  width: 100%;
  padding: 0;
  margin: 0;
  font-size: 0;
  text-align: left;
  box-sizing: border-box;
  position: relative;
  user-select: none; /* supported by Chrome and Opera */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
}

.pb__shadow {
  width: 100%;
  height: 50px;
  position: absolute;
  top: -44px;
  left: 0px;
  background: linear-gradient(transparent, rgba(0, 0, 0, 0.4));
  background: var(
    --plyr-video-controls-background,
    linear-gradient(transparent, rgba(0, 0, 0, 0.4))
  );
}

.sp__progressbar {
  width: 100%;
  height: 9px;
  box-sizing: border-box;
  font-size: 0;
  margin: 0;
  padding: 0;
  position: relative;
  transition: all ease 0.12s;
  text-align: left;
  overflow-x: hidden;
  white-space: nowrap;
}
.sp__progressbar li {
  display: inline-block;
  list-style: none;
  height: 9px;
  margin: 0;
  padding: 3px 0;
  position: relative;
  top: 0;
  transition: all ease 0.12s;
  box-sizing: border-box;
  position: relative;
  background-color: transparent;
  cursor: pointer;
  overflow-x: hidden;
}

.sp__progressbar.hover {
  transform: scaleY(1.8);
  margin-top: 0px;
}
.sp__progressbar li.active {
  padding: 2px 0;
}

.sp__progressbar li .sp__container {
  width: calc(100% - 2px);
  left: 1px;
  height: 100%;
  position: relative;
  box-shadow: #00000050 0 0 1px;
  overflow-x: hidden;
}

.sp__progressbar li .sp__bg {
  background-color: rgba(255, 255, 255, 0.2);
  height: 100%;
  width: 100%;
  position: absolute;
  top: 0px;
  left: 0px;
  z-index: 0;
}

.sp__progressbar li .sp__section {
  height: 100%;
  position: absolute;
  top: 0px;
  left: 0px;
  z-index: 1;
}

.sp__progressbar:hover li {
  opacity: 0.75;
}
.sp__progressbar:hover li:hover {
  opacity: 1;
}

.sp__title {
  position: absolute;
  bottom: 18px;
  left: 0px;
  color: white;
  font-size: 14px !important;
  font-weight: 700;
  text-align: center;
  text-shadow: 0 0 4px black;
  opacity: 0;
  transition: opacity ease 0.12s;
  line-height: 17px;
}
.sp__title.animated {
  transition: left ease 0.08s;
}
.sp__title.active {
  opacity: 1;
}

.sp__moment {
  border: 2px solid #ffffff77;
  border-radius: 50%;
  width: 12px;
  height: 12px;
  z-index: 5;
  display: block;
  position: absolute;
  top: -1.5px;
  left: 0px;
  box-sizing: border-box;
  background-color: #ffffff77;
  box-shadow: 0 0 3px #00000055;
  pointer-events: all;
}
.sp__moment.hover {
  cursor: pointer;
  border: 2px solid #fff;
  background-color: #ffffff99;
}
</style><style><br>        .plyr__captions {<br>            font-size: 20px;<br>        }<br><br>        @media (min-width: 480px) {<br>            .plyr__captions {<br>                font-size: 20px;<br>            }<br>        }<br><br>        @media (max-width: 480px) {<br>            .plyr__captions {<br>                font-size: 20px;<br>            }<br>        }<br><br>        @media (max-width: 460px) {<br>            .plyr__captions {<br>                font-size: 14px;<br>            }<br>        }<br><br>        @media (min-width: 768px) {<br>            .plyr__captions {<br>                font-size: 23px;<br>            }<br>        }<br><br>        @media (min-width: 1024px) {<br>            .plyr:-webkit-full-screen .plyr__captions, .plyr:fullscreen .plyr__captions, .plyr__captions {<br>                font-size: 26px;<br>            }<br>        }<br>    </style></head><body id="body"><script>/*! For license information please see main.1260.bundle.js.LICENSE.txt */
(()=>{var e={176:(e,t,i)=>{"use strict";function n(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function r(e,t){return e.require(t)}i.d(t,{l$:()=>r,KV:()=>n}),e=i.hmd(e)},170:(e,t,i)=>{"use strict";i.d(t,{ph:()=>d,yW:()=>c});var n=i(176),r=i(235);e=i.hmd(e);const s=(0,r.Rf)(),a={nowSeconds:()=>Date.now()/1e3},o=(0,n.KV)()?function(){try{return(0,n.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=s;if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),l=void 0===o?a:{nowSeconds:()=>(o.timeOrigin+o.now())/1e3},c=a.nowSeconds.bind(a),d=l.nowSeconds.bind(l);let u;(()=>{const{performance:e}=s;if(!e||!e.now)return void(u="none");const t=36e5,i=e.now(),n=Date.now(),r=e.timeOrigin?Math.abs(e.timeOrigin+i-n):t,a=r<t,o=e.timing&&e.timing.navigationStart,l="number"==typeof o?Math.abs(o+i-n):t;a||l<t?r<=l?(u="timeOrigin",e.timeOrigin):u="navigationStart":u="dateNow"})()},235:(e,t,i)=>{"use strict";function n(e){return e&&e.Math==Math?e:void 0}i.d(t,{Rf:()=>s,YO:()=>a,n2:()=>r});const r="object"==typeof globalThis&&n(globalThis)||"object"==typeof window&&n(window)||"object"==typeof self&&n(self)||"object"==typeof i.g&&n(i.g)||function(){return this}()||{};function s(){return r}function a(e,t,i){const n=i||r,s=n.__SENTRY__=n.__SENTRY__||{};return s[e]||(s[e]=t())}},251:()=>{function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}!function(i){function n(){var e,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"!=(i=t(e=r))&&"string"!==i||isNaN(e-parseFloat(e)))return n(null,s,a);var o,l=function(e){return"0".concat(e).slice(-2)},c=(o=r,Math.trunc(o/60/60%60,10)),d=function(e){return Math.trunc(e/60%60,10)}(r),u=function(e){return Math.trunc(e%60,10)}(r);return c=s||c>0?"".concat(c,":"):"","".concat(a&&r>0?"-":"").concat(c).concat(l(d),":").concat(l(u))}var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}var r,s;return r=t,s=[{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.thumbnail.enabled}},{key:"config",get:function(){return this.player.config.thumbnail}},{key:"load",value:function(){this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0,this.listeners())}},{key:"startMove",value:function(e){if(this.loaded&&!(!e instanceof Event)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t=this.player.elements.progress.getBoundingClientRect(),i=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(i/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=n(this.seekTime)}this.showImageAtCurrentTime()}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(e){!1!==e.button&&0!==e.button||(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var e=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):this.player.media.addEventListener("timeupdate",(function(){e.mouseDown||e.toggleScrubbingContainer(!1)}),{once:!0})}},{key:"listeners",value:function(){var e=this,t=this.player;t.on("play",(function(){e.toggleThumbContainer(!1,!0)})),t.on("seeked",(function(){e.toggleThumbContainer(!1)})),t.on("timeupdate",(function(){e.lastTime=e.player.media.currentTime}));var i=this.player.elements;["mousemove","touchmove","mouseleave","click","mousedown","touchstart","mouseup","touchend"].forEach((function(e){null!=i.progress.addEventListener&&i.progress.addEventListener(e,(function(i){var n=t.thumbnails;if(n&&n.loaded)switch(e){case"mousemove":case"touchmove":case"mousedown":case"touchstart":n.startMove(i);break;case"mouseleave":case"click":n.endMove(!1,!0);break;case"mouseup":case"touchend":n.endScrubbing(i)}}))}))}},{key:"render",value:function(){this.elements.thumb.container=i.createElement("div"),this.elements.thumb.container.classList.add(this.player.config.classNames.previewThumbnails.thumbContainer),this.elements.thumb.imageContainer=i.createElement("div"),this.elements.thumb.imageContainer.className=this.player.config.classNames.previewThumbnails.imageContainer,this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var e=i.createElement("div");e.className=this.player.config.classNames.previewThumbnails.timeContainer,this.elements.thumb.time=i.createElement("span"),this.elements.thumb.time.textContent="00:00",e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),this.player.elements.progress instanceof Element&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=i.createElement("div"),this.elements.scrubbing.container.className=this.player.config.classNames.previewThumbnails.scrubbingContainer,this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"showImageAtCurrentTime",value:function(){this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var e=this.config,t=this.player.duration/e.pic_num,i=Math.floor(this.seekTime/t),n=Math.ceil((i+1)/(e.col*e.row))-1,r=i>=0;this.mouseDown||this.toggleThumbContainer(r),r&&i!==this.showingThumb&&(this.showingThumb=i,this.loadImage(n))}},{key:"loadImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this.showingThumb,n=this.config.urls[t];if(this.currentImageElement&&this.currentImageElement.src===n)this.showImage(this.currentImageElement,t,i,n,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&(this.loadingImage.onload=null);var r=new Image;r.src=n,r.dataset.index=i,this.player.debug.log("Loading image: ".concat(n)),r.onload=function(){return e.showImage(r,t,i,n,!0)},this.loadingImage=r,this.removeOldImages(r)}}},{key:"showImage",value:function(e,t,i,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.player.debug.log("Showing thumb: ".concat(n,". num: ").concat(i,". qual: ").concat(t,". newimg: ").concat(r)),this.setImageSizeAndOffset(e,i),r&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(n)||this.loadedImages.push(n))}},{key:"removeOldImages",value:function(e){var t=this;Array.from(this.currentImageContainer.children).forEach((function(i){if("img"===i.tagName.toLowerCase()&&i.dataset.index!==e.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;var n=t.currentImageContainer;setTimeout((function(){n.removeChild(i),t.player.debug.log("Removing thumb: ".concat(i.dataset.filename))}),500)}}))}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"thumbAspectRatio",get:function(){return this.config.width/this.config.height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?Math.floor(this.player.media.clientWidth/this.thumbAspectRatio):Math.min(135,Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4))}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}},{key:"toggleThumbContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){this.elements.thumb.imageContainer.clientHeight>20&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){if(!this.sizeSpecifiedInCSS){var e=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(e,"px")}this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),i=this.elements.thumb.container,n=t.left-e.left+10,r=t.right-e.left-i.clientWidth-10,s=this.mousePosX-e.left-i.clientWidth/2;s<n&&(s=n),s>r&&(s=r),i.style.left="".concat(s,"px")}},{key:"setScrubbingContainerSize",value:function(){this.elements.scrubbing.container.style.width="".concat(this.player.media.clientWidth,"px"),this.elements.scrubbing.container.style.height=this.player.media.clientWidth/this.thumbAspectRatio+"px"}},{key:"setImageSizeAndOffset",value:function(e,t){var i=this.config,n=t+1-i.col*i.row*(Math.ceil((t+1)/(i.col*i.row))-1),r=Math.ceil(n/i.row)-1,s=n-r*i.row-1,a=this.thumbContainerHeight/i.height;e.style.height="".concat(Math.floor(e.naturalHeight*a),"px"),e.style.width="".concat(Math.floor(e.naturalWidth*a),"px"),e.style.left="-".concat(s*i.width*a,"px"),e.style.top="-".concat(r*i.height*a,"px")}}],s&&e(r.prototype,s),Object.defineProperty(r,"prototype",{writable:!1}),t}();i.addEventListener("ready",(function(e){var t=e.detail.plyr;t.thumbnails=new r(t)}))}(document)},615:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(81),r=i.n(n),s=i(645),a=i.n(s)()(r());a.push([e.id,'.plyr__progress input {\n  border-radius: 0px !important;\n  -webkit-appearance: none;\n  background: transparent;\n}\n.plyr__progress input[value]::-webkit-progress-bar {\n  border-radius: 0px !important;\n}\n.plyr__progress input[value]::-webkit-progress-value {\n  border-radius: 0px !important;\n}\n.plyr__progress__container {\n  position: absolute;\n  top: 14px;\n  left: 10px;\n  width: calc(100% - 24px);\n}\n@media (max-width: 480px) {\n  .plyr__progress__container {\n    top: -5px;\n  }\n}\n.plyr__pb {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  z-index: 3;\n  margin-left: calc(var(--plyr-range-thumb-height, 13px) * -0.5);\n  margin-right: -6.5px;\n  margin-right: calc(var(--plyr-range-thumb-height, 13px) * -0.5);\n  width: calc(100% + 13px);\n  width: calc(100% + var(--plyr-range-thumb-height, 13px));\n}\n.plyr__preview-thumb {\n  bottom: 22px;\n  transition: bottom ease 0.1s;\n}\n.plyr__controls {\n  padding-top: 70px;\n}\n\n.plyr--full-ui.plyr--video\n  .plyr__progress\n  input[type="range"]::-webkit-slider-runnable-track {\n  background-color: transparent !important;\n}\n.plyr--full-ui.plyr--video\n  .plyr__progress\n  input[type="range"]::-moz-range-track {\n  background-color: transparent !important;\n}\n.plyr--full-ui.plyr--video .plyr__progress input[type="range"]::-ms-track {\n  background-color: transparent !important;\n}\n\n.plyr__progress input {\n  background-color: transparent !important;\n  color: transparent !important;\n  top: -6px !important;\n  z-index: 7 !important;\n  cursor: pointer;\n}\n.plyr--full-ui.plyr--video\n  .plyr__progress\n  input[type="range"]::-webkit-slider-thumb {\n  opacity: 0;\n  transition: opacity ease 0.1s;\n}\n.plyr--full-ui.plyr--video\n  .plyr__progress\n  input[type="range"]::-moz-range-thumb {\n  opacity: 0;\n  transition: opacity ease 0.1s;\n}\n.plyr--full-ui.plyr--video .plyr__progress input[type="range"]::-ms-thumb {\n  opacity: 0;\n  transition: opacity ease 0.1s;\n}\n.plyr--full-ui.plyr--video\n  .plyr__progress\n  input[type="range"]:active::-webkit-slider-thumb {\n  opacity: 1;\n}\n.plyr--full-ui.plyr--video\n  .plyr__progress\n  input[type="range"]:active::-moz-range-thumb {\n  opacity: 1;\n}\n.plyr--full-ui.plyr--video\n  .plyr__progress\n  input[type="range"]:active::-ms-thumb {\n  opacity: 1;\n}\n\n.sp__base {\n  width: 100%;\n  padding: 0;\n  margin: 0;\n  font-size: 0;\n  text-align: left;\n  box-sizing: border-box;\n  position: relative;\n  user-select: none; /* supported by Chrome and Opera */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n}\n\n.pb__shadow {\n  width: 100%;\n  height: 50px;\n  position: absolute;\n  top: -44px;\n  left: 0px;\n  background: linear-gradient(transparent, rgba(0, 0, 0, 0.4));\n  background: var(\n    --plyr-video-controls-background,\n    linear-gradient(transparent, rgba(0, 0, 0, 0.4))\n  );\n}\n\n.sp__progressbar {\n  width: 100%;\n  height: 9px;\n  box-sizing: border-box;\n  font-size: 0;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  transition: all ease 0.12s;\n  text-align: left;\n  overflow-x: hidden;\n  white-space: nowrap;\n}\n.sp__progressbar li {\n  display: inline-block;\n  list-style: none;\n  height: 9px;\n  margin: 0;\n  padding: 3px 0;\n  position: relative;\n  top: 0;\n  transition: all ease 0.12s;\n  box-sizing: border-box;\n  position: relative;\n  background-color: transparent;\n  cursor: pointer;\n  overflow-x: hidden;\n}\n\n.sp__progressbar.hover {\n  transform: scaleY(1.8);\n  margin-top: 0px;\n}\n.sp__progressbar li.active {\n  padding: 2px 0;\n}\n\n.sp__progressbar li .sp__container {\n  width: calc(100% - 2px);\n  left: 1px;\n  height: 100%;\n  position: relative;\n  box-shadow: #00000050 0 0 1px;\n  overflow-x: hidden;\n}\n\n.sp__progressbar li .sp__bg {\n  background-color: rgba(255, 255, 255, 0.2);\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  z-index: 0;\n}\n\n.sp__progressbar li .sp__section {\n  height: 100%;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  z-index: 1;\n}\n\n.sp__progressbar:hover li {\n  opacity: 0.75;\n}\n.sp__progressbar:hover li:hover {\n  opacity: 1;\n}\n\n.sp__title {\n  position: absolute;\n  bottom: 18px;\n  left: 0px;\n  color: white;\n  font-size: 14px !important;\n  font-weight: 700;\n  text-align: center;\n  text-shadow: 0 0 4px black;\n  opacity: 0;\n  transition: opacity ease 0.12s;\n  line-height: 17px;\n}\n.sp__title.animated {\n  transition: left ease 0.08s;\n}\n.sp__title.active {\n  opacity: 1;\n}\n\n.sp__moment {\n  border: 2px solid #ffffff77;\n  border-radius: 50%;\n  width: 12px;\n  height: 12px;\n  z-index: 5;\n  display: block;\n  position: absolute;\n  top: -1.5px;\n  left: 0px;\n  box-sizing: border-box;\n  background-color: #ffffff77;\n  box-shadow: 0 0 3px #00000055;\n  pointer-events: all;\n}\n.sp__moment.hover {\n  cursor: pointer;\n  border: 2px solid #fff;\n  background-color: #ffffff99;\n}\n',""]);const o=a},376:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(81),r=i.n(n),s=i(645),a=i.n(s)()(r());a.push([e.id,"@keyframes plyr-progress{to{background-position:25px 0;background-position:var(--plyr-progress-loading-size,25px) 0}}@keyframes plyr-popup{0%{opacity:.5;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes plyr-fade-in{from{opacity:0}to{opacity:1}}.plyr{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;align-items:center;direction:ltr;display:flex;flex-direction:column;font-family:inherit;font-family:var(--plyr-font-family,inherit);font-variant-numeric:tabular-nums;font-weight:400;font-weight:var(--plyr-font-weight-regular,400);line-height:1.7;line-height:var(--plyr-line-height,1.7);max-width:100%;min-width:200px;position:relative;text-shadow:none;transition:box-shadow .3s ease;z-index:0}.plyr audio,.plyr iframe,.plyr video{display:block;height:100%;width:100%}.plyr button{font:inherit;line-height:inherit;width:auto}.plyr:focus{outline:0}.plyr--full-ui{box-sizing:border-box}.plyr--full-ui *,.plyr--full-ui ::after,.plyr--full-ui ::before{box-sizing:inherit}.plyr--full-ui a,.plyr--full-ui button,.plyr--full-ui input,.plyr--full-ui label{touch-action:manipulation}.plyr__badge{background:#4a5464;background:var(--plyr-badge-background,#4a5464);border-radius:2px;border-radius:var(--plyr-badge-border-radius,2px);color:#fff;color:var(--plyr-badge-text-color,#fff);font-size:9px;font-size:var(--plyr-font-size-badge,9px);line-height:1;padding:3px 4px}.plyr--full-ui ::-webkit-media-text-track-container{display:none}.plyr__captions{animation:plyr-fade-in .3s ease;bottom:0;display:none;font-size:13px;font-size:var(--plyr-font-size-small,13px);left:0;padding:10px;padding:var(--plyr-control-spacing,10px);position:absolute;text-align:center;transition:transform .4s ease-in-out;width:100%}.plyr__captions span:empty{display:none}@media (min-width:480px){.plyr__captions{font-size:15px;font-size:var(--plyr-font-size-base,15px);padding:calc(10px * 2);padding:calc(var(--plyr-control-spacing,10px) * 2)}}@media (min-width:768px){.plyr__captions{font-size:18px;font-size:var(--plyr-font-size-large,18px)}}.plyr--captions-active .plyr__captions{display:block}.plyr:not(.plyr--hide-controls) .plyr__controls:not(:empty)~.plyr__captions{transform:translateY(calc(10px * -4));transform:translateY(calc(var(--plyr-control-spacing,10px) * -4))}.plyr__caption{background:rgba(0,0,0,.8);background:var(--plyr-captions-background,rgba(0,0,0,.8));border-radius:2px;-webkit-box-decoration-break:clone;box-decoration-break:clone;color:#fff;color:var(--plyr-captions-text-color,#fff);line-height:185%;padding:.2em .5em;white-space:pre-wrap}.plyr__caption div{display:inline}.plyr__control{background:0 0;border:0;border-radius:3px;border-radius:var(--plyr-control-radius,3px);color:inherit;cursor:pointer;flex-shrink:0;overflow:visible;padding:calc(10px * .7);padding:calc(var(--plyr-control-spacing,10px) * .7);position:relative;transition:all .3s ease}.plyr__control svg{display:block;fill:currentColor;height:18px;height:var(--plyr-control-icon-size,18px);pointer-events:none;width:18px;width:var(--plyr-control-icon-size,18px)}.plyr__control:focus{outline:0}.plyr__control.plyr__tab-focus{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}a.plyr__control{text-decoration:none}a.plyr__control::after,a.plyr__control::before{display:none}.plyr__control.plyr__control--pressed .icon--not-pressed,.plyr__control.plyr__control--pressed .label--not-pressed,.plyr__control:not(.plyr__control--pressed) .icon--pressed,.plyr__control:not(.plyr__control--pressed) .label--pressed{display:none}.plyr--full-ui ::-webkit-media-controls{display:none}.plyr__controls{align-items:center;display:flex;justify-content:flex-end;text-align:center}.plyr__controls .plyr__progress__container{flex:1;min-width:0}.plyr__controls .plyr__controls__item{margin-left:calc(10px / 4);margin-left:calc(var(--plyr-control-spacing,10px)/ 4)}.plyr__controls .plyr__controls__item:first-child{margin-left:0;margin-right:auto}.plyr__controls .plyr__controls__item.plyr__progress__container{padding-left:calc(10px / 4);padding-left:calc(var(--plyr-control-spacing,10px)/ 4)}.plyr__controls .plyr__controls__item.plyr__time{padding:0 calc(10px / 2);padding:0 calc(var(--plyr-control-spacing,10px)/ 2)}.plyr__controls .plyr__controls__item.plyr__progress__container:first-child,.plyr__controls .plyr__controls__item.plyr__time+.plyr__time,.plyr__controls .plyr__controls__item.plyr__time:first-child{padding-left:0}.plyr__controls:empty{display:none}.plyr [data-plyr=airplay],.plyr [data-plyr=captions],.plyr [data-plyr=fullscreen],.plyr [data-plyr=pip]{display:none}.plyr--airplay-supported [data-plyr=airplay],.plyr--captions-enabled [data-plyr=captions],.plyr--fullscreen-enabled [data-plyr=fullscreen],.plyr--pip-supported [data-plyr=pip]{display:inline-block}.plyr__menu{display:flex;position:relative}.plyr__menu .plyr__control svg{transition:transform .3s ease}.plyr__menu .plyr__control[aria-expanded=true] svg{transform:rotate(90deg)}.plyr__menu .plyr__control[aria-expanded=true] .plyr__tooltip{display:none}.plyr__menu__container{animation:plyr-popup .2s ease;background:rgba(255,255,255,.9);background:var(--plyr-menu-background,rgba(255,255,255,.9));border-radius:4px;bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);box-shadow:var(--plyr-menu-shadow,0 1px 2px rgba(0,0,0,.15));color:#4a5464;color:var(--plyr-menu-color,#4a5464);font-size:15px;font-size:var(--plyr-font-size-base,15px);margin-bottom:10px;position:absolute;right:-3px;text-align:left;white-space:nowrap;z-index:3}.plyr__menu__container>div{overflow:hidden;transition:height .35s cubic-bezier(.4,0,.2,1),width .35s cubic-bezier(.4,0,.2,1)}.plyr__menu__container::after{border:4px solid transparent;border:var(--plyr-menu-arrow-size,4px) solid transparent;border-top-color:rgba(255,255,255,.9);border-top-color:var(--plyr-menu-background,rgba(255,255,255,.9));content:'';height:0;position:absolute;right:calc(((18px / 2) + calc(10px * .7)) - (4px / 2));right:calc(((var(--plyr-control-icon-size,18px)/ 2) + calc(var(--plyr-control-spacing,10px) * .7)) - (var(--plyr-menu-arrow-size,4px)/ 2));top:100%;width:0}.plyr__menu__container [role=menu]{padding:calc(10px * .7);padding:calc(var(--plyr-control-spacing,10px) * .7)}.plyr__menu__container [role=menuitem],.plyr__menu__container [role=menuitemradio]{margin-top:2px}.plyr__menu__container [role=menuitem]:first-child,.plyr__menu__container [role=menuitemradio]:first-child{margin-top:0}.plyr__menu__container .plyr__control{align-items:center;color:#4a5464;color:var(--plyr-menu-color,#4a5464);display:flex;font-size:13px;font-size:var(--plyr-font-size-menu,var(--plyr-font-size-small,13px));padding-bottom:calc(calc(10px * .7)/ 1.5);padding-bottom:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 1.5);padding-left:calc(calc(10px * .7) * 1.5);padding-left:calc(calc(var(--plyr-control-spacing,10px) * .7) * 1.5);padding-right:calc(calc(10px * .7) * 1.5);padding-right:calc(calc(var(--plyr-control-spacing,10px) * .7) * 1.5);padding-top:calc(calc(10px * .7)/ 1.5);padding-top:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 1.5);-webkit-user-select:none;-ms-user-select:none;user-select:none;width:100%}.plyr__menu__container .plyr__control>span{align-items:inherit;display:flex;width:100%}.plyr__menu__container .plyr__control::after{border:4px solid transparent;border:var(--plyr-menu-item-arrow-size,4px) solid transparent;content:'';position:absolute;top:50%;transform:translateY(-50%)}.plyr__menu__container .plyr__control--forward{padding-right:calc(calc(10px * .7) * 4);padding-right:calc(calc(var(--plyr-control-spacing,10px) * .7) * 4)}.plyr__menu__container .plyr__control--forward::after{border-left-color:#728197;border-left-color:var(--plyr-menu-arrow-color,#728197);right:calc((calc(10px * .7) * 1.5) - 4px);right:calc((calc(var(--plyr-control-spacing,10px) * .7) * 1.5) - var(--plyr-menu-item-arrow-size,4px))}.plyr__menu__container .plyr__control--forward.plyr__tab-focus::after,.plyr__menu__container .plyr__control--forward:hover::after{border-left-color:currentColor}.plyr__menu__container .plyr__control--back{font-weight:400;font-weight:var(--plyr-font-weight-regular,400);margin:calc(10px * .7);margin:calc(var(--plyr-control-spacing,10px) * .7);margin-bottom:calc(calc(10px * .7)/ 2);margin-bottom:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 2);padding-left:calc(calc(10px * .7) * 4);padding-left:calc(calc(var(--plyr-control-spacing,10px) * .7) * 4);position:relative;width:calc(100% - (calc(10px * .7) * 2));width:calc(100% - (calc(var(--plyr-control-spacing,10px) * .7) * 2))}.plyr__menu__container .plyr__control--back::after{border-right-color:#728197;border-right-color:var(--plyr-menu-arrow-color,#728197);left:calc((calc(10px * .7) * 1.5) - 4px);left:calc((calc(var(--plyr-control-spacing,10px) * .7) * 1.5) - var(--plyr-menu-item-arrow-size,4px))}.plyr__menu__container .plyr__control--back::before{background:#dcdfe5;background:var(--plyr-menu-back-border-color,#dcdfe5);box-shadow:0 1px 0 #fff;box-shadow:0 1px 0 var(--plyr-menu-back-border-shadow-color,#fff);content:'';height:1px;left:0;margin-top:calc(calc(10px * .7)/ 2);margin-top:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 2);overflow:hidden;position:absolute;right:0;top:100%}.plyr__menu__container .plyr__control--back.plyr__tab-focus::after,.plyr__menu__container .plyr__control--back:hover::after{border-right-color:currentColor}.plyr__menu__container .plyr__control[role=menuitemradio]{padding-left:calc(10px * .7);padding-left:calc(var(--plyr-control-spacing,10px) * .7)}.plyr__menu__container .plyr__control[role=menuitemradio]::after,.plyr__menu__container .plyr__control[role=menuitemradio]::before{border-radius:100%}.plyr__menu__container .plyr__control[role=menuitemradio]::before{background:rgba(0,0,0,.1);content:'';display:block;flex-shrink:0;height:16px;margin-right:10px;margin-right:var(--plyr-control-spacing,10px);transition:all .3s ease;width:16px}.plyr__menu__container .plyr__control[role=menuitemradio]::after{background:#fff;border:0;height:6px;left:12px;opacity:0;top:50%;transform:translateY(-50%) scale(0);transition:transform .3s ease,opacity .3s ease;width:6px}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]::before{background:#00b3ff;background:var(--plyr-control-toggle-checked-background,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)))}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]::after{opacity:1;transform:translateY(-50%) scale(1)}.plyr__menu__container .plyr__control[role=menuitemradio].plyr__tab-focus::before,.plyr__menu__container .plyr__control[role=menuitemradio]:hover::before{background:rgba(35,40,47,.1)}.plyr__menu__container .plyr__menu__value{align-items:center;display:flex;margin-left:auto;margin-right:calc((calc(10px * .7) - 2) * -1);margin-right:calc((calc(var(--plyr-control-spacing,10px) * .7) - 2) * -1);overflow:hidden;padding-left:calc(calc(10px * .7) * 3.5);padding-left:calc(calc(var(--plyr-control-spacing,10px) * .7) * 3.5);pointer-events:none}.plyr--full-ui input[type=range]{-webkit-appearance:none;background:0 0;border:0;border-radius:calc(13px * 2);border-radius:calc(var(--plyr-range-thumb-height,13px) * 2);color:#00b3ff;color:var(--plyr-range-fill-background,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));display:block;height:calc((3px * 2) + 13px);height:calc((var(--plyr-range-thumb-active-shadow-width,3px) * 2) + var(--plyr-range-thumb-height,13px));margin:0;min-width:0;padding:0;transition:box-shadow .3s ease;width:100%}.plyr--full-ui input[type=range]::-webkit-slider-runnable-track{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-webkit-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-webkit-user-select:none;user-select:none;background-image:linear-gradient(to right,currentColor 0,transparent 0);background-image:linear-gradient(to right,currentColor var(--value,0),transparent var(--value,0))}.plyr--full-ui input[type=range]::-webkit-slider-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-webkit-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px);-webkit-appearance:none;margin-top:calc(((13px - 5px)/ 2) * -1);margin-top:calc(((var(--plyr-range-thumb-height,13px) - var(--plyr-range-track-height,5px))/ 2) * -1)}.plyr--full-ui input[type=range]::-moz-range-track{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-moz-transition:box-shadow .3s ease;transition:box-shadow .3s ease;user-select:none}.plyr--full-ui input[type=range]::-moz-range-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-moz-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px)}.plyr--full-ui input[type=range]::-moz-range-progress{background:currentColor;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px)}.plyr--full-ui input[type=range]::-ms-track{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none;color:transparent}.plyr--full-ui input[type=range]::-ms-fill-upper{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none}.plyr--full-ui input[type=range]::-ms-fill-lower{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none;background:currentColor}.plyr--full-ui input[type=range]::-ms-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-ms-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px);margin-top:0}.plyr--full-ui input[type=range]::-ms-tooltip{display:none}.plyr--full-ui input[type=range]:focus{outline:0}.plyr--full-ui input[type=range]::-moz-focus-outer{border:0}.plyr--full-ui input[type=range].plyr__tab-focus::-webkit-slider-runnable-track{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}.plyr--full-ui input[type=range].plyr__tab-focus::-moz-range-track{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}.plyr--full-ui input[type=range].plyr__tab-focus::-ms-track{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}.plyr__poster{background-color:#000;background-position:50% 50%;background-repeat:no-repeat;background-size:contain;height:100%;left:0;opacity:0;position:absolute;top:0;transition:opacity .2s ease;width:100%;z-index:1}.plyr--stopped.plyr__poster-enabled .plyr__poster{opacity:1}.plyr__time{font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px))}.plyr__time+.plyr__time::before{content:'\\2044';margin-right:10px;margin-right:var(--plyr-control-spacing,10px)}@media (max-width:calc(768px - 1px)){.plyr__time+.plyr__time{display:none}}.plyr__tooltip{background:rgba(255,255,255,.9);background:var(--plyr-tooltip-background,rgba(255,255,255,.9));border-radius:3px;border-radius:var(--plyr-tooltip-radius,3px);bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);box-shadow:var(--plyr-tooltip-shadow,0 1px 2px rgba(0,0,0,.15));color:#4a5464;color:var(--plyr-tooltip-color,#4a5464);font-size:13px;font-size:var(--plyr-font-size-small,13px);font-weight:400;font-weight:var(--plyr-font-weight-regular,400);left:50%;line-height:1.3;margin-bottom:calc(calc(10px / 2) * 2);margin-bottom:calc(calc(var(--plyr-control-spacing,10px)/ 2) * 2);opacity:0;padding:calc(10px / 2) calc(calc(10px / 2) * 1.5);padding:calc(var(--plyr-control-spacing,10px)/ 2) calc(calc(var(--plyr-control-spacing,10px)/ 2) * 1.5);pointer-events:none;position:absolute;transform:translate(-50%,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s .1s ease,opacity .2s .1s ease;white-space:nowrap;z-index:2}.plyr__tooltip::before{border-left:4px solid transparent;border-left:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-right:4px solid transparent;border-right:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-top:4px solid rgba(255,255,255,.9);border-top:var(--plyr-tooltip-arrow-size,4px) solid var(--plyr-tooltip-background,rgba(255,255,255,.9));bottom:calc(4px * -1);bottom:calc(var(--plyr-tooltip-arrow-size,4px) * -1);content:'';height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;z-index:2}.plyr .plyr__control.plyr__tab-focus .plyr__tooltip,.plyr .plyr__control:hover .plyr__tooltip,.plyr__tooltip--visible{opacity:1;transform:translate(-50%,0) scale(1)}.plyr .plyr__control:hover .plyr__tooltip{z-index:3}.plyr__controls>.plyr__control:first-child .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip{left:0;transform:translate(0,10px) scale(.8);transform-origin:0 100%}.plyr__controls>.plyr__control:first-child .plyr__tooltip::before,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip::before{left:calc((18px / 2) + calc(10px * .7));left:calc((var(--plyr-control-icon-size,18px)/ 2) + calc(var(--plyr-control-spacing,10px) * .7))}.plyr__controls>.plyr__control:last-child .plyr__tooltip{left:auto;right:0;transform:translate(0,10px) scale(.8);transform-origin:100% 100%}.plyr__controls>.plyr__control:last-child .plyr__tooltip::before{left:auto;right:calc((18px / 2) + calc(10px * .7));right:calc((var(--plyr-control-icon-size,18px)/ 2) + calc(var(--plyr-control-spacing,10px) * .7));transform:translateX(50%)}.plyr__controls>.plyr__control:first-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control:hover .plyr__tooltip,.plyr__controls>.plyr__control:first-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child:hover .plyr__tooltip,.plyr__controls>.plyr__control:last-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:last-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:last-child:hover .plyr__tooltip{transform:translate(0,0) scale(1)}.plyr__progress{left:calc(13px * .5);left:calc(var(--plyr-range-thumb-height,13px) * .5);margin-right:13px;margin-right:var(--plyr-range-thumb-height,13px);position:relative}.plyr__progress input[type=range],.plyr__progress__buffer{margin-left:calc(13px * -.5);margin-left:calc(var(--plyr-range-thumb-height,13px) * -.5);margin-right:calc(13px * -.5);margin-right:calc(var(--plyr-range-thumb-height,13px) * -.5);width:calc(100% + 13px);width:calc(100% + var(--plyr-range-thumb-height,13px))}.plyr__progress input[type=range]{position:relative;z-index:2}.plyr__progress .plyr__tooltip{font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px));left:0}.plyr__progress__buffer{-webkit-appearance:none;background:0 0;border:0;border-radius:100px;height:5px;height:var(--plyr-range-track-height,5px);left:0;margin-top:calc((5px / 2) * -1);margin-top:calc((var(--plyr-range-track-height,5px)/ 2) * -1);padding:0;position:absolute;top:50%}.plyr__progress__buffer::-webkit-progress-bar{background:0 0}.plyr__progress__buffer::-webkit-progress-value{background:currentColor;border-radius:100px;min-width:5px;min-width:var(--plyr-range-track-height,5px);-webkit-transition:width .2s ease;transition:width .2s ease}.plyr__progress__buffer::-moz-progress-bar{background:currentColor;border-radius:100px;min-width:5px;min-width:var(--plyr-range-track-height,5px);-moz-transition:width .2s ease;transition:width .2s ease}.plyr__progress__buffer::-ms-fill{border-radius:100px;-ms-transition:width .2s ease;transition:width .2s ease}.plyr--loading .plyr__progress__buffer{animation:plyr-progress 1s linear infinite;background-image:linear-gradient(-45deg,rgba(35,40,47,.6) 25%,transparent 25%,transparent 50%,rgba(35,40,47,.6) 50%,rgba(35,40,47,.6) 75%,transparent 75%,transparent);background-image:linear-gradient(-45deg,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 25%,transparent 25%,transparent 50%,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 50%,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 75%,transparent 75%,transparent);background-repeat:repeat-x;background-size:25px 25px;background-size:var(--plyr-progress-loading-size,25px) var(--plyr-progress-loading-size,25px);color:transparent}.plyr--video.plyr--loading .plyr__progress__buffer{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25))}.plyr--audio.plyr--loading .plyr__progress__buffer{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6))}.plyr__volume{align-items:center;display:flex;max-width:110px;min-width:80px;position:relative;width:20%}.plyr__volume input[type=range]{margin-left:calc(10px / 2);margin-left:calc(var(--plyr-control-spacing,10px)/ 2);margin-right:calc(10px / 2);margin-right:calc(var(--plyr-control-spacing,10px)/ 2);position:relative;z-index:2}.plyr--is-ios .plyr__volume{min-width:0;width:auto}.plyr--audio{display:block}.plyr--audio .plyr__controls{background:#fff;background:var(--plyr-audio-controls-background,#fff);border-radius:inherit;color:#4a5464;color:var(--plyr-audio-control-color,#4a5464);padding:10px;padding:var(--plyr-control-spacing,10px)}.plyr--audio .plyr__control.plyr__tab-focus,.plyr--audio .plyr__control:hover,.plyr--audio .plyr__control[aria-expanded=true]{background:#00b3ff;background:var(--plyr-audio-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));color:#fff;color:var(--plyr-audio-control-color-hover,#fff)}.plyr--full-ui.plyr--audio input[type=range]::-webkit-slider-runnable-track{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]::-moz-range-track{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]::-ms-track{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(35,40,47,.1);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--full-ui.plyr--audio input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(35,40,47,.1);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--full-ui.plyr--audio input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(35,40,47,.1);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--audio .plyr__progress__buffer{color:rgba(193,200,209,.6);color:var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6))}.plyr--video{background:#000;overflow:hidden}.plyr--video.plyr--menu-open{overflow:visible}.plyr__video-wrapper{background:#000;height:100%;margin:auto;overflow:hidden;position:relative;width:100%}.plyr__video-embed,.plyr__video-wrapper--fixed-ratio{height:0;padding-bottom:56.25%}.plyr__video-embed iframe,.plyr__video-wrapper--fixed-ratio video{border:0;left:0;position:absolute;top:0}.plyr--full-ui .plyr__video-embed>.plyr__video-embed__container{padding-bottom:240%;position:relative;transform:translateY(-38.28125%)}.plyr--video .plyr__controls{background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.75));background:var(--plyr-video-controls-background,linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.75)));border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;bottom:0;color:#fff;color:var(--plyr-video-control-color,#fff);left:0;padding:calc(10px / 2);padding:calc(var(--plyr-control-spacing,10px)/ 2);padding-top:calc(10px * 2);padding-top:calc(var(--plyr-control-spacing,10px) * 2);position:absolute;right:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out;z-index:3}@media (min-width:480px){.plyr--video .plyr__controls{padding:10px;padding:var(--plyr-control-spacing,10px);padding-top:calc(10px * 3.5);padding-top:calc(var(--plyr-control-spacing,10px) * 3.5)}}.plyr--video.plyr--hide-controls .plyr__controls{opacity:0;pointer-events:none;transform:translateY(100%)}.plyr--video .plyr__control.plyr__tab-focus,.plyr--video .plyr__control:hover,.plyr--video .plyr__control[aria-expanded=true]{background:#00b3ff;background:var(--plyr-video-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));color:#fff;color:var(--plyr-video-control-color-hover,#fff)}.plyr__control--overlaid{background:#00b3ff;background:var(--plyr-video-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));border:0;border-radius:100%;color:#fff;color:var(--plyr-video-control-color,#fff);display:none;left:50%;opacity:.9;padding:calc(10px * 1.5);padding:calc(var(--plyr-control-spacing,10px) * 1.5);position:absolute;top:50%;transform:translate(-50%,-50%);transition:.3s;z-index:2}.plyr__control--overlaid svg{left:2px;position:relative}.plyr__control--overlaid:focus,.plyr__control--overlaid:hover{opacity:1}.plyr--playing .plyr__control--overlaid{opacity:0;visibility:hidden}.plyr--full-ui.plyr--video .plyr__control--overlaid{display:block}.plyr--full-ui.plyr--video input[type=range]::-webkit-slider-runnable-track{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25)))}.plyr--full-ui.plyr--video input[type=range]::-moz-range-track{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25)))}.plyr--full-ui.plyr--video input[type=range]::-ms-track{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25)))}.plyr--full-ui.plyr--video input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(255,255,255,.5);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(255,255,255,.5))}.plyr--full-ui.plyr--video input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(255,255,255,.5);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(255,255,255,.5))}.plyr--full-ui.plyr--video input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(255,255,255,.5);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(255,255,255,.5))}.plyr--video .plyr__progress__buffer{color:rgba(255,255,255,.25);color:var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25))}.plyr:-webkit-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-ms-fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-webkit-full-screen video{height:100%}.plyr:-ms-fullscreen video{height:100%}.plyr:fullscreen video{height:100%}.plyr:-webkit-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-ms-fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:-webkit-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-ms-fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-webkit-full-screen.plyr--hide-controls{cursor:none}.plyr:-ms-fullscreen.plyr--hide-controls{cursor:none}.plyr:fullscreen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-webkit-full-screen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}.plyr:-ms-fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}.plyr:fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr:-webkit-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-webkit-full-screen video{height:100%}.plyr:-webkit-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-webkit-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-webkit-full-screen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-webkit-full-screen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr:-moz-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-moz-full-screen video{height:100%}.plyr:-moz-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-moz-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-moz-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-moz-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-moz-full-screen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-moz-full-screen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr:-ms-fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-ms-fullscreen video{height:100%}.plyr:-ms-fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:-ms-fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-ms-fullscreen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-ms-fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr--fullscreen-fallback{background:#000;border-radius:0!important;height:100%;margin:0;width:100%;bottom:0;display:block;left:0;position:fixed;right:0;top:0;z-index:10000000}.plyr--fullscreen-fallback video{height:100%}.plyr--fullscreen-fallback .plyr__video-wrapper{height:100%;position:static}.plyr--fullscreen-fallback.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen{display:block}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr--fullscreen-fallback.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr--fullscreen-fallback .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr__ads{border-radius:inherit;bottom:0;cursor:pointer;left:0;overflow:hidden;position:absolute;right:0;top:0;z-index:-1}.plyr__ads>div,.plyr__ads>div iframe{height:100%;position:absolute;width:100%}.plyr__ads::after{background:#23282f;border-radius:2px;bottom:10px;bottom:var(--plyr-control-spacing,10px);color:#fff;content:attr(data-badge-text);font-size:11px;padding:2px 6px;pointer-events:none;position:absolute;right:10px;right:var(--plyr-control-spacing,10px);z-index:3}.plyr__ads::after:empty{display:none}.plyr__cues{background:currentColor;display:block;height:5px;height:var(--plyr-range-track-height,5px);left:0;margin:-var(--plyr-range-track-height,5px)/2 0 0;opacity:.8;position:absolute;top:50%;width:3px;z-index:3}.plyr__preview-thumb{background-color:rgba(255,255,255,.9);background-color:var(--plyr-tooltip-background,rgba(255,255,255,.9));border-radius:3px;bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);box-shadow:var(--plyr-tooltip-shadow,0 1px 2px rgba(0,0,0,.15));margin-bottom:calc(calc(10px / 2) * 2);margin-bottom:calc(calc(var(--plyr-control-spacing,10px)/ 2) * 2);opacity:0;padding:3px;padding:var(--plyr-tooltip-radius,3px);pointer-events:none;position:absolute;transform:translate(0,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s .1s ease,opacity .2s .1s ease;z-index:2}.plyr__preview-thumb--is-shown{opacity:1;transform:translate(0,0) scale(1)}.plyr__preview-thumb::before{border-left:4px solid transparent;border-left:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-right:4px solid transparent;border-right:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-top:4px solid rgba(255,255,255,.9);border-top:var(--plyr-tooltip-arrow-size,4px) solid var(--plyr-tooltip-background,rgba(255,255,255,.9));bottom:calc(4px * -1);bottom:calc(var(--plyr-tooltip-arrow-size,4px) * -1);content:'';height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;z-index:2}.plyr__preview-thumb__image-container{background:#c1c8d1;border-radius:calc(3px - 1px);border-radius:calc(var(--plyr-tooltip-radius,3px) - 1px);overflow:hidden;position:relative;z-index:0}.plyr__preview-thumb__image-container img{height:100%;left:0;max-height:none;max-width:none;position:absolute;top:0;width:100%}.plyr__preview-thumb__time-container{bottom:6px;left:0;position:absolute;right:0;white-space:nowrap;z-index:3}.plyr__preview-thumb__time-container span{background-color:rgba(0,0,0,.55);border-radius:calc(3px - 1px);border-radius:calc(var(--plyr-tooltip-radius,3px) - 1px);color:#fff;font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px));padding:3px 6px}.plyr__preview-scrubbing{bottom:0;filter:blur(1px);height:100%;left:0;margin:auto;opacity:0;overflow:hidden;pointer-events:none;position:absolute;right:0;top:0;transition:opacity .3s ease;width:100%;z-index:1}.plyr__preview-scrubbing--is-shown{opacity:1}.plyr__preview-scrubbing img{height:100%;left:0;max-height:none;max-width:none;object-fit:contain;position:absolute;top:0;width:100%}.plyr--no-transition{transition:none!important}.plyr__sr-only{clip:rect(1px,1px,1px,1px);overflow:hidden;border:0!important;height:1px!important;padding:0!important;position:absolute!important;width:1px!important}.plyr [hidden]{display:none!important}",""]);const o=a},485:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(81),r=i.n(n),s=i(645),a=i.n(s)()(r());a.push([e.id,'html,\nbody {\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    background: transparent;\n    align-items: center;\n    justify-content: center;\n    font-family: \'Rubik\', sans-serif;\n\n}\n.in-page-container{\n    height: auto !important;\n    margin: 0 !important;\n}\n:root{\n    --max-height: 100vh;\n    --muted-indicator-border-size: 2px;\n}\n\n.container {\n    width: 100%;\n    height: 100%;\n    display: table;\n}\n\nvideo {\n    width: 100%;\n    height: 100%;\n    visibility: hidden;\n}\n.plyr__poster {\n    background-size: cover;\n    opacity: 1;\n}\n.panda-forward-wrapper{\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: space-between;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.panda-forward-wrapper div{\n    width: 50%;\n    height: 100%;\n}\n\n.plyr__captions {\n    font-size: 20px;\n    z-index: 4;\n}\n\n.plyr--video .plyr__controls {\n    z-index: 5;\n}\n\n@media (min-width: 480px) {\n    .plyr__captions {\n        font-size: 18px;\n    }\n}\n.play-cta{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n}\n\n@media (max-width: 350px) {\n    .plyr__volume>input[type=range] {\n        display: none;\n    }\n\n    .plyr__volume {\n        min-width: 30px;\n        width: 30px;\n    }\n}\n@media (max-width: 480px) {\n    .plyr__captions {\n        font-size: 14px;\n    }\n}\n\n@media (min-width: 768px) {\n    .plyr__captions {\n        font-size: 23px;\n    }\n}\n\n@media (min-width: 1024px) {\n    .plyr__captions {\n        font-size: 26px;\n    }\n}\n\n#live-time-indicator{\n    background: none;\n    outline: 0;\n    border: 0;\n    color: var(--live-indicator-color);\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n}\n#live-time-indicator div{\n    width: 8px;\n    height: 8px;\n    border-radius: 5px;\n    background: var(--live-indicator-color);\n    margin-right: 4px;\n}\n.not-realtime{\n    opacity: 0.5;\n}\n.hide-slyder-badge::-webkit-slider-thumb {\n    opacity: 0;\n}\n\n.plyr audio,\n.plyr iframe,\n.plyr video {\n    max-height: 100vh;\n}\n.end-cta{\n    width: 100%;\n    height: 100%;\n}\n.panda-branding-link {\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0 4px;\n    padding-bottom: 2px;\n    margin-left: 2px;\n    border-radius: 3px;\n    transition: background .3s;\n}\n\n.panda-branding-link:hover {\n    background: var(--plyr-color-main)\n}\n\n.plyr--video {\n    height: 100%\n}\n\n.container-drm {\n    height: 100%;\n    width: 100%;\n    display: table-cell;\n    text-align: center;\n    vertical-align: middle;\n}\n\n#drm-question {\n    color: white;\n    font-size: 1.8rem;\n    margin: 0;\n    margin-bottom: 20px;\n    text-shadow: 0px 0 1px black;\n}\n\n#drm-answer {\n    height: 33px;\n    font-size: 1rem;\n    margin-bottom: 15px;\n    width: 50%;\n    padding: 10px 15px;\n    display: inline-block;\n    border: .5px solid #ccc !important;\n    border-radius: 4px;\n    box-sizing: border-box;\n}\n\n#drm-answer:focus {\n    outline: none;\n}\n\n#drm-button {\n    position: absolute;\n    height: 33px;\n    width: 33px;\n    border: none;\n    border-top-right-radius: 4px;\n    border-bottom-right-radius: 4px;\n    margin-left: -32px;\n}\n\n.drm-search-icon svg {\n    width: 30px;\n    height: 30px;\n    margin-left: -3px;\n}\n\n.drm-loading-icon svg {\n    height: 40px;\n    width: 40px;\n    position: absolute;\n    left: -2px;\n    top: -3px;\n}\n\n.disabled {\n    display: none  !important;\n}\n\n.panda-live-indicator {\n    position: absolute;\n    right: 20px;\n    top: 5px;\n    padding: 2px 16px;\n    border-radius: 4px;\n    font-weight: bold;\n    background-color: var(--live-indicator-color);\n    color: #fff;\n    opacity: 0.85;\n}\n\n#error-indicator{\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1000;\n    padding: 30px;\n    line-height: 2em;\n    background: rgba(0,0,0,0.6);\n}\n\n.panda-title-wrapper {\n    position: absolute;\n    top: calc(-100vh + 75px);\n    left: 0;\n    width: 100%;\n    transition: transform .01s;\n    height: 80px;\n    background: var(--plyr-video-controls-background, linear-gradient(rgba(0, 0, 0, .85), rgba(0, 0, 0, 0)));\n}\n\n.plyr-controls-fix-index {\n    z-index: 12 !important;\n}\n@media (max-width: 550px) {\n    .plyr__controls .panda-branding-link {\n        display: none;\n    }\n\n    .panda-title-wrapper {\n        position: absolute;\n        top: calc(-100vh + 55px);\n        left: 0;\n        width: 100%;\n        transition: transform .01s;\n        height: 80px;\n        background: var(--plyr-video-controls-background, linear-gradient(rgba(0, 0, 0, .85), rgba(0, 0, 0, 0)));\n    }\n}\n\n.plyr--video.plyr--hide-controls .plyr__controls {\n    transform: translateY(0) !important;\n}\n\n.panda-title-wrapper p {\n    color: var(--plyr-video-control-color);\n    padding: 10px 20px;\n    margin: 0;\n    font-size: 18px;\n    font-weight: bold;\n    text-align: start;\n}\n\n.loading-icon svg {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n    -webkit-transform: translateX(-50%) translateY(-50%);\n    -o-transform: translateX(-50%) translateY(-50%);\n    width: 30%;\n    height: 30%;\n}\n.live-offline-badge{\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background: #040814;\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n}\n@keyframes pulsateLogo {\n    0% {\n        transform: scale(1);\n    }\n    50% {\n        transform: scale(1.1);\n    }\n    100% {\n        transform: scale(1);\n    }\n}\n.live-offline-badge img{\n    width: 40%;\n    max-width: 500px;\n    animation: pulsateLogo 3s ease-in-out infinite;\n}\n\n.live-offline-badge p{\n    font-size: 1rem;\n    margin-top: 10px;\n    font-weight: bold;\n}\n\n.live-thumb{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n.live-thumb img{\n    width: 100%;\n    height: 100%;\n}\n.alternative-progress-wrapper{\n    width: 100%;\n    height: 20px;\n    position: absolute;\n    display: flex;\n    align-items: flex-end;\n    bottom: 0;\n    left: 0;\n    transition: width .1s;\n}\n.alternative-progress{\n    --value-progress: 0%;\n    background: var(--plyr-color-main);\n    height: 100%;\n    width: var(--value-progress);\n    transition: width 0.7s;\n    z-index: 100000;\n}\n@media (max-width: 550px) {\n    .alternative-progress-wrapper{\n        height: 20px;\n    }\n}\nbutton[data-plyr="play"].plyr__control--overlaid{\n    z-index: 5;\n}\n@media (max-width: 450px) {\n    .alternative-progress-wrapper{\n        height: 14px;\n    }\n}\n@media (max-width: 380px) {\n    .alternative-progress-wrapper{\n        height: 10px;\n    }\n}\n@media (max-width: 490px){\n    button[data-plyr="rewind"]{\n        display: none;\n    }\n    button[data-plyr="fast-forward"]{\n        display: none;\n    }\n    button[data-plyr="play"]{\n        margin-right: auto;\n    }\n    .no-progress button[data-plyr="play"].plyr__controls__item, .no-progress div.plyr__time--current,.no-progress  div.plyr__time{\n        position: static !important;\n    }\n    .panda-bookmarks-div{\n        position: relative;\n    }\n}\n.panda-bookmarks-list-title{\n    width: calc(100% - 20px);\n    text-align: start;\n    padding: 5px 10px;\n    border-bottom: 1px solid #ccc;\n    margin: 3px 10px;\n    font-size: 13px;\n}\n.panda-bookmarks-list-wrapper{\n    animation: plyr-popup .2s ease;\n    position: absolute;\n    bottom: 50px;\n    right: 0px;\n    color: var(--plyr-menu-color,#4a5464);\n    background: var(--plyr-menu-background,rgba(255,255,255,.9));\n    border-radius: 4px;\n    opacity: 0.9;\n}\n\n.panda-bookmarks-list{ \n    list-style-type: none;\n    padding: 5px 10px;\n    padding-top: 0;\n    max-height: calc(var(--max-height) - 110px);\n    overflow-y: auto;\n    margin-top: 0;\n}\n.panda-bookmarks-list::-webkit-scrollbar {\n    width: 5px;\n}\n.panda-bookmarks-list::-webkit-scrollbar-track {\n    background: var(--plyr-menu-background,rgba(255,255,255,.9));\n    border-radius: 5px;\n}\n.panda-bookmarks-list::-webkit-scrollbar-thumb {\n    background: #ccc; \n    border-radius: 5px;\n}\n.panda-bookmarks-list li {\n    display: flex;\n    padding: 3px 10px;\n    min-width: 130px;\n    max-width: 220px;\n    text-align: start;\n    cursor: pointer;\n    border-radius: 2px;\n}\n.panda-bookmarks-list li:hover{\n    background: var(--plyr-color-main);\n    color: var(--plyr-video-control-color);\n}\n.panda-bookmarks-list  li span{\n    font-size: 13px;\n    font-weight: normal;\n    line-height: 18px;\n}\n.panda-bookmarks-button{\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 3px;\n    margin-left: 2px;\n    transition: background .3s;\n    border: 0;\n    background: none;\n}\n.active-bookmark {\n    background: var(--plyr-color-main);\n}\n.panda-bookmarks-button:hover {\n    background: var(--plyr-color-main)\n}\n.panda-bookmark-progress-dot{\n    width: 5px;\n    height: 5px;\n    border-radius: 50%;\n    background: var(--plyr-video-control-color);\n    position: absolute;\n    top: 7px;\n    left: calc(var(--dot-percent) - 6px);\n    z-index: 20;\n}\n.plyr__menu__container > div > div{\n    max-height: calc(var(--max-height) - 50px);\n    overflow-y: auto;\n}\n.plyr__menu__container > div > div::-webkit-scrollbar {\n    width: 5px;\n}\n.plyr__menu__container > div > div::-webkit-scrollbar-track {\n    background: var(--plyr-menu-background,rgba(255,255,255,.9));\n    border-radius: 5px;\n}\n.plyr__menu__container > div > div::-webkit-scrollbar-thumb {\n    background: #ccc; \n    border-radius: 5px;\n}\n\n.cta-overlay{\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 1;\n    width: 100%;\n    height: 100%;\n    outline: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.cta-overlay iframe{\n    outline: 0;\n    border: 0;\n} \n.cta-skip-button{\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    padding: 10px;\n    cursor: pointer;\n    background: rgba(255,255,255,0.4);\n    border: 0;\n    outline: 0;\n}\n.cta-container{\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    z-index: 1000;\n}\n.panda-resume-screen-wrapper{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    background: var(--plyr-color-main);\n    z-index: 15;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: 1rem;\n}\n.panda-resume-screen-wrapper p{\n    color: var(--plyr-video-control-color);\n    font-size: 1.4em;\n    font-weight: bold;\n}\n.panda-resume-screen-buttons{\n    display: flex;\n    flex-direction: row;\n}\n.panda-resume-screen-buttons button{\n    background: none;\n    border: 0;\n    outline: 0;\n    display: flex;\n    align-items: center;\n    padding: 10px 20px;\n    cursor: pointer;\n    color: var(--plyr-video-control-color);\n    font-size: 1.1em;\n}\n.panda-resume-screen-buttons button svg{\n    width: 1.9em;\n    height: 1.9em;\n}\n.panda-resume-screen-buttons button span{\n    padding-left: 4px;\n}\n@media (max-width: 450px) {\n    .panda-resume-screen-wrapper{\n        font-size: 0.8rem;\n    }\n}\n@media (max-width: 350px) {\n    .panda-resume-screen-wrapper{\n        font-size: 0.7rem;\n    }\n}\n@media (max-width: 275px) {\n    .panda-resume-screen-wrapper{\n        font-size: 0.6rem;\n    }\n}\n@media (max-width: 230px) {\n    .panda-resume-screen-wrapper{\n        font-size: 0.5rem;\n    }\n}\n.plyr--full-ui.fullscreen ::-webkit-media-text-track-container {\n    display:block !important;\n}\n@keyframes plyr-popup{\n    0%{\n        opacity: 0;\n        transform: translateY(10px);\n    }\n    100%{\n        opacity: 1;\n        transform: translateY(0px);\n    }\n}\n#context-menu{\n    position: absolute;\n    display: flex;\n    width: 170px;\n    background: rgba(255,255,255,0.8);\n    border-radius: 3px;\n    z-index: 100;\n}\n#context-menu ul{\n    display: flex;\n    flex-direction: column;\n    align-items: start;\n    justify-content: space-around;\n    padding: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n}\n#context-menu ul li{\n    list-style: none;\n    display: flex;\n    width: 100%;\n}\n#context-menu ul li:hover{\n    opacity: 0.8;\n    background: var(--plyr-color-main);\n}\n#context-menu ul li *:hover{\n    color: var(--plyr-video-control-color);\n}\n#context-menu ul li a{\n    text-decoration: none;\n    color: #333;\n    font-size: 0.8rem;\n    padding: 10px;\n    cursor: pointer;\n    width: 100%;\n}\n#context-menu ul li button{\n    color: #333;\n    background: 0;\n    outline: 0;\n    border: 0;\n    font-size: 0.8rem;\n    cursor: pointer;\n    width: 100%;\n    text-align: start;\n    padding: 10px;\n}\n#report-problem-dialog {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n#copy-paste{\n    display: flex;\n    flex-direction: column;\n    width: 520px;\n    height: 300px;\n    z-index: 100;\n    background-color: #1b1b4b;\n    border-radius: 5px;\n}\n.report-problem-text{\n    display: flex;\n    color: #fff;\n    justify-content: center;\n    align-items: center;\n    font-weight: 600;\n    font-size: 15px;\n}\n#copy-paste #report-first-step section {\n    display: flex;\n    flex-direction: column; \n    align-items: flex-start;\n    margin: 10px 30px 0px 30px;\n    color: #ccc;\n    font-size: 16px;\n}\n#copy-paste #report-first-step section div {\n    margin: 0 0 12px 0;\n}\n#copy-paste #report-first-step footer {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.report-problem-dialog-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #a6a2ec;\n    border-radius: 6px;\n    border-style: none;\n    box-sizing: border-box;\n    color: #FFFFFF;\n    cursor: pointer;\n    height: 35px;\n    line-height: 20px;\n    margin: 0;\n    outline: none;\n    padding: 10px 0px;\n    position: relative;\n    text-align: center;\n    text-decoration: none;\n    transition: color 100ms;\n    vertical-align: baseline;\n    user-select: none;\n    -webkit-user-select: none;\n    touch-action: manipulation;\n    width: 140px;\n    font-size: 0.8rem;\n}\n#copy-paste #report-first-step footer button:hover,\n#copy-paste #report-first-step footer button:focus {\n    background-color: #bab7eb;\n}\n#copy-paste #report-first-step footer > :first-child {\n    margin-right: 20px;\n}\n.other-input {\n    width: 100%;\n    padding: 10px 20px;\n    margin: 0px 0px 8px 0px;\n    display: inline-block;\n    border: .5px solid #ccc !important;\n    border-radius: 4px;\n    box-sizing: border-box;\n}\n#copy-paste #report-second-step {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    color: #fff;\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 1.3rem;\n}\n#copy-paste #report-second-step header {\n    margin-top: 10px;\n}\n#copy-paste #report-second-step #second-step-text {\n    margin-top: -10px;\n}\n#copy-paste #report-second-step #loading-div {\n    width: 120px;\n}\n#copy-paste #report-third-step {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    color: #fff;\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 1.3rem;\n}\n#copy-paste #report-third-step.alone {\n    margin-top: 40px;\n}\n#copy-paste #report-third-step header {\n    margin-top: 15px;\n    margin-bottom: 5px;\n}\n#copy-paste #report-third-step footer {\n    margin-top: 15px;\n}\n.report-textfield-card {\n    height: 40px;\n    width: 97%;\n    padding-left: 5px;\n}\n@media (max-width: 450px) {\n    #copy-paste {\n        width: 300px;\n        height: 180px;\n    }\n    #copy-paste header p {\n        margin: 5px 0px 0px 0px;\n    }\n    .report-problem-text {\n        font-size: 9px;\n    }\n    .report-textfield-card {\n        height: 32px;\n        width: 94%;\n        padding-left: 2px;\n    }\n    .report-problem-dialog-button {\n        height: 20px;\n        line-height: 14px;\n        padding: 2px 0px;\n        width: 80px;\n        font-size: .5rem;\n    }\n    #copy-paste #report-first-step section div {\n        margin: 0 0 2.4px 4px;\n    }\n    #copy-paste #report-first-step section {\n        margin: 2px 4px 0px 2px;\n        font-size: 10px;\n    }\n    #copy-paste #report-second-step #second-step-text {\n        font-size: 12px;\n    }\n    #copy-paste #report-third-step footer {\n        margin-top: 5px;\n    }\n    #panda-last-step-img {\n        width: 50%;\n    }\n    .other-input {\n        width: 100%;\n        padding: 4px 8px;\n        margin: 5px 0px;\n        display: inline-block;\n        border: .25px solid #ccc;\n        border-radius: 4px;\n        box-sizing: border-box;\n        font-size: 10px;\n    }\n}\n.customSettingsBtn {\n    --max-height: 100vh;\n    --plyr-captions-text-color: #FFF;\n    --plyr-captions-background: #000;\n    --plyr-video-control-color: #FFFFFFFF;\n    --plyr-video-control-color-hover: #FFFFFFFF;\n    --plyr-menu-color: #4a5464;\n    --live-indicator-color: #fc2d2d;\n    -webkit-font-smoothing: antialiased;\n    direction: ltr;\n    white-space: nowrap;\n    box-sizing: inherit;\n    background: 0 0;\n    border: 0;\n    border-radius: 3px;\n    cursor: pointer;\n    flex-shrink: 0;\n    overflow: visible;\n    position: relative;\n    transition: all .3s ease;\n    font: inherit;\n    line-height: inherit;\n    touch-action: manipulation;\n    margin-top: 2px;\n    align-items: center;\n    color: var(--plyr-menu-color, #4a5464);\n    display: flex;\n    font-size: 13px !important;\n    padding-bottom: calc(calc(10px * .7)/ 1.5);\n    padding-left: calc(calc(10px * .7) * 1.5);\n    padding-top: calc(calc(10px * .7)/ 1.5);\n    user-select: none;\n    width: 100% !important;\n    padding-right: calc(calc(10px * .7) * 4);\n}\n\n.customSettingsBtn:hover {\ncolor: #fff;\n}\n.small-muted-icon {\n    width: 200px;\n    position: absolute;\n    top: 10px;\n    left: 10px;\n    background-color: var(--plyr-color-main);\n    opacity: 0.8;\n    display: flex;\n    color: var(--plyr-video-control-color);\n    align-items: center;\n    border: 1px solid var(--plyr-video-control-color);\n    border-radius: 3px;\n}\nbutton.small-muted-icon:after {\n    display: block;\n    width: 99999px;\n    height: 99999px;\n    position: absolute;\n    content: \'\';\n}\n.small-muted-icon svg {\n    width: 50px;\n    height: 50px;\n}\n.small-muted-icon span{\n    padding: 0 10px;\n    font-weight: bold;\n}\n\n.blur {\n    visibility: visible;\n    position: absolute;\n    top: 0;\n    z-index: -1;\n    filter: blur(4px);\n    -webkit-filter: blur(4px);\n}\n\nbutton.panda-muted-indicator {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 80%;\n    max-width: 400px;\n    height: auto;\n    border-radius: 10px;\n    background-color: var(--muted-indicator-background);\n    border: var(--muted-indicator-border-size) solid var(--muted-indicator-text);\n    padding: 0.5em;\n    text-align: center;\n    transform: translate(-50%, -50%);\n    z-index: 9999999;\n    outline: none;\n    cursor: pointer;\n}\nbutton.panda-muted-indicator:after {\n    content: \'\';\n    position: absolute;\n    display: block;\n    width: 99999px;\n    height: 99999px;\n}\nbutton.panda-muted-indicator span {\n    display: block;\n    width: 100%;\n    padding: 0.5em 0;\n    box-sizing: border-box;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 24px;\n    font-weight: 700;\n    text-align: center;\n    color: var(--muted-indicator-text);\n    white-space: normal;\n    line-height: 1.1em;\n}\nbutton.panda-muted-indicator-big-text span {\n    font-size: 22px;\n}\nbutton.panda-muted-indicator svg {\n    width: 36%;\n    height: auto;\n}\nbutton.panda-muted-indicator svg,\nbutton.panda-muted-indicator svg path,\nbutton.panda-muted-indicator svg polygon {\n    fill: var(--muted-indicator-text);\n}\nbutton.panda-muted-indicator.medium {\n    transform: translate(-50%, -50%) scale(1.35);\n    transform-origin: center;\n}\nbutton.panda-muted-indicator.large {\n    width: 100%;\n    max-width: 100%;\n    height: 100%;\n    border-radius: 0;\n}\nbutton.panda-muted-indicator.large svg {\n    width: 24%;\n}\nbutton.panda-muted-indicator.large span {\n    font-size: 250%;\n}\n@media(max-width: 680px) {\n    button.panda-muted-indicator svg {\n        width: 30%;\n    }\n    button.panda-muted-indicator span,\n    button.panda-muted-indicator.large span {\n        font-size: 20px;\n    }\n    button.panda-muted-indicator-big-text span,\n    button.panda-muted-indicator-big-text.large span {\n        font-size: 16px;\n        line-height: 1em;\n    }\n}\n@media(max-width: 380px) {\n    button.panda-muted-indicator svg {\n        width: 25%;\n    }\n    button.panda-muted-indicator span,\n    button.panda-muted-indicator.large span {\n        font-size: 16px;\n        line-height: 1em;\n    }\n    button.panda-muted-indicator-big-text span,\n    button.panda-muted-indicator-big-text.large span {\n        font-size: 12px;\n        line-height: 1em;\n    }\n}\n\nbutton.panda-muted-indicator-impact-wrapper {\n    --size-width: 80%;\n    --size-height: 218px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 9999999;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: none;\n    background: rgba(0, 0, 0, 0);\t\t\t\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    outline: none;\n    cursor: pointer;\n    overflow: hidden;\n}\nbutton.panda-muted-indicator-impact-wrapper:after {\n    content: \'\';\n    position: absolute;\n    display: block;\n    width: 100%;\n    height: 100%;\n}\nbutton.panda-muted-indicator-impact-wrapper .text {\n    position: absolute;\n    display: block;\n    width: calc(80% - 0.5em);\n    max-width: calc(400px - 0.5em);\n    padding: 0.5em 0;\n    box-sizing: border-box;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 24px;\n    font-weight: 700;\n    text-align: center;\n    color: var(--muted-indicator-text);\n    white-space: normal;\n    line-height: 1.1em;\n}\nbutton.panda-muted-indicator-impact-wrapper-big-text .text {\n    font-size: 22px;\n}\nbutton.panda-muted-indicator-item .text.small-text {\n    padding: 0.7em 0;\n}\nbutton.panda-muted-indicator-item .text.large-text {\n    padding: 0;\n}\nbutton.panda-muted-indicator-item span.small-text {\n    padding: 10px 0;\n}\nbutton.panda-muted-indicator-item span.large-text {\n    padding: 8px 0;\n}\nbutton.panda-muted-indicator-impact-wrapper .text.top,\nbutton.panda-muted-indicator-impact-wrapper-big-text .text.top {\n    top: calc((50% - var(--size-height) / 2) + 0.5em - var(--muted-indicator-border-size));\n}\nbutton.panda-muted-indicator-impact-wrapper .text.bottom,\nbutton.panda-muted-indicator-impact-wrapper-big-text .text.bottom {\n    bottom: calc((50% - var(--size-height) / 2) + 0.5em - var(--muted-indicator-border-size));\n}\nbutton.panda-muted-indicator-impact-wrapper .panda-muted-indicator-impact-wrapper-canvas {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    z-index: -1;\n    width: 80%;\n    max-width: 400px;\n    height: var(--size-height);\n    background-color: var(--muted-indicator-background);\n    border-radius: 10px;\n    box-sizing: border-box;\n    border: var(--muted-indicator-border-size) solid var(--muted-indicator-text);\n    transform: translate(-50%, -50%);\n    transform-origin: center;\n}\nbutton.panda-muted-indicator-impact-wrapper svg {\n    position: absolute;\n    width:var(--size-width);\n    max-width: 400px;\n}\nbutton.panda-muted-indicator-impact-wrapper.medium {\n    transform: scale(1.35);\n}\nbutton.panda-muted-indicator-impact-wrapper.large .panda-muted-indicator-impact-wrapper-canvas {\n    --size-width: 100%;\n    --size-height: 100%;\n    width: 100%;\n    max-width: 100%;\n    border-radius: 0;\n}\nbutton.panda-muted-indicator-impact-wrapper.large {\n    --size-width: 65%;\n}\nbutton.panda-muted-indicator-impact-wrapper.large svg {\n    max-width: 500px;\n}\nbutton.panda-muted-indicator-impact-wrapper.large .text {\n    font-size: 225%;\n    width: 90%;\n}\nbutton.panda-muted-indicator-impact-wrapper.large .text.top {\n    top: calc((var(--size-width) / 3) - 0.5em);\n}\nbutton.panda-muted-indicator-impact-wrapper.large .text.bottom {\n    bottom: calc((var(--size-width) / 3) - 0.5em);\n}\n@media(max-width: 680px) {\n    button.panda-muted-indicator-impact-wrapper {\n        --size-height: 185px;\n    }\n    button.panda-muted-indicator-impact-wrapper svg {\n        --size-width: 65%;\n    }\n    button.panda-muted-indicator-impact-wrapper.medium {\n        transform: scale(1.15);\n    }\n    button.panda-muted-indicator-impact-wrapper .text,\n    button.panda-muted-indicator-impact-wrapper.large .text {\n        font-size: 20px;\n    }\n    button.panda-muted-indicator-impact-wrapper-big-text .text,\n    button.panda-muted-indicator-impact-wrapper-big-text.large .text {\n        font-size: 16px;\n        line-height: 1em;\n    }\n}\n@media(max-width: 380px) {\n    button.panda-muted-indicator-impact-wrapper {\n        --size-height: 140px;\n    }\n    button.panda-muted-indicator-impact-wrapper svg {\n        --size-width: 52.5%;\n    }\n    button.panda-muted-indicator-impact-wrapper.medium {\n        transform: initial;\n    }\n    button.panda-muted-indicator-impact-wrapper .text,\n    button.panda-muted-indicator-impact-wrapper.large .text {\n        font-size: 16px;\n        line-height: 1em;\n    }\n    button.panda-muted-indicator-impact-wrapper-big-text .text,\n    button.panda-muted-indicator-impact-wrapper-big-text.large .text {\n        font-size: 12px;\n        line-height: 1em;\n    }\n}\n.panda-muted-indicator-custom{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border: none;\n    z-index: 999;\n    outline: 0;\n}\n#trial-warning{\n    position: absolute;\n    bottom: 50px;\n    right: 30px;\n    color: white;\n    text-align: center;\n    background: rgba(0,0,0,0.5);\n    opacity: 0.7;\n    font-size: 0.8rem;\n    padding: 5px 10px;\n}\n@media(max-width: 680px) {\n    #trial-warning{\n        font-size: 0.7rem;\n    }\n}\n@media(max-width: 380px) {\n    #trial-warning{\n        font-size: 0.5rem;\n    }\n}\n\n.plyr__controls .plyr__controls__item:first-child {\n    margin-right: 0;\n}\n',""]);const o=a},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,n,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);n&&a[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},443:function(e,t,i){"object"==typeof navigator&&(e.exports=function(){"use strict";function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var a={addCSS:!0,thumbWidth:15,watch:!0};function o(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var l=function(e){return null!=e?e.constructor:null},c=function(e,t){return!!(e&&t&&e instanceof t)},d=function(e){return l(e)===String},u=function(e){return Array.isArray(e)},h=function(e){return c(e,NodeList)},p=d,f=u,m=h,g=function(e){return c(e,Element)},y=function(e){return c(e,Event)},v=function(e){return function(e){return null==e}(e)||(d(e)||u(e)||h(e))&&!e.length||function(e){return l(e)===Object}(e)&&!Object.keys(e).length};var b=function(){function e(t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),g(t)?this.element=t:p(t)&&(this.element=document.querySelector(t)),g(this.element)&&v(this.element.rangeTouch)&&(this.config=s({},a,{},i),this.init())}return function(e,i,n){i&&t(e.prototype,i),n&&t(e,n)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[i](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!y(t))return null;var i,n=t.target,r=t.changedTouches[0],s=parseFloat(n.getAttribute("min"))||0,a=parseFloat(n.getAttribute("max"))||100,o=parseFloat(n.getAttribute("step"))||1,l=n.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(i=100/l.width*(r.clientX-l.left))?i=0:100<i&&(i=100),50>i?i-=(100-2*i)*c:50<i&&(i+=2*(i-50)*c),s+function(e,t){if(1>t){var i=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(i))}return Math.round(e/t)*t}(i/100*(a-s),o)}},{key:"set",value:function(t){e.enabled&&y(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var i=new Event(t,{bubbles:!0});e.dispatchEvent(i)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null;if(v(t)||p(t)?n=Array.from(document.querySelectorAll(p(t)?t:'input[type="range"]')):g(t)?n=[t]:m(t)?n=Array.from(t):f(t)&&(n=t.filter(g)),v(n))return null;var r=s({},a,{},i);if(p(t)&&r.watch){var l=new MutationObserver((function(i){Array.from(i).forEach((function(i){Array.from(i.addedNodes).forEach((function(i){g(i)&&o(i,t)&&new e(i,r)}))}))}));l.observe(document.body,{childList:!0,subtree:!0})}return n.map((function(t){return new e(t,i)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const _=e=>null!=e?e.constructor:null,T=(e,t)=>Boolean(e&&t&&e instanceof t),w=e=>null==e,E=e=>_(e)===Object,x=e=>_(e)===String,k=e=>"function"==typeof e,S=e=>Array.isArray(e),L=e=>T(e,NodeList),C=e=>w(e)||(x(e)||S(e)||L(e))&&!e.length||E(e)&&!Object.keys(e).length;var A=w,I=E,R=e=>_(e)===Number&&!Number.isNaN(e),D=x,P=e=>_(e)===Boolean,M=k,O=S,F=L,N=e=>null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument,B=e=>T(e,Event),U=e=>T(e,KeyboardEvent),$=e=>T(e,TextTrack)||!w(e)&&x(e.kind),G=e=>{if(T(e,window.URL))return!0;if(!x(e))return!1;let t=e;e.startsWith("http://")&&e.startsWith("https://")||(t=`http://${e}`);try{return!C(new URL(t).hostname)}catch(e){return!1}},H=C;const z=(()=>{const e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},i=Object.keys(t).find((t=>void 0!==e.style[t]));return!!D(i)&&t[i]})();function q(e,t){setTimeout((()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}const V={isIE:Boolean(window.document.documentMode),isEdge:/Edge/g.test(navigator.userAgent),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone:/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIos:/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1};function j(e,t){return t.split(".").reduce(((e,t)=>e&&e[t]),e)}function K(e={},...t){if(!t.length)return e;const i=t.shift();return I(i)?(Object.keys(i).forEach((t=>{I(i[t])?(Object.keys(e).includes(t)||Object.assign(e,{[t]:{}}),K(e[t],i[t])):Object.assign(e,{[t]:i[t]})})),K(e,...t)):e}function Y(e,t){const i=e.length?e:[e];Array.from(i).reverse().forEach(((e,i)=>{const n=i>0?t.cloneNode(!0):t,r=e.parentNode,s=e.nextSibling;n.appendChild(e),s?r.insertBefore(n,s):r.appendChild(n)}))}function W(e,t){N(e)&&!H(t)&&Object.entries(t).filter((([,e])=>!A(e))).forEach((([t,i])=>e.setAttribute(t,i)))}function X(e,t,i){const n=document.createElement(e);return I(t)&&W(n,t),D(i)&&(n.innerText=i),n}function Q(e,t,i,n){N(t)&&t.appendChild(X(e,i,n))}function Z(e){F(e)||O(e)?Array.from(e).forEach(Z):N(e)&&N(e.parentNode)&&e.parentNode.removeChild(e)}function J(e){if(!N(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function ee(e,t){return N(t)&&N(t.parentNode)&&N(e)?(t.parentNode.replaceChild(e,t),e):null}function te(e,t){if(!D(e)||H(e))return{};const i={},n=K({},t);return e.split(",").forEach((e=>{const t=e.trim(),r=t.replace(".",""),s=t.replace(/[[\]]/g,"").split("="),[a]=s,o=s.length>1?s[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":D(n.class)?i.class=`${n.class} ${r}`:i.class=r;break;case"#":i.id=t.replace("#","");break;case"[":i[a]=o}})),K(n,i)}function ie(e,t){if(!N(e))return;let i=t;P(i)||(i=!e.hidden),e.hidden=i}function ne(e,t,i){if(F(e))return Array.from(e).map((e=>ne(e,t,i)));if(N(e)){let n="toggle";return void 0!==i&&(n=i?"add":"remove"),e.classList[n](t),e.classList.contains(t)}return!1}function re(e,t){return N(e)&&e.classList.contains(t)}function se(e,t){const{prototype:i}=Element;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function ae(e){return this.elements.container.querySelectorAll(e)}function oe(e){return this.elements.container.querySelector(e)}function le(e=null,t=!1){N(e)&&(e.focus({preventScroll:!0}),t&&ne(e,this.config.classNames.tabFocus))}const ce={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},de={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t,i){const n=V.isIPhone&&i&&de.playsinline,r=de[e]||"html5"!==t;return{api:r,ui:r&&de.rangeInput&&("video"!==e||!V.isIPhone||n)}},pip:!(V.isIPhone||!M(X("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||X("video").disablePictureInPicture)),airplay:M(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(H(e))return!1;const[t]=e.split("/");let i=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(ce).includes(i)&&(i+=`; codecs="${ce[e]}"`);try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range","range"===e.type})(),touch:"ontouchstart"in document.documentElement,transitions:!1!==z,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},ue=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e})();function he(e,t,i,n=!1,r=!0,s=!1){if(!e||!("addEventListener"in e)||H(t)||!M(i))return;const a=t.split(" ");let o=s;ue&&(o={passive:r,capture:s}),a.forEach((t=>{this&&this.eventListeners&&n&&this.eventListeners.push({element:e,type:t,callback:i,options:o}),e[n?"addEventListener":"removeEventListener"](t,i,o)}))}function pe(e,t="",i,n=!0,r=!1){he.call(this,e,t,i,!0,n,r)}function fe(e,t="",i,n=!0,r=!1){he.call(this,e,t,i,!1,n,r)}function me(e,t="",i,n=!0,r=!1){const s=(...a)=>{fe(e,t,s,n,r),i.apply(this,a)};he.call(this,e,t,s,!0,n,r)}function ge(e,t="",i=!1,n={}){if(!N(e)||H(t))return;const r=new CustomEvent(t,{bubbles:i,detail:{...n,plyr:this}});e.dispatchEvent(r)}function ye(){this&&this.eventListeners&&(this.eventListeners.forEach((e=>{const{element:t,type:i,callback:n,options:r}=e;t.removeEventListener(i,n,r)})),this.eventListeners=[])}function ve(){return new Promise((e=>this.ready?setTimeout(e,0):pe.call(this,this.elements.container,"ready",e))).then((()=>{}))}function be(e){(e=>T(e,Promise)&&k(e.then))(e)&&e.then(null,(()=>{}))}function _e(e){return O(e)?e.filter(((t,i)=>e.indexOf(t)===i)):e}function Te(e,t){return O(e)&&e.length?e.reduce(((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e)):null}function we(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const Ee=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce(((e,[t,i])=>({...e,[t/i]:[t,i]})),{});function xe(e){return!!(O(e)||D(e)&&e.includes(":"))&&(O(e)?e:e.split(":")).map(Number).every(R)}function ke(e){if(!O(e)||!e.every(R))return null;const[t,i]=e,n=(e,t)=>0===t?e:n(t,e%t),r=n(t,i);return[t/r,i/r]}function Se(e){const t=e=>xe(e)?e.split(":").map(Number):null;let i=t(e);if(null===i&&(i=t(this.config.ratio)),null===i&&!H(this.embed)&&O(this.embed.ratio)&&({ratio:i}=this.embed),null===i&&this.isHTML5){const{videoWidth:e,videoHeight:t}=this.media;i=[e,t]}return ke(i)}function Le(e){if(!this.isVideo)return{};const{wrapper:t}=this.elements,i=Se.call(this,e);if(!O(i))return{};const[n,r]=ke(i),s=100/n*r;if(we(`aspect-ratio: ${n}/${r}`)?t.style.aspectRatio=`${n}/${r}`:t.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const e=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),i=(e-s)/(e/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${i}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:i}}function Ce(e,t,i=.05){const n=e/t,r=Te(Object.keys(Ee),n);return Math.abs(r-n)<=i?Ee[r]:[e,t]}const Ae={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((e=>{const t=e.getAttribute("type");return!!H(t)||de.mime.call(this,t)})):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Ae.getSources.call(this).map((e=>Number(e.getAttribute("size")))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,H(this.config.ratio)||Le.call(e),Object.defineProperty(e.media,"quality",{get(){const t=Ae.getSources.call(e).find((t=>t.getAttribute("src")===e.source));return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&M(e.config.quality.onChange))e.config.quality.onChange(t);else{const i=Ae.getSources.call(e).find((e=>Number(e.getAttribute("size"))===t));if(!i)return;const{currentTime:n,paused:r,preload:s,readyState:a,playbackRate:o}=e.media;e.media.src=i.getAttribute("src"),("none"!==s||a)&&(e.once("loadedmetadata",(()=>{e.speed=o,e.currentTime=n,r||be(e.play())})),e.media.load())}ge.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(Z(Ae.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Ie(e,...t){return H(e)?e:e.toString().replace(/{(\d+)}/g,((e,i)=>t[i].toString()))}const Re=(e="",t="",i="")=>e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),i.toString()),De=(e="")=>e.toString().replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()));function Pe(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}const Me={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Oe={get(e="",t={}){if(H(e)||H(t))return"";let i=j(t.i18n,e);if(H(i))return Object.keys(Me).includes(e)?Me[e]:"";const n={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(n).forEach((([e,t])=>{i=Re(i,e,t)})),i}};class Fe{constructor(t){e(this,"get",(e=>{if(!Fe.supported||!this.enabled)return null;const t=window.localStorage.getItem(this.key);if(H(t))return null;const i=JSON.parse(t);return D(e)&&e.length?i[e]:i})),e(this,"set",(e=>{if(!Fe.supported||!this.enabled)return;if(!I(e))return;let t=this.get();H(t)&&(t={}),K(t,e);try{window.localStorage.setItem(this.key,JSON.stringify(t))}catch(e){}})),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}function Ne(e,t="text"){return new Promise(((i,n)=>{try{const n=new XMLHttpRequest;if(!("withCredentials"in n))return;n.addEventListener("load",(()=>{if("text"===t)try{i(JSON.parse(n.responseText))}catch(e){i(n.responseText)}else i(n.response)})),n.addEventListener("error",(()=>{throw new Error(n.status)})),n.open("GET",e,!0),n.responseType=t,n.send()}catch(e){n(e)}}))}function Be(e,t){if(!D(e))return;const i=D(t);let n=!1;const r=()=>null!==document.getElementById(t),s=(e,t)=>{e.innerHTML=t,i&&r()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!r()){const r=Fe.supported,a=document.createElement("div");if(a.setAttribute("hidden",""),i&&a.setAttribute("id",t),r){const e=window.localStorage.getItem(`cache-${t}`);if(n=null!==e,n){const t=JSON.parse(e);s(a,t.content)}}Ne(e).then((e=>{if(!H(e)){if(r)try{window.localStorage.setItem(`cache-${t}`,JSON.stringify({content:e}))}catch(e){}s(a,e)}})).catch((()=>{}))}}const Ue=e=>Math.trunc(e/60/60%60,10);function $e(e=0,t=!1,i=!1){if(!R(e))return $e(void 0,t,i);const n=e=>`0${e}`.slice(-2);let r=Ue(e);const s=(a=e,Math.trunc(a/60%60,10));var a;const o=(e=>Math.trunc(e%60,10))(e);return r=t||r>0?`${r}:`:"",`${i&&e>0?"-":""}${r}${n(s)}:${n(o)}`}const Ge={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,i=e.host!==t||V.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:i}},findElements(){try{return this.elements.controls=oe.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:ae.call(this,this.config.selectors.buttons.play),pause:oe.call(this,this.config.selectors.buttons.pause),restart:oe.call(this,this.config.selectors.buttons.restart),rewind:oe.call(this,this.config.selectors.buttons.rewind),fastForward:oe.call(this,this.config.selectors.buttons.fastForward),mute:oe.call(this,this.config.selectors.buttons.mute),pip:oe.call(this,this.config.selectors.buttons.pip),airplay:oe.call(this,this.config.selectors.buttons.airplay),settings:oe.call(this,this.config.selectors.buttons.settings),captions:oe.call(this,this.config.selectors.buttons.captions),fullscreen:oe.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=oe.call(this,this.config.selectors.progress),this.elements.inputs={seek:oe.call(this,this.config.selectors.inputs.seek),volume:oe.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:oe.call(this,this.config.selectors.display.buffer),currentTime:oe.call(this,this.config.selectors.display.currentTime),duration:oe.call(this,this.config.selectors.display.duration)},N(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const i="http://www.w3.org/2000/svg",n=Ge.getIconUrl.call(this),r=`${n.cors?"":n.url}#${this.config.iconPrefix}`,s=document.createElementNS(i,"svg");W(s,K(t,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(i,"use"),o=`${r}-${e}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),s.appendChild(a),s},createLabel(e,t={}){const i=Oe.get(e,this.config);return X("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},i)},createBadge(e){if(H(e))return null;const t=X("span",{class:this.config.classNames.menu.value});return t.appendChild(X("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const i=K({},t);let n=function(e=""){let t=e.toString();return t=function(e=""){let t=e.toString();return t=Re(t,"-"," "),t=Re(t,"_"," "),t=De(t),Re(t," ","")}(t),t.charAt(0).toLowerCase()+t.slice(1)}(e);const r={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((e=>{Object.keys(i).includes(e)&&(r[e]=i[e],delete i[e])})),"button"!==r.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some((e=>e===this.config.classNames.control))||K(i,{class:`${i.class} ${this.config.classNames.control}`}):i.class=this.config.classNames.control,e){case"play":r.toggle=!0,r.label="play",r.labelPressed="pause",r.icon="play",r.iconPressed="pause";break;case"mute":r.toggle=!0,r.label="mute",r.labelPressed="unmute",r.icon="volume",r.iconPressed="muted";break;case"captions":r.toggle=!0,r.label="enableCaptions",r.labelPressed="disableCaptions",r.icon="captions-off",r.iconPressed="captions-on";break;case"fullscreen":r.toggle=!0,r.label="enterFullscreen",r.labelPressed="exitFullscreen",r.icon="enter-fullscreen",r.iconPressed="exit-fullscreen";break;case"play-large":i.class+=` ${this.config.classNames.control}--overlaid`,n="play",r.label="play",r.icon="play";break;default:H(r.label)&&(r.label=n),H(r.icon)&&(r.icon=e)}const s=X(r.element);return r.toggle?(s.appendChild(Ge.createIcon.call(this,r.iconPressed,{class:"icon--pressed"})),s.appendChild(Ge.createIcon.call(this,r.icon,{class:"icon--not-pressed"})),s.appendChild(Ge.createLabel.call(this,r.labelPressed,{class:"label--pressed"})),s.appendChild(Ge.createLabel.call(this,r.label,{class:"label--not-pressed"}))):(s.appendChild(Ge.createIcon.call(this,r.icon)),s.appendChild(Ge.createLabel.call(this,r.label))),K(i,te(this.config.selectors.buttons[n],i)),W(s,i),"play"===n?(O(this.elements.buttons[n])||(this.elements.buttons[n]=[]),this.elements.buttons[n].push(s)):this.elements.buttons[n]=s,s},createRange(e,t){const i=X("input",K(te(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Oe.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=i,Ge.updateRangeFill.call(this,i),b.setup(i),i},createProgress(e,t){const i=X("progress",K(te(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){i.appendChild(X("span",null,"0"));const t={played:"played",buffer:"buffered"}[e],n=t?Oe.get(t,this.config):"";i.innerText=`% ${n.toLowerCase()}`}return this.elements.display[e]=i,i},createTime(e,t){const i=te(this.config.selectors.display[e],t),n=X("div",K(i,{class:`${i.class?i.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Oe.get(e,this.config)}),"00:00");return this.elements.display[e]=n,n},bindMenuItemShortcuts(e,t){pe.call(this,e,"keydown keyup",(i=>{if(!["Space","ArrowUp","ArrowDown","ArrowRight"].includes(i.key))return;if(i.preventDefault(),i.stopPropagation(),"keydown"===i.type)return;const n=se(e,'[role="menuitemradio"]');if(!n&&["Space","ArrowRight"].includes(i.key))Ge.showMenuPanel.call(this,t,!0);else{let t;"Space"!==i.key&&("ArrowDown"===i.key||n&&"ArrowRight"===i.key?(t=e.nextElementSibling,N(t)||(t=e.parentNode.firstElementChild)):(t=e.previousElementSibling,N(t)||(t=e.parentNode.lastElementChild)),le.call(this,t,!0))}}),!1),pe.call(this,e,"keyup",(e=>{"Return"===e.key&&Ge.focusFirstMenuItem.call(this,null,!0)}))},createMenuItem({value:e,list:t,type:i,title:n,badge:r=null,checked:s=!1}){const a=te(this.config.selectors.inputs[i]),o=X("button",K(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":s,value:e})),l=X("span");l.innerHTML=n,N(r)&&l.appendChild(r),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>"true"===o.getAttribute("aria-checked"),set(e){e&&Array.from(o.parentNode.children).filter((e=>se(e,'[role="menuitemradio"]'))).forEach((e=>e.setAttribute("aria-checked","false"))),o.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(o,"click keyup",(t=>{if(!U(t)||"Space"===t.key){switch(t.preventDefault(),t.stopPropagation(),o.checked=!0,i){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}Ge.showMenuPanel.call(this,"home",U(t))}}),i,!1),Ge.bindMenuItemShortcuts.call(this,o,i),t.appendChild(o)},formatTime(e=0,t=!1){return R(e)?$e(e,Ue(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,i=!1){N(e)&&R(t)&&(e.innerText=Ge.formatTime(t,i))},updateVolume(){this.supported.ui&&(N(this.elements.inputs.volume)&&Ge.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),N(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange(e,t=0){N(e)&&(e.value=t,Ge.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!B(e))return;let t=0;const i=(e,t)=>{const i=R(t)?t:0,n=N(e)?e:this.elements.display.buffer;if(N(n)){n.value=i;const e=n.getElementsByTagName("span")[0];N(e)&&(e.childNodes[0].nodeValue=i)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=this.currentTime,r=this.duration,t=0===n||0===r||Number.isNaN(n)||Number.isNaN(r)?0:(n/r*100).toFixed(2),"timeupdate"===e.type&&Ge.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":i(this.elements.display.buffer,100*this.buffered)}var n,r},updateRangeFill(e){const t=B(e)?e.target:e;if(N(t)&&"range"===t.getAttribute("type")){if(se(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);const e=Ge.formatTime(this.currentTime),i=Ge.formatTime(this.duration),n=Oe.get("seekLabel",this.config);t.setAttribute("aria-valuetext",n.replace("{currentTime}",e).replace("{duration}",i))}else if(se(t,this.config.selectors.inputs.volume)){const e=100*t.value;t.setAttribute("aria-valuenow",e),t.setAttribute("aria-valuetext",`${e.toFixed(1)}%`)}else t.setAttribute("aria-valuenow",t.value);V.isWebkit&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip(e){var t,i;if(!this.config.tooltips.seek||!N(this.elements.inputs.seek)||!N(this.elements.display.seekTooltip)||0===this.duration)return;const n=this.elements.display.seekTooltip,r=`${this.config.classNames.tooltip}--visible`,s=e=>ne(n,r,e);if(this.touch)return void s(!1);let a=0;const o=this.elements.progress.getBoundingClientRect();if(B(e))a=100/o.width*(e.pageX-o.left);else{if(!re(n,r))return;a=parseFloat(n.style.left,10)}a<0?a=0:a>100&&(a=100);const l=this.duration/100*a;n.innerText=Ge.formatTime(l);const c=null===(t=this.config.markers)||void 0===t||null===(i=t.points)||void 0===i?void 0:i.find((({time:e})=>e===Math.round(l)));c&&n.insertAdjacentHTML("afterbegin",`${c.label}<br>`),n.style.left=`${a}%`,B(e)&&["mouseenter","mouseleave"].includes(e.type)&&s("mouseenter"===e.type)},timeUpdate(e){const t=!N(this.elements.display.duration)&&this.config.invertTime;Ge.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||Ge.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return ie(this.elements.display.currentTime,!0),void ie(this.elements.progress,!0);N(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=N(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&Ge.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&Ge.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&Ge.setMarkers.call(this),Ge.updateSeekTooltip.call(this)},toggleMenuButton(e,t){ie(this.elements.settings.buttons[e],!t)},updateSetting(e,t,i){const n=this.elements.settings.panels[e];let r=null,s=t;if("captions"===e)r=this.currentTrack;else{if(r=H(i)?this[e]:i,H(r)&&(r=this.config[e].default),!H(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${e}`);if(!this.config[e].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${e}`)}if(N(s)||(s=n&&n.querySelector('[role="menu"]')),!N(s))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=Ge.getLabel.call(this,e,r);const a=s&&s.querySelector(`[value="${r}"]`);N(a)&&(a.checked=!0)},getLabel(e,t){switch(e){case"speed":return 1===t?Oe.get("normal",this.config):`${t}&times;`;case"quality":if(R(t)){const e=Oe.get(`qualityLabel.${t}`,this.config);return e.length?e:`${t}p`}return De(t);case"captions":return qe.getLabel.call(this);default:return null}},setQualityMenu(e){if(!N(this.elements.settings.panels.quality))return;const t="quality",i=this.elements.settings.panels.quality.querySelector('[role="menu"]');O(e)&&(this.options.quality=_e(e).filter((e=>this.config.quality.options.includes(e))));const n=!H(this.options.quality)&&this.options.quality.length>1;if(Ge.toggleMenuButton.call(this,t,n),J(i),Ge.checkMenu.call(this),!n)return;const r=e=>{const t=Oe.get(`qualityBadge.${e}`,this.config);return t.length?Ge.createBadge.call(this,t):null};this.options.quality.sort(((e,t)=>{const i=this.config.quality.options;return i.indexOf(e)>i.indexOf(t)?1:-1})).forEach((e=>{Ge.createMenuItem.call(this,{value:e,list:i,type:t,title:Ge.getLabel.call(this,"quality",e),badge:r(e)})})),Ge.updateSetting.call(this,t,i)},setCaptionsMenu(){if(!N(this.elements.settings.panels.captions))return;const e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=qe.getTracks.call(this),n=Boolean(i.length);if(Ge.toggleMenuButton.call(this,e,n),J(t),Ge.checkMenu.call(this),!n)return;const r=i.map(((e,i)=>({value:i,checked:this.captions.toggled&&this.currentTrack===i,title:qe.getLabel.call(this,e),badge:e.language&&Ge.createBadge.call(this,e.language.toUpperCase()),list:t,type:"language"})));r.unshift({value:-1,checked:!this.captions.toggled,title:Oe.get("disabled",this.config),list:t,type:"language"}),r.forEach(Ge.createMenuItem.bind(this)),Ge.updateSetting.call(this,e,t)},setSpeedMenu(){if(!N(this.elements.settings.panels.speed))return;const e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((e=>e>=this.minimumSpeed&&e<=this.maximumSpeed));const i=!H(this.options.speed)&&this.options.speed.length>1;Ge.toggleMenuButton.call(this,e,i),J(t),Ge.checkMenu.call(this),i&&(this.options.speed.forEach((i=>{Ge.createMenuItem.call(this,{value:i,list:t,type:e,title:Ge.getLabel.call(this,"speed",i)})})),Ge.updateSetting.call(this,e,t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!H(e)&&Object.values(e).some((e=>!e.hidden));ie(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let i=e;N(i)||(i=Object.values(this.elements.settings.panels).find((e=>!e.hidden)));const n=i.querySelector('[role^="menuitem"]');le.call(this,n,t)},toggleMenu(e){const{popup:t}=this.elements.settings,i=this.elements.buttons.settings;if(!N(t)||!N(i))return;const{hidden:n}=t;let r=n;if(P(e))r=e;else if(U(e)&&"Escape"===e.key)r=!1;else if(B(e)){const n=M(e.composedPath)?e.composedPath()[0]:e.target,s=t.contains(n);if(s||!s&&e.target!==i&&r)return}i.setAttribute("aria-expanded",r),ie(t,!r),ne(this.elements.container,this.config.classNames.menu.open,r),r&&U(e)?Ge.focusFirstMenuItem.call(this,null,!0):r||n||le.call(this,i,U(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);const i=t.scrollWidth,n=t.scrollHeight;return Z(t),{width:i,height:n}},showMenuPanel(e="",t=!1){const i=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!N(i))return;const n=i.parentNode,r=Array.from(n.children).find((e=>!e.hidden));if(de.transitions&&!de.reducedMotion){n.style.width=`${r.scrollWidth}px`,n.style.height=`${r.scrollHeight}px`;const e=Ge.getMenuSize.call(this,i),t=e=>{e.target===n&&["width","height"].includes(e.propertyName)&&(n.style.width="",n.style.height="",fe.call(this,n,z,t))};pe.call(this,n,z,t),n.style.width=`${e.width}px`,n.style.height=`${e.height}px`}ie(r,!0),ie(i,!1),Ge.focusFirstMenuItem.call(this,i,t)},setDownloadUrl(){const e=this.elements.buttons.download;N(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:i,createProgress:n,createRange:r,createTime:s,setQualityMenu:a,setSpeedMenu:o,showMenuPanel:l}=Ge;this.elements.controls=null,O(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));const c=X("div",te(this.config.selectors.controls.wrapper));this.elements.controls=c;const d={class:"plyr__controls__item"};return _e(O(this.config.controls)?this.config.controls:[]).forEach((a=>{if("restart"===a&&c.appendChild(i.call(this,"restart",d)),"rewind"===a&&c.appendChild(i.call(this,"rewind",d)),"play"===a&&c.appendChild(i.call(this,"play",d)),"fast-forward"===a&&c.appendChild(i.call(this,"fast-forward",d)),"progress"===a){const t=X("div",{class:`${d.class} plyr__progress__container`}),i=X("div",te(this.config.selectors.progress));if(i.appendChild(r.call(this,"seek",{id:`plyr-seek-${e.id}`})),i.appendChild(n.call(this,"buffer")),this.config.tooltips.seek){const e=X("span",{class:this.config.classNames.tooltip},"00:00");i.appendChild(e),this.elements.display.seekTooltip=e}this.elements.progress=i,t.appendChild(this.elements.progress),c.appendChild(t)}if("current-time"===a&&c.appendChild(s.call(this,"currentTime",d)),"duration"===a&&c.appendChild(s.call(this,"duration",d)),"mute"===a||"volume"===a){let{volume:t}=this.elements;if(N(t)&&c.contains(t)||(t=X("div",K({},d,{class:`${d.class} plyr__volume`.trim()})),this.elements.volume=t,c.appendChild(t)),"mute"===a&&t.appendChild(i.call(this,"mute")),"volume"===a&&!V.isIos){const i={max:1,step:.05,value:this.config.volume};t.appendChild(r.call(this,"volume",K(i,{id:`plyr-volume-${e.id}`})))}}if("captions"===a&&c.appendChild(i.call(this,"captions",d)),"settings"===a&&!H(this.config.settings)){const n=X("div",K({},d,{class:`${d.class} plyr__menu`.trim(),hidden:""}));n.appendChild(i.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const r=X("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),s=X("div"),a=X("div",{id:`plyr-settings-${e.id}-home`}),o=X("div",{role:"menu"});a.appendChild(o),s.appendChild(a),this.elements.settings.panels.home=a,this.config.settings.forEach((i=>{const n=X("button",K(te(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,n,i),pe.call(this,n,"click",(()=>{l.call(this,i,!1)}));const r=X("span",null,Oe.get(i,this.config)),a=X("span",{class:this.config.classNames.menu.value});a.innerHTML=e[i],r.appendChild(a),n.appendChild(r),o.appendChild(n);const c=X("div",{id:`plyr-settings-${e.id}-${i}`,hidden:""}),d=X("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});d.appendChild(X("span",{"aria-hidden":!0},Oe.get(i,this.config))),d.appendChild(X("span",{class:this.config.classNames.hidden},Oe.get("menuBack",this.config))),pe.call(this,c,"keydown",(e=>{"ArrowLeft"===e.key&&(e.preventDefault(),e.stopPropagation(),l.call(this,"home",!0))}),!1),pe.call(this,d,"click",(()=>{l.call(this,"home",!1)})),c.appendChild(d),c.appendChild(X("div",{role:"menu"})),s.appendChild(c),this.elements.settings.buttons[i]=n,this.elements.settings.panels[i]=c})),r.appendChild(s),n.appendChild(r),c.appendChild(n),this.elements.settings.popup=r,this.elements.settings.menu=n}if("pip"===a&&de.pip&&c.appendChild(i.call(this,"pip",d)),"airplay"===a&&de.airplay&&c.appendChild(i.call(this,"airplay",d)),"download"===a){const e=K({},d,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(e.download="");const{download:t}=this.config.urls;!G(t)&&this.isEmbed&&K(e,{icon:`logo-${this.provider}`,label:this.provider}),c.appendChild(i.call(this,"download",e))}"fullscreen"===a&&c.appendChild(i.call(this,"fullscreen",d))})),this.isHTML5&&a.call(this,Ae.getQualityOptions.call(this)),o.call(this),c},inject(){if(this.config.loadSprite){const e=Ge.getIconUrl.call(this);e.cors&&Be(e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let i,n=!0;if(M(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),N(this.config.controls)||D(this.config.controls)?e=this.config.controls:(e=Ge.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:qe.getLabel.call(this)}),n=!1),n&&D(this.config.controls)&&(e=(e=>{let i=e;return Object.entries(t).forEach((([e,t])=>{i=Re(i,`{${e}}`,t)})),i})(e)),D(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),N(i)||(i=this.elements.container),i[N(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),N(this.elements.controls)||Ge.findElements.call(this),!H(this.elements.buttons)){const e=e=>{const t=this.config.classNames.controlPressed;e.setAttribute("aria-pressed","false"),Object.defineProperty(e,"pressed",{configurable:!0,enumerable:!0,get:()=>re(e,t),set(i=!1){ne(e,t,i),e.setAttribute("aria-pressed",i?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach((t=>{O(t)||F(t)?Array.from(t).filter(Boolean).forEach(e):e(t)}))}if(V.isEdge&&q(i),this.config.tooltips.controls){const{classNames:e,selectors:t}=this.config,i=`${t.controls.wrapper} ${t.labels} .${e.hidden}`,n=ae.call(this,i);Array.from(n).forEach((e=>{ne(e,this.config.classNames.hidden,!1),ne(e,this.config.classNames.tooltip,!0)}))}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(e){}},setMarkers(){var e,t;if(!this.duration||this.elements.markers)return;const i=null===(e=this.config.markers)||void 0===e||null===(t=e.points)||void 0===t?void 0:t.filter((({time:e})=>e>0&&e<this.duration));if(null==i||!i.length)return;const n=document.createDocumentFragment(),r=document.createDocumentFragment();let s=null;const a=`${this.config.classNames.tooltip}--visible`,o=e=>ne(s,a,e);i.forEach((e=>{const t=X("span",{class:this.config.classNames.marker},""),i=e.time/this.duration*100+"%";s&&(t.addEventListener("mouseenter",(()=>{e.label||(s.style.left=i,s.innerHTML=e.label,o(!0))})),t.addEventListener("mouseleave",(()=>{o(!1)}))),t.addEventListener("click",(()=>{this.currentTime=e.time})),t.style.left=i,r.appendChild(t)})),n.appendChild(r),this.config.tooltips.seek||(s=X("span",{class:this.config.classNames.tooltip},""),n.appendChild(s)),this.elements.markers={points:r,tip:s},this.elements.progress.appendChild(n)}};function He(e,t=!0){let i=e;if(t){const e=document.createElement("a");e.href=i,i=e.href}try{return new URL(i)}catch(e){return null}}function ze(e){const t=new URLSearchParams;return I(e)&&Object.entries(e).forEach((([e,i])=>{t.set(e,i)})),t}const qe={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!de.textTracks)return void(O(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ge.setCaptionsMenu.call(this));var e,t;if(N(this.elements.captions)||(this.elements.captions=X("div",te(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),e=this.elements.captions,t=this.elements.wrapper,N(e)&&N(t)&&t.parentNode.insertBefore(e,t.nextSibling)),V.isIE&&window.URL){const e=this.media.querySelectorAll("track");Array.from(e).forEach((e=>{const t=e.getAttribute("src"),i=He(t);null!==i&&i.hostname!==window.location.href.hostname&&["http:","https:"].includes(i.protocol)&&Ne(t,"blob").then((t=>{e.setAttribute("src",window.URL.createObjectURL(t))})).catch((()=>{Z(e)}))}))}const i=_e((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((e=>e.split("-")[0])));let n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===n&&([n]=i);let r=this.storage.get("captions");if(P(r)||({active:r}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:r,language:n,languages:i}),this.isHTML5){const e=this.config.captions.update?"addtrack removetrack":"removetrack";pe.call(this,this.media.textTracks,e,qe.update.bind(this))}setTimeout(qe.update.bind(this),0)},update(){const e=qe.getTracks.call(this,!0),{active:t,language:i,meta:n,currentTrackNode:r}=this.captions,s=Boolean(e.find((e=>e.language===i)));this.isHTML5&&this.isVideo&&e.filter((e=>!n.get(e))).forEach((e=>{this.debug.log("Track added",e),n.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),pe.call(this,e,"cuechange",(()=>qe.updateCues.call(this)))})),(s&&this.language!==i||!e.includes(r))&&(qe.setLanguage.call(this,i),qe.toggle.call(this,t&&s)),this.elements&&ne(this.elements.container,this.config.classNames.captions.enabled,!H(e)),O(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ge.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:i}=this.captions,n=this.config.classNames.captions.active,r=A(e)?!i:e;if(r!==i){if(t||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!t){const e=qe.getTracks.call(this),t=qe.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=t.language,void qe.set.call(this,e.indexOf(t))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),ne(this.elements.container,n,r),this.captions.toggled=r,Ge.updateSetting.call(this,"captions"),ge.call(this,this.media,r?"captionsenabled":"captionsdisabled")}setTimeout((()=>{r&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")}))},set(e,t=!0){const i=qe.getTracks.call(this);if(-1!==e)if(R(e))if(e in i){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const n=i[e],{language:r}=n||{};this.captions.currentTrackNode=n,Ge.updateSetting.call(this,"captions"),t||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),ge.call(this,this.media,"languagechange")}qe.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&qe.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else qe.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!D(e))return void this.debug.warn("Invalid language argument",e);const i=e.toLowerCase();this.captions.language=i;const n=qe.getTracks.call(this),r=qe.findTrack.call(this,[i]);qe.set.call(this,n.indexOf(r),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter((t=>!this.isHTML5||e||this.captions.meta.has(t))).filter((e=>["captions","subtitles"].includes(e.kind)))},findTrack(e,t=!1){const i=qe.getTracks.call(this),n=e=>Number((this.captions.meta.get(e)||{}).default),r=Array.from(i).sort(((e,t)=>n(t)-n(e)));let s;return e.every((e=>(s=r.find((t=>t.language===e)),!s))),s||(t?r[0]:void 0)},getCurrentTrack(){return qe.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!$(t)&&de.textTracks&&this.captions.toggled&&(t=qe.getCurrentTrack.call(this)),$(t)?H(t.label)?H(t.language)?Oe.get("enabled",this.config):e.language.toUpperCase():t.label:Oe.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!N(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!A(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let t=e;if(!t){const e=qe.getCurrentTrack.call(this);t=Array.from((e||{}).activeCues||[]).map((e=>e.getCueAsHTML())).map(Pe)}const i=t.map((e=>e.trim())).join("\n");if(i!==this.elements.captions.innerHTML){J(this.elements.captions);const e=X("span",te(this.config.selectors.caption));e.innerHTML=i,this.elements.captions.appendChild(e),ge.call(this,this.media,"cuechange")}}},Ve={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.3/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},je="picture-in-picture",Ke={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Ye="video",We=()=>{};class Xe{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):We}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):We}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):We}}class Qe{constructor(t){e(this,"onChange",(()=>{if(!this.enabled)return;const e=this.player.elements.buttons.fullscreen;N(e)&&(e.pressed=this.active);const t=this.target===this.player.media?this.target:this.player.elements.container;ge.call(this.player,t,this.active?"enterfullscreen":"exitfullscreen",!0)})),e(this,"toggleFallback",((e=!1)=>{if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",ne(this.target,this.player.config.classNames.fullscreen.fallback,e),V.isIos){let t=document.head.querySelector('meta[name="viewport"]');const i="viewport-fit=cover";t||(t=document.createElement("meta"),t.setAttribute("name","viewport"));const n=D(t.content)&&t.content.includes(i);e?(this.cleanupViewport=!n,n||(t.content+=`,${i}`)):this.cleanupViewport&&(t.content=t.content.split(",").filter((e=>e.trim()!==i)).join(","))}this.onChange()})),e(this,"trapFocus",(e=>{if(V.isIos||!this.active||"Tab"!==e.key)return;const t=document.activeElement,i=ae.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[n]=i,r=i[i.length-1];t!==r||e.shiftKey?t===n&&e.shiftKey&&(r.focus(),e.preventDefault()):(n.focus(),e.preventDefault())})),e(this,"update",(()=>{if(this.enabled){let e;e=this.forceFallback?"Fallback (forced)":Qe.native?"Native":"Fallback",this.player.debug.log(`${e} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");ne(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)})),e(this,"enter",(()=>{this.enabled&&(V.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Qe.native||this.forceFallback?this.toggleFallback(!0):this.prefix?H(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))})),e(this,"exit",(()=>{if(this.enabled)if(V.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),be(this.player.play());else if(!Qe.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!H(this.prefix)){const e="moz"===this.prefix?"Cancel":"Exit";document[`${this.prefix}${e}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),e(this,"toggle",(()=>{this.active?this.exit():this.enter()})),this.player=t,this.prefix=Qe.prefix,this.property=Qe.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&function(e,t){const{prototype:i}=Element;return(i.closest||function(){let e=this;do{if(se.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,t.config.fullscreen.container),pe.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":`${this.prefix}fullscreenchange`,(()=>{this.onChange()})),pe.call(this.player,this.player.elements.container,"dblclick",(e=>{N(this.player.elements.controls)&&this.player.elements.controls.contains(e.target)||this.player.listeners.proxy(e,this.toggle,"fullscreen")})),pe.call(this,this.player.elements.container,"keydown",(e=>this.trapFocus(e))),this.update()}static get native(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get usingNative(){return Qe.native&&!this.forceFallback}static get prefix(){if(M(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some((t=>!(!M(document[`${t}ExitFullscreen`])&&!M(document[`${t}CancelFullScreen`])||(e=t,0)))),e}static get property(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}get enabled(){return(Qe.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}get active(){if(!this.enabled)return!1;if(!Qe.native||this.forceFallback)return re(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return V.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}function Ze(e,t=1){return new Promise(((i,n)=>{const r=new Image,s=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=t?i:n)(r)};Object.assign(r,{onload:s,onerror:s,src:e})}))}const Je={addStyleHook(){ne(this.elements.container,this.config.selectors.container.replace(".",""),!0),ne(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Je.toggleNativeControls.call(this,!0);N(this.elements.controls)||(Ge.inject.call(this),this.listeners.controls()),Je.toggleNativeControls.call(this),this.isHTML5&&qe.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Ge.updateVolume.call(this),Ge.timeUpdate.call(this),Ge.durationUpdate.call(this),Je.checkPlaying.call(this),ne(this.elements.container,this.config.classNames.pip.supported,de.pip&&this.isHTML5&&this.isVideo),ne(this.elements.container,this.config.classNames.airplay.supported,de.airplay&&this.isHTML5),ne(this.elements.container,this.config.classNames.isIos,V.isIos),ne(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((()=>{ge.call(this,this.media,"ready")}),0),Je.setTitle.call(this),this.poster&&Je.setPoster.call(this,this.poster,!1).catch((()=>{})),this.config.duration&&Ge.durationUpdate.call(this),this.config.mediaMetadata&&Ge.setMediaMetadata.call(this)},setTitle(){let e=Oe.get("play",this.config);if(D(this.config.title)&&!H(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach((t=>{t.setAttribute("aria-label",e)})),this.isEmbed){const e=oe.call(this,"iframe");if(!N(e))return;const t=H(this.config.title)?"video":this.config.title,i=Oe.get("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",t))}},togglePoster(e){ne(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),ve.call(this).then((()=>Ze(e))).catch((t=>{throw e===this.poster&&Je.togglePoster.call(this,!1),t})).then((()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),Je.togglePoster.call(this,!0),e))))},checkPlaying(e){ne(this.elements.container,this.config.classNames.playing,this.playing),ne(this.elements.container,this.config.classNames.paused,this.paused),ne(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",Oe.get(this.playing?"pause":"play",this.config))})),B(e)&&"timeupdate"===e.type||Je.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((()=>{ne(this.elements.container,this.config.classNames.loading,this.loading),Je.toggleControls.call(this)}),this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||i))}},migrateStyles(){Object.values({...this.media.style}).filter((e=>!H(e)&&D(e)&&e.startsWith("--plyr"))).forEach((e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)})),H(this.media.style)&&this.media.removeAttribute("style")}};class et{constructor(t){e(this,"firstTouch",(()=>{const{player:e}=this,{elements:t}=e;e.touch=!0,ne(t.container,e.config.classNames.isTouch,!0)})),e(this,"setTabFocus",(e=>{const{player:t}=this,{elements:i}=t,{key:n,type:r,timeStamp:s}=e;if(clearTimeout(this.focusTimer),"keydown"===r&&"Tab"!==n)return;"keydown"===r&&(this.lastKeyDown=s);const a=s-this.lastKeyDown<=20;("focus"!==r||a)&&((()=>{const e=t.config.classNames.tabFocus;ne(ae.call(t,`.${e}`),e,!1)})(),"focusout"!==r&&(this.focusTimer=setTimeout((()=>{const e=document.activeElement;i.container.contains(e)&&ne(document.activeElement,t.config.classNames.tabFocus,!0)}),10)))})),e(this,"global",((e=!0)=>{const{player:t}=this;t.config.keyboard.global&&he.call(t,window,"keydown keyup",this.handleKey,e,!1),he.call(t,document.body,"click",this.toggleMenu,e),me.call(t,document.body,"touchstart",this.firstTouch),he.call(t,document.body,"keydown focus blur focusout",this.setTabFocus,e,!1,!0)})),e(this,"container",(()=>{const{player:e}=this,{config:t,elements:i,timers:n}=e;!t.keyboard.global&&t.keyboard.focused&&pe.call(e,i.container,"keydown keyup",this.handleKey,!1),pe.call(e,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(t=>{const{controls:r}=i;r&&"enterfullscreen"===t.type&&(r.pressed=!1,r.hover=!1);let s=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(Je.toggleControls.call(e,!0),s=e.touch?3e3:2e3),clearTimeout(n.controls),n.controls=setTimeout((()=>Je.toggleControls.call(e,!1)),s)}));const r=()=>{if(!e.isVimeo||e.config.vimeo.premium)return;const t=i.wrapper,{active:n}=e.fullscreen,[r,s]=Se.call(e),a=we(`aspect-ratio: ${r} / ${s}`);if(!n)return void(a?(t.style.width=null,t.style.height=null):(t.style.maxWidth=null,t.style.margin=null));const[o,l]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],c=o/l>r/s;a?(t.style.width=c?"auto":"100%",t.style.height=c?"100%":"auto"):(t.style.maxWidth=c?l/s*r+"px":null,t.style.margin=c?"0 auto":null)},s=()=>{clearTimeout(n.resized),n.resized=setTimeout(r,50)};pe.call(e,i.container,"enterfullscreen exitfullscreen",(t=>{const{target:n}=e.fullscreen;n===i.container&&(!e.isEmbed&&H(e.config.ratio)||(r(),("enterfullscreen"===t.type?pe:fe).call(e,window,"resize",s)))}))})),e(this,"media",(()=>{const{player:e}=this,{elements:t}=e;if(pe.call(e,e.media,"timeupdate seeking seeked",(t=>Ge.timeUpdate.call(e,t))),pe.call(e,e.media,"durationchange loadeddata loadedmetadata",(t=>Ge.durationUpdate.call(e,t))),pe.call(e,e.media,"ended",(()=>{e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())})),pe.call(e,e.media,"progress playing seeking seeked",(t=>Ge.updateProgress.call(e,t))),pe.call(e,e.media,"volumechange",(t=>Ge.updateVolume.call(e,t))),pe.call(e,e.media,"playing play pause ended emptied timeupdate",(t=>Je.checkPlaying.call(e,t))),pe.call(e,e.media,"waiting canplay seeked playing",(t=>Je.checkLoading.call(e,t))),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){const i=oe.call(e,`.${e.config.classNames.video}`);if(!N(i))return;pe.call(e,t.container,"click",(n=>{([t.container,i].includes(n.target)||i.contains(n.target))&&(e.touch&&e.config.hideControls||(e.ended?(this.proxy(n,e.restart,"restart"),this.proxy(n,(()=>{be(e.play())}),"play")):this.proxy(n,(()=>{be(e.togglePlay())}),"play")))}))}e.supported.ui&&e.config.disableContextMenu&&pe.call(e,t.wrapper,"contextmenu",(e=>{e.preventDefault()}),!1),pe.call(e,e.media,"volumechange",(()=>{e.storage.set({volume:e.volume,muted:e.muted})})),pe.call(e,e.media,"ratechange",(()=>{Ge.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})})),pe.call(e,e.media,"qualitychange",(t=>{Ge.updateSetting.call(e,"quality",null,t.detail.quality)})),pe.call(e,e.media,"ready qualitychange",(()=>{Ge.setDownloadUrl.call(e)}));const i=e.config.events.concat(["keyup","keydown"]).join(" ");pe.call(e,e.media,i,(i=>{let{detail:n={}}=i;"error"===i.type&&(n=e.media.error),ge.call(e,t.container,i.type,!0,n)}))})),e(this,"proxy",((e,t,i)=>{const{player:n}=this,r=n.config.listeners[i];let s=!0;M(r)&&(s=r.call(n,e)),!1!==s&&M(t)&&t.call(n,e)})),e(this,"bind",((e,t,i,n,r=!0)=>{const{player:s}=this,a=s.config.listeners[n],o=M(a);pe.call(s,e,t,(e=>this.proxy(e,i,n)),r&&!o)})),e(this,"controls",(()=>{const{player:e}=this,{elements:t}=e,i=V.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach((t=>{this.bind(t,"click",(()=>{be(e.togglePlay())}),"play")})),this.bind(t.buttons.restart,"click",e.restart,"restart"),this.bind(t.buttons.rewind,"click",(()=>{e.lastSeekTime=Date.now(),e.rewind()}),"rewind"),this.bind(t.buttons.fastForward,"click",(()=>{e.lastSeekTime=Date.now(),e.forward()}),"fastForward"),this.bind(t.buttons.mute,"click",(()=>{e.muted=!e.muted}),"mute"),this.bind(t.buttons.captions,"click",(()=>e.toggleCaptions())),this.bind(t.buttons.download,"click",(()=>{ge.call(e,e.media,"download")}),"download"),this.bind(t.buttons.fullscreen,"click",(()=>{e.fullscreen.toggle()}),"fullscreen"),this.bind(t.buttons.pip,"click",(()=>{e.pip="toggle"}),"pip"),this.bind(t.buttons.airplay,"click",e.airplay,"airplay"),this.bind(t.buttons.settings,"click",(t=>{t.stopPropagation(),t.preventDefault(),Ge.toggleMenu.call(e,t)}),null,!1),this.bind(t.buttons.settings,"keyup",(t=>{["Space","Enter"].includes(t.key)&&("Enter"!==t.key?(t.preventDefault(),t.stopPropagation(),Ge.toggleMenu.call(e,t)):Ge.focusFirstMenuItem.call(e,null,!0))}),null,!1),this.bind(t.settings.menu,"keydown",(t=>{"Escape"===t.key&&Ge.toggleMenu.call(e,t)})),this.bind(t.inputs.seek,"mousedown mousemove",(e=>{const i=t.progress.getBoundingClientRect(),n=100/i.width*(e.pageX-i.left);e.currentTarget.setAttribute("seek-value",n)})),this.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(t=>{const i=t.currentTarget,n="play-on-seeked";if(U(t)&&!["ArrowLeft","ArrowRight"].includes(t.key))return;e.lastSeekTime=Date.now();const r=i.hasAttribute(n),s=["mouseup","touchend","keyup"].includes(t.type);r&&s?(i.removeAttribute(n),be(e.play())):!s&&e.playing&&(i.setAttribute(n,""),e.pause())})),V.isIos){const t=ae.call(e,'input[type="range"]');Array.from(t).forEach((e=>this.bind(e,i,(e=>q(e.target)))))}this.bind(t.inputs.seek,i,(t=>{const i=t.currentTarget;let n=i.getAttribute("seek-value");H(n)&&(n=i.value),i.removeAttribute("seek-value"),e.currentTime=n/i.max*e.duration}),"seek"),this.bind(t.progress,"mouseenter mouseleave mousemove",(t=>Ge.updateSeekTooltip.call(e,t))),this.bind(t.progress,"mousemove touchmove",(t=>{const{previewThumbnails:i}=e;i&&i.loaded&&i.startMove(t)})),this.bind(t.progress,"mouseleave touchend click",(()=>{const{previewThumbnails:t}=e;t&&t.loaded&&t.endMove(!1,!0)})),this.bind(t.progress,"mousedown touchstart",(t=>{const{previewThumbnails:i}=e;i&&i.loaded&&i.startScrubbing(t)})),this.bind(t.progress,"mouseup touchend",(t=>{const{previewThumbnails:i}=e;i&&i.loaded&&i.endScrubbing(t)})),V.isWebkit&&Array.from(ae.call(e,'input[type="range"]')).forEach((t=>{this.bind(t,"input",(t=>Ge.updateRangeFill.call(e,t.target)))})),e.config.toggleInvert&&!N(t.display.duration)&&this.bind(t.display.currentTime,"click",(()=>{0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,Ge.timeUpdate.call(e))})),this.bind(t.inputs.volume,i,(t=>{e.volume=t.target.value}),"volume"),this.bind(t.controls,"mouseenter mouseleave",(i=>{t.controls.hover=!e.touch&&"mouseenter"===i.type})),t.fullscreen&&Array.from(t.fullscreen.children).filter((e=>!e.contains(t.container))).forEach((i=>{this.bind(i,"mouseenter mouseleave",(i=>{t.controls&&(t.controls.hover=!e.touch&&"mouseenter"===i.type)}))})),this.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",(e=>{t.controls.pressed=["mousedown","touchstart"].includes(e.type)})),this.bind(t.controls,"focusin",(()=>{const{config:i,timers:n}=e;ne(t.controls,i.classNames.noTransition,!0),Je.toggleControls.call(e,!0),setTimeout((()=>{ne(t.controls,i.classNames.noTransition,!1)}),0);const r=this.touch?3e3:4e3;clearTimeout(n.controls),n.controls=setTimeout((()=>Je.toggleControls.call(e,!1)),r)})),this.bind(t.inputs.volume,"wheel",(t=>{const i=t.webkitDirectionInvertedFromDevice,[n,r]=[t.deltaX,-t.deltaY].map((e=>i?-e:e)),s=Math.sign(Math.abs(n)>Math.abs(r)?n:r);e.increaseVolume(s/50);const{volume:a}=e.media;(1===s&&a<1||-1===s&&a>0)&&t.preventDefault()}),"volume",!1)})),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:i}=t,{key:n,type:r,altKey:s,ctrlKey:a,metaKey:o,shiftKey:l}=e,c="keydown"===r,d=c&&n===this.lastKey;var u;if(!(s||a||o||l)&&n)if(c){const r=document.activeElement;if(N(r)){const{editable:n}=t.config.selectors,{seek:s}=i.inputs;if(r!==s&&se(r,n))return;if("Space"===e.key&&se(r,'button, [role^="menuitem"]'))return}switch(["Space","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(n)&&(e.preventDefault(),e.stopPropagation()),n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(u=parseInt(n,10),t.currentTime=t.duration/10*u);break;case"Space":case"k":d||be(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":d||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":d||t.toggleCaptions();break;case"l":t.loop=!t.loop}"Escape"===n&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=n}else this.lastKey=null}toggleMenu(e){Ge.toggleMenu.call(this.player,e)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self&&self;var tt=function(e,t){return function(e,t){e.exports=function(){var e=function(){},t={},i={},n={};function r(e,t){e=e.push?e:[e];var r,s,a,o=[],l=e.length,c=l;for(r=function(e,i){i.length&&o.push(e),--c||t(o)};l--;)s=e[l],(a=i[s])?r(s,a):(n[s]=n[s]||[]).push(r)}function s(e,t){if(e){var r=n[e];if(i[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function a(t,i){t.call&&(t={success:t}),i.length?(t.error||e)(i):(t.success||e)(t)}function o(t,i,n,r){var s,a,l=document,c=n.async,d=(n.numRetries||0)+1,u=n.before||e,h=t.replace(/[\?|#].*$/,""),p=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(h)?((a=l.createElement("link")).rel="stylesheet",a.href=p,(s="hideFocus"in a)&&a.relList&&(s=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(a=l.createElement("img")).src=p:((a=l.createElement("script")).src=t,a.async=void 0===c||c),a.onload=a.onerror=a.onbeforeload=function(e){var l=e.type[0];if(s)try{a.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<d)return o(t,i,n,r)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";i(t,l,e.defaultPrevented)},!1!==u(t,a)&&l.head.appendChild(a)}function l(e,t,i){var n,r,s=(e=e.push?e:[e]).length,a=s,l=[];for(n=function(e,i,n){if("e"==i&&l.push(e),"b"==i){if(!n)return;l.push(e)}--s||t(l)},r=0;r<a;r++)o(e[r],n,i)}function c(e,i,n){var r,o;if(i&&i.trim&&(r=i),o=(r?n:i)||{},r){if(r in t)throw"LoadJS";t[r]=!0}function c(t,i){l(e,(function(e){a(o,e),t&&a({success:t,error:i},e),s(r,e)}),o)}if(o.returnPromise)return new Promise(c);c()}return c.ready=function(e,t){return r(e,(function(e){a(t,e)})),c},c.done=function(e){s(e,[])},c.reset=function(){t={},i={},n={}},c.isDefined=function(e){return e in t},c}()}(t={exports:{}}),t.exports}();function it(e){return new Promise(((t,i)=>{tt(e,{success:t,error:i})}))}function nt(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,ge.call(this,this.media,e?"play":"pause"))}const rt={setup(){const e=this;ne(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Le.call(e),I(window.Vimeo)?rt.ready.call(e):it(e.config.urls.vimeo.sdk).then((()=>{rt.ready.call(e)})).catch((t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready(){const e=this,t=e.config.vimeo,{premium:i,referrerPolicy:n,...r}=t;let s=e.media.getAttribute("src"),a="";H(s)?(s=e.media.getAttribute(e.config.attributes.embed.id),a=e.media.getAttribute(e.config.attributes.embed.hash)):a=function(e){const t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&5===t.length?t[4]:null}(s);const o=a?{h:a}:{};i&&Object.assign(r,{controls:!1,sidedock:!1});const l=ze({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative,...o,...r}),c=H(d=s)?null:R(Number(d))?d:d.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:d;var d;const u=X("iframe"),h=Ie(e.config.urls.vimeo.iframe,c,l);if(u.setAttribute("src",h),u.setAttribute("allowfullscreen",""),u.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),H(n)||u.setAttribute("referrerPolicy",n),i||!t.customControls)u.setAttribute("data-poster",e.poster),e.media=ee(u,e.media);else{const t=X("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});t.appendChild(u),e.media=ee(t,e.media)}t.customControls||Ne(Ie(e.config.urls.vimeo.api,h)).then((t=>{!H(t)&&t.thumbnail_url&&Je.setPoster.call(e,t.thumbnail_url).catch((()=>{}))})),e.embed=new window.Vimeo.Player(u,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(nt.call(e,!0),e.embed.play()),e.media.pause=()=>(nt.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:p}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>p,set(t){const{embed:i,media:n,paused:r,volume:s}=e,a=r&&!i.hasPlayed;n.seeking=!0,ge.call(e,n,"seeking"),Promise.resolve(a&&i.setVolume(0)).then((()=>i.setCurrentTime(t))).then((()=>a&&i.pause())).then((()=>a&&i.setVolume(s))).catch((()=>{}))}});let f=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>f,set(t){e.embed.setPlaybackRate(t).then((()=>{f=t,ge.call(e,e.media,"ratechange")})).catch((()=>{e.options.speed=[1]}))}});let{volume:m}=e.config;Object.defineProperty(e.media,"volume",{get:()=>m,set(t){e.embed.setVolume(t).then((()=>{m=t,ge.call(e,e.media,"volumechange")}))}});let{muted:g}=e.config;Object.defineProperty(e.media,"muted",{get:()=>g,set(t){const i=!!P(t)&&t;e.embed.setVolume(i?0:e.config.volume).then((()=>{g=i,ge.call(e,e.media,"volumechange")}))}});let y,{loop:v}=e.config;Object.defineProperty(e.media,"loop",{get:()=>v,set(t){const i=P(t)?t:e.config.loop.active;e.embed.setLoop(i).then((()=>{v=i}))}}),e.embed.getVideoUrl().then((t=>{y=t,Ge.setDownloadUrl.call(e)})).catch((e=>{this.debug.warn(e)})),Object.defineProperty(e.media,"currentSrc",{get:()=>y}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then((t=>{const[i,n]=t;e.embed.ratio=Ce(i,n),Le.call(this)})),e.embed.setAutopause(e.config.autopause).then((t=>{e.config.autopause=t})),e.embed.getVideoTitle().then((t=>{e.config.title=t,Je.setTitle.call(this)})),e.embed.getCurrentTime().then((t=>{p=t,ge.call(e,e.media,"timeupdate")})),e.embed.getDuration().then((t=>{e.media.duration=t,ge.call(e,e.media,"durationchange")})),e.embed.getTextTracks().then((t=>{e.media.textTracks=t,qe.setup.call(e)})),e.embed.on("cuechange",(({cues:t=[]})=>{const i=t.map((e=>function(e){const t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.innerHTML=e,t.firstChild.innerText}(e.text)));qe.updateCues.call(e,i)})),e.embed.on("loaded",(()=>{e.embed.getPaused().then((t=>{nt.call(e,!t),t||ge.call(e,e.media,"playing")})),N(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)})),e.embed.on("bufferstart",(()=>{ge.call(e,e.media,"waiting")})),e.embed.on("bufferend",(()=>{ge.call(e,e.media,"playing")})),e.embed.on("play",(()=>{nt.call(e,!0),ge.call(e,e.media,"playing")})),e.embed.on("pause",(()=>{nt.call(e,!1)})),e.embed.on("timeupdate",(t=>{e.media.seeking=!1,p=t.seconds,ge.call(e,e.media,"timeupdate")})),e.embed.on("progress",(t=>{e.media.buffered=t.percent,ge.call(e,e.media,"progress"),1===parseInt(t.percent,10)&&ge.call(e,e.media,"canplaythrough"),e.embed.getDuration().then((t=>{t!==e.media.duration&&(e.media.duration=t,ge.call(e,e.media,"durationchange"))}))})),e.embed.on("seeked",(()=>{e.media.seeking=!1,ge.call(e,e.media,"seeked")})),e.embed.on("ended",(()=>{e.media.paused=!0,ge.call(e,e.media,"ended")})),e.embed.on("error",(t=>{e.media.error=t,ge.call(e,e.media,"error")})),t.customControls&&setTimeout((()=>Je.build.call(e)),0)}};function st(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,ge.call(this,this.media,e?"play":"pause"))}function at(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}const ot={setup(){if(ne(this.elements.wrapper,this.config.classNames.embed,!0),I(window.YT)&&M(window.YT.Player))ot.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{M(e)&&e(),ot.ready.call(this)},it(this.config.urls.youtube.sdk).catch((e=>{this.debug.warn("YouTube API failed to load",e)}))}},getTitle(e){Ne(Ie(this.config.urls.youtube.api,e)).then((e=>{if(I(e)){const{title:t,height:i,width:n}=e;this.config.title=t,Je.setTitle.call(this),this.embed.ratio=Ce(n,i)}Le.call(this)})).catch((()=>{Le.call(this)}))},ready(){const e=this,t=e.config.youtube,i=e.media&&e.media.getAttribute("id");if(!H(i)&&i.startsWith("youtube-"))return;let n=e.media.getAttribute("src");H(n)&&(n=e.media.getAttribute(this.config.attributes.embed.id));const r=H(s=n)?null:s.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:s;var s;const a=X("div",{id:`${e.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":t.customControls?e.poster:void 0});if(e.media=ee(a,e.media),t.customControls){const t=e=>`https://i.ytimg.com/vi/${r}/${e}default.jpg`;Ze(t("maxres"),121).catch((()=>Ze(t("sd"),121))).catch((()=>Ze(t("hq")))).then((t=>Je.setPoster.call(e,t.src))).then((t=>{t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((()=>{}))}e.embed=new window.YT.Player(e.media,{videoId:r,host:at(t),playerVars:K({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError(t){if(!e.media.error){const i=t.data,n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[i]||"An unknown error occured";e.media.error={code:i,message:n},ge.call(e,e.media,"error")}},onPlaybackRateChange(t){const i=t.target;e.media.playbackRate=i.getPlaybackRate(),ge.call(e,e.media,"ratechange")},onReady(i){if(M(e.media.play))return;const n=i.target;ot.getTitle.call(e,r),e.media.play=()=>{st.call(e,!0),n.playVideo()},e.media.pause=()=>{st.call(e,!1),n.pauseVideo()},e.media.stop=()=>{n.stopVideo()},e.media.duration=n.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(n.getCurrentTime()),set(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,ge.call(e,e.media,"seeking"),n.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>n.getPlaybackRate(),set(e){n.setPlaybackRate(e)}});let{volume:s}=e.config;Object.defineProperty(e.media,"volume",{get:()=>s,set(t){s=t,n.setVolume(100*s),ge.call(e,e.media,"volumechange")}});let{muted:a}=e.config;Object.defineProperty(e.media,"muted",{get:()=>a,set(t){const i=P(t)?t:a;a=i,n[i?"mute":"unMute"](),n.setVolume(100*s),ge.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>n.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const o=n.getAvailablePlaybackRates();e.options.speed=o.filter((t=>e.config.speed.options.includes(t))),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),ge.call(e,e.media,"timeupdate"),ge.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((()=>{e.media.buffered=n.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&ge.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),ge.call(e,e.media,"canplaythrough"))}),200),t.customControls&&setTimeout((()=>Je.build.call(e)),50)},onStateChange(i){const n=i.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(i.data)&&(e.media.seeking=!1,ge.call(e,e.media,"seeked")),i.data){case-1:ge.call(e,e.media,"timeupdate"),e.media.buffered=n.getVideoLoadedFraction(),ge.call(e,e.media,"progress");break;case 0:st.call(e,!1),e.media.loop?(n.stopVideo(),n.playVideo()):ge.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(st.call(e,!0),ge.call(e,e.media,"playing"),e.timers.playing=setInterval((()=>{ge.call(e,e.media,"timeupdate")}),50),e.media.duration!==n.getDuration()&&(e.media.duration=n.getDuration(),ge.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),st.call(e,!1);break;case 3:ge.call(e,e.media,"waiting")}ge.call(e,e.elements.container,"statechange",!1,{code:i.data})}}})}},lt={setup(){this.media?(ne(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ne(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ne(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=X("div",{class:this.config.classNames.video}),Y(this.media,this.elements.wrapper),this.elements.poster=X("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Ae.setup.call(this):this.isYouTube?ot.setup.call(this):this.isVimeo&&rt.setup.call(this)):this.debug.warn("No media element found!")}};class ct{constructor(t){e(this,"load",(()=>{this.enabled&&(I(window.google)&&I(window.google.ima)?this.ready():it(this.player.config.urls.googleIMA.sdk).then((()=>{this.ready()})).catch((()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))})))})),e(this,"ready",(()=>{var e;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((()=>{this.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()})),e(this,"setupIMA",(()=>{this.elements.container=X("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(e=>this.onAdsManagerLoaded(e)),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>this.onAdError(e)),!1),this.requestAds()})),e(this,"requestAds",(()=>{const{container:e}=this.player.elements;try{const t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}})),e(this,"pollCountdown",((e=!1)=>{if(!e)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval((()=>{const e=$e(Math.max(this.manager.getRemainingTime(),0)),t=`${Oe.get("advertisement",this.player.config)} - ${e}`;this.elements.container.setAttribute("data-badge-text",t)}),100)})),e(this,"onAdsManagerLoaded",(e=>{if(!this.enabled)return;const t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.manager=e.getAdsManager(this.player,t),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>this.onAdError(e))),Object.keys(google.ima.AdEvent.Type).forEach((e=>{this.manager.addEventListener(google.ima.AdEvent.Type[e],(e=>this.onAdEvent(e)))})),this.trigger("loaded")})),e(this,"addCuePoints",(()=>{H(this.cuePoints)||this.cuePoints.forEach((e=>{if(0!==e&&-1!==e&&e<this.player.duration){const t=this.player.elements.progress;if(N(t)){const i=100/this.player.duration*e,n=X("span",{class:this.player.config.classNames.cues});n.style.left=`${i.toString()}%`,t.appendChild(n)}}}))})),e(this,"onAdEvent",(e=>{const{container:t}=this.player.elements,i=e.getAd(),n=e.getAdData();switch((e=>{ge.call(this.player,this.player.media,`ads${e.replace(/_/g,"").toLowerCase()}`)})(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=t.offsetWidth,i.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:n.adError&&this.player.debug.warn(`Non-fatal ad error: ${n.adError.getMessage()}`)}})),e(this,"onAdError",(e=>{this.cancel(),this.player.debug.warn("Ads error",e)})),e(this,"listeners",(()=>{const{container:e}=this.player.elements;let t;this.player.on("canplay",(()=>{this.addCuePoints()})),this.player.on("ended",(()=>{this.loader.contentComplete()})),this.player.on("timeupdate",(()=>{t=this.player.currentTime})),this.player.on("seeked",(()=>{const e=this.player.currentTime;H(this.cuePoints)||this.cuePoints.forEach(((i,n)=>{t<i&&i<e&&(this.manager.discardAdBreak(),this.cuePoints.splice(n,1))}))})),window.addEventListener("resize",(()=>{this.manager&&this.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)}))})),e(this,"play",(()=>{const{container:e}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then((()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(e){this.onAdError(e)}})).catch((()=>{}))})),e(this,"resumeContent",(()=>{this.elements.container.style.zIndex="",this.playing=!1,be(this.player.media.play())})),e(this,"pauseContent",(()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()})),e(this,"cancel",(()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()})),e(this,"loadAds",(()=>{this.managerPromise.then((()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise((e=>{this.on("loaded",e),this.player.debug.log(this.manager)})),this.initialized=!1,this.requestAds()})).catch((()=>{}))})),e(this,"trigger",((e,...t)=>{const i=this.events[e];O(i)&&i.forEach((e=>{M(e)&&e.apply(this,t)}))})),e(this,"on",((e,t)=>(O(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this))),e(this,"startSafetyTimer",((e,t)=>{this.player.debug.log(`Safety timer invoked from: ${t}`),this.safetyTimer=setTimeout((()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")}),e)})),e(this,"clearSafetyTimer",(e=>{A(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${e}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)})),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(((e,t)=>{this.on("loaded",e),this.on("error",t)})),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!H(e.publisherId)||G(e.tagUrl))}get tagUrl(){const{config:e}=this;return G(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${ze({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function dt(e=0,t=0,i=255){return Math.min(Math.max(e,t),i)}const ut=e=>{const t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach((e=>{const i={};e.split(/\r\n|\n|\r/).forEach((e=>{if(R(i.startTime)){if(!H(e.trim())&&H(i.text)){const t=e.trim().split("#xywh=");[i.text]=t,t[1]&&([i.x,i.y,i.w,i.h]=t[1].split(","))}}else{const t=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);t&&(i.startTime=60*Number(t[1]||0)*60+60*Number(t[2])+Number(t[3])+Number(`0.${t[4]}`),i.endTime=60*Number(t[6]||0)*60+60*Number(t[7])+Number(t[8])+Number(`0.${t[9]}`))}})),i.text&&t.push(i)})),t},ht=(e,t)=>{const i={};return e>t.width/t.height?(i.width=t.width,i.height=1/e*t.width):(i.height=t.height,i.width=e*t.height),i};class pt{constructor(t){e(this,"load",(()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0)}))})),e(this,"getThumbnails",(()=>new Promise((e=>{const{src:t}=this.player.config.previewThumbnails;if(H(t))throw new Error("Missing previewThumbnails.src config attribute");const i=()=>{this.thumbnails.sort(((e,t)=>e.height-t.height)),this.player.debug.log("Preview thumbnails",this.thumbnails),e()};if(M(t))t((e=>{this.thumbnails=e,i()}));else{const e=(D(t)?[t]:t).map((e=>this.getThumbnail(e)));Promise.all(e).then(i)}})))),e(this,"getThumbnail",(e=>new Promise((t=>{Ne(e).then((i=>{const n={frames:ut(i),height:null,urlPrefix:""};n.frames[0].text.startsWith("/")||n.frames[0].text.startsWith("http://")||n.frames[0].text.startsWith("https://")||(n.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));const r=new Image;r.onload=()=>{n.height=r.naturalHeight,n.width=r.naturalWidth,this.thumbnails.push(n),t()},r.src=n.urlPrefix+n.frames[0].text}))})))),e(this,"startMove",(e=>{if(this.loaded&&B(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t,i;const n=this.player.elements.progress.getBoundingClientRect(),r=100/n.width*(e.pageX-n.left);this.seekTime=this.player.media.duration*(r/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=$e(this.seekTime);const s=null===(t=this.player.config.markers)||void 0===t||null===(i=t.points)||void 0===i?void 0:i.find((({time:e})=>e===Math.round(this.seekTime)));s&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${s.label}<br>`)}this.showImageAtCurrentTime()}})),e(this,"endMove",(()=>{this.toggleThumbContainer(!1,!0)})),e(this,"startScrubbing",(e=>{(A(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))})),e(this,"endScrubbing",(()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):me.call(this.player,this.player.media,"timeupdate",(()=>{this.mouseDown||this.toggleScrubbingContainer(!1)}))})),e(this,"listeners",(()=>{this.player.on("play",(()=>{this.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(()=>{this.toggleThumbContainer(!1)})),this.player.on("timeupdate",(()=>{this.lastTime=this.player.media.currentTime}))})),e(this,"render",(()=>{this.elements.thumb.container=X("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=X("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const e=X("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=X("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(e),N(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=X("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)})),e(this,"destroy",(()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()})),e(this,"showImageAtCurrentTime",(()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const e=this.thumbnails[0].frames.findIndex((e=>this.seekTime>=e.startTime&&this.seekTime<=e.endTime)),t=e>=0;let i=0;this.mouseDown||this.toggleThumbContainer(t),t&&(this.thumbnails.forEach(((t,n)=>{this.loadedImages.includes(t.frames[e].text)&&(i=n)})),e!==this.showingThumb&&(this.showingThumb=e,this.loadImage(i)))})),e(this,"loadImage",((e=0)=>{const t=this.showingThumb,i=this.thumbnails[e],{urlPrefix:n}=i,r=i.frames[t],s=i.frames[t].text,a=n+s;if(this.currentImageElement&&this.currentImageElement.dataset.filename===s)this.showImage(this.currentImageElement,r,e,t,s,!1),this.currentImageElement.dataset.index=t,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const i=new Image;i.src=a,i.dataset.index=t,i.dataset.filename=s,this.showingThumbFilename=s,this.player.debug.log(`Loading image: ${a}`),i.onload=()=>this.showImage(i,r,e,t,s,!0),this.loadingImage=i,this.removeOldImages(i)}})),e(this,"showImage",((e,t,i,n,r,s=!0)=>{this.player.debug.log(`Showing thumb: ${r}. num: ${n}. qual: ${i}. newimg: ${s}`),this.setImageSizeAndOffset(e,t),s&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(n,!0).then(this.preloadNearby(n,!1)).then(this.getHigherQuality(i,e,t,r))})),e(this,"removeOldImages",(e=>{Array.from(this.currentImageContainer.children).forEach((t=>{if("img"!==t.tagName.toLowerCase())return;const i=this.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;const{currentImageContainer:e}=this;setTimeout((()=>{e.removeChild(t),this.player.debug.log(`Removing thumb: ${t.dataset.filename}`)}),i)}}))})),e(this,"preloadNearby",((e,t=!0)=>new Promise((i=>{setTimeout((()=>{const n=this.thumbnails[0].frames[e].text;if(this.showingThumbFilename===n){let r;r=t?this.thumbnails[0].frames.slice(e):this.thumbnails[0].frames.slice(0,e).reverse();let s=!1;r.forEach((e=>{const t=e.text;if(t!==n&&!this.loadedImages.includes(t)){s=!0,this.player.debug.log(`Preloading thumb filename: ${t}`);const{urlPrefix:e}=this.thumbnails[0],n=e+t,r=new Image;r.src=n,r.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${t}`),this.loadedImages.includes(t)||this.loadedImages.push(t),i()}}})),s||i()}}),300)})))),e(this,"getHigherQuality",((e,t,i,n)=>{if(e<this.thumbnails.length-1){let r=t.naturalHeight;this.usingSprites&&(r=i.h),r<this.thumbContainerHeight&&setTimeout((()=>{this.showingThumbFilename===n&&(this.player.debug.log(`Showing higher quality thumb for: ${n}`),this.loadImage(e+1))}),300)}})),e(this,"toggleThumbContainer",((e=!1,t=!1)=>{const i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)})),e(this,"toggleScrubbingContainer",((e=!1)=>{const t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)})),e(this,"determineContainerAutoSizing",(()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)})),e(this,"setThumbContainerSizeAndPos",(()=>{const{imageContainer:e}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(e.clientHeight>20&&e.clientWidth<20){const t=Math.floor(e.clientHeight*this.thumbAspectRatio);e.style.width=`${t}px`}else if(e.clientHeight<20&&e.clientWidth>20){const t=Math.floor(e.clientWidth/this.thumbAspectRatio);e.style.height=`${t}px`}}else{const t=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);e.style.height=`${this.thumbContainerHeight}px`,e.style.width=`${t}px`}this.setThumbContainerPos()})),e(this,"setThumbContainerPos",(()=>{const e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),{container:i}=this.elements.thumb,n=t.left-e.left+10,r=t.right-e.left-i.clientWidth-10,s=this.mousePosX-e.left-i.clientWidth/2,a=dt(s,n,r);i.style.left=`${a}px`,i.style.setProperty("--preview-arrow-offset",s-a+"px")})),e(this,"setScrubbingContainerSize",(()=>{const{width:e,height:t}=ht(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${e}px`,this.elements.scrubbing.container.style.height=`${t}px`})),e(this,"setImageSizeAndOffset",((e,t)=>{if(!this.usingSprites)return;const i=this.thumbContainerHeight/t.h;e.style.height=e.naturalHeight*i+"px",e.style.width=e.naturalWidth*i+"px",e.style.left=`-${t.x*i}px`,e.style.top=`-${t.y*i}px`})),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=ht(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const ft={insertElements(e,t){D(t)?Q(e,this.media,{src:t}):O(t)&&t.forEach((t=>{Q(e,this.media,t)}))},change(e){j(e,"sources.length")?(Ae.cancelRequests.call(this),this.destroy.call(this,(()=>{this.options.quality=[],Z(this.media),this.media=null,N(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:t,type:i}=e,[{provider:n=Ke.html5,src:r}]=t,s="html5"===n?i:"div",a="html5"===n?{}:{src:r};Object.assign(this,{provider:n,type:i,supported:de.check(i,n,this.config.playsinline),media:X(s,a)}),this.elements.container.appendChild(this.media),P(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),H(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Je.addStyleHook.call(this),this.isHTML5&&ft.insertElements.call(this,"source",t),this.config.title=e.title,lt.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&ft.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Je.build.call(this),this.isHTML5&&this.media.load(),H(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new pt(this))),this.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}};class mt{constructor(t,i){if(e(this,"play",(()=>M(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((()=>this.ads.play())).catch((()=>be(this.media.play()))),this.media.play()):null)),e(this,"pause",(()=>this.playing&&M(this.media.pause)?this.media.pause():null)),e(this,"togglePlay",(e=>(P(e)?e:!this.playing)?this.play():this.pause())),e(this,"stop",(()=>{this.isHTML5?(this.pause(),this.restart()):M(this.media.stop)&&this.media.stop()})),e(this,"restart",(()=>{this.currentTime=0})),e(this,"rewind",(e=>{this.currentTime-=R(e)?e:this.config.seekTime})),e(this,"forward",(e=>{this.currentTime+=R(e)?e:this.config.seekTime})),e(this,"increaseVolume",(e=>{const t=this.media.muted?0:this.volume;this.volume=t+(R(e)?e:0)})),e(this,"decreaseVolume",(e=>{this.increaseVolume(-e)})),e(this,"airplay",(()=>{de.airplay&&this.media.webkitShowPlaybackTargetPicker()})),e(this,"toggleControls",(e=>{if(this.supported.ui&&!this.isAudio){const t=re(this.elements.container,this.config.classNames.hideControls),i=void 0===e?void 0:!e,n=ne(this.elements.container,this.config.classNames.hideControls,i);if(n&&O(this.config.controls)&&this.config.controls.includes("settings")&&!H(this.config.settings)&&Ge.toggleMenu.call(this,!1),n!==t){const e=n?"controlshidden":"controlsshown";ge.call(this,this.media,e)}return!n}return!1})),e(this,"on",((e,t)=>{pe.call(this,this.elements.container,e,t)})),e(this,"once",((e,t)=>{me.call(this,this.elements.container,e,t)})),e(this,"off",((e,t)=>{fe(this.elements.container,e,t)})),e(this,"destroy",((e,t=!1)=>{if(!this.ready)return;const i=()=>{document.body.style.overflow="",this.embed=null,t?(Object.keys(this.elements).length&&(Z(this.elements.buttons.play),Z(this.elements.captions),Z(this.elements.controls),Z(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),M(e)&&e()):(ye.call(this),Ae.cancelRequests.call(this),ee(this.elements.original,this.elements.container),ge.call(this,this.elements.original,"destroyed",!0),M(e)&&e.call(this.elements.original),this.ready=!1,setTimeout((()=>{this.elements=null,this.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Je.toggleNativeControls.call(this,!0),i()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&M(this.embed.destroy)&&this.embed.destroy(),i()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(i),setTimeout(i,200))})),e(this,"supports",(e=>de.mime.call(this,e))),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=de.touch,this.media=t,D(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||F(this.media)||O(this.media))&&(this.media=this.media[0]),this.config=K({},Ve,mt.defaults,i||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(e){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Xe(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",de),A(this.media)||!N(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!de.check().api)return void this.debug.error("Setup failed: no support");const n=this.media.cloneNode(!0);n.autoplay=!1,this.elements.original=n;const r=this.media.tagName.toLowerCase();let s=null,a=null;switch(r){case"div":if(s=this.media.querySelector("iframe"),N(s)){if(a=He(s.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Ke.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Ke.vimeo:null}(a.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",a.search.length){const e=["1","true"];e.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),e.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=e.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(H(this.provider)||!Object.values(Ke).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Ye;break;case"video":case"audio":this.type=r,this.provider=Ke.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=de.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new et(this),this.storage=new Fe(this),this.media.plyr=this,N(this.elements.container)||(this.elements.container=X("div",{tabindex:0}),Y(this.media,this.elements.container)),Je.migrateStyles.call(this),Je.addStyleHook.call(this),lt.setup.call(this),this.config.debug&&pe.call(this,this.elements.container,this.config.events.join(" "),(e=>{this.debug.log(`event: ${e.type}`)})),this.fullscreen=new Qe(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Je.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new ct(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(()=>be(this.play()))),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new pt(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Ke.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Ke.youtube}get isVimeo(){return this.provider===Ke.vimeo}get isVideo(){return this.type===Ye}get isAudio(){return"audio"===this.type}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&0===this.currentTime)}get ended(){return Boolean(this.media.ended)}set currentTime(e){if(!this.duration)return;const t=R(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return R(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=R(t)&&t!==1/0?t:0;return e||i}set volume(e){let t=e;D(t)&&(t=Number(t)),R(t)||(t=this.storage.get("volume")),R(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!H(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;P(t)||(t=this.storage.get("muted")),P(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;R(e)&&(t=e),R(t)||(t=this.storage.get("speed")),R(t)||(t=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:n}=this;t=dt(t,i,n),this.config.speed.selected=t,setTimeout((()=>{this.media&&(this.media.playbackRate=t)}),0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,i=this.options.quality;if(!i.length)return;let n=[!H(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(R),r=!0;if(!i.includes(n)){const e=Te(i,n);this.debug.warn(`Unsupported quality option: ${n}, using ${e} instead`),n=e,r=!1}t.selected=n,this.media.quality=n,r&&this.storage.set({quality:n})}get quality(){return this.media.quality}set loop(e){const t=P(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return Boolean(this.media.loop)}set source(e){ft.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return G(e)?e:this.source}set download(e){G(e)&&(this.config.urls.download=e,Ge.setDownloadUrl.call(this))}set poster(e){this.isVideo?Je.setPoster.call(this,e,!1).catch((()=>{})):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=ke(Se.call(this));return O(e)?e.join(":"):e}set ratio(e){this.isVideo?D(e)&&xe(e)?(this.config.ratio=ke(e),Le.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=P(e)?e:this.config.autoplay}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(e){qe.toggle.call(this,e,!1)}set currentTrack(e){qe.set.call(this,e,!1),qe.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){qe.setLanguage.call(this,e,!1)}get language(){return(qe.getCurrentTrack.call(this)||{}).language}set pip(e){if(!de.pip)return;const t=P(e)?e:!this.pip;M(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?je:"inline"),M(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return de.pip?H(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===je:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new pt(this))}static supported(e,t,i){return de.check(e,t,i)}static loadSprite(e,t){return Be(e,t)}static setup(e,t={}){let i=null;return D(e)?i=Array.from(document.querySelectorAll(e)):F(e)?i=Array.from(e):O(e)&&(i=e.filter(N)),H(i)?null:i.map((e=>new mt(e,t)))}}var gt;return mt.defaults=(gt=Ve,JSON.parse(JSON.stringify(gt))),mt}())},379:e=>{"use strict";var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var s={},a=[],o=0;o<e.length;o++){var l=e[o],c=n.base?l[0]+n.base:l[0],d=s[c]||0,u="".concat(c," ").concat(d);s[c]=d+1;var h=i(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=r(p,n);n.byIndex=o,t.splice(o,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function r(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,r){var s=n(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var o=i(s[a]);t[o].references--}for(var l=n(e,r),c=0;c<s.length;c++){var d=i(s[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=l}}},569:e=>{"use strict";var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,r&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},500:(e,t,i)=>{var n={"./en.json":700,"./es.json":980,"./pt.json":193};function r(e){var t=s(e);return i(t)}function s(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=500},700:e=>{"use strict";e.exports=JSON.parse('{"restart":"Restart","rewind":"Rewind {seektime}s","play":"Play","pause":"Pause","fastForward":"Forward {seektime}s","seek":"Search","seekLabel":"{currentTime} of {duration}","played":"Played","buffered":"Buffered","currentTime":"Current time","duration":"Duration","volume":"Volume","mute":"No sound","unmute":"With sound","enableCaptions":"Enable Captions","disableCaptions":"Disable Captions","download":"Transfer","enterFullscreen":"Enter fullscreen mode","exitFullscreen":"Exit full screen mode","frameTitle":"Reader for {title}","captions":"Subtitles","settings":"Settings","pip":"PIP","menuBack":"Back to previous menu","speed":"Speed","normal":"Normal","quality":"Quality","loop":"Repeat","start":"Start","end":"End","all":"All","reset":"Reset","disabled":"Disabled","enabled":"Enabled","advertisement":"Advertisement","qualityBadge":{"480":"SD","576":"SD","720":"HD","1080":"HD","1440":"HD","2160":"4K"},"keepWatching":"Continue watching","reportModalTitle":"Report error","reportModalOption1":"Video does not load even with good internet connection","reportModalOption2":"The video content does not match the description","reportModalOption3":"Video is low quality or pixelated","reportModalOption4":"Other","reportModalField":"Describe your problem...","reportModalAction1":"Submit","reportModalAction2":"Cancel","reportModalText1":"Please wait a moment, your feedback","reportModalText2":"is being sent.","reportModalText3":"Thanks for helping us improve!","chapters":"Chapters","aboutPanda":"About Panda Video","aboutPandaLink":"https://pandavideo.com/","waitingForLive":"WAITING FOR LIVE STREAM","activateSound":"ACTIVATE SOUND","watermark_question":"Enter your access key","trialWarning":"Panda Video trial mode.<br>Start billing to remove this message."}')},980:e=>{"use strict";e.exports=JSON.parse('{"restart":"Reiniciar","rewind":"Rebobinar {seektime}s","play":"Tocar","pause":"Pausa","fastForward":"Adelante {seektime}s","seek":"Buscar","seekLabel":"{currentTime} de {duration}","played":"Reproducido","buffered":"Buffered","currentTime":"Hora actual","duration":"Duración","volume":"Volumen","mute":"Sin sonido","unmute":"Con sonido","enableCaptions":"Habilitar subtítulos","disableCaptions":"Deshabilitar subtítulos","download":"Transferir","enterFullscreen":"Entrar en modo de pantalla completa","exitFullscreen":"Salir del modo de pantalla completa","frameTitle":"Lector de {title}","captions":"Subtítulos","settings":"Configuraciones","pip":"PIP","menuBack":"Volver al menú anterior","speed":"Velocidad","normal":"normal","quality":"Calidad","loop":"Repetir","start":"Inicio","end":"Fin","all":"Todos","reset":"Restablecer","disabled":"Deshabilitado","enabled":"Habilitado","advertisement":"Anuncio","qualityBadge":{"480":"SD","576":"SD","720":"HD","1080":"HD","1440":"HD","2160":"4K"},"keepWatching":"Continuar viendo","reportModalTitle":"Informe de error","reportModalOption1":"El video no se carga incluso con una buena conexión a Internet","reportModalOption2":"El contenido del video no coincide con la descripción","reportModalOption3":"El video es de baja calidad o está pixelado","reportModalOption4":"Otro","reportModalField":"Describe tu problema...","reportModalAction1":"Enviar","reportModalAction2":"Cancelar","reportModalText1":"Por favor, espere un momento, sus comentarios","reportModalText2":"se está enviando.","reportModalText3":"¡Gracias por ayudarnos a mejorar!","chapters":"Capítulos","aboutPanda":"Acerca del Panda Video","aboutPandaLink":"https://pandavideo.com/","waitingForLive":"ESPERANDO TRANSMISIÓN EN VIVO","activateSound":"ACTIVAR SONIDO","watermark_question":"Ingrese su clave de acceso","trialWarning":"Modo de prueba de video de Panda.<br>Comience la facturación para eliminar este mensaje."}')},193:e=>{"use strict";e.exports=JSON.parse('{"restart":"Reiniciar","rewind":"Recuar {seektime}s","play":"Reproduzir","pause":"Pausar","fastForward":"Avançar {seektime}s","seek":"Procurar","seekLabel":"{currentTime} de {duration}","played":"Reproduzido","buffered":"Colocado na memória intermédia","currentTime":"Tempo atual","duration":"Duração","volume":"Volume","mute":"Sem som","unmute":"Com som","enableCaptions":"Ativar legendas","disableCaptions":"Desativar legendas","download":"Transferir","enterFullscreen":"Entrar no modo de ecrã inteiro","exitFullscreen":"Sair do modo de ecrã inteiro","frameTitle":"Leitor para {title}","captions":"Legendas","settings":"Definições","pip":"PIP","menuBack":"Voltar ao menu anterior","speed":"Velocidade","normal":"Normal","quality":"Qualidade","loop":"Repetir","start":"Início","end":"Fim","all":"Tudo","reset":"Repor","disabled":"Desativado","enabled":"Ativado","advertisement":"Anúncio","qualityBadge":{"480":"SD","576":"SD","720":"HD","1080":"HD","1440":"HD","2160":"4K"},"keepWatching":"Continuar assistindo","reportModalTitle":"Reportar erro","reportModalOption1":"O vídeo não carrega, mesmo com boa conexão de internet","reportModalOption2":"O conteúdo do vídeo não corresponde com a descrição","reportModalOption3":"O vídeo está em baixa qualidade ou pixelado","reportModalOption4":"Outro","reportModalField":"Descreva seu problema...","reportModalAction1":"Enviar","reportModalAction2":"Cancelar","reportModalText1":"Aguarde um momento, seu feedback","reportModalText2":"está sendo enviado.","reportModalText3":"Obrigado por nos ajudar a melhorar!","chapters":"Capítulos","aboutPanda":"Sobre a Panda Video","aboutPandaLink":"https://pandavideo.com.br/","waitingForLive":"AGUARDANDO LIVE STREAM","activateSound":"ATIVAR SOM","watermark_question":"Digite sua chave de acesso","trialWarning":"Panda Video período de teste.<br>Inicie o plano para remover esta mensagem."}')}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0,(()=>{"use strict";var e={};i.r(e),i.d(e,{FunctionToString:()=>oa,InboundFilters:()=>ba});var t={};i.r(t),i.d(t,{Breadcrumbs:()=>Mo,Dedupe:()=>Vo,GlobalHandlers:()=>_o,HttpContext:()=>qo,LinkedErrors:()=>zo,TryCatch:()=>Lo});var n={};i.r(n);var r=i(379),s=i.n(r),a=i(795),o=i.n(a),l=i(569),c=i.n(l),d=i(565),u=i.n(d),h=i(216),p=i.n(h),f=i(589),m=i.n(f),g=i(376),y={};y.styleTagTransform=m(),y.setAttributes=u(),y.insert=c().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=p(),s()(g.Z,y),g.Z&&g.Z.locals&&g.Z.locals;var v=i(485),b={};b.styleTagTransform=m(),b.setAttributes=u(),b.insert=c().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=p(),s()(v.Z,b),v.Z&&v.Z.locals&&v.Z.locals;var _=i(615),T={};function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,i){return t&&E(e.prototype,t),i&&E(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}T.styleTagTransform=m(),T.setAttributes=u(),T.insert=c().bind(null,"head"),T.domAPI=o(),T.insertStyleElement=p(),s()(_.Z,T),_.Z&&_.Z.locals&&_.Z.locals;var k=2147483647,S=function(){function e(t,i,n){w(this,e),this.mouse_over_progressbar=!1,this.title_jumped=!1,this.sections=[],this.moments=[],this.el_pbar=document.querySelector(i),this.el_body=document.querySelector(t),this.el_body.style.pointerEvents="none",this.video_length=n.videoLength,this.ev_config=n,this.c_width=this.el_body.clientWidth-1,this.createElements(),this.startResizeMonitoring()}return x(e,[{key:"updateLengthForLiveStream",value:function(e){this.video_length=e,this.resizeSections()}},{key:"reloadChapters",value:function(){for(;this.el_root.firstChild;)this.el_root.removeChild(this.el_root.firstChild);if(this.sections=[],null==this.ev_config.chapters||0==this.ev_config.chapters.length){var e=new A(this,0,k,"",!1);this.sections.push(e),this.el_root.appendChild(e.GetElement())}else{var t=0;this.ev_config.chapters.sort(L.compare);for(var i=0;i<this.ev_config.chapters.length;i++){var n=this.ev_config.chapters[i];n.start>t&&(e=new A(this,t,n.start,"",!1),this.sections.push(e),this.el_root.appendChild(e.GetElement())),n.start<t&&(n.start=t),e=new A(this,n.start,n.end,n.title,!0),this.sections.push(e),this.el_root.appendChild(e.GetElement()),t=n.end}}}},{key:"createElements",value:function(){this.el_base=document.createElement("div"),this.el_base.className="sp__base",this.el_root=document.createElement("ul"),this.el_root.className="sp__progressbar",this.el_title=document.createElement("div"),this.el_title.className="sp__title",this.el_title.textContent="test",this.el_base.appendChild(this.el_root),this.el_base.appendChild(this.el_title),this.el_body.appendChild(this.el_base),this.reloadChapters();for(var e=0;e<this.ev_config.moments.length;e++){var t=this.ev_config.moments[e],i=new C(this,t.timestamp,t.title);this.el_base.appendChild(i.GetElement()),this.moments.push(i),i.Reposition()}var n=this;function r(e){var t=e.touches[0]||e.changedTouches[0],i=e.target.parentNode.getBoundingClientRect();n.mouse_x=t.pageX-i.left+6,n.mouse_y=t.pageY-i.top,n.mouse_over_progressbar=!0,n.el_root.classList.contains("hover")||n.el_root.classList.add("hover");var r=n.getCurrentMouseSecnds();n.DetectHoverMoments(r),n.moment_active||n.DetectHoverSection(r),n.updateSections("mark",r),n.CallThumbnailJumpDownEvent(),n.CallThumbnailJumpUpEvent(),null==n.c_highlightedSection||n.moment_active||n.PositionTitleAndIndicator(r);var s=document.querySelector(".plyr__preview-thumb"),a=document.querySelector(".plyr__preview-thumb__time-container span");if(s.classList.contains("plyr__tooltip--drag")||s.classList.add("plyr__tooltip--drag"),a.textContent=n.secondsToTimeString(r),null!=n.ev_config.onScrubbingChange&&n.ev_config.onScrubbingChange(n.getCurrentMouseSecnds(),n.SecondsToPixels(n.getCurrentMouseSecnds())),"touchend"===e.type){n.mouse_over_progressbar=!1,n.updateSections("mark",0);for(var o=0;o<n.sections.length;o++)n.sections[o].section_interactive&&(n.sections[o].HideTitle(),n.sections[o].SetInactive());s.classList.remove("plyr__tooltip--drag"),a.textContent=n.secondsToTimeString(n.c_progress),null!=n.ev_config.onScrubbingChange&&n.ev_config.onScrubbingChange(n.getCurrentMouseSecnds(),n.SecondsToPixels(n.getCurrentMouseSecnds()))}}this.el_pbar.addEventListener("mousemove",(function(e){var t=n.el_pbar.parentNode.getBoundingClientRect();n.mouse_x=e.clientX-t.left+6,n.mouse_y=e.clientY-t.top,n.mouse_over_progressbar=!0,n.el_root.classList.contains("hover")||n.el_root.classList.add("hover"),n.el_title.classList.remove("animated");var i=n.getCurrentMouseSecnds();n.DetectHoverMoments(i),n.moment_active||n.DetectHoverSection(i),n.updateSections("mark",i),n.CallThumbnailJumpDownEvent(),n.CallThumbnailJumpUpEvent(),null==n.c_highlightedSection||n.moment_active||n.PositionTitleAndIndicator(i)})),this.el_pbar.addEventListener("mouseleave",(function(e){n.el_title.classList.contains("animated")||n.el_title.classList.add("animated"),n.mouse_over_progressbar=!1,n.DetectHoverMoments(-1e4),n.el_root.classList.remove("hover"),n.updateSections("mark",0),n.c_timeoutEvent=void 0,clearInterval(n.c_timeout)})),this.el_pbar.addEventListener("touchmove",r.bind(this)),this.el_pbar.addEventListener("touchstart",r.bind(this)),this.el_pbar.addEventListener("touchend",r.bind(this))}},{key:"IsMobile",value:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}},{key:"SetDuration",value:function(e){this.video_length=e,this.resizeSections()}},{key:"SecondsToPixels",value:function(e){return this.c_width/this.video_length*e}},{key:"PixelsToSeconds",value:function(e){return e/(this.c_width/this.video_length)}},{key:"SetCurrentProgress",value:function(e){this.updateSections("progress",e),this.c_progress=e,this.mouse_over_progressbar||this.moment_active||(this.moment_active||this.DetectHoverSection(e),null!=this.c_highlightedSection&&this.PositionTitleAndIndicator(this.c_highlightedSection.section_start+(this.c_highlightedSection.section_end-this.c_highlightedSection.section_start)/2))}},{key:"SetBufferProgress",value:function(e){this.updateSections("buffer",e)}},{key:"DetectHoverSection",value:function(e){if(!this.moment_active){for(var t=null,i=0;i<this.sections.length;i++)this.sections[i].section_interactive&&(this.sections[i].section_start<=e&&this.sections[i].section_end>e?t=this.sections[i]:(this.sections[i].HideTitle(),this.sections[i].SetInactive()));if(null!=t)return t.ShowTitle(),t.SetActive(),this.c_highlightedSection=t,!0;this.c_highlightedSection=null}return!1}},{key:"DetectHoverMoments",value:function(e){for(var t=null,i=0;i<this.moments.length;i++){var n=this.PixelsToSeconds(12);this.moments[i].moment_timestamp-n<e&&this.moments[i].moment_timestamp+n>e?t=this.moments[i]:this.moments[i].RemoveHover()}return null!=t?(t.ShowTitle(),this.c_highlightedMoment=t,!0):(null!=this.c_highlightedMoment&&this.c_highlightedMoment.HideTitle(),this.c_highlightedSection=null,!1)}},{key:"PositionTitleAndIndicator",value:function(e){var t=Math.max(this.SecondsToPixels(e)-this.el_title.clientWidth/2,0);t=Math.min(t,this.el_root.clientWidth-this.el_title.clientWidth),this.el_title.style.left=t+"px"}},{key:"updateSections",value:function(e,t){for(var i=0;i<this.sections.length;i++)this.sections[i].SetMark(e,t)}},{key:"resizeSections",value:function(){for(var e=0;e<this.sections.length;e++)this.sections[e].Resize();for(e=0;e<this.moments.length;e++)this.moments[e].Reposition()}},{key:"secondsToTimeString",value:function(e){var t=Math.floor(e/60),i=Math.floor(e%60);t<0&&(t=0),i<0&&(i=0);var n=t.toString(),r=i.toString();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),n+":"+r}},{key:"getCurrentMouseSecnds",value:function(){return this.mouse_x/(this.c_width/this.video_length)}},{key:"startResizeMonitoring",value:function(){var e=this;setInterval((function(){var t=e.c_width;e.c_width=e.el_body.clientWidth-1,e.c_width!=t&&e.resizeSections()}),100)}},{key:"CallThumbnailJumpUpEvent",value:function(e){void 0===e&&(e=!1),this.title_jumped||!this.moment_active&&!this.IsThumbnailInTitleHitBox()||(document.querySelector(".plyr__preview-thumb").style.bottom="45px")}},{key:"CallThumbnailJumpDownEvent",value:function(e){void 0===e&&(e=!1),!this.title_jumped||this.IsThumbnailInTitleHitBox()||this.moment_active||(document.querySelector(".plyr__preview-thumb").style.bottom="22px")}},{key:"IsThumbnailInTitleHitBox",value:function(){if(this.moment_active)return this.title_jumped=!0,!0;var e=this.el_title.getBoundingClientRect().left,t=this.el_title.classList.contains("active");if(e<-50||!t)return this.title_jumped=!1,!1;var i=document.querySelector(".plyr__preview-thumb").getBoundingClientRect(),n=this.el_title.getBoundingClientRect();return n.left+n.width<i.left?(this.title_jumped=!1,!1):i.left+i.width>n.left?(this.title_jumped=!0,!0):(this.title_jumped=!1,!1)}}]),e}(),L=function(){function e(){w(this,e)}return x(e,null,[{key:"compare",value:function(e,t){return e.start-t.start}}]),e}(),C=function(){function e(t,i,n){w(this,e),this.pb=t,this.el_body=document.createElement("div"),this.el_body.className="sp__moment",this.moment_timestamp=i,this.moment_title=n,this.Reposition()}return x(e,[{key:"Reposition",value:function(){this.el_body.style.left="".concat(this.pb.SecondsToPixels(this.moment_timestamp)-6,"px")}},{key:"GetElement",value:function(){return this.el_body}},{key:"ShowTitle",value:function(){this.el_body.classList.contains("hover")||this.el_body.classList.add("hover"),this.pb.PositionTitleAndIndicator(this.moment_timestamp),this.pb.moment_active||(this.pb.moment_active=!0,""!=this.moment_title&&this.pb.CallThumbnailJumpUpEvent(),this.pb.el_title.classList.add("active")),this.pb.el_title.textContent=this.moment_title}},{key:"HideTitle",value:function(){if(this.pb.moment_active){this.RemoveHover(),this.pb.PositionTitleAndIndicator(this.moment_timestamp);for(var e=0;e<this.pb.sections.length;e++)this.pb.sections[e].section_interactive&&this.pb.sections[e].SetInactive();this.pb.moment_active=!1,this.pb.DetectHoverSection(this.moment_timestamp)?this.pb.el_title.textContent=this.pb.c_highlightedSection.section_title:(this.pb.el_title.textContent="",this.pb.el_title.classList.remove("active"),""!=this.moment_title&&(this.pb.title_jumped=!0,this.pb.CallThumbnailJumpDownEvent(!0)))}}},{key:"RemoveHover",value:function(){this.el_body.classList.remove("hover")}}]),e}(),A=function(){function e(t,i,n,r,s){w(this,e),this.bars={},this.pb=t,this.section_start=i,this.section_end=n,this.section_interactive=s,this.section_title=r,this.el_body=document.createElement("li"),s&&this.el_body.classList.add("interactive"),this.el_container=document.createElement("div"),this.el_container.className="sp__container",this.el_bg=document.createElement("div"),this.el_bg.className="sp__bg",this.el_body.append(this.el_container),this.el_container.append(this.el_bg);var a=new I(this,1,"#ffffff88");this.bars.mark=a,this.el_container.append(a.GetElement());var o=new I(this,2,"#ffffff50");this.bars.buffer=o,this.el_container.append(o.GetElement());var l=new I(this,3,"var(--plyr-color-main)");this.bars.progress=l,this.el_container.append(l.GetElement()),this.Resize()}return x(e,[{key:"SetInactive",value:function(){this.el_body.classList.remove("active")}},{key:"SetActive",value:function(){this.el_body.classList.contains("active")||this.el_body.classList.add("active")}},{key:"HideTitle",value:function(){this.c_titleShown&&(this.pb.el_title.textContent="",this.pb.el_title.classList.remove("active"),""!=this.section_title&&this.pb.CallThumbnailJumpDownEvent()),this.c_titleShown=!1}},{key:"ShowTitle",value:function(){this.c_titleShown||(this.section_interactive&&!this.pb.el_title.classList.contains("active")&&(this.pb.el_title.classList.add("active"),""!=this.section_title&&this.pb.CallThumbnailJumpUpEvent()),this.pb.el_title.textContent=this.section_interactive?this.section_title:"",this.c_titleShown=!0)}},{key:"Resize",value:function(){var e=this.section_end==k?this.pb.video_length:this.section_end,t=this.pb.SecondsToPixels(e-this.section_start);for(var i in this.el_body.style.width="".concat(t,"px"),this.c_width=t,this.bars)this.bars[i].Measure()}},{key:"SetMark",value:function(e,t){this.bars[e].SetMark(t)}},{key:"GetElement",value:function(){return this.el_body}}]),e}(),I=function(){function e(t,i,n){w(this,e),this.section=t,this.c_zindex=i,this.c_color=n,this.el_body=document.createElement("div"),this.el_body.className="sp__section",this.el_body.style.backgroundColor=this.c_color,this.el_body.style.zIndex=this.c_zindex,this.el_body.style.width="0",this.Measure()}return x(e,[{key:"SetMark",value:function(e){if(e<=this.section.section_start)this.el_body.style.width="0";else{var t=this.section.pb.SecondsToPixels(this.section.section_start),i=this.section.pb.SecondsToPixels(e)-t;this.el_body.style.width="".concat(Math.min(i,this.c_width),"px")}}},{key:"Measure",value:function(){var e=this.section.section_end==k?this.section.pb.video_length:this.section.section_end;this.c_width=this.section.pb.SecondsToPixels(e-this.section.section_start)}},{key:"GetElement",value:function(){return this.el_body}}]),e}();function R(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var D,P,M,O,F,N={exports:{}};D=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,P=/^(?=([^\/?#]*))\1([^]*)$/,M=/(?:\/|^)\.(?=\/)/g,O=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,F={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=F.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=F.normalizePath(n.path),F.buildURLFromParts(n)}var r=F.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=F.normalizePath(r.path),F.buildURLFromParts(r)):t;var s=F.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var a=P.exec(s.path);s.netLoc=a[1],s.path=a[2]}s.netLoc&&!s.path&&(s.path="/");var o={scheme:s.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=s.netLoc,"/"!==r.path[0]))if(r.path){var l=s.path,c=l.substring(0,l.lastIndexOf("/")+1)+r.path;o.path=F.normalizePath(c)}else o.path=s.path,r.params||(o.params=s.params,r.query||(o.query=s.query));return null===o.path&&(o.path=i.alwaysNormalize?F.normalizePath(r.path):r.path),F.buildURLFromParts(o)},parseURL:function(e){var t=D.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(M,"");e.length!==(e=e.replace(O,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},N.exports=F;var B=N.exports;function U(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function $(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?U(Object(i),!0).forEach((function(t){G(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function G(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},H.apply(this,arguments)}const z=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)};let q=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e}({}),V=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),j=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({});const K=function(){},Y={trace:K,debug:K,log:K,warn:K,info:K,error:K};let W=Y;const X=W,Q=/^(\d+)x(\d+)$/,Z=/(.+?)=(".*?"|.*?)(?:,|$)/g;class J{constructor(e){"string"==typeof e&&(e=J.parseAttrList(e));for(const t in e)e.hasOwnProperty(t)&&("X-"===t.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const i=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)i[e]=parseInt(t.slice(2*e,2*e+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=Q.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const i={};for(Z.lastIndex=0;null!==(t=Z.exec(e));){let e=t[2];0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1)),i[t[1].trim()]=e}return i}}function ee(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}class te{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const i=t.attr;for(const t in i)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==i[t]){X.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=H(new J({}),i,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=new Date(this.attr["END-DATE"]);z(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(z(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&z(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class ie{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ne="audio",re="video",se="audiovideo";class ae{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[ne]:null,[re]:null,[se]:null},this.baseurl=e}setByteRange(e,t){const i=e.split("@",2),n=[];1===i.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(i[1]),n[1]=parseInt(i[0])+n[0],this._byteRange=n}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=B.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class oe extends ae{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new ie,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!z(this.programDateTime))return null;const e=z(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,i,n,r,s=!1){const{elementaryStreams:a}=this,o=a[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,i),o.startDTS=Math.min(o.startDTS,n),o.endDTS=Math.max(o.endDTS,r)):a[e]={startPTS:t,endPTS:i,startDTS:n,endDTS:r,partial:s}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e.audio=null,e.video=null,e.audiovideo=null}}class le extends ae{constructor(e,t,i,n,r){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new ie,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=n;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class ce{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t,this.advanced=this.endSN>e.endSN||t>0||0===t&&i>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&z(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function de(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function ue(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}var he={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},pe="org.w3.clearkey",fe="com.apple.streamingkeydelivery",me="com.microsoft.playready",ge="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function ye(e){switch(e){case fe:return he.FAIRPLAY;case me:return he.PLAYREADY;case ge:return he.WIDEVINE;case pe:return he.CLEARKEY}}var ve="edef8ba979d64acea3c827dcd51d21ed";function be(e){switch(e){case he.FAIRPLAY:return fe;case he.PLAYREADY:return me;case he.WIDEVINE:return ge;case he.CLEARKEY:return pe}}function _e(e){const{drmSystems:t,widevineLicenseUrl:i}=e,n=t?[he.FAIRPLAY,he.WIDEVINE,he.PLAYREADY,he.CLEARKEY].filter((e=>!!t[e])):[];return!n[he.WIDEVINE]&&i&&n.push(he.WIDEVINE),n}const Te="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function we(e,t,i){return Uint8Array.prototype.slice?e.slice(t,i):new Uint8Array(Array.prototype.slice.call(e,t,i))}const Ee=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,xe=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,ke=(e,t)=>{const i=t;let n=0;for(;Ee(e,t);)n+=10,n+=Se(e,t+6),xe(e,t+10)&&(n+=10),t+=n;if(n>0)return e.subarray(i,i+n)},Se=(e,t)=>{let i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,i|=(127&e[t+2])<<7,i|=127&e[t+3],i},Le=(e,t)=>Ee(e,t)&&Se(e,t+6)+10<=e.length-t,Ce=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,Ae=e=>{const t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=Se(e,4);return{type:t,size:i,data:e.subarray(10,10+i)}},Ie=e=>{let t=0;const i=[];for(;Ee(e,t);){const n=Se(e,t+6);t+=10;const r=t+n;for(;t+8<r;){const n=Ae(e.subarray(t)),r=Re(n);r&&i.push(r),t+=n.size+10}xe(e,t)&&(t+=10)}return i},Re=e=>"PRIV"===e.type?De(e):"W"===e.type[0]?Me(e):Pe(e),De=e=>{if(e.size<2)return;const t=Fe(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}},Pe=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1;const i=Fe(e.data.subarray(t),!0);t+=i.length+1;const n=Fe(e.data.subarray(t));return{key:e.type,info:i,data:n}}const t=Fe(e.data.subarray(1));return{key:e.type,data:t}},Me=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1;const i=Fe(e.data.subarray(t),!0);t+=i.length+1;const n=Fe(e.data.subarray(t));return{key:e.type,info:i,data:n}}const t=Fe(e.data);return{key:e.type,data:t}},Oe=e=>{if(8===e.data.byteLength){const t=new Uint8Array(e.data),i=1&t[3];let n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,i&&(n+=47721858.84),Math.round(n)}},Fe=(e,t=!1)=>{const i=Be();if(i){const n=i.decode(e);if(t){const e=n.indexOf("\0");return-1!==e?n.substring(0,e):n}return n.replace(/\0/g,"")}const n=e.length;let r,s,a,o="",l=0;for(;l<n;){if(r=e[l++],0===r&&t)return o;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:s=e[l++],o+=String.fromCharCode((31&r)<<6|63&s);break;case 14:s=e[l++],a=e[l++],o+=String.fromCharCode((15&r)<<12|(63&s)<<6|(63&a)<<0)}}return o};let Ne;function Be(){return Ne||void 0===self.TextDecoder||(Ne=new self.TextDecoder("utf-8")),Ne}const Ue=function(e){let t="";for(let i=0;i<e.length;i++){let n=e[i].toString(16);n.length<2&&(n="0"+n),t+=n}return t},$e=Math.pow(2,32)-1,Ge=[].push,He={video:1,audio:2,id3:3,text:4};function ze(e){return String.fromCharCode.apply(null,e)}function qe(e,t){const i=e[t]<<8|e[t+1];return i<0?65536+i:i}function Ve(e,t){const i=je(e,t);return i<0?4294967296+i:i}function je(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Ke(e,t,i){e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function Ye(e,t){const i=[];if(!t.length)return i;const n=e.byteLength;for(let r=0;r<n;){const s=Ve(e,r),a=s>1?r+s:n;if(ze(e.subarray(r+4,r+8))===t[0])if(1===t.length)i.push(e.subarray(r+8,a));else{const n=Ye(e.subarray(r+8,a),t.slice(1));n.length&&Ge.apply(i,n)}r=a}return i}function We(e){const t=[],i=e[0];let n=8;const r=Ve(e,n);n+=4,n+=0===i?8:16,n+=2;let s=e.length+0;const a=qe(e,n);n+=2;for(let i=0;i<a;i++){let i=n;const a=Ve(e,i);i+=4;const o=2147483647&a;if(1==(2147483648&a)>>>31)return X.warn("SIDX has hierarchical references (not supported)"),null;const l=Ve(e,i);i+=4,t.push({referenceSize:o,subsegmentDuration:l,info:{duration:l/r,start:s,end:s+o-1}}),s+=o,i+=4,n=i}return{earliestPresentationTime:0,timescale:r,version:i,referencesCount:a,references:t}}function Xe(e){const t=[],i=Ye(e,["moov","trak"]);for(let e=0;e<i.length;e++){const n=i[e],r=Ye(n,["tkhd"])[0];if(r){let e=r[0],i=0===e?12:20;const s=Ve(r,i),a=Ye(n,["mdia","mdhd"])[0];if(a){e=a[0],i=0===e?12:20;const r=Ve(a,i),o=Ye(n,["mdia","hdlr"])[0];if(o){const e=ze(o.subarray(8,12)),i={soun:ne,vide:re}[e];if(i){const e=Ye(n,["mdia","minf","stbl","stsd"])[0];let a;e&&(a=ze(e.subarray(12,16))),t[s]={timescale:r,type:i},t[i]={timescale:r,id:s,codec:a}}}}}}return Ye(e,["moov","mvex","trex"]).forEach((e=>{const i=Ve(e,4),n=t[i];n&&(n.default={duration:Ve(e,12),flags:Ve(e,20)})})),t}function Qe(e){const t=Ye(e,["schm"])[0];if(t){const i=ze(t.subarray(4,8));if("cbcs"===i||"cenc"===i)return Ye(e,["schi","tenc"])[0]}return X.error("[eme] missing 'schm' box"),null}function Ze(e){const t=Ve(e,0);let i=8;1&t&&(i+=4),4&t&&(i+=4);let n=0;const r=Ve(e,4);for(let s=0;s<r;s++)256&t&&(n+=Ve(e,i),i+=4),512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4);return n}function Je(e,t){const i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function et(e,t){const i=[],n=t.samples,r=t.timescale,s=t.id;let a=!1;return Ye(n,["moof"]).map((o=>{const l=o.byteOffset-8;Ye(o,["traf"]).map((o=>{const c=Ye(o,["tfdt"]).map((e=>{const t=e[0];let i=Ve(e,4);return 1===t&&(i*=Math.pow(2,32),i+=Ve(e,8)),i/r}))[0];return void 0!==c&&(e=c),Ye(o,["tfhd"]).map((c=>{const d=Ve(c,4),u=16777215&Ve(c,0);let h=0;const p=0!=(16&u);let f=0;const m=0!=(32&u);let g=8;d===s&&(0!=(1&u)&&(g+=8),0!=(2&u)&&(g+=4),0!=(8&u)&&(h=Ve(c,g),g+=4),p&&(f=Ve(c,g),g+=4),m&&(g+=4),"video"===t.type&&(a=function(e){if(!e)return!1;const t=e.indexOf("."),i=t<0?e:e.substring(0,t);return"hvc1"===i||"hev1"===i||"dvh1"===i||"dvhe"===i}(t.codec)),Ye(o,["trun"]).map((s=>{const o=s[0],c=16777215&Ve(s,0),d=0!=(1&c);let u=0;const p=0!=(4&c),m=0!=(256&c);let g=0;const y=0!=(512&c);let v=0;const b=0!=(1024&c),_=0!=(2048&c);let T=0;const w=Ve(s,4);let E=8;d&&(u=Ve(s,E),E+=4),p&&(E+=4);let x=u+l;for(let l=0;l<w;l++){if(m?(g=Ve(s,E),E+=4):g=h,y?(v=Ve(s,E),E+=4):v=f,b&&(E+=4),_&&(T=0===o?Ve(s,E):je(s,E),E+=4),t.type===re){let t=0;for(;t<v;){const s=Ve(n,x);x+=4,tt(a,n[x])&&it(n.subarray(x,x+s),a?2:1,e+T/r,i),x+=s,t+=s+4}}e+=g/r}})))}))}))})),i}function tt(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6==(31&t)}function it(e,t,i,n){const r=nt(e);let s=0;s+=t;let a=0,o=0,l=!1,c=0;for(;s<r.length;){a=0;do{if(s>=r.length)break;c=r[s++],a+=c}while(255===c);o=0;do{if(s>=r.length)break;c=r[s++],o+=c}while(255===c);const e=r.length-s;if(!l&&4===a&&s<r.length){if(l=!0,181===r[s++]){const e=qe(r,s);if(s+=2,49===e){const e=Ve(r,s);if(s+=4,1195456820===e){const e=r[s++];if(3===e){const t=r[s++],o=31&t,l=64&t,c=l?2+3*o:0,d=new Uint8Array(c);if(l){d[0]=t;for(let e=1;e<c;e++)d[e]=r[s++]}n.push({type:e,payloadType:a,pts:i,bytes:d})}}}}}else if(5===a&&o<e){if(l=!0,o>16){const e=[];for(let t=0;t<16;t++){const i=r[s++].toString(16);e.push(1==i.length?"0"+i:i),3!==t&&5!==t&&7!==t&&9!==t||e.push("-")}const t=o-16,l=new Uint8Array(t);for(let e=0;e<t;e++)l[e]=r[s++];n.push({payloadType:a,pts:i,uuid:e.join(""),userData:Fe(l),userDataBytes:l})}}else if(o<e)s+=o;else if(o>e)break}}function nt(e){const t=e.byteLength,i=[];let n=1;for(;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;const r=t-i.length,s=new Uint8Array(r);let a=0;for(n=0;n<r;a++,n++)a===i[0]&&(a++,i.shift()),s[n]=e[a];return s}let rt={};class st{static clearKeyUriToKeyIdMap(){rt={}}constructor(e,t,i,n=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=n,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case fe:case ge:case me:case pe:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"!==this.method||this.iv||X.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=function(e){const t=new Uint8Array(16);for(let i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t}(e);return new st(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=function(e){const t=e.split(":");let i=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),n=e[e.length-1].split(",");if(2===n.length){const t="base64"===n[0],r=n[1];t?(e.splice(-1,1),i=de(r)):i=function(e){const t=ue(e).subarray(0,16),i=new Uint8Array(16);return i.set(t,16-t.length),i}(r)}}return i}(this.uri);if(t)switch(this.keyFormat){case ge:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case me:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function(e,t,i){if(16!==e.byteLength)throw new RangeError("Invalid system id");let n,r,s;if(t){n=1,r=new Uint8Array(16*t.length);for(let e=0;e<t.length;e++){const i=t[e];if(16!==i.byteLength)throw new RangeError("Invalid key");r.set(i,16*e)}}else n=0,r=new Uint8Array;n>0?(s=new Uint8Array(4),t.length>0&&new DataView(s.buffer).setUint32(0,t.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return i&&i.byteLength>0&&new DataView(a.buffer).setUint32(0,i.byteLength,!1),function(e,...t){const i=t.length;let n=8,r=i;for(;r--;)n+=t[r].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=255&n,s.set(e,4),r=0,n=8;r<i;r++)s.set(t[r],n),n+=t[r].byteLength;return s}([112,115,115,104],new Uint8Array([n,0,0,0]),e,s,r,a,i||new Uint8Array)}(e,null,t);const i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(i)),r=n.substring(n.indexOf("<"),n.length),s=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(s){const e=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(e){const t=de(e).subarray(0,16);!function(e){const t=function(e,t,i){const n=e[t];e[t]=e[i],e[i]=n};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),this.keyId=t}}break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=rt[this.uri];if(!e){const t=Object.keys(rt).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16),new DataView(e.buffer,12,4).setUint32(0,t),rt[this.uri]=e}this.keyId=e}return this}}const at=/\{\$([a-zA-Z0-9-_]+)\}/g;function ot(e){return at.test(e)}function lt(e,t,i){if(null!==e.variableList||e.hasVariableRefs)for(let n=i.length;n--;){const r=i[n],s=t[r];s&&(t[r]=ct(e,s))}}function ct(e,t){if(null!==e.variableList||e.hasVariableRefs){const i=e.variableList;return t.replace(at,(t=>{const n=t.substring(2,t.length-1),r=null==i?void 0:i[n];return void 0===r?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${n}"`)),t):r}))}return t}function dt(e,t,i){let n,r,s=e.variableList;if(s||(e.variableList=s={}),"QUERYPARAM"in t){n=t.QUERYPARAM;try{const e=new self.URL(i).searchParams;if(!e.has(n))throw new Error(`"${n}" does not match any query parameter in URI: "${i}"`);r=e.get(n)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${t.message}`))}}else n=t.NAME,r=t.VALUE;n in s?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${n}"`)):s[n]=r||""}function ut(e,t,i){const n=t.IMPORT;if(i&&n in i){let t=e.variableList;t||(e.variableList=t={}),t[n]=i[n]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}function ht(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}const pt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},ft=ht();function mt(e,t){var i;return null!=(i=null==ft?void 0:ft.isTypeSupported(`${t||"video"}/mp4;codecs="${e}"`))&&i}const gt=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,yt=/#EXT-X-MEDIA:(.*)/g,vt=/^#EXT(?:INF|-X-TARGETDURATION):/m,bt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),_t=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Tt{static findGroup(e,t){for(let i=0;i<e.length;i++){const n=e[i];if(n.id===t)return n}}static convertAVC1ToAVCOTI(e){const t=e.split(".");if(t.length>2){let e=t.shift()+".";return e+=parseInt(t.shift()).toString(16),e+=("000"+parseInt(t.shift()).toString(16)).slice(-4),e}return e}static resolve(e,t){return B.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return vt.test(e)}static parseMasterPlaylist(e,t){const i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:ot(e)},n=[];let r;for(gt.lastIndex=0;null!=(r=gt.exec(e));)if(r[1]){var s;const e=new J(r[1]);lt(i,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const a=ct(i,r[2]),o={attrs:e,bitrate:e.decimalInteger("AVERAGE-BANDWIDTH")||e.decimalInteger("BANDWIDTH"),name:e.NAME,url:Tt.resolve(a,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),xt((e.CODECS||"").split(/[ ,]+/).filter((e=>e)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=Tt.convertAVC1ToAVCOTI(o.videoCodec)),null!=(s=o.unknownCodecs)&&s.length||n.push(o),i.levels.push(o)}else if(r[3]){const e=r[3],n=r[4];switch(e){case"SESSION-DATA":{const e=new J(n);lt(i,e,["DATA-ID","LANGUAGE","VALUE","URI"]);const t=e["DATA-ID"];t&&(null===i.sessionData&&(i.sessionData={}),i.sessionData[t]=e);break}case"SESSION-KEY":{const e=wt(n,t,i);e.encrypted&&e.isSupported()?(null===i.sessionKeys&&(i.sessionKeys=[]),i.sessionKeys.push(e)):X.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${n}"`);break}case"DEFINE":{const e=new J(n);lt(i,e,["NAME","VALUE","QUERYPARAM"]),dt(i,e,t)}break;case"CONTENT-STEERING":{const e=new J(n);lt(i,e,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:Tt.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":i.startTimeOffset=Et(n)}}const a=n.length>0&&n.length<i.levels.length;return i.levels=a?n:i.levels,0===i.levels.length&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,i){let n;const r={},s=i.levels,a={AUDIO:s.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:s.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let o=0;for(yt.lastIndex=0;null!==(n=yt.exec(e));){const e=new J(n[1]),s=e.TYPE;if(s){const n=a[s],l=r[s]||[];r[s]=l,lt(i,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const c={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",instreamId:e["INSTREAM-ID"],name:e.NAME||e.LANGUAGE||"",type:s,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:e.LANGUAGE,url:e.URI?Tt.resolve(e.URI,t):""};if(null!=n&&n.length){const e=Tt.findGroup(n,c.groupId)||n[0];kt(c,e,"audioCodec"),kt(c,e,"textCodec")}l.push(c)}}return r}static parseLevelPlaylist(e,t,i,n,r,s){const a=new ce(t),o=a.fragments;let l,c,d,u=null,h=0,p=0,f=0,m=0,g=null,y=new oe(n,t),v=-1,b=!1;for(bt.lastIndex=0,a.m3u8=e,a.hasVariableRefs=ot(e);null!==(l=bt.exec(e));){b&&(b=!1,y=new oe(n,t),y.start=f,y.sn=h,y.cc=m,y.level=i,u&&(y.initSegment=u,y.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null));const e=l[1];if(e){y.duration=parseFloat(e);const t=(" "+l[2]).slice(1);y.title=t||null,y.tagList.push(t?["INF",e,t]:["INF",e])}else if(l[3]){if(z(y.duration)){y.start=f,d&&Ct(y,d,a),y.sn=h,y.level=i,y.cc=m,y.urlId=r,o.push(y);const e=(" "+l[3]).slice(1);y.relurl=ct(a,e),St(y,g),g=y,f+=y.duration,h++,p=0,b=!0}}else if(l[4]){const e=(" "+l[4]).slice(1);g?y.setByteRange(e,g):y.setByteRange(e)}else if(l[5])y.rawProgramDateTime=(" "+l[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),-1===v&&(v=o.length);else{if(l=l[0].match(_t),!l){X.warn("No matches on slow regex match for level playlist!");continue}for(c=1;c<l.length&&void 0===l[c];c++);const e=(" "+l[c]).slice(1),r=(" "+l[c+1]).slice(1),f=l[c+2]?(" "+l[c+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":a.type=r.toUpperCase();break;case"MEDIA-SEQUENCE":h=a.startSN=parseInt(r);break;case"SKIP":{const e=new J(r);lt(a,e,["RECENTLY-REMOVED-DATERANGES"]);const t=e.decimalInteger("SKIPPED-SEGMENTS");if(z(t)){a.skippedSegments=t;for(let e=t;e--;)o.unshift(null);h+=t}const i=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");i&&(a.recentlyRemovedDateranges=i.split("\t"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(r),1);break;case"VERSION":a.version=parseInt(r);break;case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(r||f)&&y.tagList.push(f?[r,f]:[r]);break;case"DISCONTINUITY":m++,y.tagList.push(["DIS"]);break;case"GAP":y.gap=!0,y.tagList.push([e]);break;case"BITRATE":y.tagList.push([e,r]);break;case"DATERANGE":{const e=new J(r);lt(a,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),lt(a,e,e.clientAttrs);const t=new te(e,a.dateRanges[e.ID]);t.isValid||a.skippedSegments?a.dateRanges[t.id]=t:X.warn(`Ignoring invalid DATERANGE tag: "${r}"`),y.tagList.push(["EXT-X-DATERANGE",r]);break}case"DEFINE":{const e=new J(r);lt(a,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?ut(a,e,s):dt(a,e,t)}break;case"DISCONTINUITY-SEQUENCE":m=parseInt(r);break;case"KEY":{const e=wt(r,t,a);if(e.isSupported()){if("NONE"===e.method){d=void 0;break}d||(d={}),d[e.keyFormat]&&(d=H({},d)),d[e.keyFormat]=e}else X.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${r}"`);break}case"START":a.startTimeOffset=Et(r);break;case"MAP":{const e=new J(r);if(lt(a,e,["BYTERANGE","URI"]),y.duration){const r=new oe(n,t);Lt(r,e,i,d),u=r,y.initSegment=u,u.rawProgramDateTime&&!y.rawProgramDateTime&&(y.rawProgramDateTime=u.rawProgramDateTime)}else Lt(y,e,i,d),u=y,b=!0;break}case"SERVER-CONTROL":{const e=new J(r);a.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),a.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const e=new J(r);a.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=a.partList;e||(e=a.partList=[]);const i=p>0?e[e.length-1]:void 0,n=p++,s=new J(r);lt(a,s,["BYTERANGE","URI"]);const o=new le(s,y,t,n,i);e.push(o),y.duration+=o.duration;break}case"PRELOAD-HINT":{const e=new J(r);lt(a,e,["URI"]),a.preloadHint=e;break}case"RENDITION-REPORT":{const e=new J(r);lt(a,e,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(e);break}default:X.warn(`line parsed but not handled: ${l}`)}}}g&&!g.relurl?(o.pop(),f-=g.duration,a.partList&&(a.fragmentHint=g)):a.partList&&(St(y,g),y.cc=m,a.fragmentHint=y,d&&Ct(y,d,a));const _=o.length,T=o[0],w=o[_-1];if(f+=a.skippedSegments*a.targetduration,f>0&&_&&w){a.averagetargetduration=f/_;const e=w.sn;a.endSN="initSegment"!==e?e:0,a.live||(w.endList=!0),T&&(a.startCC=T.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(f+=a.fragmentHint.duration),a.totalduration=f,a.endCC=m,v>0&&function(e,t){let i=e[t];for(let n=t;n--;){const t=e[n];if(!t)return;t.programDateTime=i.programDateTime-1e3*t.duration,i=t}}(o,v),a}}function wt(e,t,i){var n,r;const s=new J(e);lt(i,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=null!=(n=s.METHOD)?n:"",o=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,d=null!=(r=s.KEYFORMAT)?r:"identity";o&&s.IV&&!l&&X.error(`Invalid IV: ${s.IV}`);const u=o?Tt.resolve(o,t):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new st(a,u,d,h,l)}function Et(e){const t=new J(e).decimalFloatingPoint("TIME-OFFSET");return z(t)?t:null}function xt(e,t){["video","audio","text"].forEach((i=>{const n=e.filter((e=>function(e,t){const i=pt[t];return!!i&&!0===i[e.slice(0,4)]}(e,i)));if(n.length){const r=n.filter((e=>0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)));t[`${i}Codec`]=r.length>0?r[0]:n[0],e=e.filter((e=>-1===n.indexOf(e)))}})),t.unknownCodecs=e}function kt(e,t,i){const n=t[i];n&&(e[i]=n)}function St(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),z(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function Lt(e,t,i,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=i,e.sn="initSegment",n&&(e.levelkeys=n),e.initSegment=null}function Ct(e,t,i){e.levelkeys=t;const{encryptedFragments:n}=i;n.length&&n[n.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||n.push(e)}var At="manifest",It="level",Rt="audioTrack",Dt="subtitleTrack",Pt="main",Mt="audio",Ot="subtitle";function Ft(e){const{type:t}=e;switch(t){case Rt:return Mt;case Dt:return Ot;default:return Pt}}function Nt(e,t){let i=e.url;return void 0!==i&&0!==i.indexOf("data:")||(i=t.url),i}class Bt{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.LEVEL_LOADING,this.onLevelLoading,this),e.on(q.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(q.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.LEVEL_LOADING,this.onLevelLoading,this),e.off(q.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(q.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,n=t.loader,r=new(i||n)(t);return this.loaders[e.type]=r,r}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:At,url:i,deliveryDirectives:null})}onLevelLoading(e,t){const{id:i,level:n,url:r,deliveryDirectives:s}=t;this.load({id:i,level:n,responseType:"text",type:It,url:r,deliveryDirectives:s})}onAudioTrackLoading(e,t){const{id:i,groupId:n,url:r,deliveryDirectives:s}=t;this.load({id:i,groupId:n,level:null,responseType:"text",type:Rt,url:r,deliveryDirectives:s})}onSubtitleTrackLoading(e,t){const{id:i,groupId:n,url:r,deliveryDirectives:s}=t;this.load({id:i,groupId:n,level:null,responseType:"text",type:Dt,url:r,deliveryDirectives:s})}load(e){var t;const i=this.hls.config;let n,r=this.getInternalLoader(e);if(r){const t=r.context;if(t&&t.url===e.url)return void X.trace("[playlist-loader]: playlist request ongoing");X.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}if(n=e.type===At?i.manifestLoadPolicy.default:H({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),null!=(t=e.deliveryDirectives)&&t.part){let t;if(e.type===It&&null!==e.level?t=this.hls.levels[e.level].details:e.type===Rt&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===Dt&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,i=t.targetduration;if(e&&i){const t=1e3*Math.max(3*e,.8*i);n=H({},n,{maxTimeToFirstByteMs:Math.min(t,n.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,n.maxTimeToFirstByteMs)})}}}const s=n.errorRetry||n.timeoutRetry||{},a={loadPolicy:n,timeout:n.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},o={onSuccess:(e,t,i,n)=>{const r=this.getInternalLoader(i);this.resetInternalLoader(i.type);const s=e.data;0===s.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),Tt.isMediaPlaylist(s)?this.handleTrackOrLevelPlaylist(e,t,i,n||null,r):this.handleMasterPlaylist(e,t,i,n)):this.handleManifestParsingError(e,i,new Error("no EXTM3U delimiter"),n||null,t)},onError:(e,t,i,n)=>{this.handleNetworkError(t,i,!1,e,n)},onTimeout:(e,t,i)=>{this.handleNetworkError(t,i,!0,void 0,e)}};r.load(e,a,o)}handleMasterPlaylist(e,t,i,n){const r=this.hls,s=e.data,a=Nt(e,i),o=Tt.parseMasterPlaylist(s,a);if(o.playlistParsingError)return void this.handleManifestParsingError(e,i,o.playlistParsingError,n,t);const{contentSteering:l,levels:c,sessionData:d,sessionKeys:u,startTimeOffset:h,variableList:p}=o;this.variableList=p;const{AUDIO:f=[],SUBTITLES:m,"CLOSED-CAPTIONS":g}=Tt.parseMasterPlaylistMedia(s,a,o);f.length&&(f.some((e=>!e.url))||!c[0].audioCodec||c[0].attrs.AUDIO||(X.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new J({}),bitrate:0,url:""}))),r.trigger(q.MANIFEST_LOADED,{levels:c,audioTracks:f,subtitles:m,captions:g,contentSteering:l,url:a,stats:t,networkDetails:n,sessionData:d,sessionKeys:u,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,t,i,n,r){const s=this.hls,{id:a,level:o,type:l}=i,c=Nt(e,i),d=z(a)?a:0,u=z(o)?o:d,h=Ft(i),p=Tt.parseLevelPlaylist(e.data,c,u,h,d,this.variableList);if(l===At){const e={attrs:new J({}),bitrate:0,details:p,name:"",url:c};s.trigger(q.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:n,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=p,this.handlePlaylistLoaded(p,e,t,i,n,r)}handleManifestParsingError(e,t,i,n,r){this.hls.trigger(q.ERROR,{type:V.NETWORK_ERROR,details:j.MANIFEST_PARSING_ERROR,fatal:t.type===At,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:n,stats:r})}handleNetworkError(e,t,i=!1,n,r){let s=`A network ${i?"timeout":"error"+(n?" (status "+n.code+")":"")} occurred while loading ${e.type}`;e.type===It?s+=`: ${e.level} id: ${e.id}`:e.type!==Rt&&e.type!==Dt||(s+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(s);X.warn(`[playlist-loader]: ${s}`);let o=j.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case At:o=i?j.MANIFEST_LOAD_TIMEOUT:j.MANIFEST_LOAD_ERROR,l=!0;break;case It:o=i?j.LEVEL_LOAD_TIMEOUT:j.LEVEL_LOAD_ERROR,l=!1;break;case Rt:o=i?j.AUDIO_TRACK_LOAD_TIMEOUT:j.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Dt:o=i?j.SUBTITLE_TRACK_LOAD_TIMEOUT:j.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(e.type);const d={type:V.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:c,context:e,error:a,networkDetails:t,stats:r};if(n){const i=(null==t?void 0:t.url)||e.url;d.response=$({url:i,data:void 0},n)}this.hls.trigger(q.ERROR,d)}handlePlaylistLoaded(e,t,i,n,r,s){const a=this.hls,{type:o,level:l,id:c,groupId:d,deliveryDirectives:u}=n,h=Nt(t,n),p=Ft(n),f="number"==typeof n.level&&p===Pt?l:void 0;if(!e.fragments.length){const e=new Error("No Segments found in Playlist");return void a.trigger(q.ERROR,{type:V.NETWORK_ERROR,details:j.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:e,reason:e.message,response:t,context:n,level:f,parent:p,networkDetails:r,stats:i})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const m=e.playlistParsingError;if(m)a.trigger(q.ERROR,{type:V.NETWORK_ERROR,details:j.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:t,context:n,level:f,parent:p,networkDetails:r,stats:i});else switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),s.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case At:case It:a.trigger(q.LEVEL_LOADED,{details:e,level:f||0,id:c||0,stats:i,networkDetails:r,deliveryDirectives:u});break;case Rt:a.trigger(q.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:u});break;case Dt:a.trigger(q.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:u})}}}function Ut(e,t){let i;try{i=new Event("addtrack")}catch(e){i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}function $t(e,t){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(i){X.debug(`[texttrack-utils]: ${i}`);try{const i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}catch(e){X.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${e}`)}}"disabled"===i&&(e.mode=i)}function Gt(e){const t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let t=e.cues.length;t--;)e.removeCue(e.cues[t]);"disabled"===t&&(e.mode=t)}function Ht(e,t,i,n){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0){const r=function(e,t,i){const n=[],r=function(e,t){if(t<e[0].startTime)return 0;const i=e.length-1;if(t>e[i].endTime)return-1;let n=0,r=i;for(;n<=r;){const s=Math.floor((r+n)/2);if(t<e[s].startTime)r=s-1;else{if(!(t>e[s].startTime&&n<i))return s;n=s+1}}return e[n].startTime-t<t-e[r].startTime?n:r}(e,t);if(r>-1)for(let s=r,a=e.length;s<a;s++){const r=e[s];if(r.startTime>=t&&r.endTime<=i)n.push(r);else if(r.startTime>i)return n}return n}(e.cues,t,i);for(let t=0;t<r.length;t++)n&&!n(r[t])||e.removeCue(r[t])}"disabled"===r&&(e.mode=r)}var zt="org.id3",qt="https://aomedia.org/emsg/ID3";function Vt(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const jt=(()=>{const e=Vt();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Kt(e,t){return e.getTime()/1e3-t}class Yt{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(q.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(q.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(q.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(q.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(Gt(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if("metadata"===i.kind&&"id3"===i.label)return Ut(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:n}}}=this;if(!i&&!n)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=Vt();for(let e=0;e<r.length;e++){const t=r[e].type;if(t===qt&&!i||!n)continue;const a=Ie(r[e].data);if(a){const i=r[e].pts;let n=i+r[e].duration;n>jt&&(n=jt),n-i<=0&&(n=i+.25);for(let e=0;e<a.length;e++){const r=a[e];if(!Ce(r)){this.updateId3CueEnds(i,t);const e=new s(i,n,"");e.value=r,t&&(e.type=t),this.id3Track.addCue(e)}}}}}updateId3CueEnds(e,t){var i;const n=null==(i=this.id3Track)?void 0:i.cues;if(n)for(let i=n.length;i--;){const r=n[i];r.type===t&&r.startTime<e&&r.endTime===jt&&(r.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:n}){const{id3Track:r,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:o}}=s;if(r&&(a||o)){let e;e="audio"===n?e=>e.type===zt&&o:"video"===n?e=>e.type===qt&&a:e=>e.type===zt&&o||e.type===qt&&a,Ht(r,t,i,e)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:i,id3Track:n}=this,{dateRanges:r}=t,s=Object.keys(r);if(n){const e=Object.keys(i).filter((e=>!s.includes(e)));for(let t=e.length;t--;){const r=e[t];Object.keys(i[r].cues).forEach((e=>{n.removeCue(i[r].cues[e])})),delete i[r]}}const a=t.fragments[t.fragments.length-1];if(0===s.length||!z(null==a?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=a.programDateTime/1e3-a.start,l=Vt();for(let e=0;e<s.length;e++){const t=s[e],n=r[t],a=i[t],u=(null==a?void 0:a.cues)||{};let h=(null==a?void 0:a.durationKnown)||!1;const p=Kt(n.startDate,o);let f=jt;const m=n.endDate;if(m)f=Kt(m,o),h=!0;else if(n.endOnNext&&!h){const e=s.reduce(((e,t)=>{const i=r[t];return i.class===n.class&&i.id!==t&&i.startDate>n.startDate&&e.push(i),e}),[]).sort(((e,t)=>e.startDate.getTime()-t.startDate.getTime()))[0];e&&(f=Kt(e.startDate,o),h=!0)}const g=Object.keys(n.attr);for(let e=0;e<g.length;e++){const i=g[e];if("ID"===(d=i)||"CLASS"===d||"START-DATE"===d||"DURATION"===d||"END-DATE"===d||"END-ON-NEXT"===d)continue;let r=u[i];if(r)h&&!a.durationKnown&&(r.endTime=f);else{let e=n.attr[i];r=new l(p,f,""),ee(i)&&(c=e,e=Uint8Array.from(c.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),r.value={key:i,data:e},r.type="com.apple.quicktime.HLS",r.id=t,this.id3Track.addCue(r),u[i]=r}}i[t]={cues:u,dateRange:n,durationKnown:h}}var c,d}}class Wt{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:i,targetduration:n}=e,{liveSyncDuration:r,liveSyncDurationCount:s,lowLatencyMode:a}=this.config,o=this.hls.userConfig;let l=a&&i||t;(o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==r?r:s*n);const c=n;return l+Math.min(1*this.stallCount,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(null===e||null===t||null===i)return null;const n=i.edge,r=e-t-this.edgeStalled,s=n-i.totalduration,a=n-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(s,r),a)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(q.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(q.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(q.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(q.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(q.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(q.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(q.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(q.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(q.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(q.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var i;t.details===j.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(i=this.levelDetails)&&i.live&&X.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const i=this.computeLatency();if(null===i)return;this._latency=i;const{lowLatencyMode:n,maxLiveSyncPlaybackRate:r}=this.config;if(!n||1===r)return;const s=this.targetLatency;if(null===s)return;const a=i-s,o=a<Math.min(this.maxLatency,s+t.targetduration);if(t.live&&o&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,r)),i=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,i))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const Xt=["NONE","TYPE-0","TYPE-1",null];class Qt{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Zt{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>e)).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(e){const t=e%this.url.length;this._urlId!==t&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=t)}get audioGroupId(){var e;return null==(e=this.audioGroupIds)?void 0:e[this.urlId]}get textGroupId(){var e;return null==(e=this.textGroupIds)?void 0:e[this.urlId]}addFallback(e){this.url.push(e.url),this._attrs.push(e.attrs)}}function Jt(e,t){const i=t.startPTS;if(z(i)){let n,r=0;t.sn>e.sn?(r=i-e.start,n=e):(r=e.start-i,n=t),n.duration!==r&&(n.duration=r)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function ei(e,t,i,n,r,s){n-i<=0&&(X.warn("Fragment should have a positive duration",t),n=i+t.duration,s=r+t.duration);let a=i,o=n;const l=t.startPTS,c=t.endPTS;if(z(l)){const e=Math.abs(l-i);z(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,a=Math.max(i,l),i=Math.min(i,l),r=Math.min(r,t.startDTS),o=Math.min(n,c),n=Math.max(n,c),s=Math.max(s,t.endDTS)}const d=i-t.start;0!==t.start&&(t.start=i),t.duration=n-t.start,t.startPTS=i,t.maxStartPTS=a,t.startDTS=r,t.endPTS=n,t.minEndPTS=o,t.endDTS=s;const u=t.sn;if(!e||u<e.startSN||u>e.endSN)return 0;let h;const p=u-e.startSN,f=e.fragments;for(f[p]=t,h=p;h>0;h--)Jt(f[h],f[h-1]);for(h=p;h<f.length-1;h++)Jt(f[h],f[h+1]);return e.fragmentHint&&Jt(f[f.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function ti(e,t){const i=t.startSN+t.skippedSegments-e.startSN,n=e.fragments;i<0||i>=n.length||ii(t,n[i].start)}function ii(e,t){if(t){const i=e.fragments;for(let n=e.skippedSegments;n<i.length;n++)i[n].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function ni(e,t,i){var n;return null!=e&&e.details?ri(null==(n=e.details)?void 0:n.partList,t,i):null}function ri(e,t,i){if(e)for(let n=e.length;n--;){const r=e[n];if(r.index===i&&r.fragment.sn===t)return r}return null}function si(e){switch(e.details){case j.FRAG_LOAD_TIMEOUT:case j.KEY_LOAD_TIMEOUT:case j.LEVEL_LOAD_TIMEOUT:case j.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function ai(e,t){const i=si(t);return e.default[(i?"timeout":"error")+"Retry"]}function oi(e,t){const i="linear"===e.backoff?1:Math.pow(2,t);return Math.min(i*e.retryDelayMs,e.maxRetryDelayMs)}function li(e){return $($({},e),{errorRetry:null,timeoutRetry:null})}function ci(e,t,i,n){return!!e&&t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(n)||!!i)}const di=function(e,t){let i=0,n=e.length-1,r=null,s=null;for(;i<=n;){r=(i+n)/2|0,s=e[r];const a=t(s);if(a>0)i=r+1;else{if(!(a<0))return s;n=r-1}}return null};function ui(e,t,i=0,n=0){let r=null;if(e?r=t[e.sn-t[0].sn+1]||null:0===i&&0===t[0].start&&(r=t[0]),r&&0===hi(i,n,r))return r;const s=di(t,hi.bind(null,i,n));return!s||s===e&&r?r:s}function hi(e=0,t=0,i){if(i.start<=e&&i.start+i.duration>e)return 0;const n=Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-n<=e?1:i.start-n>e&&i.start?-1:0}function pi(e,t,i){const n=1e3*Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return(i.endProgramDateTime||0)-n>e}function fi(e,t,i){if(performance.now()-e.lastErrorPerfMs>3e5)return!0;const n=e.details;if(t.details===j.FRAG_GAP&&n&&t.frag){const e=t.frag.start,i=ui(null,n.fragments,e);if(i&&!i.gap)return!0}if(i&&e.errors.length<i.errors.length){const i=e.errors[e.errors.length-1];if(n&&i.frag&&t.frag&&Math.abs(i.frag.start-t.frag.start)>3*n.targetduration)return!0}return!1}class mi{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=X.log.bind(X,`${t}:`),this.warn=X.warn.bind(X,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t){const i=null==t?void 0:t.renditionReports;if(i){let n=-1;for(let r=0;r<i.length;r++){const s=i[r];let a;try{a=new self.URL(s.URI,t.url).href}catch(e){X.warn(`Could not construct new URL for Rendition Report: ${e}`),a=s.URI||""}if(a===e){n=r;break}a===e.substring(0,a.length)&&(n=r)}if(-1!==n){const e=i[n],r=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let s=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);s>=0&&e>t.partTarget&&(s+=1)}return new Qt(r,s>=0?s:void 0,"")}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,i){const{details:n,stats:r}=t,s=self.performance.now(),a=r.loading.first?Math.max(0,s-r.loading.first):0;if(n.advancedDateTime=Date.now()-a,n.live||null!=i&&i.live){if(n.reloaded(i),i&&this.log(`live playlist ${e} ${n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:"MISSED"}`),i&&n.fragments.length>0&&function(e,t){let i=null;const n=e.fragments;for(let e=n.length-1;e>=0;e--){const t=n[e].initSegment;if(t){i=t;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;let r,s=0;if(function(e,t,i){const n=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(n?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let e=r;e<=s;e++){const r=l[a+e];let s=o[e];n&&!s&&e<n&&(s=t.fragments[e]=r),r&&s&&i(r,s)}}(e,t,((e,n)=>{e.relurl&&(s=e.cc-n.cc),z(e.startPTS)&&z(e.endPTS)&&(n.start=n.startPTS=e.startPTS,n.startDTS=e.startDTS,n.maxStartPTS=e.maxStartPTS,n.endPTS=e.endPTS,n.endDTS=e.endDTS,n.minEndPTS=e.minEndPTS,n.duration=e.endPTS-e.startPTS,n.duration&&(r=n),t.PTSKnown=t.alignedSliding=!0),n.elementaryStreams=e.elementaryStreams,n.loader=e.loader,n.stats=e.stats,n.urlId=e.urlId,e.initSegment&&(n.initSegment=e.initSegment,i=e.initSegment)})),i&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((e=>{var t;e.initSegment&&e.initSegment.relurl!==(null==(t=i)?void 0:t.relurl)||(e.initSegment=i)})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((e=>!e)),t.deltaUpdateFailed){X.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,i){const n=H({},e);return i&&i.forEach((e=>{delete n[e]})),Object.keys(t).forEach((e=>{const i=new te(t[e].attr,n[e]);i.isValid?n[e]=i:X.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(t[e].attr)}"`)})),n}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));const a=t.fragments;if(s){X.warn("discontinuity sliding from playlist, take drift into account");for(let e=0;e<a.length;e++)a[e].cc+=s}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,i){if(e&&t){let n=0;for(let r=0,s=e.length;r<=s;r++){const s=e[r],a=t[r+n];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?i(s,a):n--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),r?ei(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):ti(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const o=t.advancedDateTime;if(t.advanced&&o){const e=t.edge;t.driftStart||(t.driftStartTime=o,t.driftStart=e),t.driftEndTime=o,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}(i,n),!this.canLoad||!n.live)return;let a,o,l;if(n.canBlockReload&&n.endSN&&n.advanced){const e=this.hls.config.lowLatencyMode,r=n.lastPartSn,s=n.endSN,c=n.lastPartIndex,d=r===s,u=e?0:c;-1!==c?(o=d?s+1:r,l=d?u:c+1):o=s+1;const h=n.age,p=h+n.ageHeader;let f=Math.min(p-n.partTarget,1.5*n.targetduration);if(f>0){if(i&&f>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${f} with playlist age: ${n.age}`),f=0;else{const e=Math.floor(f/n.targetduration);o+=e,void 0!==l&&(l+=Math.round(f%n.targetduration/n.partTarget)),this.log(`CDN Tune-in age: ${n.ageHeader}s last advanced ${h.toFixed(2)}s goal: ${f} skip sn ${e} to part ${l}`)}n.tuneInGoal=f}if(a=this.getDeliveryDirectives(n,t.deliveryDirectives,o,l),e||!d)return void this.loadPlaylist(a)}else n.canBlockReload&&(a=this.getDeliveryDirectives(n,t.deliveryDirectives,o,l));const c=this.hls.mainForwardBufferInfo,d=c?c.end-c.len:0,u=function(e,t=1/0){let i=1e3*e.targetduration;if(e.updated){const n=e.fragments,r=4;if(n.length&&i*r>t){const e=1e3*n[n.length-1].duration;e<i&&(i=e)}}else i/=2;return Math.round(i)}(n,1e3*(n.edge-d));n.updated&&s>this.requestScheduled+u&&(this.requestScheduled=r.loading.start),void 0!==o&&n.canBlockReload?this.requestScheduled=r.loading.first+u-(1e3*n.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+u<s?this.requestScheduled=s:this.requestScheduled-s<=0&&(this.requestScheduled+=u);let h=this.requestScheduled-s;h=Math.max(0,h),this.log(`reload live playlist ${e} in ${Math.round(h)} ms`),this.timer=self.setTimeout((()=>this.loadPlaylist(a)),h)}else this.clearTimer()}getDeliveryDirectives(e,t,i,n){let r=function(e,t){const{canSkipUntil:i,canSkipDateRanges:n,endSN:r}=e;return i&&(void 0!==t?t-r:0)<i?n?"v2":"YES":""}(e,i);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,n=t.part,r=""),new Qt(i,n,r)}checkRetry(e){const t=e.details,i=si(e),n=e.errorAction,{action:r,retryCount:s=0,retryConfig:a}=n||{},o=!!n&&!!a&&(5===r||!n.resolved&&2===r);if(o){var l;if(this.requestScheduled=-1,s>=a.maxNumRetry)return!1;if(i&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=oi(a,s);this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,n.resolved=!0}return o}}let gi;class yi extends mi{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(q.LEVEL_LOADED,this.onLevelLoaded,this),e.on(q.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(q.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(q.FRAG_LOADED,this.onFragLoaded,this),e.on(q.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(q.LEVEL_LOADED,this.onLevelLoaded,this),e.off(q.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(q.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(q.FRAG_LOADED,this.onFragLoaded,this),e.off(q.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=[],n={};let r;t.levels.forEach((e=>{var t;const s=e.attrs;-1!==(null==(t=e.audioCodec)?void 0:t.indexOf("mp4a.40.34"))&&(gi||(gi=/chrome|firefox/i.test(navigator.userAgent)),gi&&(e.audioCodec=void 0));const{AUDIO:a,CODECS:o,"FRAME-RATE":l,"PATHWAY-ID":c,RESOLUTION:d,SUBTITLES:u}=s,h=`${c||"."}-${e.bitrate}-${d}-${l}-${o}`;r=n[h],r?r.addFallback(e):(r=new Zt(e),n[h]=r,i.push(r)),vi(r,"audio",a),vi(r,"text",u)})),this.filterAndSortMediaOptions(i,t)}filterAndSortMediaOptions(e,t){let i=[],n=[],r=!1,s=!1,a=!1,o=e.filter((({audioCodec:e,videoCodec:t,width:i,height:n,unknownCodecs:o})=>(r||(r=!(!i||!n)),s||(s=!!t),a||(a=!!e),!(null!=o&&o.length)&&(!e||mt(e,"audio"))&&(!t||mt(t,"video")))));if((r||s)&&a&&(o=o.filter((({videoCodec:e,width:t,height:i})=>!!e||!(!t||!i)))),0===o.length)return void Promise.resolve().then((()=>{if(this.hls){const e=new Error("no level with compatible codecs found in manifest");this.hls.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}));t.audioTracks&&(i=t.audioTracks.filter((e=>!e.audioCodec||mt(e.audioCodec,"audio"))),bi(i)),t.subtitles&&(n=t.subtitles,bi(n));const l=o.slice(0);o.sort(((e,t)=>e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"]?(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1:e.bitrate!==t.bitrate?e.bitrate-t.bitrate:e.attrs["FRAME-RATE"]!==t.attrs["FRAME-RATE"]?e.attrs.decimalFloatingPoint("FRAME-RATE")-t.attrs.decimalFloatingPoint("FRAME-RATE"):e.attrs.SCORE!==t.attrs.SCORE?e.attrs.decimalFloatingPoint("SCORE")-t.attrs.decimalFloatingPoint("SCORE"):r&&e.height!==t.height?e.height-t.height:0));let c=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o),o.length!==l.length))for(let e=0;e<l.length;e++)if(l[e].pathwayId===o[0].pathwayId){c=l[e];break}this._levels=o;for(let e=0;e<o.length;e++)if(o[e]===c){this._firstLevel=e,this.log(`manifest loaded, ${o.length} level(s) found, first bitrate: ${c.bitrate}`);break}const d=a&&!s,u={levels:o,audioTracks:i,subtitleTracks:n,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:s,altAudio:!d&&i.some((e=>!!e.url))};this.hls.trigger(q.MANIFEST_PARSED,u),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const i=new Error("invalid level idx"),n=e<0;if(this.hls.trigger(q.ERROR,{type:V.OTHER_ERROR,details:j.LEVEL_SWITCH_ERROR,level:e,fatal:n,error:i,reason:i.message}),n)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,n=this.currentLevel,r=n?n.attrs["PATHWAY-ID"]:void 0,s=t[e],a=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,i===e&&s.details&&n&&r===a)return;this.log(`Switching to level ${e}${a?" with Pathway "+a:""} from level ${i}${r?" with Pathway "+r:""}`);const o=H({},s,{level:e,maxBitrate:s.maxBitrate,attrs:s.attrs,uri:s.uri,urlId:s.urlId});delete o._attrs,delete o._urlId,this.hls.trigger(q.LEVEL_SWITCHING,o);const l=s.details;if(!l||l.live){const e=this.switchParams(s.uri,null==n?void 0:n.details);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===It&&t.context.level===this.level&&this.checkRetry(t)}onFragLoaded(e,{frag:t}){if(void 0!==t&&t.type===Pt){const e=this._levels[t.level];void 0!==e&&(e.loadError=0)}}onLevelLoaded(e,t){var i;const{level:n,details:r}=t,s=this._levels[n];var a;if(!s)return this.warn(`Invalid level index ${n}`),void(null!=(a=t.deliveryDirectives)&&a.skip&&(r.deltaUpdateFailed=!0));n===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0),this.playlistLoaded(n,t,s.details)):null!=(i=t.deliveryDirectives)&&i.skip&&(r.deltaUpdateFailed=!0)}onAudioTrackSwitched(e,t){const i=this.currentLevel;if(!i)return;const n=this.hls.audioTracks[t.id].groupId;if(i.audioGroupIds&&i.audioGroupId!==n){let e=-1;for(let t=0;t<i.audioGroupIds.length;t++)if(i.audioGroupIds[t]===n){e=t;break}-1!==e&&e!==i.urlId&&(i.urlId=e,this.canLoad&&this.startLoad())}}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){const n=i.urlId;let r=i.uri;if(e)try{r=e.addDirectives(r)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}const s=i.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:""} with${s?" Pathway "+s:""} URI ${n+1}/${i.url.length} ${r}`),this.clearTimer(),this.hls.trigger(q.LEVEL_LOADING,{url:r,level:t,id:n,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e,t){const i=(e,i)=>i!==t,n=this._levels.filter(((n,r)=>r!==e||(n.url.length>1&&void 0!==t?(n.url=n.url.filter(i),n.audioGroupIds&&(n.audioGroupIds=n.audioGroupIds.filter(i)),n.textGroupIds&&(n.textGroupIds=n.textGroupIds.filter(i)),n.urlId=0,!0):(this.steering&&this.steering.removeLevel(n),!1))));this.hls.trigger(q.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){t.forEach(((e,t)=>{const{details:i}=e;null!=i&&i.fragments&&i.fragments.forEach((e=>{e.level=t}))})),this._levels=t}}function vi(e,t,i){i&&("audio"===t?(e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds[e.url.length-1]=i):"text"===t&&(e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds[e.url.length-1]=i))}function bi(e){const t={};e.forEach((e=>{const i=e.groupId||"";e.id=t[i]=t[i]||0,t[i]++}))}var _i="NOT_LOADED",Ti="APPENDING",wi="PARTIAL",Ei="OK";class xi{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(q.BUFFER_APPENDED,this.onBufferAppended,this),e.on(q.FRAG_BUFFERED,this.onFragBuffered,this),e.on(q.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(q.BUFFER_APPENDED,this.onBufferAppended,this),e.off(q.FRAG_BUFFERED,this.onFragBuffered,this),e.off(q.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let t=i.length;t--;){const n=i[t];if(!n)break;const r=n.end;if(n.start<=e&&null!==r&&e<=r)return n}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:i}=this,n=Object.keys(i);for(let r=n.length;r--;){const s=i[n[r]];if((null==s?void 0:s.body.type)===t&&s.buffered){const t=s.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,i,n){this.timeRanges&&(this.timeRanges[e]=t);const r=(null==n?void 0:n.fragment.sn)||-1;Object.keys(this.fragments).forEach((n=>{const s=this.fragments[n];if(!s)return;if(r>=s.body.sn)return;if(!s.buffered&&!s.loaded)return void(s.body.type===i&&this.removeFragment(s.body));const a=s.range[e];a&&a.time.some((e=>{const i=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return i&&this.removeFragment(s.body),i}))}))}detectPartialFragments(e){const t=this.timeRanges,{frag:i,part:n}=e;if(!t||"initSegment"===i.sn)return;const r=Si(i),s=this.fragments[r];if(!s||s.buffered&&i.gap)return;const a=!i.relurl;Object.keys(t).forEach((e=>{const r=i.elementaryStreams[e];if(!r)return;const o=t[e],l=a||!0===r.partial;s.range[e]=this.getBufferedTimes(i,n,l,o)})),s.loaded=null,Object.keys(s.range).length?(s.buffered=!0,s.body.endList&&(this.endListFragments[s.body.type]=s),ki(s)||this.removeParts(i.sn-1,i.type)):this.removeFragment(s.body)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=i.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const i=Si(e);let n=this.fragments[i];!n&&t&&(n=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,n.buffered=!0)}getBufferedTimes(e,t,i,n){const r={time:[],partial:i},s=e.start,a=e.end,o=e.minEndPTS||a,l=e.maxStartPTS||s;for(let e=0;e<n.length;e++){const t=n.start(e)-this.bufferPadding,i=n.end(e)+this.bufferPadding;if(l>=t&&o<=i){r.time.push({startPTS:Math.max(s,n.start(e)),endPTS:Math.min(a,n.end(e))});break}if(s<i&&a>t)r.partial=!0,r.time.push({startPTS:Math.max(s,n.start(e)),endPTS:Math.min(a,n.end(e))});else if(a<=t)break}return r}getPartialFragment(e){let t,i,n,r=null,s=0;const{bufferPadding:a,fragments:o}=this;return Object.keys(o).forEach((l=>{const c=o[l];c&&ki(c)&&(i=c.body.start-a,n=c.body.end+a,e>=i&&e<=n&&(t=Math.min(e-i,n-e),s<=t&&(r=c.body,s=t)))})),r}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||ki(t))}getState(e){const t=Si(e),i=this.fragments[t];return i?i.buffered?ki(i)?wi:Ei:Ti:_i}isTimeBuffered(e,t,i){let n,r;for(let s=0;s<i.length;s++){if(n=i.start(s)-this.bufferPadding,r=i.end(s)+this.bufferPadding,e>=n&&t<=r)return!0;if(t<=n)return!1}return!1}onFragLoaded(e,t){const{frag:i,part:n}=t;if("initSegment"===i.sn||i.bitrateTest)return;const r=n?null:t,s=Si(i);this.fragments[s]={body:i,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:n,timeRanges:r}=t;if("initSegment"===i.sn)return;const s=i.type;if(n){let e=this.activePartLists[s];e||(this.activePartLists[s]=e=[]),e.push(n)}this.timeRanges=r,Object.keys(r).forEach((e=>{const t=r[e];this.detectEvictedFragments(e,t,s,n)}))}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Si(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,i,n,r){n&&!this.hasGaps||Object.keys(this.fragments).forEach((s=>{const a=this.fragments[s];if(!a)return;const o=a.body;o.type!==i||n&&!o.gap||o.start<t&&o.end>e&&(a.buffered||r)&&this.removeFragment(o)}))}removeFragment(e){const t=Si(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const t=e.sn;this.activePartLists[e.type]=i.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function ki(e){var t,i,n;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(i=e.range.audio)?void 0:i.partial)||(null==(n=e.range.audiovideo)?void 0:n.partial))}function Si(e){return`${e.type}_${e.level}_${e.urlId}_${e.sn}`}const Li=Math.pow(2,17);class Ci{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new Ri({type:V.NETWORK_ERROR,details:j.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(i?"part list":"url")),networkDetails:null}));this.abort();const n=this.config,r=n.fLoader,s=n.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void o(Ii(e));e.gap=!1}const l=this.loader=e.loader=r?new r(n):new s(n),c=Ai(e),d=li(n.fragLoadPolicy.default),u={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:Li};e.stats=l.stats,l.load(c,u,{onSuccess:(t,i,n,r)=>{this.resetLoader(e,l);let s=t.data;n.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),a({frag:e,part:null,payload:s,networkDetails:r})},onError:(t,n,r,s)=>{this.resetLoader(e,l),o(new Ri({type:V.NETWORK_ERROR,details:j.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:$({url:i,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:r,stats:s}))},onAbort:(t,i,n)=>{this.resetLoader(e,l),o(new Ri({type:V.NETWORK_ERROR,details:j.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:n,stats:t}))},onTimeout:(t,i,n)=>{this.resetLoader(e,l),o(new Ri({type:V.NETWORK_ERROR,details:j.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${u.timeout}ms`),networkDetails:n,stats:t}))},onProgress:(i,n,r,s)=>{t&&t({frag:e,part:null,payload:r,networkDetails:s})}})}))}loadPart(e,t,i){this.abort();const n=this.config,r=n.fLoader,s=n.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(Ii(e,t));const l=this.loader=e.loader=r?new r(n):new s(n),c=Ai(e,t),d=li(n.fragLoadPolicy.default),u={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Li};t.stats=l.stats,l.load(c,u,{onSuccess:(n,r,s,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:n.data,networkDetails:o};i(c),a(c)},onError:(i,n,r,s)=>{this.resetLoader(e,l),o(new Ri({type:V.NETWORK_ERROR,details:j.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:$({url:c.url,data:void 0},i),error:new Error(`HTTP Error ${i.code} ${i.text}`),networkDetails:r,stats:s}))},onAbort:(i,n,r)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new Ri({type:V.NETWORK_ERROR,details:j.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:r,stats:i}))},onTimeout:(i,n,r)=>{this.resetLoader(e,l),o(new Ri({type:V.NETWORK_ERROR,details:j.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${u.timeout}ms`),networkDetails:r,stats:i}))}})}))}updateStatsFromPart(e,t){const i=e.stats,n=t.stats,r=n.total;if(i.loaded+=n.loaded,r){const n=Math.round(e.duration/t.duration),s=Math.min(Math.round(i.loaded/r),n),a=(n-s)*Math.round(i.loaded/s);i.total=i.loaded+a}else i.total=Math.max(i.loaded,i.total);const s=i.loading,a=n.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Ai(e,t=null){const i=t||e,n={frag:e,part:t,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},r=i.byteRangeStartOffset,s=i.byteRangeEndOffset;if(z(r)&&z(s)){var a;let t=r,i=s;if("initSegment"===e.sn&&"AES-128"===(null==(a=e.decryptdata)?void 0:a.method)){const e=s-r;e%16&&(i=s+(16-e%16)),0!==r&&(n.resetIV=!0,t=r-16)}n.rangeStart=t,n.rangeEnd=i}return n}function Ii(e,t){const i=new Error(`GAP ${e.gap?"tag":"attribute"} found`),n={type:V.MEDIA_ERROR,details:j.FRAG_GAP,fatal:!1,frag:e,error:i,networkDetails:null};return t&&(n.part=t),(t||e).stats.aborted=!0,new Ri(n)}class Ri extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Di{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const t in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[t].loader;if(i){if(e&&e!==i.context.frag.type)return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=j.KEY_LOAD_ERROR,i,n,r){return new Ri({type:V.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:i,networkDetails:n})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:n}=e;for(let e=0;e<t.length;e++){const r=t[e];if(n<=r.cc&&("initSegment"===i||"initSegment"===r.sn||i<r.sn)){this.emeController.selectKeySystemFormat(r).then((e=>{r.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var i,n;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const i=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,j.KEY_LOAD_ERROR,i))}const s=r.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,j.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));let a=this.keyUriToKeyInfo[s];if(null!=(i=a)&&i.decryptdata.key)return r.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});var o;if(null!=(n=a)&&n.keyLoadPromise)switch(null==(o=a.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then((t=>(r.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:a})))}switch(a=this.keyUriToKeyInfo[s]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===r.keyFormat?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,j.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(i);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,i)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,n=new(0,i.loader)(i);return t.keyLoader=e.loader=n,e.keyLoadPromise=new Promise(((r,s)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=i.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,i,n)=>{const{frag:a,keyInfo:o,url:l}=i;if(!a.decryptdata||o!==this.keyUriToKeyInfo[l])return s(this.createKeyLoadError(a,j.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),n));o.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,o.loader=null,r({frag:a,keyInfo:o})},onError:(e,i,n,r)=>{this.resetLoader(i),s(this.createKeyLoadError(t,j.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),n,$({url:a.url,data:void 0},e)))},onTimeout:(e,i,n)=>{this.resetLoader(i),s(this.createKeyLoadError(t,j.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),n))},onAbort:(e,i,n)=>{this.resetLoader(i),s(this.createKeyLoadError(t,j.INTERNAL_ABORTED,new Error("key loading aborted"),n))}};n.load(a,l,c)}))}resetLoader(e){const{frag:t,keyInfo:i,url:n}=e,r=i.loader;t.keyLoader===r&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[n],r&&r.destroy()}}const Pi={length:0,start:()=>0,end:()=>0};class Mi{static isBuffered(e,t){try{if(e){const i=Mi.getBuffered(e);for(let e=0;e<i.length;e++)if(t>=i.start(e)&&t<=i.end(e))return!0}}catch(e){}return!1}static bufferInfo(e,t,i){try{if(e){const n=Mi.getBuffered(e),r=[];let s;for(s=0;s<n.length;s++)r.push({start:n.start(s),end:n.end(s)});return this.bufferedInfo(r,t,i)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.sort((function(e,t){return e.start-t.start||t.end-e.end}));let n=[];if(i)for(let t=0;t<e.length;t++){const r=n.length;if(r){const s=n[r-1].end;e[t].start-s<i?e[t].end>s&&(n[r-1].end=e[t].end):n.push(e[t])}else n.push(e[t])}else n=e;let r,s=0,a=t,o=t;for(let e=0;e<n.length;e++){const l=n[e].start,c=n[e].end;if(t+i>=l&&t<c)a=l,o=c,s=o-t;else if(t+i<l){r=l;break}}return{len:s,start:a||0,end:o||0,nextStart:r}}static getBuffered(e){try{return e.buffered}catch(e){return X.log("failed to get media.buffered",e),Pi}}}class Oi{constructor(e,t,i,n=0,r=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=i,this.size=n,this.part=r,this.partial=s}}function Fi(e,t){let i=null;for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r&&r.cc===t){i=r;break}}return i}function Ni(e,t){if(e){const i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}function Bi(e,t){const i=t.fragments;for(let t=0,n=i.length;t<n;t++)Ni(i[t],e);t.fragmentHint&&Ni(t.fragmentHint,e),t.alignedSliding=!0}function Ui(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const i=e.fragments,n=t.fragments;if(!i.length||!n.length)return;const r=n[Math.round(n.length/2)-1],s=Fi(i,r.cc)||i[Math.round(i.length/2)-1],a=r.programDateTime,o=s.programDateTime;null!==a&&null!==o&&Bi((o-a)/1e3-(s.start-r.start),e)}class $i{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class Gi{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class Hi{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let e=0;e<4;e++)i[e]=t.getUint32(4*e);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,n=i[0],r=i[1],s=i[2],a=i[3],o=this.invSubMix,l=o[0],c=o[1],d=o[2],u=o[3],h=new Uint32Array(256);let p=0,f=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){let i=f^f<<1^f<<2^f<<3^f<<4;i=i>>>8^255&i^99,e[p]=i,t[i]=p;const o=h[p],m=h[o],g=h[m];let y=257*h[i]^16843008*i;n[p]=y<<24|y>>>8,r[p]=y<<16|y>>>16,s[p]=y<<8|y>>>24,a[p]=y,y=16843009*g^65537*m^257*o^16843008*p,l[i]=y<<24|y>>>8,c[i]=y<<16|y>>>16,d[i]=y<<8|y>>>24,u[i]=y,p?(p=o^h[h[h[g^o]]],f^=h[h[f]]):p=f=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,n=0;for(;n<t.length&&i;)i=t[n]===this.key[n],n++;if(i)return;this.key=t;const r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);const s=this.ksRows=4*(r+6+1);let a,o;const l=this.keySchedule=new Uint32Array(s),c=this.invKeySchedule=new Uint32Array(s),d=this.sBox,u=this.rcon,h=this.invSubMix,p=h[0],f=h[1],m=h[2],g=h[3];let y,v;for(a=0;a<s;a++)a<r?y=l[a]=t[a]:(v=y,a%r==0?(v=v<<8|v>>>24,v=d[v>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[255&v],v^=u[a/r|0]<<24):r>6&&a%r==4&&(v=d[v>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[255&v]),l[a]=y=(l[a-r]^v)>>>0);for(o=0;o<s;o++)a=s-o,v=3&o?l[a]:l[a-4],c[o]=o<4||a<=4?v:p[d[v>>>24]]^f[d[v>>>16&255]]^m[d[v>>>8&255]]^g[d[255&v]],c[o]=c[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,i){const n=this.keySize+6,r=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,o=a[0],l=a[1],c=a[2],d=a[3],u=this.uint8ArrayToUint32Array_(i);let h=u[0],p=u[1],f=u[2],m=u[3];const g=new Int32Array(e),y=new Int32Array(g.length);let v,b,_,T,w,E,x,k,S,L,C,A,I,R;const D=this.networkToHostOrderSwap;for(;t<g.length;){for(S=D(g[t]),L=D(g[t+1]),C=D(g[t+2]),A=D(g[t+3]),w=S^r[0],E=A^r[1],x=C^r[2],k=L^r[3],I=4,R=1;R<n;R++)v=o[w>>>24]^l[E>>16&255]^c[x>>8&255]^d[255&k]^r[I],b=o[E>>>24]^l[x>>16&255]^c[k>>8&255]^d[255&w]^r[I+1],_=o[x>>>24]^l[k>>16&255]^c[w>>8&255]^d[255&E]^r[I+2],T=o[k>>>24]^l[w>>16&255]^c[E>>8&255]^d[255&x]^r[I+3],w=v,E=b,x=_,k=T,I+=4;v=s[w>>>24]<<24^s[E>>16&255]<<16^s[x>>8&255]<<8^s[255&k]^r[I],b=s[E>>>24]<<24^s[x>>16&255]<<16^s[k>>8&255]<<8^s[255&w]^r[I+1],_=s[x>>>24]<<24^s[k>>16&255]<<16^s[w>>8&255]<<8^s[255&E]^r[I+2],T=s[k>>>24]<<24^s[w>>16&255]<<16^s[E>>8&255]<<8^s[255&x]^r[I+3],y[t]=D(v^h),y[t+1]=D(T^p),y[t+2]=D(_^f),y[t+3]=D(b^m),h=S,p=L,f=C,m=A,t+=4}return y.buffer}}class zi{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(e){}null===this.subtle&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,i=t&&new DataView(e.buffer).getUint8(t-1);return i?we(e,0,t-i):e}(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i){return this.useSoftware?new Promise(((n,r)=>{this.softwareDecrypt(new Uint8Array(e),t,i);const s=this.flush();s?n(s.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,i)}softwareDecrypt(e,t,i){const{currentIV:n,currentResult:r,remainderData:s}=this;this.logOnce("JS AES decrypt"),s&&(e=Je(s,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;n&&(i=n);let o=this.softwareDecrypter;o||(o=this.softwareDecrypter=new Hi),o.expandKey(t);const l=r;return this.currentResult=o.decrypt(a.buffer,0,i),this.currentIV=we(a,-16).buffer,l||null}webCryptoDecrypt(e,t,i){const n=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new Gi(n,t)),this.fastAesKey.expandKey().then((t=>n?(this.logOnce("WebCrypto AES decrypt"),new $i(n,new Uint8Array(i)).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized")))).catch((n=>(X.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${n.name}: ${n.message}`),this.onWebCryptoError(e,t,i))))}onWebCryptoError(e,t,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i);const n=this.flush();if(n)return n.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%16;return i!==e.length&&(t=we(e,0,i),this.remainderData=we(e,i)),t}logOnce(e){this.logEnabled&&(X.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const qi="STOPPED",Vi="IDLE",ji="KEY_LOADING",Ki="FRAG_LOADING",Yi="FRAG_LOADING_WAITING_RETRY",Wi="WAITING_TRACK",Xi="PARSING",Qi="PARSED",Zi="ENDED",Ji="ERROR",en="WAITING_INIT_PTS",tn="WAITING_LEVEL";class nn extends class{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}{constructor(e,t,i,n,r){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=qi,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=r,this.logPrefix=n,this.log=X.log.bind(X,`${n}:`),this.warn=X.warn.bind(X,`${n}:`),this.hls=e,this.fragmentLoader=new Ci(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new zi(e.config),e.on(q.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=qi}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const i=t.partList;if(null!=i&&i.length){const e=i[i.length-1];return Mi.isBuffered(this.media,e.start+e.duration/2)}const n=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(n)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levels[this.levelLastLoaded])?void 0:e.details}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);const n=this.config;this.levels&&n.autoStartLoad&&this.state===qi&&this.startLoad(n.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:i,mediaBuffer:n,state:r}=this,s=i?i.currentTime:0,a=Mi.bufferInfo(n||i,s,e.maxBufferHole);if(this.log(`media seeking to ${z(s)?s.toFixed(3):s}, state: ${r}`),this.state===Zi)this.resetLoadingState();else if(t){const i=e.maxFragLookUpTolerance,n=t.start-i,r=t.start+t.duration+i;if(!a.len||r<a.start||n>a.end){const e=s>r;(s<n||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0),this.lastCurrentTime=s),this.loadedmetadata||a.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=qi,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){this._doFragLoad(e,t,i,(t=>{if(this.fragContextChanged(e))return this.warn(`Fragment ${e.sn}${t.part?" p: "+t.part.index:""} of level ${e.level} was dropped during download.`),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(t)})).then((t=>{if(!t)return;const i=this.state;this.fragContextChanged(e)?(i===Ki||!this.fragCurrent&&i===Xi)&&(this.fragmentTracker.removeFragment(e),this.state=Vi):("payload"in t&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(q.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t))})).catch((t=>{this.state!==qi&&this.state!==Ji&&(this.warn(t),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===Ti){const t=e.type,n=this.getFwdBufferInfo(this.mediaBuffer,t),r=Math.max(e.duration,n?n.len:this.config.maxBufferLength);this.reduceMaxBufferLength(r)&&i.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===wi&&i.removeFragment(e))}flushMainBuffer(e,t,i=null){if(!(e-t))return;const n={startOffset:e,endOffset:t,type:i};this.hls.trigger(q.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return t})).then((t=>{const{hls:i}=this,{payload:n}=t,r=e.decryptdata;if(n&&n.byteLength>0&&r&&r.key&&r.iv&&"AES-128"===r.method){const s=self.performance.now();return this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer).catch((t=>{throw i.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((n=>{const r=self.performance.now();return i.trigger(q.FRAG_DECRYPTED,{frag:e,payload:n,stats:{tstart:s,tdecrypt:r}}),t.payload=n,t}))}return t})).then((i=>{const{fragCurrent:n,hls:r,levels:s}=this;if(!s)throw new Error("init load aborted, missing levels");const a=e.stats;this.state=Vi,t.fragmentError=0,e.data=new Uint8Array(i.payload),a.parsing.start=a.buffering.start=self.performance.now(),a.parsing.end=a.buffering.end=self.performance.now(),i.frag===n&&r.trigger(q.FRAG_BUFFERED,{stats:a,frag:n,part:null,id:e.type}),this.tick()})).catch((t=>{this.state!==qi&&this.state!==Ji&&(this.warn(t),this.resetFragmentLoading(e))}))}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId}fragBufferedComplete(e,t){var i,n,r,s;const a=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===Pt?"level":"track"} ${e.level} (frag:[${(null!=(i=e.startPTS)?i:NaN).toFixed(3)}-${(null!=(n=e.endPTS)?n:NaN).toFixed(3)}] > buffer:${a?function(e){let t="";const i=e.length;for(let n=0;n<i;n++)t+=`[${e.start(n).toFixed(3)}-${e.end(n).toFixed(3)}]`;return t}(Mi.getBuffered(a)):"(detached)"})`),this.state=Vi,a&&(!this.loadedmetadata&&e.type==Pt&&a.buffered.length&&(null==(r=this.fragCurrent)?void 0:r.sn)===(null==(s=this.fragPrevious)?void 0:s.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:n,partsLoaded:r}=e,s=!r||0===r.length||r.some((e=>!e)),a=new Oi(i.level,i.sn,i.stats.chunkCount+1,0,n?n.index:-1,!s);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,n){var r;const s=null==t?void 0:t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let a=null;if(!e.encrypted||null!=(r=e.decryptdata)&&r.key?!e.encrypted&&s.encryptedFragments.length&&this.keyLoader.loadClear(e,s.encryptedFragments):(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${e.level}`),this.state=ji,this.fragCurrent=e,a=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(q.KEY_LOADED,e),this.state===ji&&(this.state=Vi),e})),this.hls.trigger(q.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),i=Math.max(e.start,i||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const r=s.partList;if(r&&n){i>e.end&&s.fragmentHint&&(e=s.fragmentHint);const o=this.getNextPart(r,e,i);if(o>-1){const l=r[o];let c;return this.log(`Loading part sn: ${e.sn} p: ${l.index} cc: ${e.cc} of playlist [${s.startSN}-${s.endSN}] parts [0-${o}-${r.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=Ki,c=a?a.then((i=>!i||this.fragContextChanged(i.frag)?null:this.doFragPartsLoad(e,l,t,n))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,n).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(q.FRAG_LOADING,{frag:e,part:l,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(r,i))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${s?"of ["+s.startSN+"-"+s.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),z(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ki;const o=this.config.progressive;let l;return l=o&&a?a.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,n))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,o?n:void 0),a]).then((([e])=>(!o&&e&&n&&n(e),e))).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(q.FRAG_LOADING,{frag:e,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,i,n){return new Promise(((r,s)=>{var a;const o=[],l=null==(a=i.details)?void 0:a.partList,c=t=>{this.fragmentLoader.loadPart(e,t,n).then((n=>{o[t.index]=n;const s=n.part;this.hls.trigger(q.FRAG_LOADED,n);const a=ni(i,e.sn,t.index+1)||ri(l,e.sn,t.index+1);if(!a)return r({frag:e,part:s,partsLoaded:o});c(a)})).catch(s)};c(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===j.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(q.ERROR,t)}else this.hls.trigger(q.ERROR,{type:V.OTHER_ERROR,details:j.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Xi)return void(this.fragCurrent||this.state===qi||this.state===Ji||(this.state=Vi));const{frag:i,part:n,level:r}=t,s=self.performance.now();i.stats.parsing.end=s,n&&(n.stats.parsing.end=s),this.updateLevelTiming(i,n,r,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:n,sn:r,part:s}=e;if(null==t||!t[n])return this.warn(`Levels object was unset while buffering fragment ${r} of level ${n}. The current chunk will not be buffered.`),null;const a=t[n],o=s>-1?ni(a,r,s):null,l=o?o.fragment:function(e,t,i){if(null==e||!e.details)return null;const n=e.details;let r=n.fragments[t-n.startSN];return r||(r=n.fragmentHint,r&&r.sn===t?r:t<n.startSN&&i&&i.sn===t?i:null)}(a,r,i);return l?(i&&i!==l&&(l.stats=i.stats),{frag:l,part:o,level:a}):null}bufferFragmentData(e,t,i,n,r){var s;if(!e||this.state!==Xi)return;const{data1:a,data2:o}=e;let l=a;if(a&&o&&(l=Je(a,o)),null==(s=l)||!s.length)return;const c={type:e.type,frag:t,part:i,chunkMeta:n,parent:t.type,data:l};if(this.hls.trigger(q.BUFFER_APPENDING,c),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Mi.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const i=t.currentTime,n=Mi.bufferInfo(t,i,0),r=e.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),a=Math.max(Math.min(e.start-s,n.end-s),i+s);e.start-a>s&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){const i=this.getLoadPosition();return z(i)?this.getFwdBufferInfoAtPos(e,i,t):null}getFwdBufferInfoAtPos(e,t,i){const{config:{maxBufferHole:n}}=this,r=Mi.bufferInfo(e,t,n);if(0===r.len&&void 0!==r.nextStart){const s=this.fragmentTracker.getBufferedFrag(t,i);if(s&&r.nextStart<s.end)return Mi.bufferInfo(e,t,Math.max(r.nextStart,n))}return r}getMaxBufferLength(e){const{config:t}=this;let i;return i=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e){const t=this.config,i=e||t.maxBufferLength;return t.maxMaxBufferLength>=i&&(t.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${t.maxMaxBufferLength}s`),!0)}getAppendedFrag(e,t="main"){const i=this.fragmentTracker.getAppendedFrag(e,Pt);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const i=t.fragments,n=i.length;if(!n)return null;const{config:r}=this,s=i[0].start;let a;if(t.live){const s=r.initialLiveManifestSize;if(n<s)return this.warn(`Not enough fragments to start playback (have: ${n}, need: ${s})`),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(a=this.getInitialLiveFragment(t,i),this.startPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=s&&(a=i[0]);if(!a){const i=r.lowLatencyMode?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,i,t)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===Ei||i===wi&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,n,r){const s=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(null===a)return a;if(e=a,s&&e&&!e.gap&&i.nextStart){const t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,n);if(null!==t&&i.len+t.len>=r)return this.log(`buffer full after gaps in "${n}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,i){let n=-1,r=!1,s=!0;for(let a=0,o=e.length;a<o;a++){const o=e[a];if(s=s&&!o.independent,n>-1&&i<o.start)break;const l=o.loaded;l?n=-1:(r||o.independent||s)&&o.fragment===t&&(n=a),r=l}return n}loadedEndOfParts(e,t){const i=e[e.length-1];return i&&t>i.start&&i.loaded}getInitialLiveFragment(e,t){const i=this.fragPrevious;let n=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),n=function(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!z(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(let n=0;n<e.length;++n){const r=e[n];if(pi(t,i,r))return r}return null}(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){const r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){const s=t[r-e.startSN];i.cc===s.cc&&(n=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${n.sn}`))}n||(n=function(e,t){return di(e,(e=>e.cc<t?1:e.cc>t?-1:0))}(t,i.cc),n&&this.log(`Live playlist, switching playlist, load frag with same CC: ${n.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(n=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n}getFragmentAtPosition(e,t,i){const{config:n}=this;let{fragPrevious:r}=this,{fragments:s,endSN:a}=i;const{fragmentHint:o}=i,l=n.maxFragLookUpTolerance,c=i.partList,d=!!(n.lowLatencyMode&&null!=c&&c.length&&o);let u;if(d&&o&&!this.bitrateTest&&(s=s.concat(o),a=o.sn),u=e<t?ui(r,s,e,e>t-l?0:l):s[s.length-1],u){const e=u.sn-i.startSN,t=this.fragmentTracker.getState(u);if((t===Ei||t===wi&&u.gap)&&(r=u),r&&u.sn===r.sn&&(!d||c[0].fragment.sn>u.sn)&&r&&u.level===r.level){const t=s[e+1];u=u.sn<a&&this.fragmentTracker.getState(t)!==Ei?t:null}}return u}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const n=this.hls.liveSyncPosition,r=i.currentTime,s=e.fragments[0].start,a=e.edge,o=r>=s-t.maxFragLookUpTolerance&&r<=a;if(null!==n&&i.duration>n&&(r<n||!o)){const s=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&i.readyState<4||r<a-s)&&(this.loadedmetadata||(this.nextLoadPosition=n),i.readyState&&(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${n.toFixed(3)}`),i.currentTime=n))}}alignPlaylists(e,t){const{levels:i,levelLastLoaded:n,fragPrevious:r}=this,s=null!==n?i[n]:null,a=e.fragments.length;if(!a)return this.warn("No fragments in live playlist"),0;const o=e.fragments[0].start,l=!t,c=e.alignedSliding&&z(o);if(l||!c&&!o){!function(e,t,i){t&&(function(e,t,i){if(function(e,t,i){return!(!t.details||!(i.endCC>i.startCC||e&&e.cc<i.startCC))}(e,i,t)){const e=function(e,t,i=0){const n=e.fragments,r=t.fragments;if(!r.length||!n.length)return void X.log("No fragments to align");const s=Fi(n,r[0].cc);if(s&&(!s||s.startPTS))return s;X.log("No frag in previous level to align on")}(i.details,t);e&&z(e.start)&&(X.log(`Adjusting PTS using last level due to CC increase within current level ${t.url}`),Bi(e.start,t))}}(e,i,t),!i.alignedSliding&&t.details&&function(e,t){if(!t.fragments.length||!e.hasProgramDateTime||!t.hasProgramDateTime)return;const i=t.fragments[0].programDateTime,n=e.fragments[0].programDateTime,r=(n-i)/1e3+t.fragments[0].start;r&&z(r)&&(X.log(`Adjusting PTS using programDateTime delta ${n-i}ms, sliding:${r.toFixed(3)} ${e.url} `),Bi(r,e))}(i,t.details),i.alignedSliding||!t.details||i.skippedSegments||ti(t.details,i))}(r,s,e);const i=e.fragments[0].start;return this.log(`Live playlist sliding: ${i.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${r?r.sn:"na"} fragments: ${a}`),i}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let i=this.startPosition;if(i<t&&(i=-1),-1===i||-1===this.lastCurrentTime){const n=null!==this.startTimeOffset,r=n?this.startTimeOffset:e.startTimeOffset;null!==r&&z(r)?(i=t+r,r<0&&(i+=e.totalduration),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Start time offset ${r} found in ${n?"multivariant":"media"} playlist, adjust startPosition to ${i}`),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Yi)||(this.state=Vi)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;var n;if(this.fragContextChanged(i))return void this.warn(`Frag load error must match current frag to retry ${i.url} > ${null==(n=this.fragCurrent)?void 0:n.url}`);const r=t.details===j.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(i,!0);const s=t.errorAction,{action:a,retryCount:o=0,retryConfig:l}=s||{};if(s&&5===a&&l){var c;this.resetStartWhenNotLoaded(null!=(c=this.levelLastLoaded)?c:i.level);const n=oi(l,o);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${o+1}/${l.maxNumRetry} in ${n}ms`),s.resolved=!0,this.retryDate=self.performance.now()+n,this.state=Yi}else l&&s?(this.resetFragmentErrors(e),o<l.maxNumRetry?r||(s.resolved=!0):X.warn(`${t.details} reached or exceeded max retry (${o})`)):2===(null==s?void 0:s.action)?this.state=tn:this.state=Ji;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===Xi||this.state===Qi){const t=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,t),n=i&&i.len>.5;n&&this.reduceMaxBufferLength(i.len);const r=!n;return r&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${t} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),r}return!1}resetFragmentErrors(e){e===Mt&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==qi&&(this.state=Vi)}afterBufferFlushed(e,t,i){if(!e)return;const n=Mi.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,i),this.state===Zi&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Vi}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=this.levels?this.levels[e].details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){var t;this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(t=this.levelLastLoaded)?t:e.level),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,n){var r;const s=i.details;if(s){if(Object.keys(e.elementaryStreams).reduce(((t,r)=>{const a=e.elementaryStreams[r];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${r} duration reliably (${o})`),t||!1;const l=n?0:ei(s,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS);return this.hls.trigger(q.LEVEL_PTS_UPDATED,{details:s,level:i,drift:l,type:r,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t}),!1))i.fragmentError=0;else if(null===(null==(r=this.transmuxer)?void 0:r.error)){const t=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(0===i.fragmentError&&(i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of level "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=Qi,this.hls.trigger(q.FRAG_PARSED,{frag:e,part:t})}else this.warn("level.details undefined")}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){var t,i,n;"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(t=null!=(i=this.levelLastLoaded)?i:null==(n=this.fragCurrent)?void 0:n.level)?t:0),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function rn(){return self.SourceBuffer||self.WebKitSourceBuffer}function sn(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class an{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=Je(this.cachedData,e),this.cachedData=null);let i,n=ke(e,0),r=n?n.length:0;const s=this._audioTrack,a=this._id3Track,o=n?(e=>{const t=Ie(e);for(let e=0;e<t.length;e++){const i=t[e];if(Ce(i))return Oe(i)}})(n):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&z(o))&&(this.basePTS=on(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),n&&n.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:zt,duration:Number.POSITIVE_INFINITY});r<l;){if(this.canParse(e,r)){const t=this.appendFrame(s,e,r);t?(this.frameIndex++,this.lastPTS=t.sample.pts,r+=t.length,i=r):r=l}else Le(e,r)?(n=ke(e,r),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:zt,duration:Number.POSITIVE_INFINITY}),r+=n.length,i=r):r++;if(r===l&&i!==l){const t=we(e,i);this.cachedData?this.cachedData=Je(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:sn(),id3Track:a,textTrack:sn()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:sn(),id3Track:this._id3Track,textTrack:sn()}}destroy(){}}const on=(e,t,i)=>z(e)?90*e:9e4*t+(i?9e4*i.baseTime/i.timescale:0);function ln(e,t){return 255===e[t]&&240==(246&e[t+1])}function cn(e,t){return 1&e[t+1]?7:9}function dn(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function un(e,t){return t+1<e.length&&ln(e,t)}function hn(e,t){if(un(e,t)){const i=cn(e,t);if(t+i>=e.length)return!1;const n=dn(e,t);if(n<=i)return!1;const r=t+n;return r===e.length||un(e,r)}return!1}function pn(e,t,i,n,r){if(!e.samplerate){const s=function(e,t,i,n){let r,s,a,o;const l=navigator.userAgent.toLowerCase(),c=n,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&t[i+2])>>>6);const u=(60&t[i+2])>>>2;if(!(u>d.length-1))return a=(1&t[i+2])<<2,a|=(192&t[i+3])>>>6,X.log(`manifest codec:${n}, ADTS type:${r}, samplingIndex:${u}`),/firefox/i.test(l)?u>=6?(r=5,o=new Array(4),s=u-3):(r=2,o=new Array(2),s=u):-1!==l.indexOf("android")?(r=2,o=new Array(2),s=u):(r=5,o=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&u>=6?s=u-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(u>=6&&1===a||/vivaldi/i.test(l))||!n&&1===a)&&(r=2,o=new Array(2)),s=u)),o[0]=r<<3,o[0]|=(14&u)>>1,o[1]|=(1&u)<<7,o[1]|=a<<3,5===r&&(o[1]|=(14&s)>>1,o[2]=(1&s)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:d[u],channelCount:a,codec:"mp4a.40."+r,manifestCodec:c};e.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${u}`})}(t,i,n,r);if(!s)return;e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,X.log(`parsed codec:${e.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function fn(e){return 9216e4/e}function mn(e,t,i,n,r){const s=n+r*fn(e.samplerate),a=function(e,t){const i=cn(e,t);if(t+i<=e.length){const n=dn(e,t)-i;if(n>0)return{headerLength:i,frameLength:n}}}(t,i);let o;if(a){const{frameLength:n,headerLength:r}=a,l=r+n,c=Math.max(0,i+l-t.length);c?(o=new Uint8Array(l-r),o.set(t.subarray(i+r,t.length),0)):o=t.subarray(i+r,i+l);const d={unit:o,pts:s};return c||e.samples.push(d),{sample:d,length:l,missing:c}}const l=t.length-i;return o=new Uint8Array(l),o.set(t.subarray(i,t.length),0),{sample:{unit:o,pts:s},length:l,missing:-1}}const gn=/\/emsg[-/]ID3/i;let yn=null;const vn=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],bn=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],_n=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Tn=[0,1,1,4];function wn(e,t,i,n,r){if(i+24>t.length)return;const s=En(t,i);if(s&&i+s.frameLength<=t.length){const a=n+r*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:t.subarray(i,i+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(o),{sample:o,length:s.frameLength,missing:0}}}function En(e,t){const i=e[t+1]>>3&3,n=e[t+1]>>1&3,r=e[t+2]>>4&15,s=e[t+2]>>2&3;if(1!==i&&0!==r&&15!==r&&3!==s){const a=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*vn[14*(3===i?3-n:3===n?3:4)+r-1],c=bn[3*(3===i?0:2===i?1:2)+s],d=3===o?1:2,u=_n[i][n],h=Tn[n],p=8*u*h,f=Math.floor(u*l/c+a)*h;if(null===yn){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);yn=e?parseInt(e[1]):0}return!!yn&&yn<=87&&2===n&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:d,frameLength:f,samplesPerFrame:p}}}function xn(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function kn(e,t){return t+1<e.length&&xn(e,t)}function Sn(e,t){if(t+1<e.length&&xn(e,t)){const i=4,n=En(e,t);let r=i;null!=n&&n.frameLength&&(r=n.frameLength);const s=t+r;return s===e.length||kn(e,s)}return!1}class Ln{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");n.set(e.subarray(i,i+r)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&X.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,i=8,n=8;for(let r=0;r<e;r++)0!==n&&(t=this.readEG(),n=(i+t+256)%256),i=0===n?i:n}readSPS(){let e,t,i,n=0,r=0,s=0,a=0;const o=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),u=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);o();const m=o();if(l(5),u(3),o(),p(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){const e=c();if(3===e&&u(1),p(),p(),u(1),d())for(t=3!==e?8:12,i=0;i<t;i++)d()&&f(i<6?16:64)}p();const g=c();if(0===g)c();else if(1===g)for(u(1),h(),h(),e=c(),i=0;i<e;i++)h();p(),u(1);const y=c(),v=c(),b=l(1);0===b&&u(1),u(1),d()&&(n=c(),r=c(),s=c(),a=c());let _=[1,1];if(d()&&d())switch(o()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(y+1)-2*n-2*r),height:(2-b)*(v+1)*16-(b?2:4)*(s+a),pixelRatio:_}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class Cn{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new zi(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,i){const n=e[t].unit;if(n.length<=16)return;const r=n.subarray(16,n.length-n.length%16),s=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(s).then((r=>{const s=new Uint8Array(r);n.set(s,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)}))}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,i),this.decrypter.isSync())))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t);let n=0;for(let t=32;t<e.length-16;t+=160,n+=16)i.set(e.subarray(t,t+16),n);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let n=0;for(let t=32;t<e.length-16;t+=160,n+=16)e.set(i.subarray(n,n+16),t);return e}decryptAvcSample(e,t,i,n,r){const s=nt(r.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then((a=>{r.data=this.getAvcDecryptedUnit(s,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,n)}))}decryptAvcSamples(e,t,i,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void n();const r=e[t].units;for(;!(i>=r.length);i++){const s=r[i];if(!(s.data.length<=48||1!==s.type&&5!==s.type||(this.decryptAvcSample(e,t,i,n,s),this.decrypter.isSync())))return}}}}const An=188;class In{constructor(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=i}static probe(e){const t=In.syncOffset(e);return t>0&&X.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(e){const t=e.length;let i=Math.min(940,e.length-An)+1,n=0;for(;n<i;){let r=!1,s=-1,a=0;for(let o=n;o<t;o+=An){if(71!==e[o]){if(a)return-1;break}if(a++,-1===s&&(s=o,0!==s&&(i=Math.min(s+18612,e.length-An)+1)),r||(r=0===Dn(e,o)),r&&a>1&&(0===s&&a>2||o+An>i))return s}n++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:He[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,i,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=In.createTrack("video"),this._audioTrack=In.createTrack("audio",n),this._id3Track=In.createTrack("id3"),this._txtTrack=In.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i,this._duration=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_avcTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(e,t,i=!1,n=!1){let r;i||(this.sampleAes=null);const s=this._avcTrack,a=this._audioTrack,o=this._id3Track,l=this._txtTrack;let c=s.pid,d=s.pesData,u=a.pid,h=o.pid,p=a.pesData,f=o.pesData,m=null,g=this.pmtParsed,y=this._pmtId,v=e.length;if(this.remainderData&&(v=(e=Je(this.remainderData,e)).length,this.remainderData=null),v<An&&!n)return this.remainderData=e,{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};const b=Math.max(0,In.syncOffset(e));v-=(v-b)%An,v<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,v,e.buffer.byteLength-v));let _=0;for(let t=b;t<v;t+=An)if(71===e[t]){const n=!!(64&e[t+1]),v=Dn(e,t);let _;if((48&e[t+3])>>4>1){if(_=t+5+e[t+4],_===t+An)continue}else _=t+4;switch(v){case c:n&&(d&&(r=On(d))&&this.parseAVCPES(s,l,r,!1),d={data:[],size:0}),d&&(d.data.push(e.subarray(_,t+An)),d.size+=t+An-_);break;case u:if(n){if(p&&(r=On(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,r);break;case"mp3":this.parseMPEGPES(a,r)}p={data:[],size:0}}p&&(p.data.push(e.subarray(_,t+An)),p.size+=t+An-_);break;case h:n&&(f&&(r=On(f))&&this.parseID3PES(o,r),f={data:[],size:0}),f&&(f.data.push(e.subarray(_,t+An)),f.size+=t+An-_);break;case 0:n&&(_+=e[_]+1),y=this._pmtId=Pn(e,_);break;case y:{n&&(_+=e[_]+1);const r=Mn(e,_,this.typeSupported,i);c=r.avc,c>0&&(s.pid=c),u=r.audio,u>0&&(a.pid=u,a.segmentCodec=r.segmentCodec),h=r.id3,h>0&&(o.pid=h),null===m||g||(X.warn(`MPEG-TS PMT found at ${t} after unknown PID '${m}'. Backtracking to sync byte @${b} to parse all TS packets.`),m=null,t=b-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=v}}else _++;if(_>0){const e=new Error(`Found ${_} TS packet/s that do not start with 0x47`);this.observer.emit(q.ERROR,q.ERROR,{type:V.MEDIA_ERROR,details:j.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message})}s.pesData=d,a.pesData=p,o.pesData=f;const T={audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};return n&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:n,textTrack:r}=e,s=i.pesData,a=t.pesData,o=n.pesData;let l;if(s&&(l=On(s))?(this.parseAVCPES(i,r,l,!0),i.pesData=null):i.pesData=s,a&&(l=On(a))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l)}t.pesData=null}else null!=a&&a.size&&X.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;o&&(l=On(o))?(this.parseID3PES(n,l),n.pesData=null):n.pesData=o}demuxSampleAes(e,t,i){const n=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new Cn(this.observer,this.config,t);return this.decrypt(n,r)}decrypt(e,t){return new Promise((i=>{const{audioTrack:n,videoTrack:r}=e;n.samples&&"aac"===n.segmentCodec?t.decryptAacSamples(n.samples,0,(()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,(()=>{i(e)})):i(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(()=>{i(e)}))}))}destroy(){this._duration=0}parseAVCPES(e,t,i,n){const r=this.parseAVCNALu(e,i.data);let s,a=this.avcSample,o=!1;i.data=null,a&&r.length&&!e.audFound&&(Fn(a,e),a=this.avcSample=Rn(!1,i.pts,i.dts,"")),r.forEach((n=>{var r;switch(n.type){case 1:{let t=!1;s=!0;const r=n.data;if(o&&r.length>4){const e=new Ln(r).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var l;t&&null!=(l=a)&&l.frame&&!a.key&&(Fn(a,e),a=this.avcSample=null),a||(a=this.avcSample=Rn(!0,i.pts,i.dts,"")),a.frame=!0,a.key=t;break}case 5:s=!0,null!=(r=a)&&r.frame&&!a.key&&(Fn(a,e),a=this.avcSample=null),a||(a=this.avcSample=Rn(!0,i.pts,i.dts,"")),a.key=!0,a.frame=!0;break;case 6:s=!0,it(n.data,1,i.pts,t.samples);break;case 7:if(s=!0,o=!0,!e.sps){const t=n.data,i=new Ln(t).readSPS();e.width=i.width,e.height=i.height,e.pixelRatio=i.pixelRatio,e.sps=[t],e.duration=this._duration;const r=t.subarray(1,4);let s="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),s+=t}e.codec=s}break;case 8:s=!0,e.pps||(e.pps=[n.data]);break;case 9:s=!1,e.audFound=!0,a&&Fn(a,e),a=this.avcSample=Rn(!1,i.pts,i.dts,"");break;case 12:s=!0;break;default:s=!1,a&&(a.debug+="unknown NAL "+n.type+" ")}a&&s&&a.units.push(n)})),n&&a&&(Fn(a,e),this.avcSample=null)}getLastNalUnit(e){var t;let i,n=this.avcSample;if(n&&0!==n.units.length||(n=e[e.length-1]),null!=(t=n)&&t.units){const e=n.units;i=e[e.length-1]}return i}parseAVCNALu(e,t){const i=t.byteLength;let n=e.naluState||0;const r=n,s=[];let a,o,l,c=0,d=-1,u=0;for(-1===n&&(d=0,u=31&t[0],n=0,c=1);c<i;)if(a=t[c++],n)if(1!==n)if(a)if(1===a){if(d>=0){const e={data:t.subarray(d,c-n-1),type:u};s.push(e)}else{const i=this.getLastNalUnit(e.samples);if(i&&(r&&c<=4-r&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-r)),o=c-n-1,o>0)){const e=new Uint8Array(i.data.byteLength+o);e.set(i.data,0),e.set(t.subarray(0,o),i.data.byteLength),i.data=e,i.state=0}}c<i?(l=31&t[c],d=c,u=l,n=0):n=-1}else n=0;else n=3;else n=a?0:2;else n=a?0:1;if(d>=0&&n>=0){const e={data:t.subarray(d,i),type:u,state:n};s.push(e)}if(0===s.length){const i=this.getLastNalUnit(e.samples);if(i){const e=new Uint8Array(i.data.byteLength+t.byteLength);e.set(i.data,0),e.set(t,i.data.byteLength),i.data=e}}return e.naluState=n,s}parseAACPES(e,t){let i=0;const n=this.aacOverFlow;let r,s,a,o=t.data;if(n){this.aacOverFlow=null;const t=n.missing,r=n.sample.unit.byteLength;if(-1===t){const e=new Uint8Array(r+o.byteLength);e.set(n.sample.unit,0),e.set(o,r),o=e}else{const s=r-t;n.sample.unit.set(o.subarray(0,t),s),e.samples.push(n.sample),i=n.missing}}for(r=i,s=o.length;r<s-1&&!un(o,r);r++);if(r!==i){let e;const t=r<s-1;e=t?`AAC PES did not start with ADTS header,offset:${r}`:"No ADTS header found in AAC PES";const i=new Error(e);if(X.warn(`parsing error: ${e}`),this.observer.emit(q.ERROR,q.ERROR,{type:V.MEDIA_ERROR,details:j.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:i,reason:e}),!t)return}if(pn(e,this.observer,o,r,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!n)return void X.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=fn(e.samplerate);a=n.sample.pts+t}}let l,c=0;for(;r<s;){if(l=mn(e,o,r,a,c),r+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;r<s-1&&!un(o,r);r++);}}parseMPEGPES(e,t){const i=t.data,n=i.length;let r=0,s=0;const a=t.pts;if(void 0!==a)for(;s<n;)if(kn(i,s)){const t=wn(e,i,s,a,r);if(!t)break;s+=t.length,r++}else s++;else X.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseID3PES(e,t){if(void 0===t.pts)return void X.warn("[tsdemuxer]: ID3 PES unknown PTS");const i=H({},t,{type:this._avcTrack?qt:zt,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function Rn(e,t,i,n){return{key:e,frame:!1,pts:t,dts:i,units:[],debug:n,length:0}}function Dn(e,t){return((31&e[t+1])<<8)+e[t+2]}function Pn(e,t){return(31&e[t+10])<<8|e[t+11]}function Mn(e,t,i,n){const r={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},s=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<s;){const s=Dn(e,t);switch(e[t]){case 207:if(!n){X.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===r.audio&&(r.audio=s);break;case 21:-1===r.id3&&(r.id3=s);break;case 219:if(!n){X.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===r.avc&&(r.avc=s);break;case 3:case 4:!0!==i.mpeg&&!0!==i.mp3?X.log("MPEG audio found, not supported in this browser"):-1===r.audio&&(r.audio=s,r.segmentCodec="mp3");break;case 36:X.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return r}function On(e){let t,i,n,r,s,a=0;const o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;){const e=new Uint8Array(o[0].length+o[1].length);e.set(o[0]),e.set(o[1],o[0].length),o[0]=e,o.splice(1,1)}if(t=o[0],1===(t[0]<<16)+(t[1]<<8)+t[2]){if(i=(t[4]<<8)+t[5],i&&i>e.size-6)return null;const l=t[7];192&l&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,r-s>54e5&&(X.warn(`${Math.round((r-s)/9e4)}s delta between PTS and DTS, align them`),r=s)):s=r),n=t[8];let c=n+9;if(e.size<=c)return null;e.size-=c;const d=new Uint8Array(e.size);for(let e=0,i=o.length;e<i;e++){t=o[e];let i=t.byteLength;if(c){if(c>i){c-=i;continue}t=t.subarray(c),i-=c,c=0}d.set(t,a),a+=i}return i&&(i-=n+3),{data:d,pts:r,dts:s,len:i}}return null}function Fn(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const i=t.samples,n=i.length;if(!n)return void t.dropped++;{const t=i[n-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}e.debug.length&&X.log(e.pts+"/"+e.dts+":"+e.debug)}class Nn{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const Bn=Math.pow(2,32)-1;class Un{static init(){let e;for(e in Un.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Un.types)Un.types.hasOwnProperty(e)&&(Un.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Un.HDLR_TYPES={video:t,audio:i};const n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);Un.STTS=Un.STSC=Un.STCO=r,Un.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Un.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Un.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Un.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Un.FTYP=Un.box(Un.types.ftyp,s,o,s,a),Un.DINF=Un.box(Un.types.dinf,Un.box(Un.types.dref,n))}static box(e,...t){let i=8,n=t.length;const r=n;for(;n--;)i+=t[n].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=255&i,s.set(e,4),n=0,i=8;n<r;n++)s.set(t[n],i),i+=t[n].byteLength;return s}static hdlr(e){return Un.box(Un.types.hdlr,Un.HDLR_TYPES[e])}static mdat(e){return Un.box(Un.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(Bn+1)),n=Math.floor(t%(Bn+1));return Un.box(Un.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))}static mdia(e){return Un.box(Un.types.mdia,Un.mdhd(e.timescale,e.duration),Un.hdlr(e.type),Un.minf(e))}static mfhd(e){return Un.box(Un.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?Un.box(Un.types.minf,Un.box(Un.types.smhd,Un.SMHD),Un.DINF,Un.stbl(e)):Un.box(Un.types.minf,Un.box(Un.types.vmhd,Un.VMHD),Un.DINF,Un.stbl(e))}static moof(e,t,i){return Un.box(Un.types.moof,Un.mfhd(e),Un.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=Un.trak(e[t]);return Un.box.apply(null,[Un.types.moov,Un.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(Un.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=Un.trex(e[t]);return Un.box.apply(null,[Un.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(Bn+1)),n=Math.floor(t%(Bn+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Un.box(Un.types.mvhd,r)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let n,r;for(n=0;n<t.length;n++)r=t[n].flags,i[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return Un.box(Un.types.sdtp,i)}static stbl(e){return Un.box(Un.types.stbl,Un.stsd(e),Un.box(Un.types.stts,Un.STTS),Un.box(Un.types.stsc,Un.STSC),Un.box(Un.types.stsz,Un.STSZ),Un.box(Un.types.stco,Un.STCO))}static avc1(e){let t,i,n,r=[],s=[];for(t=0;t<e.sps.length;t++)i=e.sps[t],n=i.byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(i));for(t=0;t<e.pps.length;t++)i=e.pps[t],n=i.byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(i));const a=Un.box(Un.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(s))),o=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return Un.box(Un.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,Un.box(Un.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Un.box(Un.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static mp4a(e){const t=e.samplerate;return Un.box(Un.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),Un.box(Un.types.esds,Un.esds(e)))}static mp3(e){const t=e.samplerate;return Un.box(Un.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))}static stsd(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?Un.box(Un.types.stsd,Un.STSD,Un.mp3(e)):Un.box(Un.types.stsd,Un.STSD,Un.mp4a(e)):Un.box(Un.types.stsd,Un.STSD,Un.avc1(e))}static tkhd(e){const t=e.id,i=e.duration*e.timescale,n=e.width,r=e.height,s=Math.floor(i/(Bn+1)),a=Math.floor(i%(Bn+1));return Un.box(Un.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]))}static traf(e,t){const i=Un.sdtp(e),n=e.id,r=Math.floor(t/(Bn+1)),s=Math.floor(t%(Bn+1));return Un.box(Un.types.traf,Un.box(Un.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),Un.box(Un.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,s>>24,s>>16&255,s>>8&255,255&s])),Un.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,Un.box(Un.types.trak,Un.tkhd(e),Un.mdia(e))}static trex(e){const t=e.id;return Un.box(Un.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],n=i.length,r=12+16*n,s=new Uint8Array(r);let a,o,l,c,d,u;for(t+=8+r,s.set(["video"===e.type?1:0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<n;a++)o=i[a],l=o.duration,c=o.size,d=o.flags,u=o.cts,s.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,61440&d.degradPrio,15&d.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*a);return Un.box(Un.types.trun,s)}static initSegment(e){Un.types||Un.init();const t=Un.moov(e),i=new Uint8Array(Un.FTYP.byteLength+t.byteLength);return i.set(Un.FTYP),i.set(t,Un.FTYP.byteLength),i}}function $n(e,t,i=1,n=!1){const r=e*t*i;return n?Math.round(r):r}function Gn(e,t=!1){return $n(e,1e3,1/9e4,t)}Un.types=void 0,Un.HDLR_TYPES=void 0,Un.STTS=void 0,Un.STSC=void 0,Un.STCO=void 0,Un.STSZ=void 0,Un.VMHD=void 0,Un.SMHD=void 0,Un.STSD=void 0,Un.FTYP=void 0,Un.DINF=void 0;let Hn,zn=null,qn=null;class Vn{constructor(e,t,i,n=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===zn){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);zn=e?parseInt(e[1]):0}if(null===qn){const e=navigator.userAgent.match(/Safari\/(\d+)/i);qn=e?parseInt(e[1]):0}}destroy(){}resetTimeStamp(e){X.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){X.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){X.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(e){let t=!1;const i=e.reduce(((e,i)=>{const n=i.pts-e;return n<-4294967296?(t=!0,jn(e,i.pts)):n>0?e:i.pts}),e[0].pts);return t&&X.debug("PTS rollover detected"),i}remux(e,t,i,n,r,s,a,o){let l,c,d,u,h,p,f=r,m=r;const g=e.pid>-1,y=t.pid>-1,v=t.samples.length,b=e.samples.length>0,_=a&&v>0||v>1;if((!g||b)&&(!y||_)||this.ISGenerated||a){this.ISGenerated||(d=this.generateIS(e,t,r,s));const i=this.isVideoContiguous;let n,a=-1;if(_&&(a=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!i&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,a>0){X.warn(`[mp4-remuxer]: Dropped ${a} out of ${v} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,m+=(t.samples[0].pts-e)/t.inputTimeScale,n=m}else-1===a&&(X.warn(`[mp4-remuxer]: No keyframe found out of ${v} video samples`),p=!1);if(this.ISGenerated){if(b&&_){const i=this.getVideoStartPts(t.samples),n=(jn(e.samples[0].pts,i)-i)/t.inputTimeScale;f+=Math.max(0,n),m+=Math.max(0,-n)}if(b){if(e.samplerate||(X.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,r,s)),c=this.remuxAudio(e,f,this.isAudioContiguous,s,y||_||o===Mt?m:void 0),_){const n=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(X.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,r,s)),l=this.remuxVideo(t,m,i,n)}}else _&&(l=this.remuxVideo(t,m,i,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=n)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(h=Kn(i,r,this._initPTS,this._initDTS)),n.samples.length&&(u=Yn(n,r,this._initPTS))),{audio:c,video:l,initSegment:d,independent:p,text:u,id3:h}}generateIS(e,t,i,n){const r=e.samples,s=t.samples,a=this.typeSupported,o={},l=this._initPTS;let c,d,u,h=!l||n,p="audio/mp4";if(h&&(c=d=1/0),e.config&&r.length&&(e.timescale=e.samplerate,"mp3"===e.segmentCodec&&(a.mpeg?(p="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3")),o.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):Un.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(u=e.inputTimeScale,l&&u===l.timescale?h=!1:c=d=r[0].pts-Math.round(u*i))),t.sps&&t.pps&&s.length&&(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Un.initSegment([t]),metadata:{width:t.width,height:t.height}},h))if(u=t.inputTimeScale,l&&u===l.timescale)h=!1;else{const e=this.getVideoStartPts(s),t=Math.round(u*i);d=Math.min(d,jn(s[0].dts,e)-t),c=Math.min(c,e-t)}if(Object.keys(o).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:c,timescale:u},this._initDTS={baseTime:d,timescale:u}):c=u=void 0,{tracks:o,initPTS:c,timescale:u}}remuxVideo(e,t,i,n){const r=e.inputTimeScale,s=e.samples,a=[],o=s.length,l=this._initPTS;let c,d,u=this.nextAvcDts,h=8,p=this.videoSampleDuration,f=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=!1;i&&null!==u||(u=t*r-(s[0].pts-jn(s[0].dts,s[0].pts)));const y=l.baseTime*r/l.timescale;for(let e=0;e<o;e++){const t=s[e];t.pts=jn(t.pts-y,u),t.dts=jn(t.dts-y,u),t.dts<s[e>0?e-1:e].dts&&(g=!0)}g&&s.sort((function(e,t){const i=e.dts-t.dts,n=e.pts-t.pts;return i||n})),c=s[0].dts,d=s[s.length-1].dts;const v=d-c,b=v?Math.round(v/(o-1)):p||e.inputTimeScale/30;if(i){const e=c-u,t=e>b,i=e<-1;if((t||i)&&(t?X.warn(`AVC: ${Gn(e,!0)} ms (${e}dts) hole between fragments detected, filling it`):X.warn(`AVC: ${Gn(-e,!0)} ms (${e}dts) overlapping between fragments detected`),!i||u>=s[0].pts)){c=u;const t=s[0].pts-e;s[0].dts=c,s[0].pts=t,X.log(`Video: First PTS/DTS adjusted: ${Gn(t,!0)}/${Gn(c,!0)}, delta: ${Gn(e,!0)} ms`)}}c=Math.max(0,c);let _=0,T=0;for(let e=0;e<o;e++){const t=s[e],i=t.units,n=i.length;let r=0;for(let e=0;e<n;e++)r+=i[e].data.length;T+=r,_+=n,t.length=r,t.dts=Math.max(t.dts,c),f=Math.min(t.pts,f),m=Math.max(t.pts,m)}d=s[o-1].dts;const w=T+4*_+8;let E;try{E=new Uint8Array(w)}catch(e){return void this.observer.emit(q.ERROR,q.ERROR,{type:V.MUX_ERROR,details:j.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:w,reason:`fail allocating video mdat ${w}`})}const x=new DataView(E.buffer);x.setUint32(0,w),E.set(Un.types.mdat,4);let k=!1,S=Number.POSITIVE_INFINITY,L=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY,A=Number.NEGATIVE_INFINITY;for(let e=0;e<o;e++){const t=s[e],i=t.units;let l,c=0;for(let e=0,t=i.length;e<t;e++){const t=i[e],n=t.data,r=t.data.byteLength;x.setUint32(h,r),h+=4,E.set(n,h),h+=r,c+=4+r}if(e<o-1)p=s[e+1].dts-t.dts,l=s[e+1].pts-t.pts;else{const i=this.config,a=e>0?t.dts-s[e-1].dts:b;if(l=e>0?t.pts-s[e-1].pts:b,i.stretchShortVideoTrack&&null!==this.nextAudioPts){const e=Math.floor(i.maxBufferHole*r),s=(n?f+n*r:this.nextAudioPts)-t.pts;s>e?(p=s-a,p<0?p=a:k=!0,X.log(`[mp4-remuxer]: It is approximately ${s/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=a}else p=a}const d=Math.round(t.pts-t.dts);S=Math.min(S,p),C=Math.max(C,p),L=Math.min(L,l),A=Math.max(A,l),a.push(new Wn(t.key,p,c,d))}if(a.length)if(zn){if(zn<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(qn&&A-L<C-S&&b/C<.025&&0===a[0].cts){X.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=c;for(let t=0,i=a.length;t<i;t++){const n=e+a[t].duration,r=e+a[t].cts;if(t<i-1){const e=n+a[t+1].cts;a[t].duration=e-r}else a[t].duration=t?a[t-1].duration:b;a[t].cts=0,e=n}}p=k||!p?b:p,this.nextAvcDts=u=d+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;const I={data1:Un.moof(e.sequenceNumber++,c,H({},e,{samples:a})),data2:E,startPTS:f/r,endPTS:(m+p)/r,startDTS:c/r,endDTS:u/r,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,I}remuxAudio(e,t,i,n,r){const s=e.inputTimeScale,a=s/(e.samplerate?e.samplerate:s),o="aac"===e.segmentCodec?1024:1152,l=o*a,c=this._initPTS,d="mp3"===e.segmentCodec&&this.typeSupported.mpeg,u=[],h=void 0!==r;let p=e.samples,f=d?0:8,m=this.nextAudioPts||-1;const g=t*s,y=c.baseTime*s/c.timescale;if(this.isAudioContiguous=i=i||p.length&&m>0&&(n&&Math.abs(g-m)<9e3||Math.abs(jn(p[0].pts-y,g)-m)<20*l),p.forEach((function(e){e.pts=jn(e.pts-y,g)})),!i||m<0){if(p=p.filter((e=>e.pts>=0)),!p.length)return;m=0===r?0:n&&!h?Math.max(0,g):p[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let i=0,n=m;i<p.length;i++){const r=p[i],a=r.pts,o=a-n,c=Math.abs(1e3*o/s);if(o<=-t*l&&h)0===i&&(X.warn(`Audio frame @ ${(a/s).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*o/s)} ms.`),this.nextAudioPts=m=n=a);else if(o>=t*l&&c<1e4&&h){let t=Math.round(o/l);n=a-t*l,n<0&&(t--,n+=l),0===i&&(this.nextAudioPts=m=n),X.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(n/s).toFixed(3)}s due to ${Math.round(1e3*o/s)} ms gap.`);for(let s=0;s<t;s++){const t=Math.max(n,0);let s=Nn.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);s||(X.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),s=r.unit.subarray()),p.splice(i,0,{unit:s,pts:t}),n+=l,i++}}r.pts=n,n+=l}}let v,b=null,_=null,T=0,w=p.length;for(;w--;)T+=p[w].unit.byteLength;for(let t=0,n=p.length;t<n;t++){const n=p[t],r=n.unit;let s=n.pts;if(null!==_)u[t-1].duration=Math.round((s-_)/a);else{if(i&&"aac"===e.segmentCodec&&(s=m),b=s,!(T>0))return;T+=f;try{v=new Uint8Array(T)}catch(e){return void this.observer.emit(q.ERROR,q.ERROR,{type:V.MUX_ERROR,details:j.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:T,reason:`fail allocating audio mdat ${T}`})}d||(new DataView(v.buffer).setUint32(0,T),v.set(Un.types.mdat,4))}v.set(r,f);const l=r.byteLength;f+=l,u.push(new Wn(!0,o,l,0)),_=s}const E=u.length;if(!E)return;const x=u[u.length-1];this.nextAudioPts=m=_+a*x.duration;const k=d?new Uint8Array(0):Un.moof(e.sequenceNumber++,b/a,H({},e,{samples:u}));e.samples=[];const S=b/s,L=m/s,C={data1:k,data2:v,startPTS:S,endPTS:L,startDTS:S,endDTS:L,type:"audio",hasAudio:!0,hasVideo:!1,nb:E};return this.isAudioContiguous=!0,C}remuxEmptyAudio(e,t,i,n){const r=e.inputTimeScale,s=r/(e.samplerate?e.samplerate:r),a=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,c=(null!==a?a:n.startDTS*r)+l,d=n.endDTS*r+l,u=1024*s,h=Math.ceil((d-c)/u),p=Nn.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(X.warn("[mp4-remuxer]: remux empty Audio"),!p)return void X.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const f=[];for(let e=0;e<h;e++){const t=c+e*u;f.push({unit:p,pts:t,dts:t})}return e.samples=f,this.remuxAudio(e,t,i,!1)}}function jn(e,t){let i;if(null===t)return e;for(i=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=i;return e}function Kn(e,t,i,n){const r=e.samples.length;if(!r)return;const s=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=jn(r.pts-i.baseTime*s/i.timescale,t*s)/s,r.dts=jn(r.dts-n.baseTime*s/n.timescale,t*s)/s}const a=e.samples;return e.samples=[],{samples:a}}function Yn(e,t,i){const n=e.samples.length;if(!n)return;const r=e.inputTimeScale;for(let s=0;s<n;s++){const n=e.samples[s];n.pts=jn(n.pts-i.baseTime*r/i.timescale,t*r)/r}e.samples.sort(((e,t)=>e.pts-t.pts));const s=e.samples;return e.samples=[],{samples:s}}class Wn{constructor(e,t,i,n){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=n,this.flags=new Xn(e)}}class Xn{constructor(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}}function Qn(e,t){const i=null==e?void 0:e.codec;return i&&i.length>4?i:"hvc1"===i||"hev1"===i?"hvc1.1.6.L120.90":"av01"===i?"av01.0.04M.08":"avc1"===i||t===re?"avc1.42e01e":"mp4a.40.5"}try{Hn=self.performance.now.bind(self.performance)}catch(e){X.debug("Unable to use Performance API on this environment"),Hn="undefined"!=typeof self&&self.Date.now}const Zn=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,n){const r=this.videoTrack=sn("video",1),s=this.audioTrack=sn("audio",1),a=this.txtTrack=sn("text",1);if(this.id3Track=sn("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=Xe(e);if(o.video){const{id:e,timescale:t,codec:i}=o.video;r.id=e,r.timescale=a.timescale=t,r.codec=i}if(o.audio){const{id:e,timescale:t,codec:i}=o.audio;s.id=e,s.timescale=t,s.codec=i}a.id=He.text,r.sampleDuration=0,r.duration=s.duration=n}resetContiguity(){this.remainderData=null}static probe(e){return Ye(e=e.length>16384?e.subarray(0,16384):e,["moof"]).length>0}demux(e,t){this.timeOffset=t;let i=e;const n=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=Je(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},i=Ye(e,["moof"]);if(!i)return t;if(i.length<2)return t.remainder=e,t;const n=i[i.length-1];return t.valid=we(e,0,n.byteOffset-8),t.remainder=we(e,n.byteOffset-8),t}(i);this.remainderData=t.remainder,n.samples=t.valid||new Uint8Array}else n.samples=i;const s=this.extractID3Track(n,t);return r.samples=et(t,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const n=this.extractID3Track(t,this.timeOffset);return i.samples=et(e,t),{videoTrack:t,audioTrack:sn(),id3Track:n,textTrack:sn()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const n=Ye(e.samples,["emsg"]);n&&n.forEach((e=>{const n=function(e){const t=e[0];let i="",n="",r=0,s=0,a=0,o=0,l=0,c=0;if(0===t){for(;"\0"!==ze(e.subarray(c,c+1));)i+=ze(e.subarray(c,c+1)),c+=1;for(i+=ze(e.subarray(c,c+1)),c+=1;"\0"!==ze(e.subarray(c,c+1));)n+=ze(e.subarray(c,c+1)),c+=1;n+=ze(e.subarray(c,c+1)),c+=1,r=Ve(e,12),s=Ve(e,16),o=Ve(e,20),l=Ve(e,24),c=28}else if(1===t){c+=4,r=Ve(e,c),c+=4;const t=Ve(e,c);c+=4;const s=Ve(e,c);for(c+=4,a=2**32*t+s,Number.isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,X.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Ve(e,c),c+=4,l=Ve(e,c),c+=4;"\0"!==ze(e.subarray(c,c+1));)i+=ze(e.subarray(c,c+1)),c+=1;for(i+=ze(e.subarray(c,c+1)),c+=1;"\0"!==ze(e.subarray(c,c+1));)n+=ze(e.subarray(c,c+1)),c+=1;n+=ze(e.subarray(c,c+1)),c+=1}return{schemeIdUri:i,value:n,timeScale:r,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:e.subarray(c,e.byteLength)}}(e);if(gn.test(n.schemeIdUri)){const e=z(n.presentationTime)?n.presentationTime/n.timeScale:t+n.presentationTimeDelta/n.timeScale;let r=4294967295===n.eventDuration?Number.POSITIVE_INFINITY:n.eventDuration/n.timeScale;r<=.001&&(r=Number.POSITIVE_INFINITY);const s=n.payload;i.samples.push({data:s,len:s.byteLength,dts:e,pts:e,type:qt,duration:r})}}))}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,i,n){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(function(e,t){if(!e||!t)return e;const i=t.keyId;return i&&t.isCommonEncryption&&Ye(e,["moov","trak"]).forEach((e=>{const t=Ye(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let n=Ye(t,["enca"]);const r=n.length>0;r||(n=Ye(t,["encv"])),n.forEach((e=>{Ye(r?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const t=Qe(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(X.log(`[eme] Patching keyId in 'enc${r?"a":"v"}>sinf>>tenc' box: ${Ue(e)} -> ${Ue(i)}`),t.set(i,8))}}))}))})),e}(e,n)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:i}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const n=this.initData=Xe(e);t||(t=Qn(n.audio,ne)),i||(i=Qn(n.video,re));const r={};n.audio&&n.video?r.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:n.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:n.video?r.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:X.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,i,n,r,s){var a,o;let{initPTS:l,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:n,id3:i,initSegment:void 0};z(c)||(c=this.lastEndTime=r||0);const u=t.samples;if(null==u||!u.length)return d;const h={initPTS:void 0,timescale:1};let p=this.initData;if(null!=(a=p)&&a.length||(this.generateInitSegment(u),p=this.initData),null==(o=p)||!o.length)return X.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const f=function(e,t){let i=0,n=0,r=0;const s=Ye(e,["moof","traf"]);for(let e=0;e<s.length;e++){const a=s[e],o=Ye(a,["tfhd"])[0],l=t[Ve(o,4)];if(!l)continue;const c=l.default,d=Ve(o,0)|(null==c?void 0:c.flags);let u=null==c?void 0:c.duration;8&d&&(u=Ve(o,2&d?12:8));const h=l.timescale||9e4,p=Ye(a,["trun"]);for(let e=0;e<p.length;e++)i=Ze(p[e]),!i&&u&&(i=u*Ve(p[e],4)),l.type===re?n+=i/h:l.type===ne&&(r+=i/h)}if(0===n&&0===r){let t=0;const i=Ye(e,["sidx"]);for(let e=0;e<i.length;e++){const n=We(i[e]);null!=n&&n.references&&(t+=n.references.reduce(((e,t)=>e+t.info.duration||0),0))}return t}return n||r}(u,p),m=function(e,t){return Ye(t,["moof","traf"]).reduce(((t,i)=>{const n=Ye(i,["tfdt"])[0],r=n[0],s=Ye(i,["tfhd"]).reduce(((t,i)=>{const s=Ve(i,4),a=e[s];if(a){let e=Ve(n,4);if(1===r){if(e===$e)return X.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=$e+1,e+=Ve(n,8)}const i=e/(a.timescale||9e4);if(isFinite(i)&&(null===t||i<t))return i}return t}),null);return null!==s&&isFinite(s)&&(null===t||s<t)?s:t}),null)}(p,u),g=null===m?r:m;(function(e,t,i,n){if(null===e)return!0;const r=Math.max(n,1),s=t-e.baseTime/e.timescale;return Math.abs(s-i)>r}(l,g,r,f)||h.timescale!==l.timescale&&s)&&(h.initPTS=g-r,l&&1===l.timescale&&X.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});const y=e?g-l.baseTime/l.timescale:c,v=y+f;!function(e,t,i){Ye(t,["moof","traf"]).forEach((t=>{Ye(t,["tfhd"]).forEach((n=>{const r=Ve(n,4),s=e[r];if(!s)return;const a=s.timescale||9e4;Ye(t,["tfdt"]).forEach((e=>{const t=e[0];let n=Ve(e,4);if(0===t)n-=i*a,n=Math.max(n,0),Ke(e,4,n);else{n*=Math.pow(2,32),n+=Ve(e,8),n-=i*a,n=Math.max(n,0);const t=Math.floor(n/($e+1)),r=Math.floor(n%($e+1));Ke(e,4,t),Ke(e,8,r)}}))}))}))}(p,u,l.baseTime/l.timescale),f>0?this.lastEndTime=v:(X.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!p.audio,_=!!p.video;let T="";b&&(T+="audio"),_&&(T+="video");const w={data1:u,startPTS:y,startDTS:y,endPTS:v,endDTS:v,type:T,hasAudio:b,hasVideo:_,nb:1,dropped:0};return d.audio="audio"===w.type?w:void 0,d.video="audio"!==w.type?w:void 0,d.initSegment=h,d.id3=Kn(i,r,l,l),n.samples.length&&(d.text=Yn(n,r,l)),d}}},{demux:In,remux:Vn},{demux:class extends an{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,n){super.resetInitSegment(e,t,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=(ke(e,0)||[]).length;for(let i=e.length;t<i;t++)if(hn(e,t))return X.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&ln(e,t)&&dn(e,t)<=e.length-t}(e,t)}appendFrame(e,t,i){pn(e,this.observer,t,i,e.manifestCodec);const n=mn(e,t,i,this.basePTS,this.frameIndex);if(n&&0===n.missing)return n}},remux:Vn},{demux:class extends an{resetInitSegment(e,t,i,n){super.resetInitSegment(e,t,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=(ke(e,0)||[]).length;for(let i=e.length;t<i;t++)if(Sn(e,t))return X.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return xn(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,i){if(null!==this.basePTS)return wn(e,t,i,this.basePTS,this.frameIndex)}},remux:Vn}];class Jn{constructor(e,t,i,n,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=n,this.id=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,n){const r=i.transmuxing;r.executeStart=Hn();let s=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:o}=this;n&&(this.currentTransmuxState=n);const{contiguous:l,discontinuity:c,trackSwitch:d,accurateTimeOffset:u,timeOffset:h,initSegmentChange:p}=n||a,{audioCodec:f,videoCodec:m,defaultInitPts:g,duration:y,initSegmentData:v}=o,b=function(e,t){let i=null;return e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(i=t),i}(s,t);if(b&&"AES-128"===b.method){const e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(s,b.key.buffer,b.iv.buffer).then((e=>{const t=this.push(e,null,i);return this.decryptionPromise=null,t})),this.decryptionPromise;{let t=e.softwareDecrypt(s,b.key.buffer,b.iv.buffer);if(i.part>-1&&(t=e.flush()),!t)return r.executeEnd=Hn(),er(i);s=new Uint8Array(t)}}const _=this.needsProbing(c,d);if(_){const e=this.configureTransmuxer(s);if(e)return X.warn(`[transmuxer] ${e.message}`),this.observer.emit(q.ERROR,q.ERROR,{type:V.MEDIA_ERROR,details:j.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),r.executeEnd=Hn(),er(i)}(c||d||p||_)&&this.resetInitSegment(v,f,m,y,t),(c||p||_)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const T=this.transmux(s,b,h,u,i),w=this.currentTransmuxState;return w.contiguous=!0,w.discontinuity=!1,w.trackSwitch=!1,r.executeEnd=Hn(),T}flush(e){const t=e.transmuxing;t.executeStart=Hn();const{decrypter:i,currentTransmuxState:n,decryptionPromise:r}=this;if(r)return r.then((()=>this.flush(e)));const s=[],{timeOffset:a}=n;if(i){const t=i.flush();t&&s.push(this.push(t,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l)return t.executeEnd=Hn(),[er(e)];const c=o.flush(a);return tr(c)?c.then((t=>(this.flushRemux(s,t,e),s))):(this.flushRemux(s,c,e),s)}flushRemux(e,t,i){const{audioTrack:n,videoTrack:r,id3Track:s,textTrack:a}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;X.log(`[transmuxer.ts]: Flushed fragment ${i.sn}${i.part>-1?" p: "+i.part:""} of level ${i.level}`);const c=this.remuxer.remux(n,r,s,a,l,o,!0,this.id);e.push({remuxResult:c,chunkMeta:i}),i.transmuxing.executeEnd=Hn()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,n,r){const{demuxer:s,remuxer:a}=this;s&&a&&(s.resetInitSegment(e,t,i,n),a.resetInitSegment(e,t,i,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,n,r){let s;return s=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,n,r):this.transmuxUnencrypted(e,i,n,r),s}transmuxUnencrypted(e,t,i,n){const{audioTrack:r,videoTrack:s,id3Track:a,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,s,a,o,t,i,!1,this.id),chunkMeta:n}}transmuxSampleAes(e,t,i,n,r){return this.demuxer.demuxSampleAes(e,t,i).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,i,n,!1,this.id),chunkMeta:r})))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:n,vendor:r}=this;let s;for(let t=0,i=Zn.length;t<i;t++)if(Zn[t].demux.probe(e)){s=Zn[t];break}if(!s)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,o=this.remuxer,l=s.remux,c=s.demux;o&&o instanceof l||(this.remuxer=new l(i,t,n,r)),a&&a instanceof c||(this.demuxer=new c(i,t,n),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new zi(this.config)),e}}const er=e=>({remuxResult:{},chunkMeta:e});function tr(e){return"then"in e&&e.then instanceof Function}class ir{constructor(e,t,i,n,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=n,this.defaultInitPts=r||null}}class nr{constructor(e,t,i,n,r,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=n,this.timeOffset=r,this.initSegmentChange=s}}var rr={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new r(n,s||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),o.prototype.eventNames=function(){var e,n,r=[];if(0===this._eventsCount)return r;for(n in e=this._events)t.call(e,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,a=new Array(s);r<s;r++)a[r]=n[r].fn;return a},o.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,r,s,a){var o=i?i+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,r),!0;case 5:return d.fn.call(d.context,t,n,r,s),!0;case 6:return d.fn.call(d.context,t,n,r,s,a),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,r);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,n,r){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||r&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o}(rr);var sr=R(rr.exports);const ar=ht()||{isTypeSupported:()=>!1};class or{constructor(e,t,i,n){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=i,this.onFlush=n;const s=(e,t)=>{(t=t||{}).frag=this.frag,t.id=this.id,e===q.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new sr,this.observer.on(q.FRAG_DECRYPTED,s),this.observer.on(q.ERROR,s);const a={mp4:ar.isTypeSupported("video/mp4"),mpeg:ar.isTypeSupported("audio/mpeg"),mp3:ar.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(!this.useWorker||"undefined"==typeof Worker||!r.workerPath&&"function"!=typeof __HLS_WORKER_BUNDLE__)this.transmuxer=new Jn(this.observer,a,r,o,t);else try{r.workerPath?(X.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=function(e){const t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}(r.workerPath)):(X.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e);return{worker:new self.Worker(t),objectURL:t}}()),this.onwmsg=e=>this.onWorkerMessage(e);const{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{const i=new Error(`${e.message}  (${e.filename}:${e.lineno})`);r.enableWorker=!1,X.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(q.ERROR,{type:V.OTHER_ERROR,details:j.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:i})},e.postMessage({cmd:"init",typeSupported:a,vendor:o,id:t,config:JSON.stringify(r)})}catch(e){X.warn(`Error setting up "${t}" Web Worker, fallback to inline`,e),this.resetWorker(),this.error=null,this.transmuxer=new Jn(this.observer,a,r,o,t)}}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,i,n,r,s,a,o,l,c){var d,u;l.transmuxing.start=self.performance.now();const{transmuxer:h}=this,p=s?s.start:r.start,f=r.decryptdata,m=this.frag,g=!(m&&r.cc===m.cc),y=!(m&&l.level===m.level),v=m?l.sn-m.sn:-1,b=this.part?l.part-this.part.index:-1,_=0===v&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),T=!y&&(1===v||0===v&&(1===b||_&&b<=0)),w=self.performance.now();(y||v||0===r.stats.parsing.start)&&(r.stats.parsing.start=w),!s||!b&&T||(s.stats.parsing.start=w);const E=!(m&&(null==(d=r.initSegment)?void 0:d.url)===(null==(u=m.initSegment)?void 0:u.url)),x=new nr(g,T,o,y,p,E);if(!T||g||E){X.log(`[transmuxer-interface, ${r.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}\n        discontinuity: ${g}\n        trackSwitch: ${y}\n        contiguous: ${T}\n        accurateTimeOffset: ${o}\n        timeOffset: ${p}\n        initSegmentChange: ${E}`);const e=new ir(i,n,t,a,c);this.configureTransmuxer(e)}if(this.frag=r,this.part=s,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:f,chunkMeta:l,state:x},e instanceof ArrayBuffer?[e]:[]);else if(h){const t=h.push(e,f,l,x);tr(t)?(h.async=!0,t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}))):(h.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let i=t.flush(e);tr(i)||t.async?(tr(i)||(i=Promise.resolve(i)),i.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}))):this.handleFlushResult(i,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}onWorkerMessage(e){const t=e.data,i=this.hls;switch(t.event){case"init":{var n;const e=null==(n=this.workerContext)?void 0:n.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":X[t.data.logType]&&X[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class lr{constructor(e,t,i,n){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=n}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:i,media:n,stalled:r}=this;if(null===n)return;const{currentTime:s,seeking:a}=n,o=this.seeking&&!a,l=!this.seeking&&a;if(this.seeking=a,s!==e){if(this.moved=!0,null!==r){if(this.stallReported){const e=self.performance.now()-r;X.warn(`playback not stuck anymore @${s}, after ${Math.round(e)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(l||o)return void(this.stalled=null);if(n.paused&&!a||n.ended||0===n.playbackRate||!Mi.getBuffered(n).length)return;const c=Mi.bufferInfo(n,s,0),d=c.len>0,u=c.nextStart||0;if(!d&&!u)return;if(a){const e=c.len>2,i=!u||t&&t.start<=s||u-s>2&&!this.fragmentTracker.getPartialFragment(s);if(e||i)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var h;const e=Math.max(u,c.start||0)-s,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,i=(null==t||null==(h=t.details)?void 0:h.live)?2*t.details.targetduration:2,n=this.fragmentTracker.getPartialFragment(s);if(e>0&&(e<=i||n))return void this._trySkipBufferHole(n)}const p=self.performance.now();if(null===r)return void(this.stalled=p);const f=p-r;if(!a&&f>=250&&(this._reportStall(c),!this.media))return;const m=Mi.bufferInfo(n,s,i.maxBufferHole);this._tryFixBufferStall(m,f)}_tryFixBufferStall(e,t){const{config:i,fragmentTracker:n,media:r}=this;if(null===r)return;const s=r.currentTime,a=n.getPartialFragment(s);(!a||!this._trySkipBufferHole(a)&&this.media)&&(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-s<i.maxBufferHole)&&t>1e3*i.highBufferWatchdogPeriod&&(X.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:i,stallReported:n}=this;if(!n&&i){this.stallReported=!0;const n=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${JSON.stringify(e)})`);X.warn(n.message),t.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.BUFFER_STALLED_ERROR,fatal:!1,error:n,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:i,media:n}=this;if(null===n)return 0;const r=n.currentTime,s=Mi.bufferInfo(n,r,0),a=r<s.start?s.start:s.nextStart;if(a){const o=s.len<=t.maxBufferHole,l=s.len>0&&s.len<1&&n.readyState<3,c=a-r;if(c>0&&(o||l)){if(c>t.maxBufferHole){const{fragmentTracker:t}=this;let i=!1;if(0===r){const e=t.getAppendedFrag(0,Pt);e&&a<e.end&&(i=!0)}if(!i){const i=e||t.getAppendedFrag(r,Pt);if(i){let e=!1,n=i.end;for(;n<a;){const i=t.getPartialFragment(n);if(!i){e=!0;break}n+=i.duration}if(e)return 0}}}const s=Math.max(a+.05,r+.1);if(X.warn(`skipping hole, adjusting currentTime from ${r} to ${s}`),this.moved=!0,this.stalled=null,n.currentTime=s,e&&!e.gap){const t=new Error(`fragment loaded with buffer holes, seeking from ${r} to ${s}`);i.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return s}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:i,nudgeRetry:n}=this;if(null===i)return;const r=i.currentTime;if(this.nudgeRetry++,n<e.nudgeMaxRetry){const s=r+(n+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${r} to ${s}`);X.warn(a.message),i.currentTime=s,t.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const i=new Error(`Playhead still not moving while enough data buffered @${r} after ${e.nudgeMaxRetry} nudges`);X.error(i.message),t.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.BUFFER_STALLED_ERROR,error:i,fatal:!0})}}}class cr extends nn{constructor(e,t,i){super(e,t,i,"[stream-controller]",Pt),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.MANIFEST_PARSED,this.onManifestParsed,this),e.on(q.LEVEL_LOADING,this.onLevelLoading,this),e.on(q.LEVEL_LOADED,this.onLevelLoaded,this),e.on(q.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(q.ERROR,this.onError,this),e.on(q.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(q.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(q.BUFFER_CREATED,this.onBufferCreated,this),e.on(q.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(q.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(q.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.MANIFEST_PARSED,this.onManifestParsed,this),e.off(q.LEVEL_LOADED,this.onLevelLoaded,this),e.off(q.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(q.ERROR,this.onError,this),e.off(q.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(q.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(q.BUFFER_CREATED,this.onBufferCreated,this),e.off(q.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(q.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(q.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:i}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=i.startLevel;-1===e&&(i.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=i.nextAutoLevel),this.level=i.nextLoadLevel=e,this.loadedmetadata=!1}t>0&&-1===e&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=Vi,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=qi}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case tn:{var e;const{levels:t,level:i}=this,n=null==t||null==(e=t[i])?void 0:e.details;if(n&&(!n.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(n))break;this.state=Vi;break}if(this.hls.nextLoadLevel!==this.level){this.state=Vi;break}break}case Yi:{var t;const e=self.performance.now(),i=this.retryDate;(!i||e>=i||null!=(t=this.media)&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=Vi)}}this.state===Vi&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:n}=this,{config:r,nextLoadLevel:s}=e;if(null===t||!n&&(this.startFragRequested||!r.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;if(null==i||!i[s])return;const a=i[s],o=this.getMainFwdBufferInfo();if(null===o)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const e={};return this.altAudio&&(e.type="video"),this.hls.trigger(q.BUFFER_EOS,e),void(this.state=Zi)}e.loadLevel!==s&&-1===e.manualLevel&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=a.details;if(!c||this.state===tn||c.live&&this.levelLastLoaded!==s)return this.level=s,void(this.state=tn);const d=o.len,u=this.getMaxBufferLength(a.maxBitrate);if(d>=u)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let p=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&p&&"initSegment"!==p.sn&&this.fragmentTracker.getState(p)!==Ei){var f;const e=(null!=(f=this.backtrackFragment)?f:p).sn-c.startSN,t=c.fragments[e-1];t&&p.cc===t.cc&&(p=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,h)){if(!p.gap){const e=this.audioOnly&&!this.altAudio?ne:re,t=(e===re?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,Pt)}p=this.getNextFragmentLoopLoading(p,c,o,Pt,u)}p&&(!p.initSegment||p.initSegment.data||this.bitrateTest||(p=p.initSegment),this.loadFragment(p,a,h))}loadFragment(e,t,i){const n=this.fragmentTracker.getState(e);this.fragCurrent=e,n===_i||n===wi?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,i)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Pt)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let i;const n=this.getAppendedFrag(t.currentTime);n&&n.start>1&&this.flushMainBuffer(0,n.start-1);const r=this.getLevelDetails();if(null!=r&&r.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*r.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],n=this.fragLastKbps;i=n&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*n)+1:0}else i=0;const s=this.getBufferedFrag(t.currentTime+i);if(s){const e=this.followingBufferedFrag(s);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,i=e.duration,n=Math.max(s.end,t+Math.min(Math.max(i-this.config.maxFragLookUpTolerance,.5*i),.75*i));this.flushMainBuffer(n,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ji:case Ki:case Yi:case Xi:case Qi:this.state=Vi}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new lr(this.config,i,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;z(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const i=this.getMainFwdBufferInfo();null!==i&&0!==i.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${i?i.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(q.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(e,t){let i,n=!1,r=!1;t.levels.forEach((e=>{i=e.audioCodec,i&&(-1!==i.indexOf("mp4a.40.2")&&(n=!0),-1!==i.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=n&&r&&!function(){var e;const t=rn();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==Vi)return;const n=i[t.level];(!n.details||n.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(n.details))&&(this.state=tn)}onLevelLoaded(e,t){var i;const{levels:n}=this,r=t.level,s=t.details,a=s.totalduration;if(!n)return void this.warn(`Levels were reset while loading level ${r}`);this.log(`Level ${r} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""}, cc [${s.startCC}, ${s.endCC}] duration:${a}`);const o=n[r],l=this.fragCurrent;!l||this.state!==Ki&&this.state!==Yi||l.level===t.level&&l.urlId===o.urlId||!l.loader||this.abortCurrentFrag();let c=0;if(s.live||null!=(i=o.details)&&i.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;c=this.alignPlaylists(s,o.details)}if(o.details=s,this.levelLastLoaded=r,this.hls.trigger(q.LEVEL_UPDATED,{details:s,level:r}),this.state===tn){if(this.waitForCdnTuneIn(s))return;this.state=Vi}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,c),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:n,payload:r}=e,{levels:s}=this;if(!s)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const a=s[i.level],o=a.details;if(!o)return this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),void this.fragmentTracker.removeFragment(i);const l=a.videoCodec,c=o.PTSKnown||!o.live,d=null==(t=i.initSegment)?void 0:t.data,u=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new or(this.hls,Pt,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=n?n.index:-1,f=-1!==p,m=new Oi(i.level,i.sn,i.stats.chunkCount,r.byteLength,p,f),g=this.initPTS[i.cc];h.push(r,d,u,l,i,n,o.totalduration,c,m,g)}onAudioTrackSwitching(e,t){const i=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const e=this.hls;i&&(e.trigger(q.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger(q.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=t.id,n=!!this.hls.audioTracks[i].url;if(n){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=n,this.tick()}onBufferCreated(e,t){const i=t.tracks;let n,r,s=!1;for(const e in i){const t=i[e];if("main"===t.id){if(r=e,n=t,"video"===e){const t=i[e];t&&(this.videoBuffer=t.buffer)}}else s=!0}s&&n?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:n}=t;if(i&&i.type!==Pt)return;if(this.fragContextChanged(i))return this.warn(`Fragment ${i.sn}${n?" p: "+n.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===Qi&&(this.state=Vi));const r=n?n.stats:i.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,n)}onError(e,t){var i;if(t.fatal)this.state=Ji;else switch(t.details){case j.FRAG_GAP:case j.FRAG_PARSING_ERROR:case j.FRAG_DECRYPT_ERROR:case j.FRAG_LOAD_ERROR:case j.FRAG_LOAD_TIMEOUT:case j.KEY_LOAD_ERROR:case j.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Pt,t);break;case j.LEVEL_LOAD_ERROR:case j.LEVEL_LOAD_TIMEOUT:case j.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==tn||(null==(i=t.context)?void 0:i.type)!==It||(this.state=Vi);break;case j.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case j.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!Mi.getBuffered(e).length){const e=this.state!==Vi?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=Vi,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==ne||this.audioOnly&&!this.altAudio){const e=(t===re?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,t,Pt)}}onLevelsUpdated(e,t){this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking)return void this.log(`could not seek to ${i}, already seeking at ${t}`);const n=Mi.getBuffered(e),r=(n.length?n.start(0):0)-i;r>0&&(r<this.config.maxBufferHole||r<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${r} to match buffer start`),i+=r,this.startPosition=i),this.log(`seek to target start position ${i} from current time ${t}`),e.currentTime=i}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((i=>{const{hls:n}=this;if(!i||this.fragContextChanged(e))return;t.fragmentError=0,this.state=Vi,this.startFragRequested=!1,this.bitrateTest=!1;const r=e.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),n.trigger(q.FRAG_LOADED,i),e.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const i="main",{hls:n}=this,{remuxResult:r,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:c}=a,{video:d,text:u,id3:h,initSegment:p}=r,{details:f}=c,m=this.altAudio?void 0:r.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=Xi,p){if(null!=p&&p.tracks){const e=o.initSegment||o;this._bufferInitSegment(c,p.tracks,e,s),n.trigger(q.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:i,tracks:p.tracks})}const e=p.initPTS,t=p.timescale;z(e)&&(this.initPTS[o.cc]={baseTime:e,timescale:t},n.trigger(q.INIT_PTS_FOUND,{frag:o,id:i,initPTS:e,timescale:t}))}if(d&&f&&"initSegment"!==o.sn){const e=f.fragments[o.sn-1-f.startSN],t=o.sn===f.startSN,i=!e||o.cc>e.cc;if(!1!==r.independent){const{startPTS:e,endPTS:n,startDTS:r,endDTS:a}=d;if(l)l.elementaryStreams[d.type]={startPTS:e,endPTS:n,startDTS:r,endDTS:a};else if(d.firstKeyFrame&&d.independent&&1===s.id&&!i&&(this.couldBacktrack=!0),d.dropped&&d.independent){const r=this.getMainFwdBufferInfo(),s=(r?r.end:this.getLoadPosition())+this.config.maxBufferHole,l=d.firstKeyFramePTS?d.firstKeyFramePTS:e;if(!t&&s<l-this.config.maxBufferHole&&!i)return void this.backtrack(o);i&&(o.gap=!0),o.setElementaryStreamInfo(d.type,o.start,n,o.start,a,!0)}o.setElementaryStreamInfo(d.type,e,n,r,a),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(d,o,l,s,t||i)}else{if(!t&&!i)return void this.backtrack(o);o.gap=!0}}if(m){const{startPTS:e,endPTS:t,startDTS:i,endDTS:n}=m;l&&(l.elementaryStreams.audio={startPTS:e,endPTS:t,startDTS:i,endDTS:n}),o.setElementaryStreamInfo(ne,e,t,i,n),this.bufferFragmentData(m,o,l,s)}if(f&&null!=h&&null!=(t=h.samples)&&t.length){const e={id:i,frag:o,details:f,samples:h.samples};n.trigger(q.FRAG_PARSING_METADATA,e)}if(f&&u){const e={id:i,frag:o,details:f,samples:u.samples};n.trigger(q.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,i,n){if(this.state!==Xi)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:r,video:s,audiovideo:a}=t;if(r){let t=e.audioCodec;const i=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==r.metadata.channelCount&&-1===i.indexOf("firefox")&&(t="mp4a.40.5")),-1!==i.indexOf("android")&&"audio/mpeg"!==r.container&&(t="mp4a.40.2",this.log(`Android: force audio codec to ${t}`)),e.audioCodec&&e.audioCodec!==t&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${t}"`),r.levelCodec=t,r.id="main",this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${t||""}/${e.audioCodec||""}/${r.codec}]`)}s&&(s.levelCodec=e.videoCodec,s.id="main",this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${s.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.attrs.CODECS||""}/${a.codec}]`),this.hls.trigger(q.BUFFER_CODECS,t),Object.keys(t).forEach((e=>{const r=t[e].initSegment;null!=r&&r.byteLength&&this.hls.trigger(q.BUFFER_APPENDING,{type:e,data:r,frag:i,part:null,chunkMeta:n,parent:i.type})})),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Pt)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Vi}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const i=e.currentTime;if(Mi.isBuffered(e,i)?t=this.getAppendedFrag(i):Mi.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,i=t.level;e&&t.sn===e.sn&&e.level===i&&t.urlId===e.urlId||(this.fragPlaying=t,this.hls.trigger(q.FRAG_CHANGED,{frag:t}),e&&e.level===i||this.hls.trigger(q.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,i=this.currentFrag;if(i&&z(t)&&z(i.programDateTime)){const e=i.programDateTime+1e3*(t-i.start);return new Date(e)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class dr{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class ur{constructor(e,t,i,n=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new dr(e),this.fast_=new dr(t),this.defaultTTFB_=n,this.ttfb_=new dr(e)}update(e,t){const{slow_:i,fast_:n,ttfb_:r}=this;i.halfLife!==e&&(this.slow_=new dr(e,i.getEstimate(),i.getTotalWeight())),n.halfLife!==t&&(this.fast_=new dr(t,n.getEstimate(),n.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new dr(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){const i=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/i;this.fast_.sample(i,n),this.slow_.sample(i,n)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class hr{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;return e.length?(i=1===e.length?e[0]:function(e,t){const i=new Uint8Array(t);let n=0;for(let t=0;t<e.length;t++){const r=e[t];i.set(r,n),n+=r.length}return i}(e,t),this.reset(),i):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function pr(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!fr(e[i].attrs,t[i].attrs))return!1;return!0}function fr(e,t){const i=e["STABLE-RENDITION-ID"];return i?i===t["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((i=>e[i]!==t[i]))}class mr{constructor(e){this.buffered=void 0;const t=(t,i,n)=>{if((i>>>=0)>n-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${n})`);return e[i][t]};this.buffered={get length(){return e.length},end:i=>t("end",i,e.length),start:i=>t("start",i,e.length)}}}function gr(e){const t=[];for(let i=0;i<e.length;i++){const n=e[i];"subtitles"!==n.kind&&"captions"!==n.kind||!n.label||t.push(e[i])}return t}class yr{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t){const i=this.queues[t];i.push(e),1===i.length&&this.buffers[t]&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const i=new Promise((e=>{t=e})),n={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(n,e),i}executeNext(e){const{buffers:t,queues:i}=this,n=t[e],r=i[e];if(r.length){const t=r[0];try{t.execute()}catch(i){X.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),t.onError(i),null!=n&&n.updating||(r.shift(),this.executeNext(e))}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const vr=ht(),br=/([ha]vc.)(?:\.[^.,]+)+/,_r={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Tr=function(e){let t=e;return _r.hasOwnProperty(e)&&(t=_r[e]),String.fromCharCode(t)},wr=15,Er=100,xr={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},kr={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Sr={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Lr={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Cr=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Ar{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i="function"==typeof t?t():t;X.log(`${this.time} [${e}] ${i}`)}}}const Ir=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class Rr{constructor(e,t,i,n,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=i||!1,this.background=n||"black",this.flash=r||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Dr{constructor(e,t,i,n,r,s){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Rr(t,i,n,r,s)}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class Pr{constructor(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let e=0;e<Er;e++)this.chars.push(new Dr);this.logger=e,this.pos=0,this.currPenState=new Rr}equals(e){let t=!0;for(let i=0;i<Er;i++)if(!this.chars[i].equals(e.chars[i])){t=!1;break}return t}copy(e){for(let t=0;t<Er;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Er;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Er&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Er)}moveCursor(e){const t=this.pos+e;if(e>1)for(let e=this.pos+1;e<t+1;e++)this.chars[e].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Tr(e);this.pos>=Er?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<Er;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<Er;i++){const n=this.chars[i].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Mr{constructor(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let t=0;t<wr;t++)this.rows.push(new Pr(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let e=0;e<wr;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let i=0;i<wr;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<wr;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<wr;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+JSON.stringify(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let e=0;e<wr;e++)this.rows[e].clear();const e=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){const n=i.rows[e].cueStartTime,r=this.logger.time;if(n&&null!==r&&n<r)for(let n=0;n<this.nrRollUpRows;n++)this.rows[t-this.nrRollUpRows+n+1].copy(i.rows[e+n])}}this.currRow=t;const i=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,n=Math.max(t-1,0);i.setCursor(e.indent),e.color=i.chars[n].penState.foreground}const n={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(n)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",n=-1;for(let i=0;i<wr;i++){const r=this.rows[i].getTextString();r&&(n=i+1,e?t.push("Row "+n+": '"+r+"'"):t.push(r.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i}getTextAndFormat(){return this.rows}}class Or{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Mr(i),this.nonDisplayedMemory=new Mr(i),this.lastOutputScreen=new Mr(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[i]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Fr{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const n=new Ar;this.channels=[null,new Or(e,t,n),new Or(e+1,i,n)],this.cmdHistory={a:null,b:null},this.logger=n}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){let i,n,r,s=!1;this.logger.time=e;for(let e=0;e<t.length;e+=2)if(n=127&t[e],r=127&t[e+1],0!==n||0!==r){if(this.logger.log(3,"["+Ir([t[e],t[e+1]])+"] -> ("+Ir([n,r])+")"),i=this.parseCmd(n,r),i||(i=this.parseMidrow(n,r)),i||(i=this.parsePAC(n,r)),i||(i=this.parseBackgroundAttributes(n,r)),!i&&(s=this.parseChars(n,r),s)){const e=this.currentChannel;e&&e>0?this.channels[e].insertChars(s):this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||s||this.logger.log(2,"Couldn't parse cleaned data "+Ir([n,r])+" orig: "+Ir([t[e],t[e+1]]))}}parseCmd(e,t){const{cmdHistory:i}=this;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(Br(e,t,i))return Nr(null,null,i),this.logger.log(3,"Repeated command ("+Ir([e,t])+") is dropped"),!0;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),Nr(e,t,i),this.currentChannel=n,!0}parseMidrow(e,t){let i=0;if((17===e||25===e)&&t>=32&&t<=47){if(i=17===e?1:2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const n=this.channels[i];return!!n&&(n.ccMIDROW(t),this.logger.log(3,"MIDROW ("+Ir([e,t])+")"),!0)}return!1}parsePAC(e,t){let i;const n=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(Br(e,t,n))return Nr(null,null,n),!0;const r=e<=23?1:2;i=t>=64&&t<=95?1===r?xr[e]:Sr[e]:1===r?kr[e]:Lr[e];const s=this.channels[r];return!!s&&(s.setPAC(this.interpretPAC(i,t)),Nr(e,t,n),this.currentChannel=r,!0)}interpretPAC(e,t){let i;const n={color:null,italics:!1,indent:null,underline:!1,row:e};return i=t>95?t-96:t-64,n.underline=1==(1&i),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n}parseChars(e,t){let i,n=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),r>=17&&r<=19){let e;e=17===r?t+80:18===r?t+112:t+144,this.logger.log(2,"Special char '"+Tr(e)+"' in channel "+i),n=[e]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){const i=Ir(n);this.logger.log(3,"Char codes =  "+i.join(",")),Nr(e,t,this.cmdHistory)}return n}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;let i;const n={};16===e||24===e?(i=Math.floor((t-32)/2),n.background=Cr[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));const r=e<=23?1:2;return this.channels[r].setBkgData(n),Nr(e,t,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function Nr(e,t,i){i.a=e,i.b=t}function Br(e,t,i){return i.a===e&&i.b===t}class Ur{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var $r=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function i(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const i=t.toLowerCase();return!!~e.indexOf(i)&&i}function n(e){return i(t,e)}function r(e,...t){let i=1;for(;i<arguments.length;i++){const t=arguments[i];for(const i in t)e[i]=t[i]}return e}function s(t,s,a){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let c="",d=!1,u=t,h=s,p=a,f=null,m="",g=!0,y="auto",v="start",b=50,_="middle",T=50,w="middle";Object.defineProperty(o,"id",r({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",r({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(o,"startTime",r({},l,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",r({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",r({},l,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",r({},l,{get:function(){return m},set:function(t){const n=function(t){return i(e,t)}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");m=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",r({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",r({},l,{get:function(){return y},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",r({},l,{get:function(){return v},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",r({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",r({},l,{get:function(){return _},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",r({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",r({},l,{get:function(){return w},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),o.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class Gr{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Hr(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+parseFloat(n||0)}const i=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return i?parseFloat(i[2])>59?t(i[2],i[3],0,i[4]):t(i[1],i[2],i[3],i[4]):null}class zr{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function qr(e,t,i,n){const r=n?e.split(n):[e];for(const e in r){if("string"!=typeof r[e])continue;const n=r[e].split(i);2===n.length&&t(n[0],n[1])}}const Vr=new $r(0,0,""),jr="middle"===Vr.align?"middle":"center";function Kr(e,t,i){const n=e;function r(){const t=Hr(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=r(),s(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.slice(3),s(),t.endTime=r(),s(),function(e,t){const n=new zr;qr(e,(function(e,t){let r;switch(e){case"region":for(let r=i.length-1;r>=0;r--)if(i[r].id===t){n.set(e,i[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":r=t.split(","),n.integer(e,r[0]),n.percent(e,r[0])&&n.set("snapToLines",!1),n.alt(e,r[0],["auto"]),2===r.length&&n.alt("lineAlign",r[1],["start",jr,"end"]);break;case"position":r=t.split(","),n.percent(e,r[0]),2===r.length&&n.alt("positionAlign",r[1],["start",jr,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",jr,"end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");let r=n.get("line","auto");"auto"===r&&-1===Vr.line&&(r=-1),t.line=r,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",jr);let s=n.get("position","auto");"auto"===s&&50===Vr.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function Yr(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class Wr{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Gr,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function i(){let e=t.buffer,i=0;for(e=Yr(e);i<e.length&&"\r"!==e[i]&&"\n"!==e[i];)++i;const n=e.slice(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.slice(i),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=i();const n=e.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==n||!n[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let n=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(n?n=!1:e=i(),t.state){case"HEADER":/:/.test(e)?qr(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new $r(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Kr(e,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const i=-1!==e.indexOf("--\x3e");if(!e||i&&(n=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Xr=/\r\n|\n\r|\n|\r/g,Qr=function(e,t,i=0){return e.slice(i,i+t.length)===t},Zr=function(e){let t=5381,i=e.length;for(;i;)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()};function Jr(e,t,i){return Zr(e.toString())+Zr(t.toString())+Zr(i)}const es="stpp.ttml.im1t",ts=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,is=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,ns={left:"start",center:"center",right:"end",start:"start",end:"end"};function rs(e,t,i,n){const r=Ye(new Uint8Array(e),["mdat"]);if(0===r.length)return void n(new Error("Could not parse IMSC1 mdat"));const s=r.map((e=>Fe(e))),a=function(e,t,i=1,n=!1){return $n(e,t,1/i,n)}(t.baseTime,1,t.timescale);try{s.forEach((e=>i(function(e,t){const i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},r=Object.keys(n).reduce(((e,t)=>(e[t]=i.getAttribute(`ttp:${t}`)||n[t],e)),{}),s="preserve"!==i.getAttribute("xml:space"),a=as(ss(i,"styling","style")),o=as(ss(i,"layout","region")),l=ss(i,"body","[begin]");return[].map.call(l,(e=>{const i=os(e,s);if(!i||!e.hasAttribute("begin"))return null;const n=ds(e.getAttribute("begin"),r),l=ds(e.getAttribute("dur"),r);let c=ds(e.getAttribute("end"),r);if(null===n)throw cs(e);if(null===c){if(null===l)throw cs(e);c=n+l}const d=new $r(n-t,c-t,i);d.id=Jr(d.startTime,d.endTime,d.text);const u=function(e,t,i){const n="http://www.w3.org/ns/ttml#styling";let r=null;const s=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return s&&i.hasOwnProperty(s)&&(r=i[s]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(((i,s)=>{const a=ls(t,n,s)||ls(e,n,s)||ls(r,n,s);return a&&(i[s]=a),i}),{})}(o[e.getAttribute("region")],a[e.getAttribute("style")],a),{textAlign:h}=u;if(h){const e=ns[h];e&&(d.lineAlign=e),d.align=h}return H(d,u),d})).filter((e=>null!==e))}(e,a))))}catch(e){n(e)}}function ss(e,t,i){const n=e.getElementsByTagName(t)[0];return n?[].slice.call(n.querySelectorAll(i)):[]}function as(e){return e.reduce(((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e}),{})}function os(e,t){return[].slice.call(e.childNodes).reduce(((e,i,n)=>{var r;return"br"===i.nodeName&&n?e+"\n":null!=(r=i.childNodes)&&r.length?os(i,t):t?e+i.textContent.trim().replace(/\s+/g," "):e+i.textContent}),"")}function ls(e,t,i){return e&&e.hasAttributeNS(t,i)?e.getAttributeNS(t,i):null}function cs(e){return new Error(`Could not parse ttml timestamp ${e}`)}function ds(e,t){if(!e)return null;let i=Hr(e);return null===i&&(ts.test(e)?i=function(e,t){const i=ts.exec(e),n=(0|i[4])+(0|i[5])/t.subFrameRate;return 3600*(0|i[1])+60*(0|i[2])+(0|i[3])+n/t.frameRate}(e,t):is.test(e)&&(i=function(e,t){const i=is.exec(e),n=Number(i[1]);switch(i[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}(e,t))),i}function us(e,t){return!!e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}class hs{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(q.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(q.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(q.MANIFEST_PARSED,this.onManifestParsed,this),e.on(q.BUFFER_CODECS,this.onBufferCodecs,this),e.on(q.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(q.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(q.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(q.MANIFEST_PARSED,this.onManifestParsed,this),e.off(q.BUFFER_CODECS,this.onBufferCodecs,this),e.off(q.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const e=this.hls.levels;if(e.length){const t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter(((t,i)=>this.isLevelAllowed(t)&&i<=e));return this.clientRect=null,hs.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,i){if(null==e||!e.length)return-1;let n=e.length-1;for(let a=0;a<e.length;a+=1){const o=e[a];if((o.width>=t||o.height>=i)&&(r=o,!(s=e[a+1])||r.width!==s.width||r.height!==s.height)){n=a;break}}var r,s;return n}}const ps="[eme]";class fs{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=fs.CDMCleanupPromise?[fs.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=X.debug.bind(X,ps),this.log=X.log.bind(X,ps),this.warn=X.warn.bind(X,ps),this.error=X.error.bind(X,ps),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(q.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(q.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(q.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(q.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(q.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(q.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(q.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(q.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,n=t[e];if(n)return n.licenseUrl;if(e===he.WIDEVINE&&i)return i;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(e,t,i)=>!!e&&i.indexOf(e)===t,n=t.map((e=>e.audioCodec)).filter(i),r=t.map((e=>e.videoCodec)).filter(i);return n.length+r.length===0&&r.push("avc1.42e01e"),new Promise(((t,i)=>{const s=e=>{const a=e.shift();this.getMediaKeysPromise(a,n,r).then((e=>t({keySystem:a,mediaKeys:e}))).catch((t=>{e.length?s(e):i(t instanceof ms?t:new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};s(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if("function"!=typeof i){let e=`Configured requestMediaKeySystemAccess is not a function ${i}`;return null===Te&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return i(e,t)}getMediaKeysPromise(e,t,i){const n=function(e,t,i,n){let r;switch(e){case he.FAIRPLAY:r=["cenc","sinf"];break;case he.WIDEVINE:case he.PLAYREADY:r=["cenc"];break;case he.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,i,n){return[{initDataTypes:e,persistentState:n.persistentState||"not-allowed",distinctiveIdentifier:n.distinctiveIdentifier||"not-allowed",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:`audio/mp4; codecs="${e}"`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null}))),videoCapabilities:i.map((e=>({contentType:`video/mp4; codecs="${e}"`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null})))}]}(r,t,i,n)}(e,t,i,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let s=null==r?void 0:r.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(n)}`),s=this.requestMediaKeySystemAccess(e,n);const t=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch((t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)})),s.then((i=>{this.log(`Access for key-system "${i.keySystem}" obtained`);const n=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=i.createMediaKeys().then((t=>(this.log(`Media-keys created for "${e}"`),n.then((i=>i?this.setMediaKeysServerCertificate(t,e,i):t))))),t.mediaKeys.catch((t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)})),t.mediaKeys}))}return s.then((()=>r.mediaKeys))}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${Ue(e.keyId||[])}`);const n=i.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:n,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),n=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(i,r,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Ue(e.keyId)}updateKeySession(e,t){var i;const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyID ${Ue((null==(i=e.decryptdata)?void 0:i.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),n.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,i)=>{const n=_e(this.config),r=e.map(ye).filter((e=>!!e&&-1!==n.indexOf(e)));return this.getKeySystemSelectionPromise(r).then((({keySystem:e})=>{const n=be(e);n?t(n):i(new Error(`Unable to find format for key-system "${e}"`))})).catch(i)}))}loadKey(e){const t=e.keyInfo.decryptdata,i=this.getKeyIdString(t),n=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${n}`);let r=this.keyIdToKeySessionPromise[i];return r||(r=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(t).then((({keySystem:i,mediaKeys:r})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${n}`),this.attemptSetMediaKeys(i,r).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({keySystem:i,mediaKeys:r,decryptdata:t});return this.generateRequestWithPreferredKeySession(e,"cenc",t.pssh,"playlist-key")}))))),r.catch((e=>this.handleError(e)))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof ms?this.hls.trigger(q.ERROR,e.data):this.hls.trigger(q.ERROR,{type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[t];if(!i){const t=ye(e.keyFormat),i=t?[t]:_e(this.config);return this.attemptKeySystemAccess(i)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=_e(this.config)),0===e.length)throw new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:i}=e;if(this.debug(`"${e.type}" event: init data type: "${t}"`),null===i)return;let n,r;if("sinf"===t&&this.config.drmSystems[he.FAIRPLAY]){const e=ze(new Uint8Array(i));try{const t=de(JSON.parse(e).sinf),i=Qe(new Uint8Array(t));if(!i)return;n=i.subarray(8,24),r=he.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{const e=function(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;const t={version:0,systemId:"",kids:null,data:null},i=new DataView(e),n=i.getUint32(0);if(e.byteLength!==n&&n>44)return null;if(1886614376!==i.getUint32(4))return null;if(t.version=i.getUint32(8)>>>24,t.version>1)return null;t.systemId=Ue(new Uint8Array(e,12,16));const r=i.getUint32(28);if(0===t.version){if(n-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(let i=0;i<r;i++)t.kids.push(new Uint8Array(e,32+16*i,16))}return t}(i);if(null===e)return;0===e.version&&e.systemId===ve&&e.data&&(n=e.data.subarray(8,24)),r=function(e){if(e===ve)return he.WIDEVINE}(e.systemId)}if(!r||!n)return;const s=Ue(n),{keyIdToKeySessionPromise:a,mediaKeySessions:o}=this;let l=a[s];for(let e=0;e<o.length;e++){const r=o[e],c=r.decryptdata;if(c.pssh||!c.keyId)continue;const d=Ue(c.keyId);if(s===d||-1!==c.uri.replace(/-/g,"").indexOf(s)){l=a[d],delete a[d],c.pssh=new Uint8Array(i),c.keyId=n,l=a[s]=l.then((()=>this.generateRequestWithPreferredKeySession(r,t,i,"encrypted-event-key-match")));break}}l||(l=a[s]=this.getKeySystemSelectionPromise([r]).then((({keySystem:e,mediaKeys:r})=>{var a;this.throwIfDestroyed();const o=new st("ISO-23001-7",s,null!=(a=be(e))?a:"");return o.pssh=new Uint8Array(i),o.keyId=n,this.attemptSetMediaKeys(e,r).then((()=>{this.throwIfDestroyed();const n=this.createMediaKeySessionContext({decryptdata:o,keySystem:e,mediaKeys:r});return this.generateRequestWithPreferredKeySession(n,t,i,"encrypted-event-no-match")}))}))),l.catch((e=>this.handleError(e)))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,t){const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const n=Promise.all(i).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(n),n.then((()=>{this.log(`Media-keys set for "${e}"`),i.push(n),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===i.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,i,n){var r,s;const a=null==(r=this.config.drmSystems)||null==(s=r[e.keySystem])?void 0:s.generateRequest;if(a)try{const n=a.call(this.hls,t,i,e);if(!n)throw new Error("Invalid response from configured generateRequest filter");t=n.initDataType,i=e.decryptdata.pssh=n.initData?new Uint8Array(n.initData):null}catch(e){var o;if(this.warn(e.message),null!=(o=this.hls)&&o.config.debug)throw e}if(null===i)return this.log(`Skipping key-session request for "${n}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${n}": ${l} (init data type: ${t} length: ${i?i.byteLength:null})`);const c=new sr;e.mediaKeysSession.onmessage=t=>{const i=e.mediaKeysSession;if(!i)return void c.emit("error",new Error("invalid state"));const{messageType:n,message:r}=t;this.log(`"${n}" message event for session "${i.sessionId}" message size: ${r.byteLength}`),"license-request"===n||"license-renewal"===n?this.renewLicense(e,r).catch((e=>{this.handleError(e),c.emit("error",e)})):"license-release"===n?e.keySystem===he.FAIRPLAY&&(this.updateKeySession(e,ue("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${n}"`)},e.mediaKeysSession.onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void c.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const i=e.keyStatus;c.emit("keyStatus",i),"expired"===i&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};const d=new Promise(((e,t)=>{c.on("error",t),c.on("keyStatus",(i=>{i.startsWith("usable")?e():"output-restricted"===i?t(new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===i?t(new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${i}"`)):"expired"===i?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${i}"`)}))}));return e.mediaKeysSession.generateRequest(t,i).then((()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)})).catch((e=>{throw new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)})).then((()=>d)).catch((t=>{throw c.removeAllListeners(),this.removeSession(e),t})).then((()=>(c.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,i)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${Ue("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${Ue(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,i=new(0,t.loader)(t),n=this.getServerCertificateUrl(e);return n?(this.log(`Fetching serverCertificate for "${e}"`),new Promise(((r,s)=>{const a={responseType:"arraybuffer",url:n},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,i,n)=>{r(e.data)},onError:(t,i,r,o)=>{s(new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:r,response:$({url:a.url,data:void 0},t)},`"${e}" certificate request failed (${n}). Status: ${t.code} (${t.text})`))},onTimeout:(t,i,r)=>{s(new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:r,response:{url:a.url,data:void 0}},`"${e}" certificate request timed out (${n})`))},onAbort:(e,t,i)=>{s(new Error("aborted"))}};i.load(a,l,c)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise(((n,r)=>{e.setServerCertificate(i).then((r=>{this.log(`setServerCertificate ${r?"success":"not supported by CDM"} (${null==i?void 0:i.byteLength}) on "${t}"`),n(e)})).catch((e=>{r(new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}setupLicenseXHR(e,t,i,n){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then((()=>{if(!i.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,i,n)})).catch((s=>{if(!i.decryptdata)throw s;return e.open("POST",t,!0),r.call(this.hls,e,t,i,n)})).then((i=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:i||n}))):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:n}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise(((n,r)=>{const s=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${s}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const i=this.config.licenseResponseCallback;if(i)try{t=i.call(this.hls,a,s,e)}catch(e){this.error(e)}n(t)}else{const o=i.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)r(new ms({type:V.KEY_SYSTEM_ERROR,details:j.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${s}). Status: ${a.status} (${a.statusText})`));else{const i=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${i} attempts left`),this.requestLicense(e,t).then(n,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,s,e,t).then((({xhr:e,licenseChallenge:t})=>{e.send(t)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},st.clearKeyUriToKeyIdMap();const i=t.length;fs.CDMCleanupPromise=Promise.all(t.map((e=>this.removeSession(e))).concat(null==e?void 0:e.setMediaKeys(null).catch((t=>{this.log(`Could not clear media keys: ${t}. media.src: ${null==e?void 0:e.src}`)})))).then((()=>{i&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)})).catch((t=>{this.log(`Could not close sessions and clear media keys: ${t}. media.src: ${null==e?void 0:e.src}`)}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),t.onmessage=null,t.onkeystatuseschange=null,i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const n=this.mediaKeySessions.indexOf(e);return n>-1&&this.mediaKeySessions.splice(n,1),t.remove().catch((e=>{this.log(`Could not remove session: ${e}`)})).then((()=>t.close())).catch((e=>{this.log(`Could not close session: ${e}`)}))}}}fs.CDMCleanupPromise=void 0;class ms extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var gs="a",ys="av";class vs{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:"m",su:!this.initialized})}catch(e){X.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=e=>{try{const t=e.frag,i=this.hls.levels[t.level],n=this.getObjectType(t),r={d:1e3*t.duration,ot:n};"v"!==n&&n!==gs&&n!=ys||(r.br=i.bitrate/1e3,r.tb=this.getTopBandwidth(n)/1e3,r.bl=this.getBufferLength(n)),this.apply(e,r)}catch(e){X.warn("Could not generate segment CMCD data.",e)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;null!=i&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||vs.uuid(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.registerListeners())}registerListeners(){const e=this.hls;e.on(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(q.MEDIA_DETACHED,this.onMediaDetached,this),e.on(q.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(q.MEDIA_DETACHED,this.onMediaDetached,this),e.off(q.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,n;this.audioBuffer=null==(i=t.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(n=t.tracks.video)?void 0:n.buffer}createData(){var e;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){H(t,this.createData());const i="i"===t.ot||"v"===t.ot||t.ot===ys;if(this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders){const i=vs.toHeaders(t);if(!Object.keys(i).length)return;e.headers||(e.headers={}),H(e.headers,i)}else{const i=vs.toQuery(t);if(!i)return;e.url=vs.appendQueryToUri(e.url,i)}}getObjectType(e){const{type:t}=e;return"subtitle"===t?"tt":"initSegment"===e.sn?"i":"audio"===t?gs:"main"===t?this.hls.audioTracks.length?"v":ys:void 0}getTopBandwidth(e){let t,i=0;const n=this.hls;if(e===gs)t=n.audioTracks;else{const e=n.maxAutoLevel,i=e>-1?e+1:n.levels.length;t=n.levels.slice(0,i)}for(const e of t)e.bitrate>i&&(i=e.bitrate);return i>0?i:NaN}getBufferLength(e){const t=this.hls.media,i=e===gs?this.audioBuffer:this.videoBuffer;return i&&t?1e3*Mi.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len:NaN}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new i(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,i,n){t(e),this.loader.load(e,i,n)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new i(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,i,n){t(e),this.loader.load(e,i,n)}}}static uuid(){const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}static serialize(e){const t=[],i=e=>!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e,n=e=>Math.round(e),r=e=>100*n(e/100),s={br:n,d:n,bl:r,dl:r,mtp:r,nor:e=>encodeURIComponent(e),rtp:r,tb:n},a=Object.keys(e||{}).sort();for(const n of a){let r=e[n];if(!i(r))continue;if("v"===n&&1===r)continue;if("pr"==n&&1===r)continue;const a=s[n];a&&(r=a(r));const o=typeof r;let l;l="ot"===n||"sf"===n||"st"===n?`${n}=${r}`:"boolean"===o?n:"number"===o?`${n}=${r}`:`${n}=${JSON.stringify(r)}`,t.push(l)}return t.join(",")}static toHeaders(e){const t=Object.keys(e),i={},n=["Object","Request","Session","Status"],r=[{},{},{},{}],s={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const i of t)r[null!=s[i]?s[i]:1][i]=e[i];for(let e=0;e<r.length;e++){const t=vs.serialize(r[e]);t&&(i[`CMCD-${n[e]}`]=t)}return i}static toQuery(e){return`CMCD=${encodeURIComponent(vs.serialize(e))}`}static appendQueryToUri(e,t){if(!t)return e;const i=e.includes("?")?"&":"?";return`${e}${i}${t}`}}function bs(e,t,i,n){e&&Object.keys(t).forEach((r=>{const s=e.filter((e=>e.groupId===r)).map((e=>{const s=H({},e);return s.details=void 0,s.attrs=new J(s.attrs),s.url=s.attrs.URI=_s(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",i),s.groupId=s.attrs["GROUP-ID"]=t[r],s.attrs["PATHWAY-ID"]=n,s}));e.push(...s)}))}function _s(e,t,i,n){const{HOST:r,PARAMS:s,[i]:a}=n;let o;t&&(o=null==a?void 0:a[t],o&&(e=o));const l=new self.URL(e);return r&&!o&&(l.host=r),s&&Object.keys(s).sort().forEach((e=>{e&&l.searchParams.set(e,s[e])})),l.href}const Ts=/^age:\s*[\d.]+\s*$/im;class ws{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new ie,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e)return;const i=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0,n.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then((()=>{if(!this.stats.aborted)return r(i,t.url)})).catch((e=>(i.open("GET",t.url,!0),r(i,t.url)))).then((()=>{this.stats.aborted||this.openAndSendXhr(i,t,e)})).catch((e=>{this.callbacks.onError({code:i.status,text:e.message},t,i,n)})):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const n=this.context.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:s}=i.loadPolicy;if(n)for(const t in n)e.setRequestHeader(t,n[t]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=r&&z(r)?r:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const n=t.readyState,r=this.config;if(!i.aborted&&n>=2&&(0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),4===n)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const n=t.status,s="text"!==t.responseType;if(n>=200&&n<300&&(s&&t.response||null!==t.responseText)){i.loading.end=Math.max(self.performance.now(),i.loading.first);const r=s?t.response:t.responseText,a="arraybuffer"===t.responseType?r.byteLength:r.length;if(i.loaded=i.total=a,i.bwEstimate=8e3*i.total/(i.loading.end-i.loading.first),!this.callbacks)return;const o=this.callbacks.onProgress;if(o&&o(i,e,r,t),!this.callbacks)return;const l={url:t.responseURL,data:r,code:n};this.callbacks.onSuccess(l,i,e,t)}else{const s=r.loadPolicy.errorRetry;ci(s,i.retry,!1,n)?this.retry(s):(X.error(`${n} while loading ${e.url}`),this.callbacks.onError({code:n,text:t.statusText},e,t,i))}}}loadtimeout(){var e;const t=null==(e=this.config)?void 0:e.loadPolicy.timeoutRetry;if(ci(t,this.stats.retry,!0))this.retry(t);else{X.warn(`timeout while loading ${this.context.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=oi(e,i.retry),i.retry++,X.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Ts.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const Es=/(\d+)-(\d+)\/(\d+)/;class xs{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||ks,this.controller=new self.AbortController,this.stats=new ie}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const e=this.response;null!=e&&e.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();const r=function(e,t){const i={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(H({},e.headers))};return e.rangeEnd&&i.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),i}(e,this.controller.signal),s=i.onProgress,a="arraybuffer"===e.responseType,o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=l&&z(l)?l:c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),i.onTimeout(n,e,this.response)}),t.timeout),self.fetch(this.request).then((r=>{this.response=this.loader=r;const o=Math.max(self.performance.now(),n.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),i.onTimeout(n,e,this.response)}),c-(o-n.loading.start)),!r.ok){const{status:e,statusText:t}=r;throw new Ss(t||"fetch, bad network response",e,r)}return n.loading.first=o,n.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=Es.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(z(e))return e}const i=e.get("Content-Length");if(i)return parseInt(i)}(r.headers)||n.total,s&&z(t.highWaterMark)?this.loadProgressively(r,n,e,t.highWaterMark,s):a?r.arrayBuffer():"json"===e.responseType?r.json():r.text()})).then((r=>{const{response:a}=this;self.clearTimeout(this.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first);const l=r[o];l&&(n.loaded=n.total=l);const c={url:a.url,data:r,code:a.status};s&&!z(t.highWaterMark)&&s(n,e,r,a),i.onSuccess(c,n,e,a)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),n.aborted)return;const r=t&&t.code||0,s=t?t.message:null;i.onError({code:r,text:s},e,t?t.details:null,n)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,n=0,r){const s=new hr,a=e.body.getReader(),o=()=>a.read().then((a=>{if(a.done)return s.dataLength&&r(t,i,s.flush(),e),Promise.resolve(new ArrayBuffer(0));const l=a.value,c=l.length;return t.loaded+=c,c<n||s.dataLength?(s.push(l),s.dataLength>=n&&r(t,i,s.flush(),e)):r(t,i,l,e),o()})).catch((()=>Promise.reject()));return o()}}function ks(e,t){return new self.Request(e.url,t)}class Ss extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const Ls=/\s/,Cs={newCue(e,t,i,n){const r=[];let s,a,o,l,c;const d=self.VTTCue||self.TextTrackCue;for(let h=0;h<n.rows.length;h++)if(s=n.rows[h],o=!0,l=0,c="",!s.isEmpty()){var u;for(let e=0;e<s.chars.length;e++)Ls.test(s.chars[e].uchar)&&o?l++:(c+=s.chars[e].uchar,o=!1);s.cueStartTime=t,t===i&&(i+=1e-4),l>=16?l--:l++;const n=Yr(c.trim()),p=Jr(t,i,n);null!=e&&null!=(u=e.cues)&&u.getCueById(p)||(a=new d(t,i,n),a.id=p,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),r.push(a))}return e&&r.length&&(r.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),r.forEach((t=>$t(e,t)))),r}},As=$($({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:ws,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;const t=e.config;this.bwEstimator=new ur(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(q.FRAG_LOADING,this.onFragLoading,this),e.on(q.FRAG_LOADED,this.onFragLoaded,this),e.on(q.FRAG_BUFFERED,this.onFragBuffered,this),e.on(q.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(q.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:e}=this;e.off(q.FRAG_LOADING,this.onFragLoading,this),e.off(q.FRAG_LOADED,this.onFragLoaded,this),e.off(q.FRAG_BUFFERED,this.onFragBuffered,this),e.off(q.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(q.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(e,t){var i;const n=t.frag;this.ignoreFragment(n)||(this.fragCurrent=n,this.partCurrent=null!=(i=t.part)?i:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(e,t){this.clearTimer()}getTimeToLoadFrag(e,t,i,n){return e+i/t+(n?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const i=this.hls.config,{total:n,bwEstimate:r}=t.stats;z(n)&&z(r)&&(this.lastLevelLoadSec=8*n/r),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:e,partCurrent:t,hls:i}=this,{autoLevelEnabled:n,media:r}=i;if(!e||!r)return;const s=performance.now(),a=t?t.stats:e.stats,o=t?t.duration:e.duration,l=s-a.loading.start;if(a.aborted||a.loaded&&a.loaded===a.total||0===e.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!n||r.paused||!r.playbackRate||!r.readyState)return;const c=i.mainForwardBufferInfo;if(null===c)return;const d=this.bwEstimator.getEstimateTTFB(),u=Math.abs(r.playbackRate);if(l<=Math.max(d,o/(2*u)*1e3))return;const h=c.len/u;if(h>=2*o/u)return;const p=a.loading.first?a.loading.first-a.loading.start:-1,f=a.loaded&&p>-1,m=this.bwEstimator.getEstimate(),{levels:g,minAutoLevel:y}=i,v=g[e.level],b=a.total||Math.max(a.loaded,Math.round(o*v.maxBitrate/8));let _=l-p;_<1&&f&&(_=Math.min(l,8*a.loaded/m));const T=f?1e3*a.loaded/_:0,w=T?(b-a.loaded)/T:8*b/m+d/1e3;if(w<=h)return;const E=T?8*T:m;let x,k=Number.POSITIVE_INFINITY;for(x=e.level-1;x>y;x--){const e=g[x].maxBitrate;if(k=this.getTimeToLoadFrag(d/1e3,E,o*e,!g[x].details),k<h)break}k>=w||k>10*o||(i.nextLoadLevel=x,f?this.bwEstimator.sample(l-Math.min(d,p),a.loaded):this.bwEstimator.sampleTTFB(l),this.clearTimer(),X.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;\n      Time to underbuffer: ${h.toFixed(3)} s\n      Estimated load time for current fragment: ${w.toFixed(3)} s\n      Estimated load time for down switch fragment: ${k.toFixed(3)} s\n      TTFB estimate: ${p}\n      Current BW estimate: ${z(m)?(m/1024).toFixed(3):"Unknown"} Kb/s\n      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s\n      Aborting and switching to level ${x}`),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),i.trigger(q.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:a}))}onFragLoaded(e,{frag:t,part:i}){const n=i?i.stats:t.stats;if(t.type===Pt&&this.bwEstimator.sampleTTFB(n.loading.first-n.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const e=i?i.duration:t.duration,r=this.hls.levels[t.level],s=(r.loaded?r.loaded.bytes:0)+n.loaded,a=(r.loaded?r.loaded.duration:0)+e;r.loaded={bytes:s,duration:a},r.realBitrate=Math.round(8*s/a)}if(t.bitrateTest){const e={stats:n,frag:t,part:i,id:t.type};this.onFragBuffered(q.FRAG_BUFFERED,e),t.bitrateTest=!1}}}onFragBuffered(e,t){const{frag:i,part:n}=t,r=null!=n&&n.stats.loaded?n.stats:i.stats;if(r.aborted)return;if(this.ignoreFragment(i))return;const s=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,r.loaded),r.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Pt||"initSegment"===e.sn}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;let i=this.getNextABRAutoLevel();if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,i)&&t[e].loadError<=t[i].loadError)return e}return-1!==e&&(i=Math.min(e,i)),i}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this,{maxAutoLevel:n,config:r,minAutoLevel:s,media:a}=i,o=t?t.duration:e?e.duration:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,d=i.mainForwardBufferInfo,u=(d?d.len:0)/l;let h=this.findBestLevel(c,s,n,u,r.abrBandWidthFactor,r.abrBandWidthUpFactor);if(h>=0)return h;X.trace(`[abr] ${u?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let p=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay,f=r.abrBandWidthFactor,m=r.abrBandWidthUpFactor;if(!u){const e=this.bitrateTestDelay;e&&(p=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-e,X.trace(`[abr] bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),f=m=1)}return h=this.findBestLevel(c,s,n,u+p,f,m),Math.max(h,0)}findBestLevel(e,t,i,n,r,s){var a;const{fragCurrent:o,partCurrent:l,lastLoadedFragLevel:c}=this,{levels:d}=this.hls,u=d[c],h=!(null==u||null==(a=u.details)||!a.live),p=null==u?void 0:u.codecSet,f=l?l.duration:o?o.duration:0,m=this.bwEstimator.getEstimateTTFB()/1e3;let g=t,y=-1;for(let a=i;a>=t;a--){const t=d[a];if(!t||p&&t.codecSet!==p){t&&(g=Math.min(a,g),y=Math.max(a,y));continue}-1!==y&&X.trace(`[abr] Skipped level(s) ${g}-${y} with CODECS:"${d[y].attrs.CODECS}"; not compatible with "${u.attrs.CODECS}"`);const i=t.details,o=(l?null==i?void 0:i.partTarget:null==i?void 0:i.averagetargetduration)||f;let v;v=a<=c?r*e:s*e;const b=d[a].maxBitrate,_=this.getTimeToLoadFrag(m,v,b*o,void 0===i);if(X.trace(`[abr] level:${a} adjustedbw-bitrate:${Math.round(v-b)} avgDuration:${o.toFixed(1)} maxFetchDuration:${n.toFixed(1)} fetchDuration:${_.toFixed(1)}`),v>b&&(0===_||!z(_)||h&&!this.bitrateTestDelay||_<n))return a}return-1}set nextAutoLevel(e){this._nextAutoLevel=e}},bufferController:class{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:e,mediaSource:t}=this;X.log("[buffer-controller]: Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(q.MEDIA_ATTACHED,{media:e})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{X.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{X.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:e,_objectUrl:t}=this;e&&e.src!==t&&X.error(`Media element src was set while attaching MediaSource (${t} > ${e.src})`)},this.hls=e,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:e}=this;e.on(q.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.MANIFEST_PARSED,this.onManifestParsed,this),e.on(q.BUFFER_RESET,this.onBufferReset,this),e.on(q.BUFFER_APPENDING,this.onBufferAppending,this),e.on(q.BUFFER_CODECS,this.onBufferCodecs,this),e.on(q.BUFFER_EOS,this.onBufferEos,this),e.on(q.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(q.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(q.FRAG_PARSED,this.onFragParsed,this),e.on(q.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(q.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.MANIFEST_PARSED,this.onManifestParsed,this),e.off(q.BUFFER_RESET,this.onBufferReset,this),e.off(q.BUFFER_APPENDING,this.onBufferAppending,this),e.off(q.BUFFER_CODECS,this.onBufferCodecs,this),e.off(q.BUFFER_EOS,this.onBufferEos,this),e.off(q.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(q.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(q.FRAG_PARSED,this.onFragParsed,this),e.off(q.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new yr(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,X.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const i=this.media=t.media;if(i&&vr){const e=this.mediaSource=new vr;e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),i.src=self.URL.createObjectURL(e),this._objectUrl=i.src,i.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:i}=this;if(t){if(X.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){X.warn(`[buffer-controller]: onMediaDetaching: ${e.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),e.src===i?(e.removeAttribute("src"),e.load()):X.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(q.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];try{t&&(this.removeBufferListeners(e),this.mediaSource&&this.mediaSource.removeSourceBuffer(t),this.sourceBuffer[e]=void 0)}catch(t){X.warn(`[buffer-controller]: Failed to reset the ${e} buffer`,t)}})),this._initSourceBuffer()}onBufferCodecs(e,t){const i=this.getSourceBufferTypes().length;Object.keys(t).forEach((e=>{if(i){const i=this.tracks[e];if(i&&"function"==typeof i.buffer.changeType){const{id:n,codec:r,levelCodec:s,container:a,metadata:o}=t[e],l=(i.levelCodec||i.codec).replace(br,"$1"),c=(s||r).replace(br,"$1");if(l!==c){const t=`${a};codecs=${s||r}`;this.appendChangeType(e,t),X.log(`[buffer-controller]: switching codec ${l} to ${c}`),this.tracks[e]={buffer:i.buffer,codec:r,container:a,levelCodec:s,metadata:o,id:n}}}}else this.pendingTracks[e]=t[e]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())}appendChangeType(e,t){const{operationQueue:i}=this,n={execute:()=>{const n=this.sourceBuffer[e];n&&(X.log(`[buffer-controller]: changing ${e} sourceBuffer type to ${t}`),n.changeType(t)),i.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{X.warn(`[buffer-controller]: Failed to change ${e} SourceBuffer type`,t)}};i.append(n,e)}onBufferAppending(e,t){const{hls:i,operationQueue:n,tracks:r}=this,{data:s,type:a,frag:o,part:l,chunkMeta:c}=t,d=c.buffering[a],u=self.performance.now();d.start=u;const h=o.stats.buffering,p=l?l.stats.buffering:null;0===h.start&&(h.start=u),p&&0===p.start&&(p.start=u);const f=r.audio;let m=!1;"audio"===a&&"audio/mpeg"===(null==f?void 0:f.container)&&(m=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const g=o.start,y={execute:()=>{if(d.executeStart=self.performance.now(),m){const e=this.sourceBuffer[a];if(e){const t=g-e.timestampOffset;Math.abs(t)>=.1&&(X.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${g} (delta: ${t}) sn: ${o.sn})`),e.timestampOffset=g)}}this.appendExecutor(s,a)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();d.executeEnd=d.end=e,0===h.first&&(h.first=e),p&&0===p.first&&(p.first=e);const{sourceBuffer:t}=this,i={};for(const e in t)i[e]=Mi.getBuffered(t[e]);this.appendError=0,this.hls.trigger(q.BUFFER_APPENDED,{type:a,frag:o,part:l,chunkMeta:c,parent:o.type,timeRanges:i})},onError:e=>{X.error(`[buffer-controller]: Error encountered while trying to append to the ${a} SourceBuffer`,e);const t={type:V.MEDIA_ERROR,parent:o.type,details:j.BUFFER_APPEND_ERROR,frag:o,part:l,chunkMeta:c,error:e,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=j.BUFFER_FULL_ERROR:(this.appendError++,t.details=j.BUFFER_APPEND_ERROR,this.appendError>i.config.appendErrorMaxRetry&&(X.error(`[buffer-controller]: Failed ${i.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),t.fatal=!0)),i.trigger(q.ERROR,t)}};n.append(y,a)}onBufferFlushing(e,t){const{operationQueue:i}=this,n=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(q.BUFFER_FLUSHED,{type:e})},onError:t=>{X.warn(`[buffer-controller]: Failed to remove from ${e} SourceBuffer`,t)}});t.type?i.append(n(t.type),t.type):this.getSourceBufferTypes().forEach((e=>{i.append(n(e),e)}))}onFragParsed(e,t){const{frag:i,part:n}=t,r=[],s=n?n.elementaryStreams:i.elementaryStreams;s.audiovideo?r.push("audiovideo"):(s.audio&&r.push("audio"),s.video&&r.push("video")),0===r.length&&X.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers((()=>{const e=self.performance.now();i.stats.buffering.end=e,n&&(n.stats.buffering.end=e);const t=n?n.stats:i.stats;this.hls.trigger(q.FRAG_BUFFERED,{frag:i,part:n,stats:t,id:i.type})}),r)}onFragChanged(e,t){this.flushBackBuffer()}onBufferEos(e,t){this.getSourceBufferTypes().reduce(((e,i)=>{const n=this.sourceBuffer[i];return!n||t.type&&t.type!==i||(n.ending=!0,n.ended||(n.ended=!0,X.log(`[buffer-controller]: ${i} sourceBuffer now EOS`))),e&&!(n&&!n.ended)}),!0)&&(X.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];t&&(t.ending=!1)}));const{mediaSource:e}=this;e&&"open"===e.readyState?(X.log("[buffer-controller]: Calling mediaSource.endOfStream()"),e.endOfStream()):e&&X.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:e,details:t,media:i,sourceBuffer:n}=this;if(!i||null===t)return;const r=this.getSourceBufferTypes();if(!r.length)return;const s=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(!z(s)||s<0)return;const a=i.currentTime,o=t.levelTargetDuration,l=Math.max(s,o),c=Math.floor(a/o)*o-l;r.forEach((i=>{const r=n[i];if(r){const n=Mi.getBuffered(r);if(n.length>0&&c>n.start(0)){if(e.trigger(q.BACK_BUFFER_REACHED,{bufferEnd:c}),t.live)e.trigger(q.LIVE_BACK_BUFFER_REACHED,{bufferEnd:c});else if(r.ended&&n.end(n.length-1)-a<2*o)return void X.info(`[buffer-controller]: Cannot flush ${i} back buffer while SourceBuffer is in ended state`);e.trigger(q.BUFFER_FLUSHING,{startOffset:0,endOffset:c,type:i})}}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:i,mediaSource:n}=this,r=e.fragments[0].start+e.totalduration,s=i.duration,a=z(n.duration)?n.duration:0;e.live&&t.config.liveDurationInfinity?(X.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(e)):(r>a&&r>s||!z(s))&&(X.log(`[buffer-controller]: Updating Media Source duration to ${r.toFixed(3)}`),n.duration=r)}updateSeekableRange(e){const t=this.mediaSource,i=e.fragments;if(i.length&&e.live&&null!=t&&t.setLiveSeekableRange){const n=Math.max(0,i[0].start),r=Math.max(n,n+e.totalduration);t.setLiveSeekableRange(n,r)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:i}=this,n=Object.keys(i).length;if(n&&!e||2===n){this.createSourceBuffers(i),this.pendingTracks={};const e=this.getSourceBufferTypes();if(e.length)this.hls.trigger(q.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((e=>{t.executeNext(e)}));else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:i}=this;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(const n in e)if(!t[n]){const r=e[n];if(!r)throw Error(`source buffer exists for track ${n}, however track does not`);const s=r.levelCodec||r.codec,a=`${r.container};codecs=${s}`;X.log(`[buffer-controller]: creating sourceBuffer(${a})`);try{const e=t[n]=i.addSourceBuffer(a),o=n;this.addBufferListener(o,"updatestart",this._onSBUpdateStart),this.addBufferListener(o,"updateend",this._onSBUpdateEnd),this.addBufferListener(o,"error",this._onSBUpdateError),this.tracks[n]={buffer:e,codec:s,container:r.container,levelCodec:r.levelCodec,metadata:r.metadata,id:r.id}}catch(e){X.error(`[buffer-controller]: error while trying to add sourceBuffer: ${e.message}`),this.hls.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:a})}}}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){const{operationQueue:t}=this;t.current(e).onComplete(),t.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){const i=new Error(`${e} SourceBuffer error`);X.error(`[buffer-controller]: ${i}`,t),this.hls.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.BUFFER_APPENDING_ERROR,error:i,fatal:!1});const n=this.operationQueue.current(e);n&&n.onError(t)}removeExecutor(e,t,i){const{media:n,mediaSource:r,operationQueue:s,sourceBuffer:a}=this,o=a[e];if(!n||!r||!o)return X.warn(`[buffer-controller]: Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void s.shiftAndExecuteNext(e);const l=z(n.duration)?n.duration:1/0,c=z(r.duration)?r.duration:1/0,d=Math.max(0,t),u=Math.min(i,l,c);u>d&&!o.ending?(o.ended=!1,X.log(`[buffer-controller]: Removing [${d},${u}] from the ${e} SourceBuffer`),o.remove(d,u)):s.shiftAndExecuteNext(e)}appendExecutor(e,t){const{operationQueue:i,sourceBuffer:n}=this,r=n[t];if(!r)return X.warn(`[buffer-controller]: Attempting to append to the ${t} SourceBuffer, but it does not exist`),void i.shiftAndExecuteNext(t);r.ended=!1,r.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length)return X.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:i}=this,n=t.map((e=>i.appendBlocker(e)));Promise.all(n).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||i.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,i){const n=this.sourceBuffer[e];if(!n)return;const r=i.bind(this,e);this.listeners[e].push({event:t,listener:r}),n.addEventListener(t,r)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}},capLevelController:hs,errorController:class{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=X.log.bind(X,"[info]:"),this.warn=X.warn.bind(X,"[warning]:"),this.error=X.error.bind(X,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(q.ERROR,this.onError,this),e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(q.ERROR,this.onError,this),e.off(q.ERROR,this.onErrorOut,this),e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){this.playlistError=0}stopLoad(){}getVariantLevelIndex(e){return(null==e?void 0:e.type)===Pt?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i,n;if(t.fatal)return;const r=this.hls,s=t.context;switch(t.details){case j.FRAG_LOAD_ERROR:case j.FRAG_LOAD_TIMEOUT:case j.KEY_LOAD_ERROR:case j.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case j.FRAG_PARSING_ERROR:if(null!=(i=t.frag)&&i.gap)return void(t.errorAction={action:0,flags:0});case j.FRAG_GAP:case j.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case j.LEVEL_EMPTY_ERROR:case j.LEVEL_PARSING_ERROR:{var a,o;const e=t.parent===Pt?t.level:r.loadLevel;t.details===j.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(o=a.levelDetails)&&o.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case j.LEVEL_LOAD_ERROR:case j.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==s?void 0:s.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level)));case j.AUDIO_TRACK_LOAD_ERROR:case j.AUDIO_TRACK_LOAD_TIMEOUT:case j.SUBTITLE_LOAD_ERROR:case j.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const e=r.levels[r.loadLevel];if(e&&(s.type===Rt&&s.groupId===e.audioGroupId||s.type===Dt&&s.groupId===e.textGroupId))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)}return;case j.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=r.levels[r.loadLevel],i=null==e?void 0:e.attrs["HDCP-LEVEL"];i&&(t.errorAction={action:2,flags:2,hdcpLevel:i})}return;case j.BUFFER_ADD_CODEC_ERROR:case j.REMUX_ALLOC_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(n=t.level)?n:r.loadLevel));case j.INTERNAL_EXCEPTION:case j.BUFFER_APPENDING_ERROR:case j.BUFFER_APPEND_ERROR:case j.BUFFER_FULL_ERROR:case j.LEVEL_SWITCH_ERROR:case j.BUFFER_STALLED_ERROR:case j.BUFFER_SEEK_OVER_HOLE:case j.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:0,flags:0})}if(t.type===V.KEY_SYSTEM_ERROR){const e=this.getVariantLevelIndex(t.frag);return t.levelRetry=!1,void(t.errorAction=this.getLevelSwitchAction(t,e))}}getPlaylistRetryOrSwitchAction(e,t){var i;const n=ai(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++,s=null==(i=e.response)?void 0:i.code;if(ci(n,r,si(e),s))return{action:5,flags:0,retryConfig:n,retryCount:r};const a=this.getLevelSwitchAction(e,t);return n&&(a.retryConfig=n,a.retryCount=r),a}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),n=t.levels[i],{fragLoadPolicy:r,keyLoadPolicy:s}=t.config,a=ai(e.details.startsWith("key")?s:r,e),o=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(n){var l;e.details!==j.FRAG_GAP&&n.fragmentError++;const t=null==(l=e.response)?void 0:l.code;if(ci(a,o,si(e),t))return{action:5,flags:0,retryConfig:a,retryCount:o}}const c=this.getLevelSwitchAction(e,i);return a&&(c.retryConfig=a,c.retryCount=o),c}getLevelSwitchAction(e,t){const i=this.hls;null==t&&(t=i.loadLevel);const n=this.hls.levels[t];if(n&&(n.loadError++,i.autoLevelEnabled)){var r,s;let t=-1;const{levels:a,loadLevel:o,minAutoLevel:l,maxAutoLevel:c}=i,d=null==(r=e.frag)?void 0:r.type,{type:u,groupId:h}=null!=(s=e.context)?s:{};for(let i=a.length;i--;){const r=(i+o)%a.length;if(r!==o&&r>=l&&r<=c&&0===a[r].loadError){const i=a[r];if(e.details===j.FRAG_GAP&&e.frag){const t=a[r].details;if(t){const i=ui(e.frag,t.fragments,e.frag.start);if(null!=i&&i.gap)continue}}else{if(u===Rt&&h===i.audioGroupId||u===Dt&&h===i.textGroupId)continue;if(d===Mt&&n.audioGroupId===i.audioGroupId||d===Ot&&n.textGroupId===i.textGroupId)continue}t=r;break}}if(t>-1&&i.loadLevel!==t)return e.levelRetry=!0,this.playlistError=0,{action:2,flags:0,nextAutoLevel:t}}return{action:2,flags:1}}onErrorOut(e,t){var i;switch(null==(i=t.errorAction)?void 0:i.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===j.FRAG_GAP||(t.fatal=!0)}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:n,hdcpLevel:r,nextAutoLevel:s}=i;switch(n){case 0:this.switchLevel(e,s);break;case 1:i.resolved||(i.resolved=this.redundantFailover(e));break;case 2:r&&(t.maxHdcpLevel=Xt[Xt.indexOf(r)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}i.resolved||this.switchLevel(e,s)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(e){const{hls:t,penalizedRenditions:i}=this,n=e.parent===Pt?e.level:t.loadLevel,r=t.levels[n],s=r.url.length,a=e.frag?e.frag.urlId:r.urlId;r.urlId!==a||e.frag&&!r.details||this.penalizeRendition(r,e);for(let o=1;o<s;o++){const l=(a+o)%s,c=i[l];if(!c||fi(c,e,i[a]))return this.warn(`Switching to Redundant Stream ${l+1}/${s}: "${r.url[l]}" after ${e.details}`),this.playlistError=0,t.levels.forEach((e=>{e.urlId=l})),t.nextLoadLevel=n,!0}return!1}penalizeRendition(e,t){const{penalizedRenditions:i}=this,n=i[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};n.lastErrorPerfMs=performance.now(),n.errors.push(t),n.details=e.details,i[e.urlId]=n}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(q.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(q.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,i){const n=performance.now();if(t){if(this.lastTime){const e=n-this.lastTime,r=i-this.lastDroppedFrames,s=t-this.lastDecodedFrames,a=1e3*r/e,o=this.hls;if(o.trigger(q.FPS_DROP,{currentDropped:r,currentDecoded:s,totalDroppedFrames:i}),a>0&&r>o.config.fpsDroppedMonitoringThreshold*s){let e=o.currentLevel;X.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(q.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Te,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:Cs,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends nn{constructor(e,t,i){super(e,t,i,"[subtitle-stream-controller]",Ot),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.LEVEL_LOADED,this.onLevelLoaded,this),e.on(q.ERROR,this.onError,this),e.on(q.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(q.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(q.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(q.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(q.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(q.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.LEVEL_LOADED,this.onLevelLoaded,this),e.off(q.ERROR,this.onError,this),e.off(q.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(q.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(q.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(q.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(q.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(q.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=Vi,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:n}=t;if(this.fragPrevious=i,this.state=Vi,!n)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let s;const a=i.start;for(let e=0;e<r.length;e++)if(a>=r[e].start&&a<=r[e].end){s=r[e];break}const o=i.start+i.duration;s?s.end=o:(s={start:a,end:o},r.push(s)),this.fragmentTracker.fragBuffered(i)}onBufferFlushing(e,t){const{startOffset:i,endOffset:n}=t;if(0===i&&n!==Number.POSITIVE_INFINITY){const e=n-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let i=0;i<t.length;)if(t[i].end<=e)t.shift();else{if(!(t[i].start<e))break;t[i].start=e,i++}})),this.fragmentTracker.removeFragmentsInRange(i,e,Ot)}}onFragBuffered(e,t){var i;this.loadedmetadata||t.frag.type!==Pt||null!=(i=this.media)&&i.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){const i=t.frag;(null==i?void 0:i.type)===Ot&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==qi&&(this.state=Vi))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){pr(this.levels,t)?this.levels=t.map((e=>new Zt(e))):(this.tracksBuffered=[],this.levels=t.map((e=>{const t=new Zt(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Ot),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){if(this.currentTrackId=t.id,!this.levels.length||-1===this.currentTrackId)return void this.clearInterval();const i=this.levels[this.currentTrackId];null!=i&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var i;const{details:n,id:r}=t,{currentTrackId:s,levels:a}=this;if(!a.length)return;const o=a[s];if(r>=a.length||r!==s||!o)return;this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(n.live||null!=(i=o.details)&&i.live){const e=this.mainDetails;if(n.deltaUpdateFailed||!e)return;const t=e.fragments[0];o.details?(l=this.alignPlaylists(n,o.details),0===l&&t&&(l=t.start,ii(n,l))):n.hasProgramDateTime&&e.hasProgramDateTime?(Ui(n,e),l=n.fragments[0].start):t&&(l=t.start,ii(n,l))}o.details=n,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(o.details,l),this.tick(),n.live&&!this.fragCurrent&&this.media&&this.state===Vi&&(ui(null,n.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,n=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&n&&n.key&&n.iv&&"AES-128"===n.method){const e=performance.now();this.decrypter.decrypt(new Uint8Array(i),n.key.buffer,n.iv.buffer).catch((e=>{throw r.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((i=>{const n=performance.now();r.trigger(q.FRAG_DECRYPTED,{frag:t,payload:i,stats:{tstart:e,tdecrypt:n}})})).catch((e=>{this.warn(`${e.name}: ${e.message}`),this.state=Vi}))}}doTick(){if(this.media){if(this.state===Vi){const{currentTrackId:e,levels:t}=this,i=t[e];if(!t.length||!i||!i.details)return;const{config:n}=this,r=this.getLoadPosition(),s=Mi.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,n.maxBufferHole),{end:a,len:o}=s,l=this.getFwdBufferInfo(this.media,Pt),c=i.details;if(o>this.getMaxBufferLength(null==l?void 0:l.len)+c.levelTargetDuration)return;const d=c.fragments,u=d.length,h=c.edge;let p=null;const f=this.fragPrevious;if(a<h){const e=n.maxFragLookUpTolerance,t=a>h-e?0:e;p=ui(f,d,Math.max(d[0].start,a),t),!p&&f&&f.start<d[0].start&&(p=d[0])}else p=d[u-1];if(!p)return;if(p=this.mapToInitFragWhenRequired(p),"initSegment"!==p.sn){const e=d[p.sn-c.startSN-1];e&&e.cc===p.cc&&this.fragmentTracker.getState(e)===_i&&(p=e)}this.fragmentTracker.getState(p)===_i&&this.loadFragment(p,i,a)}}else this.state=Vi}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,i){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,i))}get mediaBufferTimeRanges(){return new mr(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends mi{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:e}=this;e.on(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.MANIFEST_PARSED,this.onManifestParsed,this),e.on(q.LEVEL_LOADING,this.onLevelLoading,this),e.on(q.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(q.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(q.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.MANIFEST_PARSED,this.onManifestParsed,this),e.off(q.LEVEL_LOADING,this.onLevelLoading,this),e.off(q.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(q.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(q.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)}onMediaDetaching(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),gr(this.media.textTracks).forEach((e=>{Gt(e)})),this.subtitleTrack=-1,this.media=null)}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,details:n}=t,{trackId:r}=this,s=this.tracksInGroup[r];if(!s)return void this.warn(`Invalid subtitle track id ${i}`);const a=s.details;s.details=t.details,this.log(`subtitle track ${i} loaded [${n.startSN}-${n.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(null==t||!t.textGroupIds)return;const i=t.textGroupIds[t.urlId],n=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==i){const e=this.tracks.filter((e=>!i||e.groupId===i));this.tracksInGroup=e;const t=this.findTrackId(null==n?void 0:n.name)||this.findTrackId();this.groupId=i||null;const r={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${i}" group-id`),this.hls.trigger(q.SUBTITLE_TRACKS_UPDATED,r),-1!==t&&this.setSubtitleTrack(t,n)}else this.shouldReloadPlaylist(n)&&this.setSubtitleTrack(this.trackId,n)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const n=t[i];if((!this.selectDefaultTrack||n.default)&&(!e||e===n.name))return n.id}return-1}onError(e,t){!t.fatal&&t.context&&t.context.type===Dt&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1;const t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const i=t.id,n=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}this.log(`Loading subtitle playlist for id ${i}`),this.hls.trigger(q.SUBTITLE_TRACK_LOADING,{url:r,id:i,groupId:n,deliveryDirectives:e||null})}}toggleTrackModes(e){const{media:t,trackId:i}=this;if(!t)return;const n=gr(t.textTracks),r=n.filter((e=>e.groupId===this.groupId));if(-1===e)[].slice.call(n).forEach((e=>{e.mode="disabled"}));else{const e=r[i];e&&(e.mode="disabled")}const s=r[e];s&&(s.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(e,t){var i;const n=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(-1===e||null!=(i=n[e])&&i.details)||e<-1||e>=n.length)return;this.clearTimer();const r=n[e];if(this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:"")),this.trackId=e,r){const{id:e,groupId:i="",name:n,type:s,url:a}=r;this.hls.trigger(q.SUBTITLE_TRACK_SWITCH,{id:e,groupId:i,name:n,type:s,url:a});const o=this.switchParams(r.url,null==t?void 0:t.details);this.loadPlaylist(o)}else this.hls.trigger(q.SUBTITLE_TRACK_SWITCH,{id:e})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=-1;const t=gr(this.media.textTracks);for(let i=0;i<t.length;i++)if("hidden"===t[i].mode)e=i;else if("showing"===t[i].mode){e=i;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},timelineController:class{constructor(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const e=new Ur(this,"textTrack1"),t=new Ur(this,"textTrack2"),i=new Ur(this,"textTrack3"),n=new Ur(this,"textTrack4");this.cea608Parser1=new Fr(1,e,t),this.cea608Parser2=new Fr(3,i,n)}e.on(q.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(q.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(q.FRAG_LOADING,this.onFragLoading,this),e.on(q.FRAG_LOADED,this.onFragLoaded,this),e.on(q.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(q.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(q.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(q.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(q.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(q.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(q.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(q.FRAG_LOADING,this.onFragLoading,this),e.off(q.FRAG_LOADED,this.onFragLoaded,this),e.off(q.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(q.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(q.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(q.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(q.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(e,t,i,n,r){let s=!1;for(let e=r.length;e--;){const n=r[e],d=(a=n[0],o=n[1],l=t,c=i,Math.min(o,c)-Math.max(a,l));if(d>=0&&(n[0]=Math.min(n[0],t),n[1]=Math.max(n[1],i),s=!0,d/(i-t)>.5))return}var a,o,l,c;if(s||r.push([t,i]),this.config.renderTextTracksNatively){const r=this.captionsTracks[e];this.Cues.newCue(r,t,i,n)}else{const r=this.Cues.newCue(null,t,i,n);this.hls.trigger(q.CUES_PARSED,{type:"captions",cues:r,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:n,timescale:r}){const{unparsedVttFrags:s}=this;"main"===i&&(this.initPTS[t.cc]={baseTime:n,timescale:r}),s.length&&(this.unparsedVttFrags=[],s.forEach((e=>{this.onFragLoaded(q.FRAG_LOADED,e)})))}getExistingTrack(e){const{media:t}=this;if(t)for(let i=0;i<t.textTracks.length;i++){const n=t.textTracks[i];if(n[e])return n}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:n}=this,{label:r,languageCode:s}=t[e],a=this.getExistingTrack(e);if(a)i[e]=a,Gt(i[e]),Ut(i[e],n);else{const t=this.createTextTrack("captions",r,s);t&&(t[e]=!0,i[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(q.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,i){const n=this.media;if(n)return n.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>{Gt(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let e=0;e<t.length;e++)Gt(t[e])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],n=i.some((e=>e.textCodec===es));if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(pr(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const e=this.media?this.media.textTracks:null;this.tracks.forEach(((t,i)=>{let n;if(e&&i<e.length){let i=null;for(let n=0;n<e.length;n++)if(us(e[n],t)){i=e[n];break}i&&(n=i)}if(n)Gt(n);else{const e=this._captionsOrSubtitlesFromCharacteristics(t);n=this.createTextTrack(e,t.name,t.lang),n&&(n.mode="disabled")}n&&(n.groupId=t.groupId,this.textTracks.push(n))}))}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(q.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}_captionsOrSubtitlesFromCharacteristics(e){if(e.attrs.CHARACTERISTICS){const t=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),i=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(t&&i)return"captions"}return"subtitles"}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const i=`textTrack${t[1]}`,n=this.captionsProperties[i];n&&(n.label=e.name,e.lang&&(n.languageCode=e.lang),n.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){const{cea608Parser1:i,cea608Parser2:n,lastSn:r,lastPartIndex:s}=this;if(this.enabled&&i&&n&&t.frag.type===Pt){var a,o;const e=t.frag.sn,l=null!=(a=null==t||null==(o=t.part)?void 0:o.index)?a:-1;e===r+1||e===r&&l===s+1||(i.reset(),n.reset()),this.lastSn=e,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:i,payload:n}=t;if(i.type===Ot)if(n.byteLength){const e=i.decryptdata,r="stats"in t;if(null==e||!e.encrypted||r){const e=this.tracks[i.level],r=this.vttCCs;r[i.cc]||(r[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),e&&e.textCodec===es?this._parseIMSC1(i,n):this._parseVTTs(t)}}else this.hls.trigger(q.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;rs(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),i.trigger(q.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{X.log(`Failed to parse IMSC1: ${t}`),i.trigger(q.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:i,payload:n}=e,{initPTS:r,unparsedVttFrags:s}=this,a=r.length-1;if(!r[i.cc]&&-1===a)return void s.push(e);const o=this.hls;!function(e,t,i,n,r,s,a){const o=new Wr,l=Fe(new Uint8Array(e)).trim().replace(Xr,"\n").split("\n"),c=[],d=t?function(e,t=1){return $n(e,9e4,1/t)}(t.baseTime,t.timescale):0;let u,h="00:00.000",p=0,f=0,m=!0;o.oncue=function(e){const s=i[n];let a=i.ccOffset;const o=(p-d)/9e4;if(null!=s&&s.new&&(void 0!==f?a=i.ccOffset=s.start:function(e,t,i){let n=e[t],r=e[n.prevCC];if(!r||!r.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;null!=(s=r)&&s.new;){var s;e.ccOffset+=n.start-r.start,n.new=!1,n=r,r=e[n.prevCC]}e.presentationOffset=i}(i,n,o)),o){if(!t)return void(u=new Error("Missing initPTS for VTT MPEGTS"));a=o-i.presentationOffset}const l=e.endTime-e.startTime,h=jn(9e4*(e.startTime+a-f),9e4*r)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const m=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(m)),e.id||(e.id=Jr(e.startTime,e.endTime,m)),e.endTime>0&&c.push(e)},o.onparsingerror=function(e){u=e},o.onflush=function(){u?a(u):s(c)},l.forEach((e=>{if(m){if(Qr(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach((e=>{Qr(e,"LOCAL:")?h=e.slice(6):Qr(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))}));try{f=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(z(t)&&z(i)&&z(n)&&z(r)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=6e4*n,t+=36e5*r,t}(h)/1e3}catch(e){u=e}return}""===e&&(m=!1)}o.parse(e+"\n")})),o.flush()}(null!=(t=i.initSegment)&&t.data?Je(i.initSegment.data,new Uint8Array(n)):n,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,(e=>{this._appendCues(e,i.level),o.trigger(q.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})}),(t=>{const r="Missing initPTS for VTT MPEGTS"===t.message;r?s.push(e):this._fallbackToIMSC1(i,n),X.log(`Failed to parse VTT cue: ${t}`),r&&a>i.cc||o.trigger(q.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:t})}))}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||rs(t,this.initPTS[e.cc],(()=>{i.textCodec=es,this._parseIMSC1(e,t)}),(()=>{i.textCodec="wvtt"}))}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach((e=>$t(i,e)))}else{const n=this.tracks[t];if(!n)return;const r=n.default?"default":"subtitles"+t;i.trigger(q.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===Ot&&this.onFragLoaded(q.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){const{cea608Parser1:i,cea608Parser2:n}=this;if(!this.enabled||!i||!n)return;const{frag:r,samples:s}=t;if(r.type!==Pt||"NONE"!==this.closedCaptionsForLevel(r))for(let e=0;e<s.length;e++){const t=s[e].bytes;if(t){const r=this.extractCea608Data(t);i.addData(s[e].pts,r[0]),n.addData(s[e].pts,r[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:n,type:r}){const{media:s}=this;if(s&&!(s.currentTime<i)){if(!r||"video"===r){const{captionsTracks:e}=this;Object.keys(e).forEach((n=>Ht(e[n],t,i)))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==n){const{textTracks:e}=this;Object.keys(e).forEach((i=>Ht(e[i],t,n)))}}}extractCea608Data(e){const t=[[],[]],i=31&e[0];let n=2;for(let r=0;r<i;r++){const i=e[n++],r=127&e[n++],s=127&e[n++];if((0!==r||0!==s)&&0!=(4&i)){const e=3&i;0!==e&&1!==e||(t[e].push(r),t[e].push(s))}}return t}},audioStreamController:class extends nn{constructor(e,t,i){super(e,t,i,"[audio-stream-controller]",Mt),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.LEVEL_LOADED,this.onLevelLoaded,this),e.on(q.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(q.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(q.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(q.ERROR,this.onError,this),e.on(q.BUFFER_RESET,this.onBufferReset,this),e.on(q.BUFFER_CREATED,this.onBufferCreated,this),e.on(q.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(q.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(q.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(q.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(q.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.LEVEL_LOADED,this.onLevelLoaded,this),e.off(q.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(q.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(q.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(q.ERROR,this.onError,this),e.off(q.BUFFER_RESET,this.onBufferReset,this),e.off(q.BUFFER_CREATED,this.onBufferCreated,this),e.off(q.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(q.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(q.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:i,initPTS:n,timescale:r}){if("main"===i){const e=t.cc;this.initPTS[t.cc]={baseTime:n,timescale:r},this.log(`InitPTS for cc: ${e} found from main: ${n}`),this.videoTrackCC=e,this.state===en&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state=qi);const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=Vi):(this.loadedmetadata=!1,this.state=Wi),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case Vi:this.doTickIdle();break;case Wi:{var e;const{levels:t,trackId:i}=this,n=null==t||null==(e=t[i])?void 0:e.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=en}break}case Yi:{var t;const e=performance.now(),i=this.retryDate;(!i||e>=i||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Vi);break}case en:{const e=this.waitingData;if(e){const{frag:t,part:i,cache:n,complete:r}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Ki;const e={frag:t,part:i,payload:n.flush(),networkDetails:null};this._handleFragmentLoadProgress(e),r&&super._handleFragmentLoadComplete(e)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${t.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const e=this.getLoadPosition(),i=Mi.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole);hi(i.end,this.config.maxFragLookUpTolerance,t)<0&&(this.log(`Waiting fragment cc (${t.cc}) @ ${t.start} cancelled because another fragment at ${i.end} is needed`),this.clearWaitingFragment())}}else this.state=Vi}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Vi)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:i,trackId:n}=this,r=e.config;if(null==t||!t[n])return;if(!i&&(this.startFragRequested||!r.startFragPrefetch))return;const s=t[n],a=s.details;if(!a||a.live&&this.levelLastLoaded!==n||this.waitForCdnTuneIn(a))return void(this.state=Wi);const o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,ne,Mt));const l=this.getFwdBufferInfo(o,Mt);if(null===l)return;const{bufferedTrack:c,switchingTrack:d}=this;if(!d&&this._streamEnded(l,a))return e.trigger(q.BUFFER_EOS,{type:"audio"}),void(this.state=Zi);const u=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Pt),h=l.len,p=this.getMaxBufferLength(null==u?void 0:u.len);if(h>=p&&!d)return;const f=a.fragments[0].start;let m=l.end;if(d&&i){const e=this.getLoadPosition();c&&d.attrs!==c.attrs&&(m=e),a.PTSKnown&&e<f&&(l.end>f||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=f+.05)}let g=this.getNextFragment(m,a),y=!1;if(g&&this.isLoopLoading(g,m)&&(y=!!g.gap,g=this.getNextFragmentLoopLoading(g,a,l,Pt,p)),!g)return void(this.bufferFlushed=!0);const v=u&&g.start>u.end+a.targetduration;if(v||(null==u||!u.len)&&l.len){const e=this.getAppendedFrag(g.start,Pt);if(null===e)return;if(y||(y=!!e.gap||!!v&&0===u.len),v&&!y||y&&l.nextStart&&l.nextStart<e.end)return}this.loadFragment(g,s,m)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map((e=>new Zt(e)))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:n}=this;n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.switchingTrack=t,this.state=Vi):(this.switchingTrack=null,this.bufferedTrack=t,this.state=qi),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(q.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var i;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:n}=this,{details:r,id:s}=t;if(!n)return void this.warn(`Audio tracks were reset while loading level ${s}`);this.log(`Track ${s} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const a=n[s];let o=0;if(r.live||null!=(i=a.details)&&i.live){const e=this.mainDetails;if(r.fragments[0]||(r.deltaUpdateFailed=!0),r.deltaUpdateFailed||!e)return;!a.details&&r.hasProgramDateTime&&e.hasProgramDateTime?(Ui(r,e),o=r.fragments[0].start):o=this.alignPlaylists(r,a.details)}a.details=r,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&r.live||this.setStartPosition(a.details,o),this.state!==Wi||this.waitForCdnTuneIn(r)||(this.state=Vi),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:n,payload:r}=e,{config:s,trackId:a,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const l=o[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(i.start);const d=s.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let u=this.transmuxer;u||(u=this.transmuxer=new or(this.hls,Mt,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[i.cc],p=null==(t=i.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=n?n.index:-1,s=-1!==t,a=new Oi(i.level,i.sn,i.stats.chunkCount,r.byteLength,t,s);u.push(r,p,d,"",i,n,c.totalduration,e,a,h)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:e}=this.waitingData=this.waitingData||{frag:i,part:n,cache:new hr,complete:!1};e.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=en}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:i,part:n}=t;if(i.type===Mt)if(this.fragContextChanged(i))this.warn(`Fragment ${i.sn}${n?" p: "+n.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==i.sn){this.fragPrevious=i;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(q.AUDIO_TRACK_SWITCHED,$({},e)))}this.fragBufferedComplete(i,n)}else if(!this.loadedmetadata&&i.type===Pt){const e=this.videoBuffer||this.media;e&&Mi.getBuffered(e).length&&(this.loadedmetadata=!0)}}onError(e,t){var i;if(t.fatal)this.state=Ji;else switch(t.details){case j.FRAG_GAP:case j.FRAG_PARSING_ERROR:case j.FRAG_DECRYPT_ERROR:case j.FRAG_LOAD_ERROR:case j.FRAG_LOAD_TIMEOUT:case j.KEY_LOAD_ERROR:case j.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Mt,t);break;case j.AUDIO_TRACK_LOAD_ERROR:case j.AUDIO_TRACK_LOAD_TIMEOUT:case j.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Wi||(null==(i=t.context)?void 0:i.type)!==Rt||(this.state=Vi);break;case j.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case j.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushed(e,{type:t}){t===ne&&(this.bufferFlushed=!0,this.state===Zi&&(this.state=Vi))}_handleTransmuxComplete(e){var t;const i="audio",{hls:n}=this,{remuxResult:r,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:c}=a,{details:d}=c,{audio:u,text:h,id3:p,initSegment:f}=r;if(!this.fragContextChanged(o)&&d){if(this.state=Xi,this.switchingTrack&&u&&this.completeAudioSwitch(this.switchingTrack),null!=f&&f.tracks){const e=o.initSegment||o;this._bufferInitSegment(f.tracks,e,s),n.trigger(q.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:i,tracks:f.tracks})}if(u){const{startPTS:e,endPTS:t,startDTS:i,endDTS:n}=u;l&&(l.elementaryStreams.audio={startPTS:e,endPTS:t,startDTS:i,endDTS:n}),o.setElementaryStreamInfo(ne,e,t,i,n),this.bufferFragmentData(u,o,l,s)}if(null!=p&&null!=(t=p.samples)&&t.length){const e=H({id:i,frag:o,details:d},p);n.trigger(q.FRAG_PARSING_METADATA,e)}if(h){const e=H({id:i,frag:o,details:d},h);n.trigger(q.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,i){if(this.state!==Xi)return;e.video&&delete e.video;const n=e.audio;if(!n)return;n.levelCodec=n.codec,n.id="audio",this.log(`Init audio buffer, container:${n.container}, codecs[parsed]=[${n.codec}]`),this.hls.trigger(q.BUFFER_CODECS,e);const r=n.initSegment;if(null!=r&&r.byteLength){const e={type:"audio",frag:t,part:null,chunkMeta:i,parent:t.type,data:r};this.hls.trigger(q.BUFFER_APPENDING,e)}this.tick()}loadFragment(e,t,i){const n=this.fragmentTracker.getState(e);var r;this.fragCurrent=e,this.switchingTrack||n===_i||n===wi?"initSegment"===e.sn?this._loadInitSegment(e,t):null!=(r=t.details)&&r.live&&!this.initPTS[e.cc]?(this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=en):(this.startFragRequested=!0,super.loadFragment(e,t,i)):this.clearTrackerIfNeeded(e)}completeAudioSwitch(e){const{hls:t,media:i,bufferedTrack:n}=this,r=null==n?void 0:n.attrs,s=e.attrs;i&&r&&(r.CHANNELS!==s.CHANNELS||r.NAME!==s.NAME||r.LANGUAGE!==s.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(q.AUDIO_TRACK_SWITCHED,$({},e))}},audioTrackController:class extends mi{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.MANIFEST_PARSED,this.onManifestParsed,this),e.on(q.LEVEL_LOADING,this.onLevelLoading,this),e.on(q.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(q.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(q.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.MANIFEST_PARSED,this.onManifestParsed,this),e.off(q.LEVEL_LOADING,this.onLevelLoading,this),e.off(q.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(q.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(q.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:n,details:r}=t,s=this.tracksInGroup[i];if(!s||s.groupId!==n)return void this.warn(`Track with id:${i} and group:${n} not found in active group ${s.groupId}`);const a=s.details;s.details=t.details,this.log(`audio-track ${i} "${s.name}" lang:${s.lang} group:${n} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(null==t||!t.audioGroupIds)return;const i=t.audioGroupIds[t.urlId];if(this.groupId!==i){this.groupId=i||null;const e=this.tracks.filter((e=>!i||e.groupId===i));this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),this.tracksInGroup=e;const t={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group:${i}`),this.hls.trigger(q.AUDIO_TRACKS_UPDATED,t),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&t.context.type===Rt&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn("Invalid id passed to audio-track controller");this.clearTimer();const i=this.currentTrack;t[this.trackId];const n=t[e],{groupId:r,name:s}=n;if(this.log(`Switching to audio-track ${e} "${s}" lang:${n.lang} group:${r}`),this.trackId=e,this.currentTrack=n,this.selectDefaultTrack=!1,this.hls.trigger(q.AUDIO_TRACK_SWITCHING,$({},n)),n.details&&!n.details.live)return;const a=this.switchParams(n.url,null==i?void 0:i.details);this.loadPlaylist(a)}selectInitialTrack(){const e=this.tracksInGroup,t=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(-1!==t)this.setAudioTrack(t);else{const t=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(q.ERROR,{type:V.MEDIA_ERROR,details:j.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const n=t[i];if(!this.selectDefaultTrack||n.default){if(!e||void 0!==e.attrs["STABLE-RENDITION-ID"]&&e.attrs["STABLE-RENDITION-ID"]===n.attrs["STABLE-RENDITION-ID"])return n.id;if(e.name===n.name&&e.lang===n.lang)return n.id}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const i=t.id,n=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}this.log(`loading audio-track playlist ${i} "${t.name}" lang:${t.lang} group:${n}`),this.clearTimer(),this.hls.trigger(q.AUDIO_TRACK_LOADING,{url:r,id:i,groupId:n,deliveryDirectives:e||null})}}},emeController:fs,cmcdController:vs,contentSteeringController:class{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=X.log.bind(X,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(q.MANIFEST_LOADING,this.onManifestLoading,this),e.on(q.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(q.MANIFEST_PARSED,this.onManifestParsed,this),e.on(q.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(q.MANIFEST_LOADING,this.onManifestLoading,this),e.off(q.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(q.MANIFEST_PARSED,this.onManifestParsed,this),e.off(q.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const e=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,e)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;null!==i&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if(2===(null==i?void 0:i.action)&&1===i.flags){let e=this.pathwayPriority;const t=this.pathwayId;this.penalizedPathways[t]||(this.penalizedPathways[t]=performance.now()),!e&&this.levels&&(e=this.levels.reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])),e&&e.length>1&&(this.updatePathwayPriority(e),i.resolved=this.pathwayId!==t)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length?(this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t):e}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this.pathwayPriority=e;const i=this.penalizedPathways,n=performance.now();Object.keys(i).forEach((e=>{n-i[e]>3e5&&delete i[e]}));for(let n=0;n<e.length;n++){const r=e[n];if(i[r])continue;if(r===this.pathwayId)return;const s=this.hls.nextLoadLevel,a=this.hls.levels[s];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,this.hls.trigger(q.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[s];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=s);break}}}clonePathways(e){const t=this.levels;if(!t)return;const i={},n={};e.forEach((e=>{const{ID:r,"BASE-ID":s,"URI-REPLACEMENT":a}=e;if(t.some((e=>e.pathwayId===r)))return;const o=this.getLevelsForPathway(s).map((e=>{const t=H({},e);t.details=void 0,t.url=_s(e.uri,e.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a);const s=new J(e.attrs);s["PATHWAY-ID"]=r;const o=s.AUDIO&&`${s.AUDIO}_clone_${r}`,l=s.SUBTITLES&&`${s.SUBTITLES}_clone_${r}`;o&&(i[s.AUDIO]=o,s.AUDIO=o),l&&(n[s.SUBTITLES]=l,s.SUBTITLES=l),t.attrs=s;const c=new Zt(t);return vi(c,"audio",o),vi(c,"text",l),c}));t.push(...o),bs(this.audioTracks,i,a,r),bs(this.subtitleTracks,n,a,r)}))}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;let n;this.loader&&this.loader.destroy(),this.loader=new i(t);try{n=new self.URL(e)}catch(t){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==n.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);n.searchParams.set("_HLS_pathway",this.pathwayId),n.searchParams.set("_HLS_throughput",""+e)}const r={responseType:"json",url:n.href},s=t.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,i,r)=>{this.log(`Loaded steering manifest: "${n}"`);const s=e.data;if(1!==s.VERSION)return void this.log(`Steering VERSION ${s.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=s.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=s;if(a)try{this.uri=new self.URL(a,n).href}catch(e){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||i.url),o&&this.clonePathways(o),l&&this.updatePathwayPriority(l)},onError:(e,t,i,n)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let r=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,r);else{const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(r=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`)}},onTimeout:(e,t,i)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${n}`),this.loader.load(r,o,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout((()=>{this.loadSteeringManifest(e)}),t)}}});function Is(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(Is):Object.keys(e).reduce(((t,i)=>(t[i]=Is(e[i]),t)),{}):e}class Rs{static get version(){return"1.4.10"}static isSupported(){return function(){const e=ht();if(!e)return!1;const t=rn(),i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n}()}static get Events(){return q}static get ErrorTypes(){return V}static get ErrorDetails(){return j}static get DefaultConfig(){return Rs.defaultConfig?Rs.defaultConfig:As}static set DefaultConfig(e){Rs.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new sr,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,function(e,t){if(self.console&&!0===e||"object"==typeof e){!function(e,...t){t.forEach((function(t){W[t]=e[t]?e[t].bind(e):function(e){const t=self.console[e];return t?t.bind(self.console,`[${e}] >`):K}(t)}))}(e,"debug","log","info","warn","error");try{W.log('Debug logs enabled for "Hls instance" in hls.js version 1.4.10')}catch(e){W=Y}}else W=Y}(e.debug||!1);const t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=Is(e),n=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const r=`${"level"===e?"playlist":e}LoadPolicy`,s=void 0===t[r],a=[];n.forEach((n=>{const o=`${e}Loading${n}`,l=t[o];if(void 0!==l&&s){a.push(o);const e=i[r].default;switch(t[r]={default:e},n){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),a.length&&X.warn(`hls.js config: "${a.join('", "')}" setting(s) are deprecated, use "${r}": ${JSON.stringify(t[r])}`)})),$($({},i),t)}(Rs.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,t.progressive&&function(e){const t=e.loader;t!==xs&&t!==ws?(X.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=xs,e.progressive=!0,e.enableSoftwareAES=!0,X.log("[config]: Progressive streaming enabled, using FetchLoader"))}(t);const{abrController:i,bufferController:n,capLevelController:r,errorController:s,fpsController:a}=t,o=new s(this),l=this.abrController=new i(this),c=this.bufferController=new n(this),d=this.capLevelController=new r(this),u=new a(this),h=new Bt(this),p=new Yt(this),f=t.contentSteeringController,m=f?new f(this):null,g=this.levelController=new yi(this,m),y=new xi(this),v=new Di(this.config),b=this.streamController=new cr(this,y,v);d.setStreamController(b),u.setStreamController(b);const _=[h,g,b];m&&_.splice(1,0,m),this.networkControllers=_;const T=[l,c,d,u,p,y];this.audioTrackController=this.createController(t.audioTrackController,_);const w=t.audioStreamController;w&&_.push(new w(this,y,v)),this.subtitleTrackController=this.createController(t.subtitleTrackController,_);const E=t.subtitleStreamController;E&&_.push(new E(this,y,v)),this.createController(t.timelineController,T),v.emeController=this.emeController=this.createController(t.emeController,T),this.cmcdController=this.createController(t.cmcdController,T),this.latencyController=this.createController(Wt,T),this.coreComponents=T,_.push(o);const x=o.onErrorOut;"function"==typeof x&&this.on(q.ERROR,x,o)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,n){this._emitter.off(e,t,i,n)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){X.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(q.ERROR,{type:V.OTHER_ERROR,details:j.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){X.log("destroy"),this.trigger(q.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){X.log("attachMedia"),this._media=e,this.trigger(q.MEDIA_ATTACHING,{media:e})}detachMedia(){X.log("detachMedia"),this.trigger(q.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,i=this.url,n=this.url=B.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});X.log(`loadSource:${n}`),t&&i&&(i!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(q.MANIFEST_LOADING,{url:e})}startLoad(e=-1){X.log(`startLoad(${e})`),this.networkControllers.forEach((t=>{t.startLoad(e)}))}stopLoad(){X.log("stopLoad"),this.networkControllers.forEach((e=>{e.stopLoad()}))}swapAudioCodec(){X.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){X.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e,t=0){this.levelController.removeLevel(e,t)}get levels(){return this.levelController.levels||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){X.log(`set currentLevel:${e}`),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){X.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){X.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){X.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){return this.levelController.startLevel}set startLevel(e){X.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(X.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Xt.indexOf(e)>-1&&(this._maxHdcpLevel=e)}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let n=0;n<i;n++)if(e[n].maxBitrate>=t)return n;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let n;if(n=-1===t&&e&&e.length?e.length-1:t,i)for(let t=n;t--;){const n=e[t].attrs["HDCP-LEVEL"];if(n&&n<=i)return t}return n}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Rs.defaultConfig=void 0;var Ds=i(443),Ps=i.n(Ds);i(251);const Ms=Object.prototype.toString;function Os(e){switch(Ms.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return zs(e,Error)}}function Fs(e,t){return Ms.call(e)===`[object ${t}]`}function Ns(e){return Fs(e,"ErrorEvent")}function Bs(e){return Fs(e,"DOMError")}function Us(e){return Fs(e,"String")}function $s(e){return Fs(e,"Object")}function Gs(e){return"undefined"!=typeof Event&&zs(e,Event)}function Hs(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function zs(e,t){try{return e instanceof t}catch(e){return!1}}var qs=i(235);const Vs=(0,qs.Rf)();function js(e,t={}){try{let i=e;const n=5,r=[];let s=0,a=0;const o=" > ",l=o.length;let c;const d=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||80;for(;i&&s++<n&&(c=Ks(i,d),!("html"===c||s>1&&a+r.length*l+c.length>=u));)r.push(c),a+=c.length,i=i.parentNode;return r.reverse().join(o)}catch(e){return"<unknown>"}}function Ks(e,t){const i=e,n=[];let r,s,a,o,l;if(!i||!i.tagName)return"";n.push(i.tagName.toLowerCase());const c=t&&t.length?t.filter((e=>i.getAttribute(e))).map((e=>[e,i.getAttribute(e)])):null;if(c&&c.length)c.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else if(i.id&&n.push(`#${i.id}`),r=i.className,r&&Us(r))for(s=r.split(/\s+/),l=0;l<s.length;l++)n.push(`.${s[l]}`);const d=["aria-label","type","name","title","alt"];for(l=0;l<d.length;l++)a=d[l],o=i.getAttribute(a),o&&n.push(`[${a}="${o}"]`);return n.join("")}function Ys(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Ws(e,t){if(!Array.isArray(e))return"";const i=[];for(let t=0;t<e.length;t++){const n=e[t];try{i.push(String(n))}catch(e){i.push("[value cannot be serialized]")}}return i.join(t)}function Xs(e,t=[],i=!1){return t.some((t=>function(e,t,i=!1){return!!Us(e)&&(Fs(t,"RegExp")?t.test(e):!!Us(t)&&(i?e===t:e.includes(t)))}(e,t,i)))}function Qs(e,t,i){if(!(t in e))return;const n=e[t],r=i(n);if("function"==typeof r)try{Js(r,n)}catch(e){}e[t]=r}function Zs(e,t,i){Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0})}function Js(e,t){const i=t.prototype||{};e.prototype=t.prototype=i,Zs(e,"__sentry_original__",t)}function ea(e){return e.__sentry_original__}function ta(e){if(Os(e))return{message:e.message,name:e.name,stack:e.stack,...na(e)};if(Gs(e)){const t={type:e.type,target:ia(e.target),currentTarget:ia(e.currentTarget),...na(e)};return"undefined"!=typeof CustomEvent&&zs(e,CustomEvent)&&(t.detail=e.detail),t}return e}function ia(e){try{return"undefined"!=typeof Element&&zs(e,Element)?js(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function na(e){if("object"==typeof e&&null!==e){const t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}return{}}function ra(e){return sa(e,new Map)}function sa(e,t){if($s(e)){const i=t.get(e);if(void 0!==i)return i;const n={};t.set(e,n);for(const i of Object.keys(e))void 0!==e[i]&&(n[i]=sa(e[i],t));return n}if(Array.isArray(e)){const i=t.get(e);if(void 0!==i)return i;const n=[];return t.set(e,n),e.forEach((e=>{n.push(sa(e,t))})),n}return e}let aa;class oa{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=oa.id}setupOnce(){aa=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=ea(this)||this;return aa.apply(t,e)}}catch(e){}}}oa.__initStatic();const la=["debug","info","warn","error","log","assert","trace"];function ca(e){if(!("console"in qs.n2))return e();const t=qs.n2.console,i={};la.forEach((e=>{const n=t[e]&&t[e].__sentry_original__;e in t&&n&&(i[e]=t[e],t[e]=n)}));try{return e()}finally{Object.keys(i).forEach((e=>{t[e]=i[e]}))}}function da(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?la.forEach((i=>{t[i]=(...t)=>{e&&ca((()=>{qs.n2.console[i](`Sentry Logger [${i}]:`,...t)}))}})):la.forEach((e=>{t[e]=()=>{}})),t}let ua;function ha(){const e=qs.n2,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const i=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&i())>>e/4).toString(16)))}function pa(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function fa(e){const{message:t,event_id:i}=e;if(t)return t;const n=pa(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||i||"<unknown>":i||"<unknown>"}function ma(e,t,i){const n=e.exception=e.exception||{},r=n.values=n.values||[],s=r[0]=r[0]||{};s.value||(s.value=t||""),s.type||(s.type=i||"Error")}function ga(e,t){const i=pa(e);if(!i)return;const n=i.mechanism;if(i.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};i.mechanism.data=e}}ua="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,qs.YO)("logger",da):da();const ya=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],va=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class ba{static __initStatic(){this.id="InboundFilters"}constructor(e={}){this.name=ba.id,this._options=e}setupOnce(e,t){const i=e=>{const i=t();if(i){const t=i.getIntegration(ba);if(t){const n=i.getClient(),r=n?n.getOptions():{},s=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ya],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:va],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,r);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${fa(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){if(e.message)return[e.message];if(e.exception){const{values:t}=e.exception;try{const{type:e="",value:i=""}=t&&t[t.length-1]||{};return[`${i}`,`${e}: ${i}`]}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.error(`Cannot extract message for event ${fa(e)}`),[]}}return[]}(e).some((e=>Xs(e,t)))}(e,t.ignoreErrors)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${fa(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const i=e.transaction;return!!i&&Xs(i,t)}(e,t.ignoreTransactions)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${fa(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const i=_a(e);return!!i&&Xs(i,t)}(e,t.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${fa(e)}.\nUrl: ${_a(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const i=_a(e);return!i||Xs(i,t)}(e,t.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${fa(e)}.\nUrl: ${_a(e)}`),!0)}(e,s)?null:e}}return e};i.id=this.name,e(i)}}function _a(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const i=e[t];if(i&&"<anonymous>"!==i.filename&&"[native code]"!==i.filename)return i.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.error(`Cannot extract url for event ${fa(e)}`),null}}ba.__initStatic();var Ta=i(170);const wa="production";var Ea;!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(Ea||(Ea={}));class xa{constructor(e){xa.prototype.__init.call(this),xa.prototype.__init2.call(this),xa.prototype.__init3.call(this),xa.prototype.__init4.call(this),this._state=Ea.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new xa(((i,n)=>{this._handlers.push([!1,t=>{if(e)try{i(e(t))}catch(e){n(e)}else i(t)},e=>{if(t)try{i(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new xa(((t,i)=>{let n,r;return this.then((t=>{r=!1,n=t,e&&e()}),(t=>{r=!0,n=t,e&&e()})).then((()=>{r?i(n):t(n)}))}))}__init(){this._resolve=e=>{this._setResult(Ea.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ea.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Ea.PENDING&&(Hs(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Ea.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Ea.RESOLVED&&e[1](this._value),this._state===Ea.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function ka(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,Ta.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ha()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class Sa{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Ca()}static clone(e){const t=new Sa;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata},t._propagationContext={...e._propagationContext}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&ka(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof Sa?t:this}return e instanceof Sa?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):$s(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Ca(),this}addBreadcrumb(e,t){const i="number"==typeof t?t:100;if(i<=0)return this;const n={timestamp:(0,Ta.yW)(),...e};return this._breadcrumbs=[...this._breadcrumbs,n].slice(-i),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction;if(t){e.sdkProcessingMetadata={dynamicSamplingContext:t.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const i=t.name;i&&(e.tags={transaction:i,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...La(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(e,t,i,n=0){return new xa(((r,s)=>{const a=e[n];if(null===t||"function"!=typeof a)r(t);else{const o=a({...t},i);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.id&&null===o&&ua.log(`Event processor "${a.id}" dropped event`),Hs(o)?o.then((t=>this._notifyEventProcessors(e,t,i,n+1).then(r))).then(null,s):this._notifyEventProcessors(e,o,i,n+1).then(r).then(null,s)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){var t;e.fingerprint=e.fingerprint?(t=e.fingerprint,Array.isArray(t)?t:[t]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function La(){return(0,qs.YO)("globalEventProcessors",(()=>[]))}function Ca(){return{traceId:ha(),spanId:ha().substring(16),sampled:!1}}const Aa=100;class Ia{constructor(e,t=new Sa,i=4){this._version=i,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Sa.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const i=this._lastEventId=t&&t.event_id?t.event_id:ha(),n=new Error("Sentry syntheticException");return this._withClient(((r,s)=>{r.captureException(e,{originalException:e,syntheticException:n,...t,event_id:i},s)})),i}captureMessage(e,t,i){const n=this._lastEventId=i&&i.event_id?i.event_id:ha(),r=new Error(e);return this._withClient(((s,a)=>{s.captureMessage(e,t,{originalException:e,syntheticException:r,...i,event_id:n},a)})),n}captureEvent(e,t){const i=t&&t.event_id?t.event_id:ha();return e.type||(this._lastEventId=i),this._withClient(((n,r)=>{n.captureEvent(e,{...t,event_id:i},r)})),i}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:i,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:s=Aa}=n.getOptions&&n.getOptions()||{};if(s<=0)return;const a={timestamp:(0,Ta.yW)(),...e},o=r?ca((()=>r(a,t))):a;null!==o&&(n.emit&&n.emit("beforeAddBreadcrumb",o,t),i.addBreadcrumb(o,s))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:i}=this.getStackTop();i&&e(t)}run(e){const t=Da(this);try{e(this)}finally{Da(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const i=this._callExtensionMethod("startTransaction",e,t);return"undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||i||console.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"),i}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let i={};"ok"===e.status&&(i={status:"exited"}),ka(e,i)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:i}=this.getStackTop(),{release:n,environment:r=wa}=i&&i.getOptions()||{},{userAgent:s}=qs.n2.navigator||{},a=function(e){const t=(0,Ta.ph)(),i={sid:ha(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return ra({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(i)};return e&&ka(i,e),i}({release:n,environment:r,user:t.getUser(),...s&&{userAgent:s},...e}),o=t.getSession&&t.getSession();return o&&"ok"===o.status&&ka(o,{status:"exited"}),this.endSession(),t.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),i=e.getSession();i&&t&&t.captureSession&&t.captureSession(i)}_withClient(e){const{scope:t,client:i}=this.getStackTop();i&&e(i,t)}_callExtensionMethod(e,...t){const i=Ra().__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Ra(){return qs.n2.__SENTRY__=qs.n2.__SENTRY__||{extensions:{},hub:void 0},qs.n2}function Da(e){const t=Ra(),i=Ma(t);return Oa(t,e),i}function Pa(){const e=Ra();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Ra()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!Ma(e).isOlderThan(4)||Oa(e,new Ia),Ma(e);var t}(e)}function Ma(e){return(0,qs.YO)("hub",(()=>new Ia),e)}function Oa(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}function Fa(e,t){return Pa().captureException(e,{captureContext:t})}function Na(e){Pa().withScope(e)}const Ba=qs.n2;let Ua=0;function $a(){return Ua>0}function Ga(){Ua++,setTimeout((()=>{Ua--}))}function Ha(e,t={},i){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(ea(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{i&&"function"==typeof i&&i.apply(this,arguments);const r=n.map((e=>Ha(e,t)));return e.apply(this,r)}catch(e){throw Ga(),Na((i=>{i.addEventProcessor((e=>(t.mechanism&&(ma(e,void 0,void 0),ga(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Fa(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}Js(n,e),Zs(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}const za="<anonymous>";function qa(e){try{return e&&"function"==typeof e&&e.name||za}catch(e){return za}}const Va=(0,qs.Rf)();function ja(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const Ka=(0,qs.Rf)(),Ya=(0,qs.Rf)(),Wa={},Xa={};function Qa(e){if(!Xa[e])switch(Xa[e]=!0,e){case"console":"console"in Ya&&la.forEach((function(e){e in Ya.console&&Qs(Ya.console,e,(function(t){return function(...i){Ja("console",{args:i,level:e}),t&&t.apply(Ya.console,i)}}))}));break;case"dom":!function(){if(!("document"in Ya))return;const e=Ja.bind(null,"dom"),t=so(e,!0);Ya.document.addEventListener("click",t,!1),Ya.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const i=Ya[t]&&Ya[t].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(Qs(i,"addEventListener",(function(t){return function(i,n,r){if("click"===i||"keypress"==i)try{const n=this,s=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},a=s[i]=s[i]||{refCount:0};if(!a.handler){const n=so(e);a.handler=n,t.call(this,i,n,r)}a.refCount++}catch(e){}return t.call(this,i,n,r)}})),Qs(i,"removeEventListener",(function(e){return function(t,i,n){if("click"===t||"keypress"==t)try{const i=this,r=i.__sentry_instrumentation_handlers__||{},s=r[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,n),s.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete i.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,i,n)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in Ya))return;const e=XMLHttpRequest.prototype;Qs(e,"open",(function(e){return function(...t){const i=t[1],n=this.__sentry_xhr_v2__={method:Us(t[0])?t[0].toUpperCase():t[0],url:t[1],request_headers:{}};Us(i)&&"POST"===n.method&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const r=()=>{const e=this.__sentry_xhr_v2__;if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Ja("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?Qs(this,"onreadystatechange",(function(e){return function(...t){return r(),e.apply(this,t)}})):this.addEventListener("readystatechange",r),Qs(this,"setRequestHeader",(function(e){return function(...t){const[i,n]=t,r=this.__sentry_xhr_v2__;return r&&(r.request_headers[i.toLowerCase()]=n),e.apply(this,t)}})),e.apply(this,t)}})),Qs(e,"send",(function(e){return function(...t){const i=this.__sentry_xhr_v2__;return i&&void 0!==t[0]&&(i.body=t[0]),Ja("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":(function(){if(!function(){if(!("fetch"in Va))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(ja(Va.fetch))return!0;let e=!1;const t=Va.document;if(t&&"function"==typeof t.createElement)try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),i.contentWindow&&i.contentWindow.fetch&&(e=ja(i.contentWindow.fetch)),t.head.removeChild(i)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&Qs(Ya,"fetch",(function(e){return function(...t){const{method:i,url:n}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,i]=e;return{url:to(t),method:eo(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:to(t),method:eo(t,"method")?String(t.method).toUpperCase():"GET"}}(t),r={args:t,fetchData:{method:i,url:n},startTimestamp:Date.now()};return Ja("fetch",{...r}),e.apply(Ya,t).then((e=>(Ja("fetch",{...r,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Ja("fetch",{...r,endTimestamp:Date.now(),error:e}),e}))}}));break;case"history":!function(){if(!function(){const e=Ka.chrome,t=e&&e.app&&e.app.runtime,i="history"in Ka&&!!Ka.history.pushState&&!!Ka.history.replaceState;return!t&&i}())return;const e=Ya.onpopstate;function t(e){return function(...t){const i=t.length>2?t[2]:void 0;if(i){const e=io,t=String(i);io=t,Ja("history",{from:e,to:t})}return e.apply(this,t)}}Ya.onpopstate=function(...t){const i=Ya.location.href,n=io;if(io=i,Ja("history",{from:n,to:i}),e)try{return e.apply(this,t)}catch(e){}},Qs(Ya.history,"pushState",t),Qs(Ya.history,"replaceState",t)}();break;case"error":ao=Ya.onerror,Ya.onerror=function(e,t,i,n,r){return Ja("error",{column:n,error:r,line:i,msg:e,url:t}),!(!ao||ao.__SENTRY_LOADER__)&&ao.apply(this,arguments)},Ya.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":oo=Ya.onunhandledrejection,Ya.onunhandledrejection=function(e){return Ja("unhandledrejection",e),!(oo&&!oo.__SENTRY_LOADER__)||oo.apply(this,arguments)},Ya.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn("unknown instrumentation type:",e))}}function Za(e,t){Wa[e]=Wa[e]||[],Wa[e].push(t),Qa(e)}function Ja(e,t){if(e&&Wa[e])for(const i of Wa[e]||[])try{i(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${qa(i)}\nError:`,t)}}function eo(e,t){return!!e&&"object"==typeof e&&!!e[t]}function to(e){return"string"==typeof e?e:e?eo(e,"url")?e.url:e.toString?e.toString():"":""}let io,no,ro;function so(e,t=!1){return i=>{if(!i||ro===i)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(i))return;const n="keypress"===i.type?"input":i.type;(void 0===no||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(ro,i))&&(e({event:i,name:n,global:t}),ro=i),clearTimeout(no),no=Ya.setTimeout((()=>{no=void 0}),1e3)}}let ao=null,oo=null;function lo(e,t=100,i=1/0){try{return uo("",e,t,i)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function co(e,t=3,i=102400){const n=lo(e,t);return r=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>i?co(e,t-1,i):n;var r}function uo(e,t,n=1/0,r=1/0,s=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(i){if(e)return!!t.has(i)||(t.add(i),!1);for(let e=0;e<t.length;e++)if(t[e]===i)return!0;return t.push(i),!1},function(i){if(e)t.delete(i);else for(let e=0;e<t.length;e++)if(t[e]===i){t.splice(e,1);break}}]}()){const[a,o]=s;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(l=t)||l==l))return t;var l;const c=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==i.g&&t===i.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(function(e){return $s(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${qa(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!c.startsWith("[object "))return c;if(t.__sentry_skip_normalization__)return t;const d="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===d)return c.replace("object ","");if(a(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return uo("",u.toJSON(),d-1,r,s)}catch(e){}const h=Array.isArray(t)?[]:{};let p=0;const f=ta(t);for(const e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(p>=r){h[e]="[MaxProperties ~]";break}const t=f[e];h[e]=uo(e,t,d-1,r,s),p++}return o(t),h}function ho(e,t){const i=fo(e,t),n={type:t&&t.name,value:go(t)};return i.length&&(n.stacktrace={frames:i}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function po(e,t){return{exception:{values:[ho(e,t)]}}}function fo(e,t){const i=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(mo.test(e.message))return 1}return 0}(t);try{return e(i,n)}catch(e){}return[]}const mo=/Minified React error #\d+;/i;function go(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function yo(e,t,i,n,r){let s;if(Ns(t)&&t.error)return po(e,t.error);if(Bs(t)||Fs(t,"DOMException")){const r=t;if("stack"in t)s=po(e,t);else{const t=r.name||(Bs(r)?"DOMError":"DOMException"),a=r.message?`${t}: ${r.message}`:t;s=vo(e,a,i,n),ma(s,a)}return"code"in r&&(s.tags={...s.tags,"DOMException.code":`${r.code}`}),s}return Os(t)?po(e,t):$s(t)||Gs(t)?(s=function(e,t,i,n){const r=Pa().getClient(),s=r&&r.getOptions().normalizeDepth,a={exception:{values:[{type:Gs(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:bo(t,{isUnhandledRejection:n})}]},extra:{__serialized__:co(t,s)}};if(i){const t=fo(e,i);t.length&&(a.exception.values[0].stacktrace={frames:t})}return a}(e,t,i,r),ga(s,{synthetic:!0}),s):(s=vo(e,t,i,n),ma(s,`${t}`,void 0),ga(s,{synthetic:!0}),s)}function vo(e,t,i,n){const r={message:t};if(n&&i){const n=fo(e,i);n.length&&(r.exception={values:[{value:t,stacktrace:{frames:n}}]})}return r}function bo(e,{isUnhandledRejection:t}){const i=function(e,t=40){const i=Object.keys(ta(e));if(i.sort(),!i.length)return"[object has no keys]";if(i[0].length>=t)return Ys(i[0],t);for(let e=i.length;e>0;e--){const n=i.slice(0,e).join(", ");if(!(n.length>t))return e===i.length?n:Ys(n,t)}return""}(e),n=t?"promise rejection":"exception";return Ns(e)?`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``:Gs(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${n}`:`Object captured as ${n} with keys: ${i}`}class _o{static __initStatic(){this.id="GlobalHandlers"}constructor(e){this.name=_o.id,this._options={onerror:!0,onunhandledrejection:!0,...e},this._installFunc={onerror:To,onunhandledrejection:wo}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const i in e){const n=this._installFunc[i];n&&e[i]&&(t=i,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.log(`Global Handler attached: ${t}`),n(),this._installFunc[i]=void 0)}var t}}function To(){Za("error",(e=>{const[t,i,n]=ko();if(!t.getIntegration(_o))return;const{msg:r,url:s,line:a,column:o,error:l}=e;if($a()||l&&l.__sentry_own_request__)return;const c=void 0===l&&Us(r)?function(e,t,i,n){let r=Ns(e)?e.message:e,s="Error";const a=r.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);return a&&(s=a[1],r=a[2]),Eo({exception:{values:[{type:s,value:r}]}},t,i,n)}(r,s,a,o):Eo(yo(i,l||r,void 0,n,!1),s,a,o);c.level="error",xo(t,l,c,"onerror")}))}function wo(){Za("unhandledrejection",(e=>{const[t,i,n]=ko();if(!t.getIntegration(_o))return;let r=e;try{"reason"in e?r=e.reason:"detail"in e&&"reason"in e.detail&&(r=e.detail.reason)}catch(e){}if($a()||r&&r.__sentry_own_request__)return!0;const s=null===(a=r)||"object"!=typeof a&&"function"!=typeof a?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(r)}`}]}}:yo(i,r,void 0,n,!0);var a;s.level="error",xo(t,r,s,"onunhandledrejection")}))}function Eo(e,t,i,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],a=s[0]=s[0]||{},o=a.stacktrace=a.stacktrace||{},l=o.frames=o.frames||[],c=isNaN(parseInt(n,10))?void 0:n,d=isNaN(parseInt(i,10))?void 0:i,u=Us(t)&&t.length>0?t:function(){try{return Vs.document.location.href}catch(e){return""}}();return 0===l.length&&l.push({colno:c,filename:u,function:"?",in_app:!0,lineno:d}),e}function xo(e,t,i,n){ga(i,{handled:!1,type:n}),e.captureEvent(i,{originalException:t})}function ko(){const e=Pa(),t=e.getClient(),i=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,i.stackParser,i.attachStacktrace]}_o.__initStatic();const So=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Lo{static __initStatic(){this.id="TryCatch"}constructor(e){this.name=Lo.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&Qs(Ba,"setTimeout",Co),this._options.setInterval&&Qs(Ba,"setInterval",Co),this._options.requestAnimationFrame&&Qs(Ba,"requestAnimationFrame",Ao),this._options.XMLHttpRequest&&"XMLHttpRequest"in Ba&&Qs(XMLHttpRequest.prototype,"send",Io);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:So).forEach(Ro)}}function Co(e){return function(...t){const i=t[0];return t[0]=Ha(i,{mechanism:{data:{function:qa(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function Ao(e){return function(t){return e.apply(this,[Ha(t,{mechanism:{data:{function:"requestAnimationFrame",handler:qa(e)},handled:!0,type:"instrument"}})])}}function Io(e){return function(...t){const i=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in i&&"function"==typeof i[e]&&Qs(i,e,(function(t){const i={mechanism:{data:{function:e,handler:qa(t)},handled:!0,type:"instrument"}},n=ea(t);return n&&(i.mechanism.data.handler=qa(n)),Ha(t,i)}))})),e.apply(this,t)}}function Ro(e){const t=Ba,i=t[e]&&t[e].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(Qs(i,"addEventListener",(function(t){return function(i,n,r){try{"function"==typeof n.handleEvent&&(n.handleEvent=Ha(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:qa(n),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.apply(this,[i,Ha(n,{mechanism:{data:{function:"addEventListener",handler:qa(n),target:e},handled:!0,type:"instrument"}}),r])}})),Qs(i,"removeEventListener",(function(e){return function(t,i,n){const r=i;try{const i=r&&r.__sentry_wrapped__;i&&e.call(this,t,i,n)}catch(e){}return e.call(this,t,r,n)}})))}Lo.__initStatic();const Do=["fatal","error","warning","log","info","debug"];function Po(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const i=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:i,hash:n,relative:t[5]+i+n}}class Mo{static __initStatic(){this.id="Breadcrumbs"}constructor(e){this.name=Mo.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){var e;this.options.console&&Za("console",Oo),this.options.dom&&Za("dom",(e=this.options.dom,function(t){let i,n="object"==typeof e?e.serializeAttribute:void 0,r="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;r&&r>1024&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${r} was configured. Sentry will use 1024 instead.`),r=1024),"string"==typeof n&&(n=[n]);try{const e=t.event;i=function(e){return!!e&&!!e.target}(e)?js(e.target,{keyAttrs:n,maxStringLength:r}):js(e,{keyAttrs:n,maxStringLength:r})}catch(e){i="<unknown>"}0!==i.length&&Pa().addBreadcrumb({category:`ui.${t.name}`,message:i},{event:t.event,name:t.name,global:t.global})})),this.options.xhr&&Za("xhr",Fo),this.options.fetch&&Za("fetch",No),this.options.history&&Za("history",Bo)}addSentryBreadcrumb(e){this.options.sentry&&Pa().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:fa(e)},{event:e})}}function Oo(e){for(let t=0;t<e.args.length;t++)if("ref=Ref<"===e.args[t]){e.args[t+1]="viewRef";break}const t={category:"console",data:{arguments:e.args,logger:"console"},level:(i=e.level,"warn"===i?"warning":Do.includes(i)?i:"log"),message:Ws(e.args," ")};var i;if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${Ws(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}Pa().addBreadcrumb(t,{input:e.args,level:e.level})}function Fo(e){const{startTimestamp:t,endTimestamp:i}=e,n=e.xhr.__sentry_xhr_v2__;if(!t||!i||!n)return;const{method:r,url:s,status_code:a,body:o}=n,l={method:r,url:s,status_code:a},c={xhr:e.xhr,input:o,startTimestamp:t,endTimestamp:i};Pa().addBreadcrumb({category:"xhr",data:l,type:"http"},c)}function No(e){const{startTimestamp:t,endTimestamp:i}=e;if(i&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){const n=e.fetchData,r={data:e.error,input:e.args,startTimestamp:t,endTimestamp:i};Pa().addBreadcrumb({category:"fetch",data:n,level:"error",type:"http"},r)}else{const n={...e.fetchData,status_code:e.response&&e.response.status},r={input:e.args,response:e.response,startTimestamp:t,endTimestamp:i};Pa().addBreadcrumb({category:"fetch",data:n,type:"http"},r)}}function Bo(e){let t=e.from,i=e.to;const n=Po(Ba.location.href);let r=Po(t);const s=Po(i);r.path||(r=n),n.protocol===s.protocol&&n.host===s.host&&(i=s.relative),n.protocol===r.protocol&&n.host===r.host&&(t=r.relative),Pa().addBreadcrumb({category:"navigation",data:{from:t,to:i}})}function Uo(e,t,i=250,n,r,s,a){if(!(s.exception&&s.exception.values&&a&&zs(a.originalException,Error)))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var l,c;o&&(s.exception.values=(l=$o(e,t,r,a.originalException,n,s.exception.values,o,0),c=i,l.map((e=>(e.value&&(e.value=Ys(e.value,c)),e)))))}function $o(e,t,i,n,r,s,a,o){if(s.length>=i+1)return s;let l=[...s];if(zs(n[r],Error)){Go(a,o);const s=e(t,n[r]),c=l.length;Ho(s,r,c,o),l=$o(e,t,i,n[r],r,[s,...l],s,c)}return Array.isArray(n.errors)&&n.errors.forEach(((n,s)=>{if(zs(n,Error)){Go(a,o);const c=e(t,n),d=l.length;Ho(c,`errors[${s}]`,d,o),l=$o(e,t,i,n,r,[c,...l],c,d)}})),l}function Go(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function Ho(e,t,i,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:i,parent_id:n}}Mo.__initStatic();class zo{static __initStatic(){this.id="LinkedErrors"}constructor(e={}){this.name=zo.id,this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(e,t){e(((e,i)=>{const n=t(),r=n.getClient(),s=n.getIntegration(zo);if(!r||!s)return e;const a=r.getOptions();return Uo(ho,a.stackParser,a.maxValueLength,s._key,s._limit,e,i),e}))}}zo.__initStatic();class qo{static __initStatic(){this.id="HttpContext"}constructor(){this.name=qo.id}setupOnce(){var e;e=e=>{if(Pa().getIntegration(qo)){if(!Ba.navigator&&!Ba.location&&!Ba.document)return e;const t=e.request&&e.request.url||Ba.location&&Ba.location.href,{referrer:i}=Ba.document||{},{userAgent:n}=Ba.navigator||{},r={...e.request&&e.request.headers,...i&&{Referer:i},...n&&{"User-Agent":n}},s={...e.request,...t&&{url:t},headers:r};return{...e,request:s}}return e},La().push(e)}}qo.__initStatic();class Vo{static __initStatic(){this.id="Dedupe"}constructor(){this.name=Vo.id}setupOnce(e,t){const i=e=>{if(e.type)return e;const i=t().getIntegration(Vo);if(i){try{if(function(e,t){return!!t&&(!!function(e,t){const i=e.message,n=t.message;return!(!i&&!n)&&(!(i&&!n||!i&&n)&&(i===n&&(!!Ko(e,t)&&!!jo(e,t))))}(e,t)||!!function(e,t){const i=Yo(t),n=Yo(e);return!(!i||!n)&&(i.type===n.type&&i.value===n.value&&(!!Ko(e,t)&&!!jo(e,t)))}(e,t))}(e,i._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&ua.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return i._previousEvent=e}return i._previousEvent=e}return e};i.id=this.name,e(i)}}function jo(e,t){let i=Wo(e),n=Wo(t);if(!i&&!n)return!0;if(i&&!n||!i&&n)return!1;if(n.length!==i.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],r=i[e];if(t.filename!==r.filename||t.lineno!==r.lineno||t.colno!==r.colno||t.function!==r.function)return!1}return!0}function Ko(e,t){let i=e.fingerprint,n=t.fingerprint;if(!i&&!n)return!0;if(i&&!n||!i&&n)return!1;try{return!(i.join("")!==n.join(""))}catch(e){return!1}}function Yo(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Wo(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Vo.__initStatic();let Xo={};function Qo(e){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(e)}function Zo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s=[],a=!0,o=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(s.push(n.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}return s}}(e,t)||al(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function el(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(i),!0).forEach((function(t){tl(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Jo(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function tl(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function il(){il=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,i){return e[t]=i}}function l(e,t,i,n){var r=t&&t.prototype instanceof u?t:u,s=Object.create(r.prototype),a=new E(n||[]);return s._invoke=function(e,t,i){var n="suspendedStart";return function(r,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw s;return{value:void 0,done:!0}}for(i.method=r,i.arg=s;;){var a=i.delegate;if(a){var o=_(a,i);if(o){if(o===d)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=c(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}(e,i,a),s}function c(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function u(){}function h(){}function p(){}var f={};o(f,r,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(x([])));g&&g!==t&&i.call(g,r)&&(f=g);var y=p.prototype=u.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(r,s,a,o){var l=c(e[r],e,s);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==Qo(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,o)}),(function(e){n("throw",e,a,o)})):t.resolve(u).then((function(e){d.value=e,a(d)}),(function(e){return n("throw",e,a,o)}))}o(l.arg)}var r;this._invoke=function(e,i){function s(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(s,s):s()}}function _(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=c(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=p,o(y,"constructor",p),o(p,"constructor",h),h.displayName=o(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(b.prototype),o(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,i,n,r,s){void 0===s&&(s=Promise);var a=new b(l(t,i,n,r),s);return e.isGeneratorFunction(i)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(y),o(y,a,"Generator"),o(y,r,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return a.type="throw",a.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),w(i),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;w(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:x(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},e}function nl(e,t,i,n,r,s,a){try{var o=e[s](a),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,r)}function rl(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var s=e.apply(t,i);function a(e){nl(s,n,r,a,o,"next",e)}function o(e){nl(s,n,r,a,o,"throw",e)}a(void 0)}))}}function sl(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=al(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw s}}}}function al(e,t){if(e){if("string"==typeof e)return ol(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ol(e,t):void 0}}function ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}Ba.Sentry&&Ba.Sentry.Integrations&&Ba.Sentry.Integrations,window.pandaLoad=window.pandaLoad||{};try{n.default.init({dsn:"https://2352194d4d5041f997f5c3204c13c862@o1279024.ingest.sentry.io/6479348",release:"player@1260",integrations:[new n.default.BrowserTracing],tracesSampleRate:0,beforeSend:function(e,t){if(t.originalException){var i=t.originalException.message;return i&&["this.enter is not a function","Not 2xx response","Failed to fetch","The play() request was interrupted by a call to pause(). https://goo.gl/LdLk22","The play() request was interrupted by a new load request. https://goo.gl/LdLk22","play() failed because the user didn't interact with the document first","The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.","play() can only be initiated by a user gesture.","Load failed","play() can only be initiated by a user gesture.","play() failed because the user didn't interact with the document first. https://goo.gl/xX8pDD","AbortError: The operation was aborted.","NetworkError when attempting to fetch resource.","fetch(...).then(...).then(...).catch(...).finally is not a function","Failed to execute 'exitFullscreen' on 'Document': Document not active","Permissions check failed","fullscreen error","The play method is not allowed by the user agent or the platform","The play() request was interrupted because video-only","The operation was aborted","AbortError:","Failed to execute 'requestPictureInPicture","Cannot read properties of null (reading 'trigger')","Fullscreen request denied","Not in fullscreen mode","not granted","The play() request was interrupted",'Blocked a frame with origin "null" from accessing a cross-origin frame'].find((function(e){return-1!==i.indexOf(e)}))?null:e}}})}catch(e){}var ll,cl;function dl(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function ul(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=Number(e.charCodeAt(i)).toString(16);t.push(r)}return t.join("")}void 0!==document.hidden?(ll="hidden",cl="visibilitychange"):void 0!==document.msHidden?(ll="msHidden",cl="msvisibilitychange"):void 0!==document.webkitHidden&&(ll="webkitHidden",cl="webkitvisibilitychange");var hl=new URL(location.href),pl="https://api-v2.pandavideo.com.br",fl="https://config.tv.pandavideo.com.br",ml="https://thumbs.tv.pandavideo.com.br",gl=Rs&&Rs.isSupported(),yl=[".cdn1.pandavideo.com",".b-cdn.net"],vl=["fragLoadError","fragLoadTimeOut","fragParsingError"],bl=!1,_l=!1,Tl=0,wl=0,El=!1,xl=hl.searchParams.get("v"),kl=!1,Sl=hl.searchParams.get("l"),Ll=hl.searchParams.get("j"),Cl=!1,Al="true"===hl.searchParams.get("isLive");xl&&-1!==xl.indexOf(ul("live"))&&(Al=!0),xl&&-1!==xl.indexOf(ul("comp"))&&(Cl=xl,xl=null);var Il=!1,Rl=!1,Dl=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Pl="true"===hl.searchParams.get("isDashboard"),Ml=hl.searchParams.get("title"),Ol=hl.searchParams.get("refreshConfig"),Fl=!document[ll],Nl="false"!==hl.searchParams.get("preload"),Bl=!0;"false"===hl.searchParams.get("preloadUserAgentChecker")&&(Bl=!1),Bl&&["Kwai_Pro"].some((function(e){return-1!==navigator.userAgent.indexOf(e)}))&&(Nl=!1),Fl||(Nl=!1),/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);var Ul,$l=/(iPhone|iPod|iPad)/i.test(navigator.platform),Gl=navigator.brave||!1,Hl=!1,zl=hl.searchParams.get("watermark"),ql=hl.searchParams.get("drm_group_id"),Vl=!1,jl="NOT_LIVE",Kl=!1,Yl=(hl.searchParams.get("liveBadge"),[]),Wl=document.querySelector(":root"),Xl=!1,Ql=!1,Zl=!1,Jl=!1,ec="https://hit-video.pandavideo.com:6443",tc=dl(),ic=[],nc=function(){var e=location.host,t="pt";try{e.match(/.com$/)&&(t="en")}catch(e){}return t}(),rc=i(500),sc={},ac=sl(rc.keys());try{for(ac.s();!(Ul=ac.n()).done;){var oc=Ul.value,lc=oc.match(/([A-Za-z0-9-_]+)\./i);if(lc&&lc.length>1){var cc=Zo(lc,2)[1];sc[cc]=rc(oc)}}}catch(e){ac.e(e)}finally{ac.f()}var dc,uc={fullscreen:{enabled:!0,fallback:!0,iosNative:!0},hideControls:!0,captions:{active:!0,language:"",update:!0},controls:["play-large","play","progress","current-time","duration","mute","volume","settings","pip","airplay","fullscreen"],keyboard:{focused:!0,global:!1},i18n:sc[nc],iconUrl:"./icons/plyr.svg",thumbnail:{enabled:!1,pic_num:0,width:300,height:168,col:6,row:6,offsetX:0,offsetY:0,urls:[]}},hc=(hl.host,(dc=new RegExp("^player-(.+).tv.pandavideo.com")).test(hl.host)?dc.exec(hl.host)[1]:null);hc&&(Sl=hc);var pc,fc,mc="";try{pc=localStorage.getItem("playerUser")}catch(e){}if(pc)mc=pc;else{mc="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));try{localStorage.setItem("playerUser",mc)}catch(e){}}function gc(){try{pd(document.getElementById("copy-paste"),"disabled"),document.getElementById("report-close-dialog-btn").onclick=bc,document.getElementById("radio-section").addEventListener("click",(function(e){e.target&&e.target.matches("input[type='radio']")&&("report-other"===document.querySelector('input[name="issue-reported"]:checked').value?(pd(document.getElementById("other-input-wrapper"),"disabled"),document.getElementById("other-input").focus()):hd(document.getElementById("other-input-wrapper"),"disabled"))})),document.getElementById("report-second-step-btn").onclick=rl(il().mark((function e(){var t,i,r,s;return il().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,hd(document.getElementById("report-first-step"),"disabled"),pd(document.getElementById("report-second-step"),"disabled"),t=document.querySelector('input[name="issue-reported"]:checked').value,i=Tc(t),r="player-"+t,e.next=8,yc();case 8:s=e.sent,i.latencies=s,n.default.withScope((function(e){e.setTag("section","".concat(r)),e.setLevel("error"),n.default.addBreadcrumb({category:"user/player info",message:"".concat(JSON.stringify(i)),level:"info"}),n.default.captureException(new Error("USER PLAYER REPORT"))})),_c(),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})))}catch(e){_c()}}function yc(){return vc.apply(this,arguments)}function vc(){return vc=rl(il().mark((function e(){var t,i,n,r,s;return il().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],i=["BR","RJ"],n=il().mark((function e(){var i,n;return il().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zone=s[r],i=(new Date).valueOf(),n="https://edgezone-"+zone.toLowerCase()+".bunnyinfra.net/500b.jpg",e.next=5,fetch(n).then(function(){var e=rl(il().mark((function e(r){return il().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(new Date).valueOf(),e.next=3,fetch(n).then(function(){var e=rl(il().mark((function e(n){var r,s;return il().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).valueOf(),s=r-i,e.next=4,fetch("https://video-91.bunnycdn.com/.metrics/track-performance?zone="+zone+"&latency="+s);case 4:t.push({zone:zone.toLowerCase(),latency:s});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}));case 5:case"end":return e.stop()}}),e)})),r=0,s=i;case 4:if(!(r<s.length)){e.next=9;break}return e.delegateYield(n(),"t0",6);case 6:r++,e.next=4;break;case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function bc(){try{hd(document.getElementById("copy-paste"),"disabled"),pd(document.getElementById("report-first-step"),"disabled"),hd(document.getElementById("report-second-step"),"disabled"),hd(document.getElementById("report-third-step"),"disabled"),hd(document.getElementById("other-input-wrapper"),"disabled"),document.getElementById("other-input-wrapper").value="",document.getElementById("report-not-loading").checked=!0}catch(e){console.log("e",e)}}function _c(){try{document.getElementById("report-ok-btn").onclick=bc,hd(document.getElementById("report-second-step"),"disabled"),pd(document.getElementById("report-third-step"),"disabled")}catch(e){}}function Tc(e){var t={timestamp:(new Date).toISOString()};if(t.option=e,"report-other"===e)try{var i=document.getElementById("other-input").value;t.reasoning=i}catch(e){}try{t.autoplay=window.player.autoplay}catch(e){}try{t.videoId=xl}catch(e){}try{t.libraryId=Sl}catch(e){}try{t.currentTime=window.player.currentTime}catch(e){}try{t.duration=window.player.duration}catch(e){}try{t.volume=window.player.volume}catch(e){}try{t.config=JSON.stringify(window.player_configs)}catch(e){}try{t.playerUser=localStorage.getItem("playerUser")}catch(e){}return t}function wc(e){e&&window.player_configs.troubleshootDialog&&(e.addEventListener("contextmenu",Ec,!1),e.addEventListener("click",xc,!1))}function Ec(e){if(!e.target.closest("#report-problem-dialog")){e.preventDefault();var t=document.getElementById("context-menu");t&&(pd(t,"disabled"),window.innerWidth-e.clientX<175?t.style.left=e.clientX-175+"px":t.style.left=e.clientX+"px",window.innerHeight-e.clientY<75?t.style.top=e.clientY-75+"px":t.style.top=e.clientY+"px")}}function xc(){hd(document.getElementById("context-menu"),"disabled")}if(function(){var e="https://b-"+Sl+".tv.pandavideo.com.br/"+xl+"/playlist.m3u8";zl&&(_l=!0,e+=".beta?watermark="+zl),Al&&(e+=".live",Pl&&(e+="?live_without_cdn=1"));var t='src="'+e+'"';(Ll||Cl)&&(t="");var i="true"===hl.searchParams.get("autoplay"),n='\n        <div class="container" id="video-container">\n            '.concat(Dl?"":'<video controls crossorigin preload="auto" '.concat(i?"autoplay muted":"",' playsinline ><source type="application/x-mpegURL" ').concat(t,"></video>"),'\n            \x3c!-- Loading indicator --\x3e\n            <div id="error-indicator" class="disabled">\n            </div>\n            <div class="loading-icon">\n                <svg x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">\n                    <path fill="#9e9e9e"\n                        d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">\n                        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s"\n                            from="0 50 50" to="360 50 50" repeatCount="indefinite" />\n                    </path>\n                </svg>\n            </div>\n            \n            \x3c!-- Live --\x3e\n            <div class="live-offline-badge disabled">\n\n                <img src="icons/panda-icon.svg" alt="">\n                <p id="live-subtitle">AGUARDANDO LIVE STREAM</p>\n                <p id="live-title"></p>\n            </div>\n            <div class="live-thumb disabled">\n                <img src="#" alt="Live Offline">\n            </div>\n        </div>\n    ');if(document.write(n),document.addEventListener("DOMContentLoaded",(function(){Ll||Cl||(window.pandatag?window.pandatag("videoHtmlLoaded",!0):window.pandaLoad.videoHtmlLoaded=!0)})),Dl){var r=(new DOMParser).parseFromString('<video controls crossorigin preload="auto" '.concat(i?"autoplay muted":"",' playsinline ><source type="application/x-mpegURL" ').concat(t,"></video>"),"text/html").body.firstChild,s=document.getElementById("video-container");s.insertBefore(r,s.getElementsByTagName("div")[0])}!function(){!function(){try{var e=document.getElementById("context-menu");e&&e.remove()}catch(e){}}();try{if(!dl()){var e=document.createElement("div");e.id="context-menu",hd(e,"disabled"),e.innerHTML='<ul> <li> <a href="'.concat(sc[nc].aboutPandaLink,'" target="_blank" id="about-panda">').concat(sc[nc].aboutPanda,'</a> </li><li> <button id="report-problem">').concat(sc[nc].reportModalTitle,"</button> </li></ul>"),document.getElementById("video-container").insertAdjacentElement("beforeend",e),document.getElementById("report-problem").onclick=function(){window.postMessage({type:"pause"},"*"),gc(),xc()}}}catch(e){}}()}(),!function(){try{return window.self!==window.top}catch(e){return!0}}()){var kc=document.getElementById("video-container");kc&&(hd(kc,"in-page-container"),document.getElementById("body").style.backgroundColor="#000")}function Sc(e,t){var i=document.getElementsByClassName("plyr__controls")[0];if(player_configs.controls.includes("fullscreen")&&t){var n=i.childNodes;i.insertBefore(e,n[n.length-1])}else i.appendChild(e)}function Lc(){var e=document.querySelector(".small-muted-icon");e&&hd(e,"disabled")}function Cc(){var e=document.querySelector(".panda-muted-indicator-item");if(e){if(Jl=!0,player_configs.mutedIndicatorClickRestart){var t=0;try{t=parseInt(localStorage.getItem("panda_video:"+xl))}catch(e){}isNaN(t)&&(t=0),window.postMessage({type:"currentTime",parameter:t},"*")}window.postMessage({type:"increaseVolume",parameter:1},"*"),window.postMessage({type:"play"},"*"),e.style.display="none";try{cd({mutedIndicator:!0})}catch(e){}var i=document.getElementById("wrapper-progress");i&&pd(i,"disabled"),player_configs.playOpensFullscreenNative?window.player.fullscreen.enter():player_configs.playOpensFullscreen&&window.parent.postMessage({message:"panda_open_window_fullscreen",video:xl},"*")}}function Ac(){var e=window.player_configs.mutedIndicatorTextTop,t=window.player_configs.mutedIndicatorTextBottom;if(0!==document.getElementsByClassName("plyr--full-ui").length){var i=document.getElementsByClassName("plyr--full-ui")[0],n=document.createElement("button"),r='<svg class="impact" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 200" xml:space="preserve"><style>.fg-color{fill:var(--muted-indicator-text)}.bg-color{fill:var(--muted-indicator-background)}.line,.volume,.wave{transform:scale(1);transform-box:fill-box;transform-origin:center;}</style><filter id="panda-muted-indicator-impact-wrapper-highlight"><feDropShadow dx="0" dy="0" stdDeviation="1" flood-color="var(--muted-indicator-text)"/></filter><g class="adjustable fg" style="--darkreader-inline-fill:#ffffff"><path class="volume fg-color" d="M169.8 85.5h-23c-1.9 0-3.1 1.2-3.1 3.1v26.5c0 1.9 1.2 3.1 3.1 3.1h23l19.3 18.4V68.7c.3 0-19.3 16.8-19.3 16.8z"/><path class="wave fg-color" d="M205.9 127.8c-1.2-1.2-.9-3.4.3-5 9.6-12.1 9.6-29.3 0-41.1-1.2-1.6-1.2-3.7-.3-5 1.2-1.2 3.7-.9 5 .9 11.5 14.3 11.5 34.9 0 48.9-1.4 2.6-3.8 2.6-5 1.3z"/><path class="wave fg-color" d="M223.9 138.4c-1.2-1.2-.9-3.4.3-5 14.6-17.1 14.6-42.3 0-59.4-1.2-1.6-1.6-3.7-.3-5 1.2-1.2 3.4-.9 5 .9 16.5 19.3 16.5 48.2 0 67.5-1.5 2.2-3.8 2.6-5 1z"/><path class="wave fg-color" d="M241.6 149.3c-1.2-1.2-.9-3.4.3-5 21.2-24 21.2-60.1 0-84-1.2-1.2-1.6-3.1-.3-4.4 1.2-1.2 3.4-.9 5 .6 23.3 26.1 23.3 66 0 92.1-1.2 1.9-3.7 2.2-5 .7z"/><path class="line bg-color" d="M274 141.2c-.3-1.6-1.2-3.1-2.8-4L135.6 50.6c-.9-.6-2.2-.9-3.4-.9-2.2 0-4 .9-5.3 2.8-.9 1.6-1.2 3.1-.9 4.7.3 1.6 1.2 3.1 2.8 4l135.4 86.2c.9.6 2.2.9 3.4.9 2.2 0 4-.9 5.3-2.8 1.1-.9 1.4-2.7 1.1-4.3z"/><path class="line fg-color" d="M267.8 145.9c-.6 0-1.2-.3-1.6-.6L130.9 58.4c-1.6-.9-1.9-2.8-.9-4 .9-1.6 2.8-1.9 4-.9l135.4 86.2c1.6.9 1.9 2.8.9 4.4-.7.8-1.5 1.8-2.5 1.8z"/></g></svg>';r+='<svg class="blink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 200" xml:space="preserve"><style>.fg-color{fill:var(--muted-indicator-text)}.bg-color{fill:var(--muted-indicator-background)}.line,.volume,.wave{transform:scale(1);transform-box:fill-box;transform-origin:center;}</style><g class="adjustable fg" style="--darkreader-inline-fill:#ffffff"><path class="volume fg-color" d="M189.1 68.7c.2 0-5.4 4.8-10.6 9.3l10.6 6.8V68.7z"/><path class="volume fg-color" d="M146.8 85.5c-1.9 0-3.1 1.2-3.1 3.1v26.5c0 1.9 1.2 3.1 3.1 3.1h23l19.3 18.4v-37L167 85.5h-20.2z"/><path class="wave blink_impact_1 fg-color" d="M206.2 122.8c-1.2 1.6-1.5 3.8-.3 5 1.2 1.3 3.6 1.3 5-1.3 2.4-2.9 4.3-6.1 5.7-9.4l-5.3-3.4c-1.2 3.2-2.9 6.3-5.1 9.1z"/><path class="wave blink_impact_1 fg-color" d="M210.9 77.6c-1.3-1.8-3.8-2.1-5-.9-.9 1.3-.9 3.4.3 5 4.4 5.4 6.7 11.9 7.1 18.5l6.1 3.9c.5-9.3-2.3-18.8-8.5-26.5z"/><path class="wave blink_impact_2 fg-color" d="M224.2 133.4c-1.2 1.6-1.5 3.8-.3 5 1.2 1.6 3.5 1.2 5-1 2.3-2.7 4.3-5.6 6-8.7l-5.2-3.3c-1.5 2.8-3.4 5.5-5.5 8z"/><path class="wave blink_impact_2 fg-color" d="M228.9 69.9c-1.6-1.8-3.8-2.1-5-.9-1.3 1.3-.9 3.4.3 5 9.6 11.2 12.9 25.9 9.9 39.5l5.5 3.5c4.2-16.1.6-33.9-10.7-47.1z"/><path class="wave blink_impact_3 fg-color" d="M241.9 144.3c-1.2 1.6-1.5 3.8-.3 5 1.3 1.5 3.8 1.2 5-.7 2.4-2.6 4.5-5.4 6.4-8.4l-5.4-3.4c-1.7 2.6-3.6 5.1-5.7 7.5z"/><path class="wave blink_impact_3 fg-color" d="M246.6 56.5c-1.6-1.5-3.8-1.8-5-.6-1.3 1.3-.9 3.2.3 4.4 16.2 18.3 20 43.8 11.4 65.5l5.5 3.5c9.9-24 5.9-52.6-12.2-72.8z"/><path class="line fg-color" d="m269.4 139.7-11.9-7.6-5.4-3.5-13.4-8.5-5.4-3.4-14.1-9-5.8-3.7-24.2-15.4-13.2-8.4-42-26.7c-1.2-1-3.1-.7-4 .9-1 1.2-.7 3.1.9 4l40.3 25.9 17.9 11.5 23.2 14.9 5.4 3.4 13.4 8.6 5.2 3.4 12.9 8.3 5.4 3.5 11.7 7.5c.4.3 1 .6 1.6.6 1 0 1.8-1 2.5-1.8.9-1.7.6-3.6-1-4.5z"/></g></svg>',(e.length>18||t.length>18)&&hd(n,"panda-muted-indicator-impact-wrapper-big-text"),r='<span class="panda-muted-indicator-impact-wrapper-canvas"></span>'+r,e&&(r='<span class="text top">'+e+"</span>"+r),t&&(r=r+'<span class="text bottom">'+t+"</span>"),n.innerHTML=r,hd(n,"panda-muted-indicator-impact-wrapper"),hd(n,"panda-muted-indicator-item"),hd(n,"animate"),hd(n,player_configs.mutedIndicatorSize);var s=player_configs.controls.filter((function(e){return"play-large"!==e}));$l&&s.length&&player.on("controlsshown",(function(){Jl||Cc()})),n.onclick=function(){Cc()};var a=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');a&&hd(a,"disabled");var o=function(e){return 100*e/(1e3*d)+"%"},l=function(e,t){return"IMPACT_"+e+"{0%{opacity:0;transform:scale(4);}"+o(850*t/1e3)+"{opacity:1;}"+o(t)+",100%{opacity:1;transform:scale(1);}}"},c=window.player_configs.mutedIndicatorLoop,d=window.player_configs.mutedIndicatorLoopDuration,u=document.createElement("style"),h="        @keyframes BLINK_IMPACT{0%,100%{opacity:0;}33%,66%{opacity:1;}}        @keyframes HIGHLIGHT{0%,100%{filter:url(#panda-muted-indicator-impact-wrapper-highlight);}}        @keyframes OPACITY_0{0%,100%{opacity:0;}}        @keyframes OPACITY_1{0%,100%{opacity:1;}}        @keyframes SVG_WRAPPER{0%{width:100%;max-width:100%;}100%{width:var(--size-width);max-width:400px;}}        @keyframes IMPACT{0%{opacity:0;transform:scale(3);}85%{opacity:1;}100%{transform:scale(1);}}        @keyframes IMPACT_CENTER{0%{opacity:0;transform:translate(-50%, -50%) scale(3);}85%{opacity:1;}100%{transform:translate(-50%, -50%) scale(1);}}        button.panda-muted-indicator-impact-wrapper.animate svg.impact {            animation: SVG_WRAPPER 750ms cubic-bezier(.76,.05,.86,.06), OPACITY_0 10s linear infinite 850ms;        }        button.panda-muted-indicator-impact-wrapper.animate .text.bottom {            animation: IMPACT 262ms cubic-bezier(.76,.05,.86,.06);        }        button.panda-muted-indicator-impact-wrapper.animate svg.impact .line.fg-color {            animation: HIGHLIGHT 262ms cubic-bezier(.76,.05,.86,.06), IMPACT 262ms cubic-bezier(.76,.05,.86,.06) 131ms;        }        button.panda-muted-indicator-impact-wrapper.animate svg.impact .line.bg-color {            animation: IMPACT 314ms cubic-bezier(.76,.05,.86,.06) 236ms;            opacity: 0;        }        button.panda-muted-indicator-impact-wrapper.animate svg.impact .wave {            animation: IMPACT 314ms cubic-bezier(.76,.05,.86,.06) 340ms;            opacity: 0;        }        button.panda-muted-indicator-impact-wrapper.animate svg.impact .volume {            animation: IMPACT 288ms cubic-bezier(.76,.05,.86,.06) 471ms, OPACITY_0 471ms cubic-bezier(.76,.05,.86,.06) 0s;        }        button.panda-muted-indicator-impact-wrapper.animate .panda-muted-indicator-impact-wrapper-canvas {            animation: IMPACT_CENTER 471ms cubic-bezier(.76,.05,.86,.06) 602ms, OPACITY_0 602ms cubic-bezier(.76,.05,.86,.06) 0s;        }        button.panda-muted-indicator-impact-wrapper.animate .text.top {            animation: IMPACT 250ms linear 550ms, OPACITY_0 550ms cubic-bezier(.76,.05,.86,.06) 0s;        }        button.panda-muted-indicator-impact-wrapper.animate svg.blink .line,        button.panda-muted-indicator-impact-wrapper.animate svg.blink .volume {            animation: OPACITY_0 850ms linear 0s;        }        button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_1 {            animation: BLINK_IMPACT 2s infinite 950ms, OPACITY_0 850ms linear 0s;            opacity: 0;        }        button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_2 {            animation: BLINK_IMPACT 2s infinite 1250ms, OPACITY_0 850ms linear 0s;            opacity: 0;        }        button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_3 {            animation: BLINK_IMPACT 2s infinite 1550ms, OPACITY_0 850ms linear 0s;            opacity: 0;        }    ";c&&(h="            @keyframes BLINK_IMPACT{0%,100%{opacity:0;}33%,66%{opacity:1;}}            @keyframes HIGHLIGHT{0%{filter:url(#panda-muted-indicator-impact-wrapper-highlight);}"+o(315)+",100%{filter:initial;}}            @keyframes OPACITY_0{"+o(850)+","+o(9150)+"{opacity:0;}}            @keyframes OPACITY_1{"+o(850)+","+o(9150)+"{opacity:1;}}            @keyframes SVG_WRAPPER{0%{width:100%;}"+o(470)+",100%{width:var(--size-width);}}            @keyframes "+l("P2",262)+"            @keyframes "+l("LINE_FG",262)+"            @keyframes "+l("LINE_BG",314)+"            @keyframes "+l("BLINK",314)+"            @keyframes "+l("VOLUME",288)+"            @keyframes IMPACT_CANVAS{0%{opacity:0;transform:translate(-50%,-50%) scale(4);}"+o(850*471/1e3)+"{opacity:1;}"+o(471)+",100%{opacity:1;transform:translate(-50%,-50%) scale(1);}}            @keyframes "+l("P1",250)+"                        button.panda-muted-indicator-impact-wrapper.animate svg.impact {                animation: SVG_WRAPPER "+d+"s cubic-bezier(.76, .05, .86, .06) infinite, OPACITY_0 "+d+"s linear infinite 850ms;            }            button.panda-muted-indicator-impact-wrapper.animate .text.bottom {                animation: IMPACT_P2 "+d+"s cubic-bezier(.76,.05,.86,.06) infinite;            }            button.panda-muted-indicator-impact-wrapper.animate svg.impact .line.fg-color {                animation: HIGHLIGHT "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 131ms, IMPACT_LINE_FG "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 131ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.impact .line.bg-color {                animation: IMPACT_LINE_BG "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 236ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.impact .wave {                animation: IMPACT_BLINK "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 340ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.impact .volume {                animation: IMPACT_VOLUME "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 471ms, OPACITY_0 "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 0s;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate .panda-muted-indicator-impact-wrapper-canvas {                animation: IMPACT_CANVAS "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 602ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate .text.top {                animation: IMPACT_P1 "+d+"s linear infinite 550ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.blink .line,            button.panda-muted-indicator-impact-wrapper.animate svg.blink .volume {                animation: OPACITY_1 "+d+"s linear infinite 425ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_1 {                animation: BLINK_IMPACT 2s linear infinite 950ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_2 {                animation: BLINK_IMPACT 2s linear infinite 1250ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_3 {                animation: BLINK_IMPACT 2s linear infinite 1550ms;                opacity: 0;            }        "),u.innerHTML=h,document.getElementsByTagName("head")[0].appendChild(u),i.appendChild(n),Jl=!1}}function Ic(){var e=window.player_configs.mutedIndicatorTextTop,t=window.player_configs.mutedIndicatorTextBottom;if(0!==document.getElementsByClassName("plyr--full-ui").length){var i=document.getElementsByClassName("plyr--full-ui")[0],n=document.createElement("button"),r='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="7.999 9.062 46.75 32.563" enable-background="new 7.999 9.062 46.75 32.563" xml:space="preserve"> <style>@keyframes BLINK{0%{opacity: 0;}33%{opacity: 1;}66%{opacity: 1;}100%{opacity: 0;}}.blink_1{animation: BLINK 2s infinite; opacity: 0;}.blink_2{animation: BLINK 2s infinite .3s; opacity: 0;}.blink_3{animation: BLINK 2s infinite .6s; opacity: 0;}</style><style class="darkreader darkreader--sync" media="screen"></style> <g class="adjustable fg" style="fill: rgb(255, 255, 255); --darkreader-inline-fill:#ffffff;" data-darkreader-inline-fill=""> <path d="M53.249,39.616c-0.186,0-0.371-0.051-0.537-0.157l-43.5-27.75c-0.466-0.297-0.603-0.916-0.306-1.381c0.298-0.466,0.917-0.601,1.381-0.306l43.5,27.75c0.467,0.297,0.604,0.916,0.307,1.381C53.901,39.453,53.579,39.616,53.249,39.616z"></path> <path class="blink_3" d="M48.896,33.467l1.699,1.085c3.497-7.791,2.073-17.271-4.313-23.659c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414C50.581,18.019,51.913,26.463,48.896,33.467z"></path> <path class="blink_3" d="M46.926,36.956c-0.612,0.863-1.286,1.695-2.059,2.469c-0.392,0.391-0.392,1.023,0,1.414c0.194,0.195,0.45,0.293,0.707,0.293c0.256,0,0.512-0.098,0.706-0.293c0.878-0.878,1.642-1.824,2.333-2.807L46.926,36.956z"></path> <path class="blink_2" d="M42.543,29.415l1.777,1.135c1.545-5.315,0.229-11.293-3.953-15.476c-0.392-0.391-1.023-0.391-1.414,0c-0.392,0.391-0.392,1.023,0,1.414C42.454,19.987,43.639,24.925,42.543,29.415z"></path> <path class="blink_2" d="M41,33.174c-0.563,0.94-1.235,1.837-2.047,2.646c-0.391,0.392-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.916-0.914,1.676-1.924,2.317-2.984L41,33.174z"></path> <path class="blink_1" d="M35.771,25.094l2.003,1.277c0.012-0.203,0.029-0.404,0.029-0.609c0-3.079-1.2-5.974-3.381-8.153c-0.391-0.391-1.022-0.391-1.414,0c-0.391,0.391-0.391,1.023,0,1.414C34.652,20.666,35.613,22.802,35.771,25.094z"></path> <path class="blink_1" d="M35.084,29.401c-0.474,1.145-1.172,2.197-2.076,3.1c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.707-0.293c1.008-1.006,1.795-2.17,2.361-3.43L35.084,29.401z"></path> <polygon points="28.124,20.215 28.124,14.991 24.635,17.99 "></polygon> <path d="M20.921,20.366h-6.423c-0.553,0-1,0.508-1,1.135v8.229c0,0.627,0.447,1.135,1,1.135h7.375l6.25,5.875V24.96L20.921,20.366z"></path> </g> </svg>';(e.length>18||t.length>18)&&hd(n,"panda-muted-indicator-big-text"),r=e?"<span>"+e+"</span>"+r:"<span> </span>"+r,t?r=r+"<span>"+t+"</span>":r+="<span> </span>",n.innerHTML=r,hd(n,"panda-muted-indicator"),hd(n,"panda-muted-indicator-item"),hd(n,player_configs.mutedIndicatorSize);var s=player_configs.controls.filter((function(e){return"play-large"!==e}));$l&&s.length&&player.on("controlsshown",(function(){Jl||Cc()})),n.onclick=function(){Cc()};var a=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');a&&hd(a,"disabled"),i.appendChild(n),Jl=!1}}function Rc(){var e=document.getElementById("custom_muted_indicator_iframe");e&&e.remove(),player_configs.customMutedIndicatorData.deleted&&(player_configs.mutedIndicatorAnimation="default",Dc());var t=document.getElementsByClassName("plyr--full-ui")[0],i=document.createElement("iframe");i.id="custom_muted_indicator_iframe",hd(i,"panda-muted-indicator-custom"),hd(i,"panda-muted-indicator-item"),i.onload=function(){wc(i.contentWindow.document.body);var e=document.getElementById("custom_muted_indicator_iframe"),t=/<script>(.|\n)*?<\/script>/gm;if(player_configs.customMutedIndicatorData.script){var n=player_configs.customMutedIndicatorData.script.match(t),r=player_configs.customMutedIndicatorData.script.replace(t,"");if(n&&n.length){var s=n[0].replace("<script>","").replace("<\/script>",""),a=document.createElement("script");a.type="text/javascript",a.innerHTML=s,e.contentWindow.document.body.innerHTML="".concat(r),e.contentWindow.document.body.appendChild(a)}else e.contentWindow.document.body.innerHTML="".concat(r);var o=document.createElement("script");o.type="text/javascript",o.innerHTML="document.getElementsByTagName('body')[0].onclick = function(){\n            window.parent.postMessage({\n                type: 'muted_indicator_play',\n            }, '*')\n        }",e.contentWindow.document.body.appendChild(o),e.contentWindow.document.body.style="padding:0;margin:0;overflow:hidden;"}};var n=player_configs.controls.filter((function(e){return"play-large"!==e}));$l&&n.length&&player.on("controlsshown",(function(){Jl||Cc()})),i.onclick=function(){Cc()};var r=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');r&&hd(r,"disabled"),t.appendChild(i),Jl=!1}function Dc(){if(""!==player_configs.mutedIndicatorBackgroundColor)Wl.style.setProperty("--muted-indicator-background",player_configs.mutedIndicatorBackgroundColor);else{var e=(t=player_configs.primaryColor.replace("#","").replace("%23","").substring(0,6).match(/.{1,2}/g),[parseInt(t[0],16),parseInt(t[1],16),parseInt(t[2],16)]);e.push(player_configs.mutedIndicatorOpacity),Wl.style.setProperty("--muted-indicator-background","rgba(".concat(e.join(","),")"))}var t;""!==player_configs.mutedIndicatorTextColor?Wl.style.setProperty("--muted-indicator-text",player_configs.mutedIndicatorTextColor):Wl.style.setProperty("--muted-indicator-text",player_configs.controlsColor),Wl.style.setProperty("--muted-indicator-border-size",player_configs.mutedIndicatorBorderSize+"px"),{default:Ic,impact:Ac,custom:Rc}[window.player_configs.mutedIndicatorAnimation]()}function Pc(){var e;Ll?(e=!1,fetch(pl+"/sharelock?j="+Ll,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(t){t&&t.status?(xl=t.video_external_id,e=!0):(xl="cd676325-3f2d-4ad5-b95c-c2a683d7b0cc",Sl="vz-ded14ebd-85a")})).catch((function(e){xl="cd676325-3f2d-4ad5-b95c-c2a683d7b0cc",Sl="vz-ded14ebd-85a"})).finally((function(){document.querySelector("video > source").src="https://b-".concat(Sl,".tv.pandavideo.com.br/").concat(xl,"/playlist.m3u8").concat(e?"?sharelock="+Ll+"version"+Date.now():""),window.pandatag("videoHtmlLoaded",!0),$c()}))):Cl?fetch("".concat(fl,"/").concat(Sl,"/comparison/").concat(Cl,".json"),{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){if("COMPLETED"===e.status)xl=e.winner_video_id;else{var t=e.videos,i=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/(Math.pow(2,32)-1)*t.length);xl=t[i]}})).catch((function(e){xl="cd676325-3f2d-4ad5-b95c-c2a683d7b0cc",Sl="vz-ded14ebd-85a"})).finally((function(){document.querySelector("video > source").src="https://b-"+Sl+".tv.pandavideo.com.br/"+xl+"/playlist.m3u8",window.pandatag("videoHtmlLoaded",!0),$c()})):$c();var t=fl+"/"+Sl+"/config.json";"true"===Ol&&(t+="?date="+(new Date).getTime()),fetch(t,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){var t=e;Object.keys(player_configs).forEach((function(e){if(Object.keys(t).includes(e)){if("controls"===e){var i=t.controls.findIndex((function(e){return"volume"===e}));-1!==i&&t.controls.splice(i,0,"mute")}"fbPixel"===e&&"string"==typeof t.fbPixel&&(t.fbPixel=t.fbPixel?[t.fbPixel]:[]),player_configs[e]=t[e]}}))})).finally((function(){pandatag("applyColors",(function(){hl.searchParams.get("color")&&("#"===hl.searchParams.get("color").charAt(0)?player_configs.primaryColor=hl.searchParams.get("color"):player_configs.primaryColor="#"+hl.searchParams.get("color")),Wl.style.setProperty("--plyr-color-main",player_configs.primaryColor),Wl.style.setProperty("--plyr-captions-text-color",player_configs.captionsColor),Wl.style.setProperty("--plyr-captions-background",player_configs.captionsBackgroundColor),Wl.style.setProperty("--plyr-video-control-color",player_configs.controlsColor),Wl.style.setProperty("--plyr-video-control-color-hover",player_configs.controlsColor),Wl.style.setProperty("--plyr-menu-color",player_configs.menuColor),Wl.style.setProperty("--live-indicator-color",player_configs.liveColor)})),pandatag("setupControls",(function(){if("online"===jl){var e=["current-time","duration","captions","rewind","fast-forward"];Kl||e.push("progress"),Zl||e.push("settings");var t=player_configs.controls.filter((function(t){return!e.includes(t)}));player_configs.controls=t}if(player_configs.alternativeProgress){var i=["progress"];player_configs.controls=player_configs.controls.filter((function(e){return!i.includes(e)}))}uc.controls=player_configs.controls})),pandatag("configLibraryLoaded",!0)}))}function Mc(){var e="https://config-live.tv.pandavideo.com.br/"+Sl+"/"+xl+"-live.json?nocache="+Date.now();fetch(e,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){if(jl=e.status,Kl=!!e.active_dvr,hd(document.getElementsByClassName("loading-icon")[0],"disabled"),e.thumb){var t=document.getElementsByClassName("live-thumb")[0];t.getElementsByTagName("img")[0].src=ml+"/"+Sl+"/"+e.thumb,pd(t,"disabled")}else{var i=document.getElementsByClassName("live-offline-badge")[0],r=document.getElementById("live-subtitle");r&&(r.innerHTML=sc[nc].waitingForLive),document.getElementById("live-title").innerHTML=e.title,pd(i,"disabled")}"online"===e.status?function t(){var i="https://b-"+Sl+".tv.pandavideo.com.br/"+xl+"/playlist.m3u8.live?nocache="+(new Date).getTime()+(Pl?"&live_without_cdn=1":"");fetch(i,{method:"GET"}).then((function(t){if(!t.ok)throw new Error("Not 2xx response");window.player_configs.muted=!0,window.player_configs.autoplay=!0,window.player_configs.saveProgress=!1;var i=document.getElementsByClassName("live-thumb")[0];i&&hd(i,"disabled");var n=document.getElementsByClassName("live-offline-badge")[0];n&&hd(n,"disabled"),e.bitrate&&(Zl=!0,Yl=e.bitrate.map((function(e){return parseInt(e.replace("p",""))}))),Pc()})).catch((function(e){try{n.default.captureException(new Error("live_debug_exception_1"),{tags:{m3u8:i,is_live:!0,video_id:xl,library_id:Sl}})}catch(e){}setTimeout(t,2e3)}))}():"finished"===e.status||"finished_imported"===e.status?(hd(document.getElementsByClassName("live-thumb")[0],"disabled"),hd(document.getElementsByClassName("live-offline-badge")[0],"disabled"),Pc()):setTimeout(Mc,5e3)})).catch((function(e){try{n.default.captureException(new Error("live_debug_exception_2"),{tags:{config:m3u8Url,is_live:!0,video_id:xl,library_id:Sl}})}catch(e){}setTimeout(Mc,5e3)}))}function Oc(e){var t=[];t=e?document.getElementById(e)?[document.getElementById(e)]:document.getElementsByClassName(e):document.getElementsByClassName("cta-element");for(var i=0;i<t.length;i++)t[i]&&t[i].parentNode&&t[i].parentNode.removeChild(t[i])}function Fc(){var e=document.getElementsByClassName("plyr--html5")[0];Oc("pause-cta");var t,i=sl(player_configs.ctas.filter((function(e){return"pause"===e.type})));try{var n=function(){var i=t.value,n=document.createElement("div");hd(n,"pause-cta"),hd(n,"cta-overlay"),hd(n,"disabled"),hd(n,"cta-element"),n.style="z-index: 5;",n.id=i.id;var r=document.createElement("iframe");if(r.id="".concat(i.id,"_iframe"),r.onload=function(){wc(r.contentWindow.document.body);var e=document.getElementById("".concat(i.id,"_iframe")),t=/<script>(.|\n)*?<\/script>/gm,n=i.script.match(t),s=i.script.replace(t,"");if(n&&n.length){var a=n[0].replace("<script>","").replace("<\/script>",""),o=document.createElement("script");o.type="text/javascript",o.innerHTML=a,e.contentWindow.document.body.innerHTML="".concat(s),e.contentWindow.document.body.appendChild(o)}else e.contentWindow.document.body.innerHTML="".concat(s);e.contentWindow.document.body.style="padding:0;margin:0"},n.appendChild(r),i.skipButton){var s=document.createElement("button");s.style="z-index: 6;",s.innerHTML=sc[nc].keepWatching,hd(s,"cta-skip-button"),s.onclick=function(){window.postMessage({type:"play"},"*")},n.appendChild(s)}var a=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');a&&(a.style.zIndex=10),hd(n,"disabled"),e.appendChild(n)};for(i.s();!(t=i.n()).done;)n()}catch(e){i.e(e)}finally{i.f()}}function Nc(){var e=document.getElementsByClassName("plyr--html5")[0];Oc("end-cta");var t=player_configs.ctas.find((function(e){return"end"===e.type}));if(t){var i=document.createElement("div");i.id="end-cta",hd(i,"cta-overlay"),hd(i,"disabled"),hd(i,"cta-element"),i.style="z-index: 5;";var n=document.createElement("iframe");n.id="".concat(t.id,"_iframe"),n.onload=function(){wc(n.contentWindow.document.body);var e=document.getElementById("".concat(t.id,"_iframe")),i=/<script>(.|\n)*?<\/script>/gm,r=t.script.match(i),s=t.script.replace(i,"");if(r&&r.length){var a=r[0].replace("<script>","").replace("<\/script>",""),o=document.createElement("script");o.type="text/javascript",o.innerText=a,e.contentWindow.document.body.innerHTML="".concat(s),e.contentWindow.document.body.appendChild(o)}else e.contentWindow.document.body.innerHTML="".concat(s);e.contentWindow.document.body.style="padding:0;margin:0"},i.appendChild(n);var r=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');r&&(r.style.zIndex=10),hd(i,"disabled"),e.appendChild(i),window.onEnd=function(){pd(i,"disabled")}}}function Bc(){var e=document.getElementById("bookmarks-container");e&&e.parentNode.removeChild(e);var t='<svg style="width:24px;height:24px" fill="white" viewBox="0 0 24 24"><path fill="white" d="M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z" /></svg>',i=document.createElement("div");i.id="bookmarks-container",hd(i,"panda-bookmarks-div");var n=document.createElement("div");hd(n,"panda-bookmarks-list-wrapper"),hd(n,"disabled"),n.innerHTML='<div class="panda-bookmarks-list-title">'.concat(sc[nc].chapters,"</div>");var r=document.createElement("ul");hd(r,"panda-bookmarks-list"),player_configs.bookMarks.sort((function(e,t){return e.time-t.time})).forEach((function(e,t){var i,n,s,a,o=document.createElement("li"),l=document.createElement("span"),c="index"===window.player_configs.bookmarksLabel?t+1:(a=(i=e.time)-3600*(n=Math.floor(i/3600))-60*(s=Math.floor((i-3600*n)/60)),n<10&&(n="0"+n),s<10&&(s="0"+s),a<10&&(a="0"+a),"00"==n?s+":"+a:n+":"+s+":"+a);l.innerHTML="<strong>"+c+"</strong> "+e.title,o.appendChild(l),o.onclick=function(){window.postMessage({type:"currentTime",parameter:e.time},"*"),window.postMessage({type:"play"},"*")},r.appendChild(o)}));var s=document.createElement("button");s.setAttribute("class","panda-bookmarks-button"),t=t.replace(/white/gm,"var(--plyr-video-control-color)"),s.innerHTML=t,n.appendChild(r),i.appendChild(s);var a=document.querySelector(".plyr__menu button");a&&(a.onclick=function(e){hd(n,"disabled"),pd(s,"active-bookmark"),Xl=!1}),s.onclick=function(){(Xl=!Xl)?(pd(n,"disabled"),hd(s,"active-bookmark")):(hd(n,"disabled"),pd(s,"active-bookmark"))},document.addEventListener("click",(function(e){s.contains(e.target)||(hd(n,"disabled"),pd(s,"active-bookmark"),Xl=!1)})),i.appendChild(n);var o=player_configs.bookMarks.sort((function(e,t){return e.time-t.time})),l=o.map((function(e,t){var i=o[t+1];return{start:e.time,title:e.title,end:i?i.time:2147483647}}));window.pb.ev_config.chapters=l,window.pb.reloadChapters(),Sc(i,1)}function Uc(e){e||document.write("Unauthorized"),fetch("https://config-drm.tv.pandavideo.com.br/"+Sl+"/"+e+"-drm.json?nocache="+Date.now(),{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(t){var i;pandaLoad.setupThumb();var n=sc[nc].watermark_question;t&&null!==(i=t.config_player)&&void 0!==i&&i.watermark_question&&(n=t.config_player.watermark_question);var r=document.querySelector("video");hd(r,"blur");var s=document.getElementsByClassName("loading-icon")[0];hd(s,"disabled");var a="<form class=container-drm><h2 id=drm-question "+(player_configs.controlsColor?'style="color: '+player_configs.controlsColor+'"':"")+">"+n.replace(/<\/?[^>]+(>|$)/g,"")+"</h2><input id=drm-answer /><button id=drm-button "+(player_configs.primaryColor?'style="background-color: '+player_configs.primaryColor+'"':"")+'><div class="drm-search-icon"><svg viewBox="-112 0 512 512" '+(player_configs.controlsColor?'fill="'+player_configs.controlsColor+'"':"")+' ><path d="M64 352L160 256 64 160 96 128 224 256 96 384 64 352Z" /></svg></div><div class="drm-loading-icon disabled"><svg x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve"><path '+(player_configs.controlsColor?'fill="'+player_configs.controlsColor+'"':"")+' d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite" /></path></svg></div></button></form>';!function(e,t){var i=document.createElement("div");for(i.innerHTML=t;i.children.length>0;)e.appendChild(i.children[0])}(document.getElementById("video-container"),a);var o,l=document.querySelector("form");function c(t){var i=document.getElementById("drm-answer"),n=document.getElementsByClassName("drm-search-icon")[0],a=document.getElementsByClassName("drm-loading-icon")[0];t.preventDefault(),pd(a,"disabled"),hd(n,"disabled"),fetch(pl+"/drm/token/?jwt=1&key="+i.value.trim()+"&drm_group_id="+e,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(t){zl=t.jwt,pd(a,"disabled"),l.remove(),pd(s,"disabled"),pd(r,"blur");try{localStorage.setItem(e,i.value.trim())}catch(e){}var n=document.querySelector("video > source"),o="https://b-".concat(Sl,".tv.pandavideo.com.br/").concat(xl,"/playlist.m3u8?watermark=").concat(zl);n.src=o,window.pandatag("videoHtmlLoaded",!0),$c()})).catch((function(t){hd(a,"disabled"),pd(n,"disabled"),i.focus();try{localStorage.removeItem(e)}catch(e){}}))}l.onsubmit=c.bind(l);try{o=localStorage.getItem(e)}catch(e){}o&&(document.getElementById("drm-answer").value=o,c({preventDefault:function(){}})),setTimeout((function(){document.getElementById("drm-answer").focus()}),500)}))}function $c(){var e;Xc(),e=fl+"/"+Sl+"/"+xl+".json","true"===Ol&&(e+="?date="+(new Date).getTime()),fetch(e,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){var t,i;e.profile?(window.player_configs.profile=e.profile,t=e.profile,i=fl+"/"+Sl+"/profiles/"+t+".json","true"===Ol&&(i+="?date="+(new Date).getTime()),fetch(i,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var n=i[t];if("controls"===n){if(!e[n])continue;var r=e.controls.findIndex((function(e){return"volume"===e}));-1!==r&&e.controls.splice(r,0,"mute");var s=e.controls.findIndex((function(e){return"current-time"===e}));-1!==s&&e.controls.splice(s+1,0,"duration"),player_configs[n]=e[n]}else"vsl"===n||"colors"===n||"saveProgress"===n||"general"===n?(""==e[n].fbPixel&&delete e[n].fbPixel,""==e[n].gtagIds&&delete e[n].gtagIds,Object.hasOwnProperty.call(e[n],"trialWarning")&&delete e[n].trialWarning,window.player_configs=el(el({},window.player_configs),e[n])):"hideControlsOnStart"===n&&(window.player_configs.hideControlsOnStart=e[n]);window.player_configs.autoplay&&(document.querySelector("video").autoplay=!0),window.player_configs.mutedIndicatorIcon&&(player_configs.muted=!0)}})).catch((function(e){console.log("Error: falied to fetch video profile")})).finally((function(){pandatag("configProfileLoaded",!0),function(e){if(e){var t=fl+"/"+Sl+"/tmi/"+e+".json";"true"===Ol&&(t+="?date="+(new Date).getTime()),fetch(t,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){player_configs.customMutedIndicatorData=e})).catch((function(e){console.log("Error: falied to fetch video muted indicator")})).finally((function(){pandatag("configMutedIndicatorLoaded",!0)}))}else pandatag("configMutedIndicatorLoaded",!0)}(player_configs.customMutedIndicatorId)}))):(pandatag("configMutedIndicatorLoaded",!0),pandatag("configProfileLoaded",!0)),pandatag("setupThumb",(function(){var t=document.querySelector("video"),i=hl.searchParams.get("thumbnail");i?t.setAttribute("poster",i):e.thumb&&""!==e.thumb?Ol?t.setAttribute("poster",ml+"/"+Sl+"/"+e.thumb+"?date="+(new Date).getTime()):t.setAttribute("poster",ml+"/"+Sl+"/"+e.thumb):t.setAttribute("poster","https://b-"+Sl+".tv.pandavideo.com.br/"+xl+"/thumbnail.jpg")})),pandatag("setupSubtitles",(function(){var t=document.querySelector("video");e.subtitles&&e.subtitles.forEach((function(e){var i=document.createElement("track");i.kind="captions",i.label=e.label,i.srclang=e.srclang.replace("-","").toLowerCase(),i.src="https://subtitles.tv.pandavideo.com.br/"+Sl+"/"+xl+"/"+e.srclang+".vtt",t.appendChild(i)})),e.bookMarks&&(player_configs.bookMarks=e.bookMarks),e.ctas&&(player_configs.ctas=e.ctas)})),e.defaultSubtitle&&(player_configs.defaultSubtitle=e.defaultSubtitle),e.customPixels&&(player_configs.customPixels=e.customPixels)})).catch((function(){pandatag("configProfileLoaded",!0),pandatag("configMutedIndicatorLoaded",!0),pandatag("setupThumb",(function(){if("online"!==jl){var e=document.querySelector("video"),t=hl.searchParams.get("thumbnail");if(t)return void e.setAttribute("data-poster",t);e.setAttribute("data-poster","https://b-"+Sl+".tv.pandavideo.com.br/"+xl+"/thumbnail.jpg")}})),pandatag("setupSubtitles",(function(){}))})).finally((function(){pandatag("configVideoLoaded",!0)})),od()}function Gc(){return Hc.apply(this,arguments)}function Hc(){return(Hc=rl(il().mark((function e(){var t;return il().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=cast.framework.CastContext.getInstance().getCurrentSession()){e.next=5;break}return e.next=4,cast.framework.CastContext.getInstance().requestSession();case 4:t=cast.framework.CastContext.getInstance().getCurrentSession();case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}((xl||Ll||Cl)&&Sl||(document.write("Missing videoID (v) or libID (l)"),0))&&(window.player_configs=(tl(fc={controls:["play-large","play","progress","current-time","duration","mute","volume","captions","settings","pip","airplay","fullscreen"],captionsBackgroundColor:"#000",primaryColor:"#4874F1",captionsColor:"#FFF",menuColor:"#4a5464",initDisabledControls:!1,controlsColor:"#FFF",pandaBranding:!0,refCode:"",fbPixel:[],customPixels:[],mutedIndicatorIcon:!1,mutedIndicatorTextTop:"",mutedIndicatorTextBottom:"",mutedIndicatorSize:"small",mutedIndicatorOpacity:.8,muted:!1,autoplay:!1,disablePause:!1,initQuality:0,alternativeProgress:!1,alternativeProgress2xLimit:20,alternativeProgressDefaultVelocity:!1,mutedIndicatorClickRestart:!0,alternativeProgressVelocity:5,alternativeProgressHeight:0,liveColor:"#fc2d2d",bookMarks:[]},"customPixels",[]),tl(fc,"bookmarksLabel","index"),tl(fc,"ctas",[]),tl(fc,"availableSpeeds",[.5,.75,1,1.25,1.5,2]),tl(fc,"defaultSpeed",1),tl(fc,"saveProgress",!0),tl(fc,"saveProgressScreen",!1),tl(fc,"saveProgressTitle","Você já começou a assistir esse vídeo"),tl(fc,"saveProgressBackgroundOpacity",1),tl(fc,"saveProgressButton1Title","Continuar assistindo"),tl(fc,"saveProgressButton2Title","Voltar ao início"),tl(fc,"hideControlsOnStart",!1),tl(fc,"defaultSubtitle",null),tl(fc,"restartAfterEnd",!1),tl(fc,"onlyLoopMuted",!1),tl(fc,"realtimeAnalytics",!1),tl(fc,"troubleshootDialog",!0),tl(fc,"disableForward",!1),tl(fc,"playOpensFullscreen",!1),tl(fc,"playOpensFullscreenNative",!1),tl(fc,"gtagIds",[]),tl(fc,"showPreviewThumbs",!0),tl(fc,"smartAutoplay",!1),tl(fc,"disableSeeking",!1),tl(fc,"mutedIndicatorAnimation","default"),tl(fc,"mutedIndicatorLoop",!1),tl(fc,"mutedIndicatorLoopDuration",5),tl(fc,"mutedIndicatorFontSize",22),tl(fc,"captionsFontSize",20),tl(fc,"smallMutedIcon",!0),tl(fc,"bigPlayButtonSize",55),tl(fc,"bigPlayButtonIconSize",18),tl(fc,"mutedIndicatorBackgroundColor",""),tl(fc,"mutedIndicatorTextColor",""),tl(fc,"mutedIndicatorBorderSize",2),tl(fc,"customMutedIndicatorData",""),tl(fc,"customMutedIndicatorId",""),tl(fc,"pauseThumbnail",""),tl(fc,"endThumbnail",""),tl(fc,"defaultLanguage",""),tl(fc,"trialWarning",!1),tl(fc,"iosFakeFullscreen",!1),fc),window.pandatag=function(e,t){if(window.pandaLoad[e]=t,pandaLoad=window.pandaLoad,pandaLoad.videoHtmlLoaded&&pandaLoad.configLibraryLoaded&&pandaLoad.configVideoLoaded&&pandaLoad.configProfileLoaded&&pandaLoad.configMutedIndicatorLoaded&&pandaLoad.playerLoaded&&!Ql){Xc(),window.player_configs.controls.includes("cast")&&"online"!==jl&&(f=10,m=setInterval((function(){try{chrome.cast.isAvailable&&!Gl&&(clearInterval(m),cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),function(){var e='<svg viewBox="100 -900 800 800"><path d="M481-480Zm340 320H601q0-15-1-30t-3-30h224v-520H141v60q-15-2-30-3t-30-1v-56q0-24.75 17.625-42.375T141-800h680q24.75 0 42.375 17.625T881-740v520q0 24.75-17.625 42.375T821-160Zm-740 0v-104q41.667 0 70.833 30.333Q181-203.333 181-160H81Zm200 0q0-84.66-58-144.33Q165-364 81-364v-60q108.643 0 184.321 77.5Q341-269 341-160h-60Zm160 0q0-75-28-141.5t-77-116q-49-49.5-114.5-78T81-524v-60q87 0 163.5 33.5t133.5 91q57 57.5 90 135T501-160h-60Z" fill="'.concat(player_configs.controlsColor,'" /></svg>'),t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("class","plyr__controls__item plyr__control chromecast-btn"),e=e.replace(/white/gm,"var(--plyr-video-control-color)"),t.innerHTML=e,Sc(t,1),t.onclick=rl(il().mark((function e(){return il().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zc){e.next=4;break}Yc(),e.next=6;break;case 4:return e.next=6,qc();case 6:case"end":return e.stop()}}),e)})));var i=new cast.framework.RemotePlayer;new cast.framework.RemotePlayerController(i).addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,(function(e){if(e.value){zc=!0;var t=document.getElementsByClassName("chromecast-btn");t&&(t[0].innerHTML='<svg viewBox="100 -900 800 800"><path d="M741-300H582q-5-16-10-32.5T562-360h119v-240H364q-29-19-60.874-33.909Q271.252-648.818 237-660h504v360ZM480-480ZM81-160v-104q41.667 0 70.833 30.333Q181-203.333 181-160H81Zm200 0q0-84.66-58-144.33Q165-364 81-364v-60q108.643 0 184.321 77.5Q341-269 341-160h-60Zm160 0q0-75-28-141.5t-77-116q-49-49.5-114.5-78T81-524v-60q87 0 163.5 33.5t133.5 91q57 57.5 90 135T501-160h-60Zm380 0H601q0-15-1-30t-3-30h224v-520H141v60q-15-2-30-3t-30-1v-56q0-24.75 17.625-42.375T141-800h680q24.75 0 42.375 17.625T881-740v520q0 24.75-17.625 42.375T821-160Z" fill="'.concat(player_configs.controlsColor,'" /></svg>')),jc()}}))}())}catch(e){}f||clearInterval(m),f--}),1e3));var i=null;try{i=localStorage.getItem("panda_video:"+xl)}catch(e){}player_configs.mutedIndicatorClickRestart&&player_configs.saveProgress&&!player_configs.saveProgressScreen&&i&&(player_configs.mutedIndicatorClickRestart=!1),pandaLoad.applyColors(),pandaLoad.setupControls(),pandaLoad.setupThumb(),pandaLoad.setupSubtitles(),window.player_configs.defaultLanguage&&(nc=window.player_configs.defaultLanguage,uc.i18n=sc[nc]),uc.speed={selected:player_configs.defaultSpeed,options:player_configs.availableSpeeds.map((function(e){return parseFloat(e)}))},player_configs.autoplay&&(player_configs.muted=!0,uc.muted=!0,uc.autoplay=!0),player_configs.disableForward&&(uc.keyboard.global=!1,uc.keyboard.focused=!1),pandaLoad.setupPlayer(uc),Fl?Pl||(Wc(),navigator.sendBeacon(ec+"/icon.gif?type=view&v="+xl+"&u="+mc+"&p="+Sl+"&referrer="+encodeURIComponent(document.referrer)+"&visibily="+!document[ll])):document.addEventListener(cl,(function(){Fl||Il||td(),Hl||Pl||(Wc(),navigator.sendBeacon(ec+"/icon.gif?type=view&v="+xl+"&u="+mc+"&p="+Sl+"&referrer="+encodeURIComponent(document.referrer)+"&visibily="+!document[ll]),Hl=!0)}),!1),wc(document),function(){if(player_configs.controls.includes("rewind")){var e=document.querySelectorAll('[data-plyr="rewind"]')[0];e&&(e.innerHTML='\n              <svg style="width:24px;height:24px" viewBox="0 0 50 50">\n                  <path fill="currentColor" d="M 7.984375 1.9863281 A 1.0001 1.0001 0 0 0 7 3 L 7 13 L 17 13 A 1.0001 1.0001 0 1 0 17 11 L 10.761719 11 C 14.363419 7.3233218 19.405802 5.0234375 25 5.0234375 C 36.109434 5.0234375 45 13.914004 45 25.023438 C 45 36.13287 36.109434 45.023438 25 45.023438 C 13.890566 45.023438 5 36.13287 5 25.023438 A 1.0001 1.0001 0 1 0 3 25.023438 C 3 37.204003 12.819434 47.023438 25 47.023438 C 37.180566 47.023438 47 37.204003 47 25.023438 C 47 12.842871 37.180566 3.0234375 25 3.0234375 C 18.685898 3.0234375 12.985264 5.693158 9 9.9414062 L 9 3 A 1.0001 1.0001 0 0 0 7.984375 1.9863281 z M 29.5 17 C 24.5 17 24.300781 21.7 24.300781 25 C 24.300781 27.5 24.1 33 29.5 33 C 34.4 33 34.699219 28.2 34.699219 25 C 34.699219 21.7 34.4 17 29.5 17 z M 19.5 17.099609 C 19.1 19.499609 17.4 19.999609 15 20.099609 L 15 21.599609 L 19.099609 21.599609 L 19.099609 32.900391 L 21 32.900391 L 21 17.099609 L 19.5 17.099609 z M 29.5 18.800781 C 33.4 18.800781 32.800781 24.699609 32.800781 25.099609 C 32.800781 28.399609 32.2 31.400391 29.5 31.400391 C 25.8 31.400391 26.199219 25.599609 26.199219 25.099609 C 26.199219 24.799609 25.6 18.800781 29.5 18.800781 z"/>\n              </svg>')}if(player_configs.controls.includes("fast-forward")){var t=document.querySelectorAll('[data-plyr="fast-forward"]')[0];t&&(t.innerHTML='<svg style="width:24px;height:24px" viewBox="0 0 50 50">\n              <path fill="currentColor" d="M 41.984375 1.9863281 A 1.0001 1.0001 0 0 0 41 3 L 41 9.9414062 C 37.014556 5.692295 31.313104 3.0234375 25 3.0234375 C 12.819434 3.0234375 3 12.842871 3 25.023438 C 3 37.204003 12.819434 47.023438 25 47.023438 C 37.180566 47.023438 47 37.204003 47 25.023438 A 1.0001 1.0001 0 1 0 45 25.023438 C 45 36.13287 36.109434 45.023438 25 45.023438 C 13.890566 45.023438 5 36.13287 5 25.023438 C 5 13.914003 13.890566 5.0234375 25 5.0234375 C 30.593333 5.0234375 35.63652 7.322796 39.238281 11 L 33 11 A 1.0001 1.0001 0 1 0 33 13 L 43 13 L 43 3 A 1.0001 1.0001 0 0 0 41.984375 1.9863281 z M 29.5 17 C 24.5 17 24.300781 21.7 24.300781 25 C 24.300781 27.5 24.1 33 29.5 33 C 34.4 33 34.699219 28.2 34.699219 25 C 34.699219 21.7 34.4 17 29.5 17 z M 19.5 17.099609 C 19.1 19.499609 17.4 19.999609 15 20.099609 L 15 21.599609 L 19.099609 21.599609 L 19.099609 32.900391 L 21 32.900391 L 21 17.099609 L 19.5 17.099609 z M 29.5 18.800781 C 33.4 18.800781 32.800781 24.699609 32.800781 25.099609 C 32.800781 28.399609 32.2 31.400391 29.5 31.400391 C 25.8 31.400391 26.199219 25.599609 26.199219 25.099609 C 26.199219 24.799609 25.6 18.800781 29.5 18.800781 z"/>\n          </svg>')}}(),function(){var e=document.querySelector(".plyr__menu__container > div");e&&(e.style="max-height: calc(100vh - 50px);");var t=document.querySelector("video");window.innerWidth<400&&(t.onclick=function(){window.postMessage({type:"play_toggle"},"*")})}(),function(){if(!player_configs.controls.includes("progress")){var e=document.querySelector(".plyr__controls");e&&hd(e,"no-progress")}}(),player_configs.trialWarning&&(h=document.getElementsByClassName("plyr--full-ui")[0],(p=document.createElement("div")).id="trial-warning",p.innerHTML=sc[nc].trialWarning,h.appendChild(p)),!player_configs.disableForward&&tc?function(){var e=document.querySelector(".plyr__video-wrapper"),t=document.createElement("div");t.classList.add("panda-forward-wrapper");var i=document.createElement("div");i.id="forward_touch";var n=function(e){"forward_touch"!==e.target.id&&"backward_touch"!==e.target.id||window.player.toggleControls(!0)};i.ondblclick=function(){window.player.forward()};var r=document.createElement("div");r.id="backward_touch",r.ondblclick=function(){window.player.rewind()},window.player_configs.controls.includes("play")?(i.onclick=n,r.onclick=n):(i.onclick=function(){window.player.togglePlay()},r.onclick=function(){window.player.togglePlay()}),t.appendChild(r),t.appendChild(i),e.appendChild(t)}():tc&&(player_configs.controls.includes("play")||(document.querySelector("video").onclick=function(){window.player.togglePlay()})),(u=document.querySelector(".plyr__poster"))&&(u.onclick=function(){window.postMessage({type:"play",parameter:1},"*")}),player_configs.controls.includes("play-large")&&function(){var e=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');if(e){e.style.width="".concat(player_configs.bigPlayButtonSize,"px"),e.style.height="".concat(player_configs.bigPlayButtonSize,"px"),e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center";var t=e.querySelector("svg");t&&(t.style.width="".concat(player_configs.bigPlayButtonIconSize,"px"),t.style.height="".concat(player_configs.bigPlayButtonIconSize,"px"),t.style.display="flex",player_configs.bigPlayButtonIconSize>50&&(t.style.paddingLeft="3px"),t.style.alignItems="center")}}(),Nl&&!player_configs.muted||!player_configs.mutedIndicatorIcon||player_configs.saveProgress?player_configs.initDisabledControls||!player_configs.muted||player_configs.mutedIndicatorIcon||player_configs.saveProgressScreen||!player_configs.smallMutedIcon||function(){if(0!==document.getElementsByClassName("plyr--full-ui").length){var e=document.getElementsByClassName("plyr--full-ui")[0],t=document.createElement("button"),i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="7.999 9.062 46.75 32.563" enable-background="new 7.999 9.062 46.75 32.563" xml:space="preserve"> <style>@keyframes BLINK{0%{opacity: 0;}33%{opacity: 1;}66%{opacity: 1;}100%{opacity: 0;}}.blink_1{animation: BLINK 2s infinite; opacity: 0;}.blink_2{animation: BLINK 2s infinite .3s; opacity: 0;}.blink_3{animation: BLINK 2s infinite .6s; opacity: 0;}</style><style class="darkreader darkreader--sync" media="screen"></style> <g class="adjustable fg" style="fill: rgb(255, 255, 255); --darkreader-inline-fill:#ffffff;" data-darkreader-inline-fill=""> <path d="M53.249,39.616c-0.186,0-0.371-0.051-0.537-0.157l-43.5-27.75c-0.466-0.297-0.603-0.916-0.306-1.381c0.298-0.466,0.917-0.601,1.381-0.306l43.5,27.75c0.467,0.297,0.604,0.916,0.307,1.381C53.901,39.453,53.579,39.616,53.249,39.616z"></path> <path class="blink_3" d="M48.896,33.467l1.699,1.085c3.497-7.791,2.073-17.271-4.313-23.659c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414C50.581,18.019,51.913,26.463,48.896,33.467z"></path> <path class="blink_3" d="M46.926,36.956c-0.612,0.863-1.286,1.695-2.059,2.469c-0.392,0.391-0.392,1.023,0,1.414c0.194,0.195,0.45,0.293,0.707,0.293c0.256,0,0.512-0.098,0.706-0.293c0.878-0.878,1.642-1.824,2.333-2.807L46.926,36.956z"></path> <path class="blink_2" d="M42.543,29.415l1.777,1.135c1.545-5.315,0.229-11.293-3.953-15.476c-0.392-0.391-1.023-0.391-1.414,0c-0.392,0.391-0.392,1.023,0,1.414C42.454,19.987,43.639,24.925,42.543,29.415z"></path> <path class="blink_2" d="M41,33.174c-0.563,0.94-1.235,1.837-2.047,2.646c-0.391,0.392-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.916-0.914,1.676-1.924,2.317-2.984L41,33.174z"></path> <path class="blink_1" d="M35.771,25.094l2.003,1.277c0.012-0.203,0.029-0.404,0.029-0.609c0-3.079-1.2-5.974-3.381-8.153c-0.391-0.391-1.022-0.391-1.414,0c-0.391,0.391-0.391,1.023,0,1.414C34.652,20.666,35.613,22.802,35.771,25.094z"></path> <path class="blink_1" d="M35.084,29.401c-0.474,1.145-1.172,2.197-2.076,3.1c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.707-0.293c1.008-1.006,1.795-2.17,2.361-3.43L35.084,29.401z"></path> <polygon points="28.124,20.215 28.124,14.991 24.635,17.99 "></polygon> <path d="M20.921,20.366h-6.423c-0.553,0-1,0.508-1,1.135v8.229c0,0.627,0.447,1.135,1,1.135h7.375l6.25,5.875V24.96L20.921,20.366z"></path> </g> </svg>';i=i+"<span>"+sc[nc].activateSound+"</span>",t.innerHTML=i,t.onclick=function(){window.postMessage({type:"increaseVolume",parameter:1},"*"),window.postMessage({type:"play",parameter:1},"*"),cd({}),Lc(),Jl=!0},hd(t,"small-muted-icon"),e.appendChild(t),Jl=!1}}():Dc(),player_configs.mutedIndicatorFontSize&&function(){var e,t=document.querySelectorAll("button.panda-muted-indicator-item span");if(t.length){var i=(e=player_configs.mutedIndicatorFontSize)<=21?"small-text":e>=22&&e<=27?"normal-text":e>=28?"large-text":void 0,n={"small-text":[4,4],"normal-text":[6,4],"large-text":[6,8]},r="\n    button.panda-muted-indicator-item span.".concat(i," {\n        font-size: ").concat(player_configs.mutedIndicatorFontSize,"px;\n    }");player_configs.mutedIndicatorFontSize>18&&(r+="\n        @media(max-width: 680px) {\n            button.panda-muted-indicator-item span.".concat(i," {\n                font-size: ").concat(player_configs.mutedIndicatorFontSize-n[i][0],"px;\n            }\n        }\n        @media(max-width: 380px) {\n            button.panda-muted-indicator-item span.").concat(i," {\n                font-size: ").concat(player_configs.mutedIndicatorFontSize-n[i][0]-n[i][1],"px;\n            }\n        }\n        "));var s=document.createElement("style");s.innerText=r,document.head.appendChild(s),t.forEach((function(e){e.classList.add(i)}))}}();var n=player_configs.controls.filter((function(e){return"play"!==e&&"play-large"!==e}));Ml&&(l=Ml,c=document.createElement("div"),(d=document.createElement("p")).innerText=l,c.setAttribute("class","panda-title-wrapper"),c.appendChild(d),Sc(c)),(!n||n&&!n.length)&&(document.querySelector(".plyr__controls").style.background="none"),player_configs.alternativeProgress?function(){var e=document.createElement("div");e.id="wrapper-progress",hd(e,"alternative-progress-wrapper");var t=document.createElement("div");hd(t,"alternative-progress"),e.appendChild(t);var i=document.querySelector(".plyr__controls");i&&(i.style="padding-bottom: "+(player_configs.alternativeProgressHeight+5)+"px");var n=document.getElementsByClassName("plyr--html5")[0];player_configs.mutedIndicatorIcon&&hd(e,"disabled"),n.appendChild(e)}():player_configs.controls.includes("progress")&&function(){var e=null,t=document.querySelector(".plyr__progress__container input"),i=document.querySelector(".plyr__progress__container progress"),n=document.querySelector(".plyr__progress");t.style.top="-5px",i.style.top="4px",i.style.opacity="0.01";var r=document.createElement("div");r.className="plyr__pb",n.insertBefore(r,n.firstChild);var s=new S(".plyr__pb",".plyr__progress__container input",{keyColor:"#ff7755",videoLength:105,chapters:[],moments:[],onScrubbingChange:function(e,t){var i=document.querySelector(".plyr__preview-thumb").offsetWidth,n=document.querySelector(".plyr__controls").offsetWidth,r=Math.max(i/2,t);r=Math.min(n-i+i/4,r),document.querySelector(".plyr__preview-thumb").style.left=r-5.5+"px"}});!function(t){!e&&t&&t.thumbnails&&(e=t.thumbnails.showImage,t.thumbnails.showImage=function(i,n,r,s,a){var o;i.width>0&&i.height>0&&(t.config.thumbnail.height=(o=i.width/i.height,Math.floor(thumbnail_width/o))),e.call(t.thumbnails,i,n,r,s,a)})}(window.player),window.player.on("loadedmetadata",(function(){s.SetDuration(window.player.duration)})),setInterval((function(){s.SetCurrentProgress(window.player.currentTime),s.SetBufferProgress(window.player.duration*window.player.buffered)}),16),window.pb=s}(),function(){if(window.player_configs.controls.includes("fast-forward")){var e=document.querySelector("button[data-plyr='fast-forward']");e&&(e.style.marginRight="auto")}else if(window.player_configs.controls.includes("play")){var t=document.querySelector("button[data-plyr='play']");t&&(t.style.marginRight="auto")}else if(window.player_configs.controls.includes("rewind")){var i=document.querySelector("button[data-plyr='rewind']");i&&(i.style.marginRight="auto")}if(player_configs.initDisabledControls){var n=document.querySelector('[data-plyr="play"].plyr__control--overlaid');n&&(n.style.display="none");var r=document.querySelector(".plyr__controls");r&&hd(r,"disabled");var s=document.getElementById("wrapper-progress");s&&hd(s,"disabled")}}(),function(){if(window.player_configs.iosFakeFullscreen&&$l){var e=document.querySelector('button[data-plyr="fullscreen"]'),t=!1;if(e){var i=e.cloneNode(!0);e.replaceWith(i),i.onclick=function(){if(t){window.parent.postMessage({message:"panda_close_window_fullscreen",video:xl},"*");var e=i.querySelector("svg.icon--pressed"),n=i.querySelector("svg.icon--not-pressed");e.style.display="none",n.style.display="block",t=!1}else{window.parent.postMessage({message:"panda_open_window_fullscreen",video:xl},"*");var r=i.querySelector("svg.icon--pressed"),s=i.querySelector("svg.icon--not-pressed");r.style.display="block",s.style.display="none",t=!0}}}}}(),player_configs.bookMarks&&player_configs.bookMarks.length>0&&Bc(),player_configs.ctas&&player_configs.ctas.length>0&&(Fc(),Nc()),!player_configs.pandaBranding||player_configs.alternativeProgress||player_configs.mutedIndicatorIcon||(a='<svg width="100" height="20" viewBox="0 0 523 116" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.84 106.728V50.664C3.84 49.192 3.872 48.104 3.936 47.4C4.064 46.696 4.352 45.896 4.8 45C5.696 43.272 7.84 42.408 11.232 42.408C14.624 42.408 16.896 42.856 18.048 43.752C19.264 44.584 19.968 45.832 20.16 47.496C22.592 44.168 26.4 42.504 31.584 42.504C36.832 42.504 41.792 44.968 46.464 49.896C51.136 54.824 53.472 60.552 53.472 67.08C53.472 73.608 51.136 79.336 46.464 84.264C41.856 89.192 36.928 91.656 31.68 91.656C26.432 91.656 22.624 90.184 20.256 87.24V106.632C20.256 108.104 20.192 109.192 20.064 109.896C20 110.6 19.712 111.4 19.2 112.296C18.752 113.256 17.952 113.928 16.8 114.312C15.648 114.696 14.08 114.888 12.096 114.888C10.112 114.888 8.512 114.696 7.296 114.312C6.144 113.928 5.312 113.288 4.8 112.392C4.352 111.496 4.064 110.696 3.936 109.992C3.872 109.288 3.84 108.2 3.84 106.728ZM22.848 61.512C21.376 63.24 20.64 65.128 20.64 67.176C20.64 69.224 21.376 71.112 22.848 72.84C24.384 74.504 26.304 75.336 28.608 75.336C30.976 75.336 32.96 74.504 34.56 72.84C36.224 71.176 37.056 69.288 37.056 67.176C37.056 65.064 36.288 63.176 34.752 61.512C33.216 59.784 31.2 58.92 28.704 58.92C26.272 58.92 24.32 59.784 22.848 61.512ZM88.227 47.784C88.611 44.2 91.139 42.408 95.811 42.408C98.307 42.408 100.163 42.6 101.379 42.984C102.595 43.368 103.427 44.04 103.875 45C104.387 45.96 104.675 46.824 104.739 47.592C104.867 48.296 104.931 49.384 104.931 50.856V84.456C104.931 85.928 104.867 87.048 104.739 87.816C104.675 88.52 104.419 89.352 103.971 90.312C103.075 91.976 100.867 92.808 97.347 92.808C93.891 92.808 91.555 92.392 90.339 91.56C89.187 90.664 88.515 89.384 88.323 87.72C85.955 91.112 81.987 92.808 76.419 92.808C70.915 92.808 65.795 90.28 61.059 85.224C56.323 80.168 53.955 74.312 53.955 67.656C53.955 60.936 56.323 55.08 61.059 50.088C65.859 45.032 71.107 42.504 76.803 42.504C78.979 42.504 80.963 42.888 82.755 43.656C84.547 44.424 85.795 45.16 86.499 45.864C87.203 46.504 87.779 47.144 88.227 47.784ZM70.755 67.752C70.755 69.864 71.587 71.784 73.251 73.512C74.915 75.176 76.931 76.008 79.299 76.008C81.667 76.008 83.619 75.144 85.155 73.416C86.755 71.688 87.555 69.8 87.555 67.752C87.555 65.64 86.787 63.688 85.251 61.896C83.779 60.104 81.763 59.208 79.203 59.208C76.707 59.208 74.659 60.104 73.059 61.896C71.523 63.688 70.755 65.64 70.755 67.752ZM136.391 42.408C142.791 42.408 148.103 44.872 152.327 49.8C156.615 54.664 158.759 60.616 158.759 67.656V84.552C158.759 86.024 158.695 87.144 158.567 87.912C158.503 88.616 158.247 89.416 157.799 90.312C156.903 92.04 154.407 92.904 150.311 92.904C145.767 92.904 143.143 91.72 142.439 89.352C142.055 88.264 141.863 86.632 141.863 84.456V67.56C141.863 64.936 141.095 62.888 139.559 61.416C138.087 59.944 136.071 59.208 133.511 59.208C131.015 59.208 128.967 59.976 127.367 61.512C125.831 63.048 125.063 65.064 125.063 67.56V84.552C125.063 86.024 124.999 87.144 124.871 87.912C124.807 88.616 124.519 89.416 124.007 90.312C123.175 92.04 120.711 92.904 116.615 92.904C112.583 92.904 110.119 92.04 109.223 90.312C108.775 89.352 108.487 88.52 108.359 87.816C108.295 87.048 108.263 85.928 108.263 84.456V50.472C108.263 49.064 108.295 48.008 108.359 47.304C108.487 46.536 108.807 45.704 109.319 44.808C110.215 43.208 112.679 42.408 116.711 42.408C120.615 42.408 123.015 43.144 123.911 44.616C124.551 45.704 124.871 47.016 124.871 48.552C125.127 48.104 125.703 47.464 126.599 46.632C127.495 45.8 128.359 45.128 129.191 44.616C131.367 43.144 133.767 42.408 136.391 42.408ZM196.049 21.384C196.561 20.424 197.425 19.752 198.641 19.368C199.857 18.984 201.457 18.792 203.441 18.792C205.489 18.792 207.121 18.984 208.337 19.368C209.553 19.752 210.385 20.424 210.833 21.384C211.345 22.344 211.633 23.208 211.697 23.976C211.825 24.68 211.889 25.768 211.889 27.24V84.552C211.889 86.024 211.825 87.144 211.697 87.912C211.633 88.616 211.345 89.416 210.833 90.312C209.873 92.04 207.153 92.904 202.673 92.904C198.257 92.904 195.793 91.336 195.281 88.2C192.593 91.272 188.849 92.808 184.049 92.808C178.289 92.808 173.041 90.312 168.305 85.32C163.569 80.264 161.201 74.408 161.201 67.752C161.201 61.032 163.569 55.144 168.305 50.088C173.105 45.032 178.353 42.504 184.049 42.504C188.785 42.504 192.465 44.104 195.089 47.304V27.144C195.089 25.672 195.121 24.584 195.185 23.88C195.313 23.112 195.601 22.28 196.049 21.384ZM180.497 73.512C182.161 75.24 184.177 76.104 186.545 76.104C188.913 76.104 190.865 75.24 192.401 73.512C194.001 71.784 194.801 69.896 194.801 67.848C194.801 65.736 194.033 63.784 192.497 61.992C191.025 60.2 189.009 59.304 186.449 59.304C183.889 59.304 181.841 60.2 180.305 61.992C178.769 63.72 178.001 65.64 178.001 67.752C178.001 69.864 178.833 71.784 180.497 73.512ZM248.048 47.784C248.432 44.2 250.96 42.408 255.632 42.408C258.128 42.408 259.984 42.6 261.2 42.984C262.416 43.368 263.248 44.04 263.696 45C264.208 45.96 264.496 46.824 264.56 47.592C264.688 48.296 264.752 49.384 264.752 50.856V84.456C264.752 85.928 264.688 87.048 264.56 87.816C264.496 88.52 264.24 89.352 263.792 90.312C262.896 91.976 260.688 92.808 257.168 92.808C253.712 92.808 251.376 92.392 250.16 91.56C249.008 90.664 248.336 89.384 248.144 87.72C245.776 91.112 241.808 92.808 236.24 92.808C230.736 92.808 225.616 90.28 220.88 85.224C216.144 80.168 213.776 74.312 213.776 67.656C213.776 60.936 216.144 55.08 220.88 50.088C225.68 45.032 230.928 42.504 236.624 42.504C238.8 42.504 240.784 42.888 242.576 43.656C244.368 44.424 245.616 45.16 246.32 45.864C247.024 46.504 247.6 47.144 248.048 47.784ZM230.576 67.752C230.576 69.864 231.408 71.784 233.072 73.512C234.736 75.176 236.752 76.008 239.12 76.008C241.488 76.008 243.44 75.144 244.976 73.416C246.576 71.688 247.376 69.8 247.376 67.752C247.376 65.64 246.608 63.688 245.072 61.896C243.6 60.104 241.584 59.208 239.024 59.208C236.528 59.208 234.48 60.104 232.88 61.896C231.344 63.688 230.576 65.64 230.576 67.752ZM339.021 43.56C342.349 45.544 344.013 47.656 344.013 49.896C344.013 51.176 343.373 52.936 342.093 55.176L322.221 89.256C321.581 90.344 320.557 91.336 319.149 92.232C317.741 93.064 316.333 93.48 314.925 93.48C313.581 93.48 312.269 93.16 310.989 92.52C309.773 91.816 308.909 91.112 308.397 90.408L307.533 89.352L287.565 55.176C286.285 53.064 285.645 51.336 285.645 49.992C285.645 47.688 287.309 45.544 290.637 43.56C293.069 42.152 294.989 41.448 296.397 41.448C297.805 41.448 298.893 41.896 299.661 42.792C300.493 43.624 301.357 44.904 302.253 46.632L314.829 70.824L327.405 46.632C328.109 45.416 328.621 44.552 328.941 44.04C329.325 43.464 329.901 42.92 330.669 42.408C331.437 41.832 332.461 41.544 333.741 41.544C335.021 41.544 336.781 42.216 339.021 43.56ZM344.944 50.856C344.944 49.384 344.976 48.296 345.04 47.592C345.168 46.824 345.456 45.96 345.904 45C346.8 43.336 349.296 42.504 353.392 42.504C356.464 42.504 358.64 43.048 359.92 44.136C361.008 45.032 361.584 46.408 361.648 48.264C361.712 48.904 361.744 49.832 361.744 51.048V84.648C361.744 86.12 361.68 87.24 361.552 88.008C361.488 88.712 361.2 89.544 360.688 90.504C359.856 92.168 357.392 93 353.296 93C349.264 93 346.8 92.136 345.904 90.408C345.456 89.448 345.168 88.616 345.04 87.912C344.976 87.208 344.944 86.088 344.944 84.552V50.856ZM360.688 33.096C360.24 33.992 359.408 34.632 358.192 35.016C356.976 35.4 355.344 35.592 353.296 35.592C351.312 35.592 349.712 35.4 348.496 35.016C347.28 34.632 346.416 33.96 345.904 33C345.456 32.04 345.168 31.208 345.04 30.504C344.976 29.736 344.944 28.616 344.944 27.144C344.944 25.672 344.976 24.584 345.04 23.88C345.168 23.112 345.456 22.28 345.904 21.384C346.8 19.656 349.296 18.792 353.392 18.792C357.424 18.792 359.856 19.656 360.688 21.384C361.2 22.344 361.488 23.208 361.552 23.976C361.68 24.68 361.744 25.768 361.744 27.24C361.744 28.712 361.68 29.832 361.552 30.6C361.488 31.304 361.2 32.136 360.688 33.096ZM398.981 21.384C399.493 20.424 400.357 19.752 401.573 19.368C402.789 18.984 404.389 18.792 406.373 18.792C408.421 18.792 410.053 18.984 411.269 19.368C412.485 19.752 413.317 20.424 413.765 21.384C414.277 22.344 414.565 23.208 414.629 23.976C414.757 24.68 414.821 25.768 414.821 27.24V84.552C414.821 86.024 414.757 87.144 414.629 87.912C414.565 88.616 414.277 89.416 413.765 90.312C412.805 92.04 410.085 92.904 405.605 92.904C401.189 92.904 398.725 91.336 398.213 88.2C395.525 91.272 391.781 92.808 386.981 92.808C381.221 92.808 375.973 90.312 371.237 85.32C366.501 80.264 364.133 74.408 364.133 67.752C364.133 61.032 366.501 55.144 371.237 50.088C376.037 45.032 381.285 42.504 386.981 42.504C391.717 42.504 395.397 44.104 398.021 47.304V27.144C398.021 25.672 398.053 24.584 398.117 23.88C398.245 23.112 398.533 22.28 398.981 21.384ZM383.429 73.512C385.093 75.24 387.109 76.104 389.477 76.104C391.845 76.104 393.797 75.24 395.333 73.512C396.933 71.784 397.733 69.896 397.733 67.848C397.733 65.736 396.965 63.784 395.429 61.992C393.957 60.2 391.941 59.304 389.381 59.304C386.821 59.304 384.773 60.2 383.237 61.992C381.701 63.72 380.933 65.64 380.933 67.752C380.933 69.864 381.765 71.784 383.429 73.512ZM466.915 61.704C466.915 65.608 465.923 68.52 463.939 70.44C462.019 72.296 459.875 73.224 457.507 73.224H434.755C434.755 75.016 435.811 76.52 437.923 77.736C440.035 78.952 442.147 79.56 444.259 79.56C447.971 79.56 450.883 79.176 452.995 78.408L454.051 78.024C455.587 77.32 456.867 76.968 457.891 76.968C459.939 76.968 461.699 78.408 463.171 81.288C464.003 83.016 464.419 84.488 464.419 85.704C464.419 91.4 457.603 94.248 443.971 94.248C439.235 94.248 435.011 93.448 431.299 91.848C427.651 90.184 424.803 88.008 422.755 85.32C418.723 80.136 416.707 74.344 416.707 67.944C416.707 59.88 419.299 53.448 424.483 48.648C429.731 43.784 436.259 41.352 444.067 41.352C452.963 41.352 459.491 44.488 463.651 50.76C465.827 54.088 466.915 57.736 466.915 61.704ZM446.659 64.488C449.091 64.488 450.307 63.464 450.307 61.416C450.307 59.944 449.731 58.76 448.579 57.864C447.491 56.968 445.891 56.52 443.779 56.52C441.731 56.52 439.683 57.384 437.635 59.112C435.587 60.776 434.563 62.568 434.563 64.488H446.659ZM467.419 67.752C467.419 60.072 470.107 53.736 475.483 48.744C480.859 43.752 487.003 41.256 493.915 41.256C500.827 41.256 506.939 43.752 512.251 48.744C517.563 53.672 520.219 59.976 520.219 67.656C520.219 72.968 518.843 77.704 516.091 81.864C513.339 85.96 509.979 89 506.011 90.984C502.107 92.904 498.043 93.864 493.819 93.864C489.595 93.864 485.499 92.84 481.531 90.792C477.563 88.68 474.203 85.608 471.451 81.576C468.763 77.48 467.419 72.872 467.419 67.752ZM487.483 74.664C489.531 76.2 491.611 76.968 493.723 76.968C495.835 76.968 497.947 76.168 500.059 74.568C502.171 72.968 503.227 70.6 503.227 67.464C503.227 64.328 502.235 61.992 500.251 60.456C498.267 58.92 496.123 58.152 493.819 58.152C491.515 58.152 489.371 58.952 487.387 60.552C485.403 62.152 484.411 64.52 484.411 67.656C484.411 70.728 485.435 73.064 487.483 74.664Z" fill="white"/></svg>',(o=document.createElement("a")).setAttribute("target","_blank"),o.setAttribute("class","panda-branding-link"),player_configs.refCode&&""!==player_configs.refCode?o.setAttribute("href","https://pandavideo.com.br/?ref="+player_configs.refCode):o.setAttribute("href","https://pandavideo.com.br/"),a=a.replace(/white/gm,"var(--plyr-video-control-color)"),o.innerHTML=a,Sc(o),kl=!0),"online"===jl&&(r=document.getElementsByClassName("plyr__controls")[0],(s=document.createElement("button")).setAttribute("id","live-time-indicator"),s.onclick=function(){window.postMessage({type:"currentTime",parameter:-1},"*")},s.innerHTML="<div></div> LIVE",r.insertBefore(s,r.childNodes[1])),Ql=!0,window.liveAttempts=0}var r,s,a,o,l,c,d,u,h,p,f,m},Al?Mc():Pc(),document.getElementsByTagName("head")[0],document.createElement("script").type="text/javascript");var zc=!1;function qc(){return Vc.apply(this,arguments)}function Vc(){return(Vc=rl(il().mark((function e(){var t,i,n,r,s,a;return il().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gc();case 3:return t=e.sent,i=document.querySelector("video"),n=i.getElementsByTagName("source")[0].src,El&&n.includes("token=")&&(r=n.split("token=")[1].split("&")[0],n=n.replace(r,rd())),window.player.pause(),(s=new chrome.cast.media.MediaInfo(n)).contentType="application/x-mpegurl",a=new chrome.cast.media.LoadRequest(s),e.next=13,t.loadMedia(a);case 13:Kc(window.player.currentTime),jc(),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function jc(){var e=new cast.framework.RemotePlayer,t=new cast.framework.RemotePlayerController(e);t.addEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,(function(e){"PLAYING"==e.value&&window.player.play(),"PAUSED"==e.value&&window.player.pause(),"currentTime"==e.field&&Math.abs(e.value-window.player.currentTime)>=5&&(window.player.currentTime=e.value),"isConnected"!=e.field||e.value||Yc()})),window.player.on("play",(function(){e.isPaused&&t.playOrPause()})),window.player.on("pause",(function(){!1===e.isPaused&&t.playOrPause()})),window.player.on("seeked",(function(){var t=window.player.currentTime;Math.abs(t-e.currentTime)>=5&&Kc(t)}))}function Kc(e){var t=new cast.framework.RemotePlayer,i=new cast.framework.RemotePlayerController(t);t.currentTime=e,i.seek()}function Yc(){var e=cast.framework.CastContext.getInstance().getCurrentSession();e&&e.endSession(!0);var t=document.getElementsByClassName("chromecast-btn");t&&(t[0].innerHTML='<svg viewBox="100 -900 800 800"><path d="M481-480Zm340 320H601q0-15-1-30t-3-30h224v-520H141v60q-15-2-30-3t-30-1v-56q0-24.75 17.625-42.375T141-800h680q24.75 0 42.375 17.625T881-740v520q0 24.75-17.625 42.375T821-160Zm-740 0v-104q41.667 0 70.833 30.333Q181-203.333 181-160H81Zm200 0q0-84.66-58-144.33Q165-364 81-364v-60q108.643 0 184.321 77.5Q341-269 341-160h-60Zm160 0q0-75-28-141.5t-77-116q-49-49.5-114.5-78T81-524v-60q87 0 163.5 33.5t133.5 91q57 57.5 90 135T501-160h-60Z" fill="'.concat(player_configs.controlsColor,'" /></svg>')),zc=!1,El&&window.location.reload()}function Wc(){if(player_configs.fbPixel&&player_configs.fbPixel.length){try{player_configs.fbPixel,function(e,t,i,n,r,s,a){e.fbq||(r=e.fbq=function(){r.callMethod?r.callMethod.apply(r,arguments):r.queue.push(arguments)},e._fbq||(e._fbq=r),r.push=r,r.loaded=!0,r.version="2.0",r.queue=[],(s=t.createElement(i)).async=!0,s.src="https://connect.facebook.net/en_US/fbevents.js",(a=t.getElementsByTagName(i)[0]).parentNode.insertBefore(s,a))}(window,document,"script")}catch(e){console.log("Error in fbp init",e)}var e,t=sl(player_configs.fbPixel);try{for(t.s();!(e=t.n()).done;){var i=e.value;try{i&&(fbq("init",i),fbq("track","PageView"))}catch(e){}}}catch(e){t.e(e)}finally{t.f()}}if(player_configs.gtagIds&&player_configs.gtagIds.length)try{!function(){if(!document.getElementById("gtag-script")){var e=document.createElement("script");e.id="gtag-script",e.src="https://www.googletagmanager.com/gtag/js?id="+player_configs.gtagIds[0],e.async=!0,document.head.appendChild(e)}window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date);var t,i=sl(player_configs.gtagIds);try{for(i.s();!(t=i.n()).done;){var n=t.value;gtag("config",n)}}catch(e){i.e(e)}finally{i.f()}gtag("event","page_view",{video_id:xl,library_id:"b-"+Sl})}()}catch(e){console.log("Error in gtag init",e)}var n,r=player_configs.customPixels.filter((function(e){return"view"===e.conditionType})),s=sl(r);try{for(s.s();!(n=s.n()).done;){var a=n.value,o=new Function(a.script);try{o()}catch(e){}}}catch(e){s.e(e)}finally{s.f()}}function Xc(){for(var e=0,t=Object.keys(player_configs);e<t.length;e++){var i=t[e],n=hl.searchParams.get(i);if(n){if("trialWarning"===i)continue;if("controls"===i){player_configs[i]=n.split(",");var r=player_configs.controls.findIndex((function(e){return"volume"===e}));-1!==r&&player_configs.controls.splice(r,0,"mute");var s=player_configs.controls.findIndex((function(e){return"current-time"===e}));-1!==s&&player_configs.controls.splice(s+1,0,"duration")}else"boolean"==typeof player_configs[i]?"true"!==n&&"false"!==n||(player_configs[i]="true"===n):"number"==typeof player_configs[i]?player_configs[i]=parseFloat(n):Array.isArray(player_configs[i])?player_configs[i]=n.split(","):player_configs[i]=n}}}function Qc(){var e=$l?"ios":"hlsjs",t=document.querySelector(".plyr__menu__container > div > div > div"),i=document.querySelector("video"),n=function(){if("hlsjs"===e)return window.hls.audioTracks;if("ios"===e){for(var t=[],n=0;n<i.audioTracks.length;n++)t.push({name:i.audioTracks[n].label,id:i.audioTracks[n].id,lang:i.audioTracks[n].language});return t}};if(!(n()<2)){var r=function(){if("hlsjs"===e)return-1===window.hls.audioTrack?window.hls.audioTracks[0]:window.hls.audioTracks[window.hls.audioTrack];if("ios"===e)for(var t=0;t<i.audioTracks.length;t++)if(i.audioTracks[t].enabled)return{name:i.audioTracks[t].label,id:i.audioTracks[t].id,lang:i.audioTracks[t].language}}(),s=document.createElement("button");s.setAttribute("data-plyr","settings"),s.setAttribute("type","button"),s.setAttribute("class","plyr__control plyr__control--forward"),s.setAttribute("role","menuitem"),s.setAttribute("aria-haspopup","true"),s.innerHTML='<span>Áudio<span class="plyr__menu__value">'.concat(r.name,"</span></span>"),s.onclick=function(){var e,t=sl(document.querySelector(".plyr__menu__container > div ").childNodes);try{for(t.s();!(e=t.n()).done;){var i=e.value;i.id.includes("audio")?i.removeAttribute("hidden"):i.setAttribute("hidden","")}}catch(e){t.e(e)}finally{t.f()}},t.insertBefore(s,t.childNodes[0]);var a=document.querySelector(".plyr__menu__container > div"),o=document.createElement("div");o.setAttribute("id","plyr-settings-audio"),o.setAttribute("hidden","");var l=document.createElement("button");l.setAttribute("type","button"),l.setAttribute("class","plyr__control plyr__control--back"),l.innerHTML='<span aria-hidden="true">Áudio</span><span class="plyr__sr-only">Voltar ao menu anterior</span>',l.onclick=function(){var e,t=sl(document.querySelector(".plyr__menu__container > div ").childNodes);try{for(t.s();!(e=t.n()).done;){var i=e.value;i.id.includes("home")?i.removeAttribute("hidden"):i.setAttribute("hidden","")}}catch(e){t.e(e)}finally{t.f()}};var c=document.createElement("div");c.setAttribute("role","menu");var d,u=sl(n());try{var h=function(){var t=d.value,n=document.createElement("button");n.setAttribute("data-plyr","language"),n.setAttribute("type","button"),n.setAttribute("role","menuitemradio"),n.setAttribute("class","plyr__control"),n.setAttribute("aria-checked",r.id===t.id),n.setAttribute("value",t.id),n.innerHTML="<span>".concat(t.name).concat("default"!==t.lang?'<span class="plyr__menu__value"><span class="plyr__badge">'.concat(t.lang.toUpperCase(),"</span></span>"):"","</span>"),n.onclick=function(){!function(t){if("hlsjs"===e)window.hls.audioTrack=t;else if("ios"===e)for(var n=0;n<i.audioTracks.length;n++)i.audioTracks[n].id===t?i.audioTracks[n].enabled=!0:i.audioTracks[n].enabled=!1}(t.id),s.innerHTML='<span>Áudio<span class="plyr__menu__value">'.concat(t.name,"</span></span>");var r,a=sl(document.querySelector("#plyr-settings-audio").querySelectorAll('button[data-plyr="language"]'));try{for(a.s();!(r=a.n()).done;)r.value.setAttribute("aria-checked",!1)}catch(e){a.e(e)}finally{a.f()}n.setAttribute("aria-checked",!0),l.click(),document.querySelector("button[data-plyr='settings']").click()},c.appendChild(n)};for(u.s();!(d=u.n()).done;)h()}catch(e){u.e(e)}finally{u.f()}o.appendChild(l),o.appendChild(c),a.appendChild(o)}}function Zc(e){try{if(0===e)window.hls.currentLevel=-1;else{if("online"===jl){var t=Yl.reverse().indexOf(e);t>=0&&(window.hls.currentLevel=t)}window.hls.levels.forEach((function(t,i){t.height===e&&(window.hls.currentLevel=i)}))}}catch(e){}_l&&!$l&&window.player&&(Vl=!0,window.player.pause(),Jc(!0))}function Jc(e){if(e){var t=document.querySelector(".loading-icon");t.style.opacity=.8;var i=document.querySelector(".plyr__control--overlaid");i&&hd(i,"disabled"),pd(t,"disabled")}else{var n=document.querySelector(".loading-icon"),r=document.querySelector(".plyr__control--overlaid");r&&pd(r,"disabled"),hd(n,"disabled")}}function ed(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recoverFromError:!1};t.recoverFromError&&window.hls&&window.hls.destroy();var i=new Rs(e),n=document.querySelector("video"),r=n.getElementsByTagName("source")[0].src;if(r.includes("token=")){var s=r.split("token=")[1].split("&")[0];r=r.replace(s,rd())}n.getElementsByTagName("source")[0].src=r,i.loadSource(r),i.attachMedia(n),i.on(Rs.Events.AUDIO_TRACKS_UPDATED,(function(){try{Qc()}catch(e){console.log("Error adding audio controls",e)}})),i.on(Rs.Events.MANIFEST_PARSED,(function(){try{Zc(JSON.parse(localStorage.getItem("plyr")).quality)}catch(e){}t.recoverFromError?(t.isPlaying&&n.play(),n.currentTime=t.currentTime,n.speed=t.speed,n.volume=t.volume):Nl||player_configs.autoplay&&(player_configs.smartAutoplay?(n.volume=1,n.play()):(n.volume=0,n.play()))})),i.on(Rs.Events.BUFFER_FLUSHED,(function(e,t){Jc(!0)})),i.on(Rs.Events.BUFFER_APPENDED,(function(){Vl||Jc(!1)})),i.on(Rs.Events.LEVEL_SWITCHED,(function(e,t){var n=document.querySelector(".plyr__controls [data-plyr='quality'][value='0'] span");if(null!=n)if(i.autoLevelEnabled){var r=i.levels[t.level].height;n.innerHTML="Auto ("+r+"p)"}else n.innerHTML="Auto";var s,a=sl(document.querySelectorAll(".plyr__controls [role='menuitem'] span.plyr__menu__value"));try{for(a.s();!(s=a.n()).done;){var o=s.value;if(o.innerHTML.includes("Auto")||"0p"===o.innerHTML)if(i.autoLevelEnabled){var l=i.levels[t.level].height;o.innerHTML="Auto ("+l+"p)"}else o.innerHTML="Auto"}}catch(e){a.e(e)}finally{a.f()}}));var a=function(){var e=i.streamController.levels.map((function(e){return e.height})),t=i.streamController.levels[i.streamController.level].height,n=e.sort((function(e,t){return t-e})).find((function(e){return e!==t}));Zc(n),window.player.quality=n},o=function(){var e=i.streamController.levels.map((function(e){return e.height})),t=i.streamController.levels[i.streamController.level].height,n=e.sort((function(e,t){return t-e})).find((function(e){return e<t}));n&&(console.log("Changing video quality to a lower one",n),Zc(n),window.player.quality=n)},l=0;i.on(Rs.Events.LEVEL_SWITCHING,(function(e,t){var n,r=sl(i.levels);try{for(r.s();!(n=r.n()).done;){var s=n.value;if(s&&s.uri&&s.uri.includes("token=")){var a=s.uri.split("token=")[1].split("&")[0],o=rd();s.url=[s.uri.replace(a,o)]}}}catch(e){r.e(e)}finally{r.f()}})),i.on(Rs.Events.ERROR,(function(t,s){if("hlsFragParsingMetadata"!=="".concat(s.event)||"internalException"!=="".concat(s.details))if(console.log("=> PANDA HLS ERROR DELECTED\nPRELOAD="+Nl+"\n",t,s),"bufferStalledError"==="".concat(s.details)&&Jc(!0),Al&&"levelLoadTimeout"==="".concat(s.details))ed(e,{recoverFromError:!0,currentTime:window.player.currentTime,speed:window.player.currentTime,volume:n.volume,isPlaying:!n.paused});else if(s.response&&404===s.response.code)_l||a();else if(s.response&&403===s.response.code&&l<3){if(3==++l)a(),l=0;else if(El&&r.includes("token=")){var c=r.split("token=")[1].split("&")[0],d=r.replace(c,rd());n.getElementsByTagName("source")[0].src=d}}else if(s.fatal)setTimeout((function(){if(El&&r.includes("token=")){var t=r.split("token=")[1].split("&")[0],i=r.replace(t,rd());n.getElementsByTagName("source")[0].src=i}ed(e,{recoverFromError:!0,currentTime:window.player.currentTime,speed:window.player.currentTime,volume:n.volume,isPlaying:!n.paused})}),1e3);else if("online"!==jl)if(!_l&&nd(i)&&vl.includes("".concat(s.details)))id(i);else{if(_l&&[Rs.ErrorDetails.BUFFER_STALLED_ERROR,Rs.ErrorDetails.BUFFER_NUDGE_ON_STALL].includes(s.details))return void o();[Rs.ErrorDetails.BUFFER_APPEND_ERROR,Rs.ErrorDetails.BUFFER_STALLED_ERROR,Rs.ErrorDetails.BUFFER_NUDGE_ON_STALL,Rs.ErrorDetails.BUFFER_FULL_ERROR].includes(s.details)?i.startLoad():[Rs.ErrorDetails.FRAG_LOAD_ERROR,Rs.ErrorDetails.FRAG_LOAD_TIMEOUT].includes(s.details)?o():(console.log("Recovering media error"),ed(e,{recoverFromError:!0,currentTime:window.player.currentTime,speed:window.player.currentTime,volume:window.player.volume,isPlaying:!n.paused}))}})),window.hls=i,-1==window.hls.currentLevel&&"online"!==jl&&"finished"!==jl&&"NOT_LIVE"!==jl&&(window.hls.currentLevel=2)}function td(){gl&&ed({abrEwmaDefaultEstimate:5e6,maxBufferLength:20,autoStartLoad:!0,fragLoadingTimeOut:15e3}),Il=!0}function id(e){var t=e.abrController.fragCurrent.url;bl=yl.find((function(e){return!t.includes(e)}));var i,n=sl(e.streamController.levels);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.details&&r.details.fragments){var s,a=sl(r.details.fragments);try{var o=function(){var e=s.value,t=e.url,i=yl.find((function(e){return t.includes(e)})),n=t.replace(i,bl);e.url=n};for(a.s();!(s=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}}}}catch(e){n.e(e)}finally{n.f()}console.log("Recovering to",yl.findIndex((function(e){return e===bl})))}function nd(e){try{var t,i=e.abrController.fragCurrent.url,n=yl.find((function(e){return i.includes(e)})),r=sl(e.streamController.levels);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(s.details&&s.details.fragments){var a,o=sl(s.details.fragments);try{for(o.s();!(a=o.n()).done;)if(!a.value.url.includes(n))return!0}catch(e){o.e(e)}finally{o.f()}}}}catch(e){r.e(e)}finally{r.f()}}catch(e){}return!1}function rd(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",i=0;i<64;i++){var n=Math.floor(Math.random()*e.length);t+=e.charAt(n)}return t}function sd(){return sd=rl(il().mark((function e(t){var i,n,r,s,a,o,l,c,d,u,h,p;return il().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=0,n=[],r=!1,s=!1,e.prev=4,a=-1===t.indexOf("?")?"?":"&",t+="".concat(a,"get_qualities=1"),e.next=9,fetch("".concat(t));case 9:if(401!==(o=e.sent).status){e.next=15;break}return l=o.headers.get("drm-group-id"),ql&&(l=ql),Uc(l),e.abrupt("return",!1);case 15:return e.next=17,o.text();case 17:c=e.sent,d=c.split("\n");try{u=d.filter((function(e){return e.startsWith("#EXTINF")})).map((function(e){return e.split(",")[1]})),h=u[0].split("|").reduce((function(e,t){var i=Zo(t.split(":"),2),n=i[0],r=i[1];return e[n]=r,e}),{}),h.drm&&(r="true"===h.drm,_l=r,Vl=!0),h.block_download&&(s="true"===h.block_download),h.duration&&(i=parseInt(h.duration)),h.percent_ts&&(Tl=100*parseInt(h.percent_ts))}catch(e){}p="",d.forEach((function(e){var i=e.match(/#EXT-X-STREAM-INF:.*RESOLUTION=\d+x(\d+)/);i&&i[1]?n.push(parseInt(i[1],10)):e.endsWith(".m3u8")&&!p&&(p=e.startsWith("http")?e:t.split("/").slice(0,-1).join("/")+"/"+e)})),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),console.error("Error getting m3u8:",e.t0);case 27:return e.abrupt("return",{block_download:s,drm:r,duration:i,m3u8Qualities:n});case 28:case"end":return e.stop()}}),e,null,[[4,24]])}))),sd.apply(this,arguments)}var ad=0;function od(){var e=document.querySelector("video"),t=null,i=e.getElementsByTagName("source")[0].src;function n(i){uc.quality=gl?{default:0,options:i,forced:!0,onChange:function(e){Zc(e)}}:{default:480,options:[240,320,480,720],forced:!0,onChange:function(e){Zc(e)}},pandatag("setupPlayer",(function(i){player_configs.disableSeeking?i.listeners={seek:function(e){return e.preventDefault(),!1}}:_l&&!$l&&(i.listeners={seek:function(e){return Vl=!0,window.player.pause(),Jc(!0),!0}}),t=new(Ps())(e,i),player_configs.iosFakeFullscreen&&$l&&t.eventListeners.forEach((function(e){"dblclick"===e.type&&e.element.removeEventListener(e.type,e.callback,e.options)})),hd(document.getElementsByClassName("loading-icon")[0],"disabled"),window.player=t,function(){try{var i=document.getElementsByTagName("video")[0];i.addEventListener("webkitbeginfullscreen",(function(){hd(document.querySelector("div.plyr"),"fullscreen")}),!1),i.addEventListener("webkitendfullscreen",(function(){pd(document.querySelector("div.plyr"),"fullscreen")}),!1)}catch(e){}var n=["progress","ready","play","pause","timeupdate","seeking","seeked","ended","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","canplay","error"],r={};n.forEach((function(e){t.on(e,(function(){var i=(new Date).getTime();(!r[e]||i-r[e]>30)&&(r[e]=i,window.parent.postMessage({message:"panda_"+e,video:xl,currentTime:t.currentTime,isMutedIndicator:!(!player_configs.mutedIndicatorIcon||Jl)},"*"))}))})),Cl&&window.parent.postMessage({message:"panda_ready_comparison",video:Cl,video_external_id:xl},"*");var s=0;_l&&!$l&&setInterval((function(){window.hls.mainForwardBufferInfo&&window.hls.mainForwardBufferInfo.len!==s&&(s=window.hls.mainForwardBufferInfo.len);var e=t.duration-t.currentTime,i=3;if(Tl){var n=Math.floor(Tl/10);(i=n>i?n:i)>8&&(i=8)}(s>20||e<4*i&&t.duration>0)&&Vl&&(Jl&&t.play(),Vl=!1,Jc(!1))}),500),_l&&!$l&&t.on("play",(function(){Vl&&(t.pause(),Jc(!0))})),(player_configs.playOpensFullscreen||player_configs.playOpensFullscreenNative)&&(t.on("play",(function(){player_configs.mutedIndicatorIcon&&!Jl||(player_configs.playOpensFullscreenNative?t.fullscreen.enter():window.parent.postMessage({message:"panda_open_window_fullscreen",video:xl},"*"))})),t.on("pause",(function(){player_configs.playOpensFullscreenNative?t.fullscreen.exit():window.parent.postMessage({message:"panda_close_window_fullscreen",video:xl},"*")}))),player_configs.disablePause&&t.on("pause",(function(){t.duration!==t.currentTime&&t.play().catch((function(){}))}));var a=t.speed;function o(e){t.currentTime=e}function l(){if(!player_configs.mutedIndicatorIcon||Jl){var e=parseInt(t.currentTime.toFixed(0)),i=player_configs.ctas.find((function(t){return!document.getElementById(t.id)&&t.time<=e&&t.time+t.duration>=e&&"video"===t.type}));if(i){var n,r,s=document.getElementsByClassName("plyr--html5")[0],a=(document.getElementsByClassName("plyr__controls"),document.createElement("div"));a.onmouseenter=function(){var e=document.getElementsByClassName("plyr--hide-controls");e&&e[0]&&pd(e[0],"plyr--hide-controls")},a.id=i.id,hd(a,"cta-overlay"),hd(a,"cta-element");var o=document.createElement("iframe");if(null!=i&&null!==(n=i.metadata)&&void 0!==n&&n.isMiniTrigger&&(a.style.opacity=0,a.style.transition="opacity ".concat(i.metadata.fadeConfigs.fadeInMs,"ms")),null!=i&&null!==(r=i.metadata)&&void 0!==r&&r.selectedButtonSize&&(a.style.zIndex=3),i.height&&i.width){var l=function(){var e=window.innerWidth,t=window.innerHeight,n={topLeft:function(){o.style.top="30px",o.style.left="30px"},topCenter:function(){var t=parseInt(o.style.width.replace("px",""),10);o.style.top="30px",o.style.left=e/2-t/2+"px"},topRight:function(){o.style.top="30px",o.style.right="30px"},midLeft:function(){var e=parseInt(o.style.height.replace("px",""),10);o.style.top=t/2-e/2+"px",o.style.left="30px"},midCenter:function(){var i=parseInt(o.style.height.replace("px",""),10),n=parseInt(o.style.width.replace("px",""),10);o.style.top=t/2-i/2+"px",o.style.left=e/2-n/2+"px"},midRight:function(){var e=parseInt(o.style.height.replace("px",""),10);o.style.top=t/2-e/2+"px",o.style.right="30px"},bottomLeft:function(){o.style.bottom="70px",o.style.left="30px"},bottomCenter:function(){o.style.bottom="70px";var t=parseInt(o.style.width.replace("px",""),10);o.style.left=e/2-t/2+"px"},bottomRight:function(){o.style.bottom="70px",o.style.right="30px"}};e>=450&&(o.style.height=i.height.large+"px",o.style.width=i.width.large+"px"),e<450&&e>300&&(o.style.height=i.height.medium+"px",o.style.width=i.width.medium+"px"),e<=300&&(o.style.height=i.height.small+"px",o.style.width=i.width.small+"px"),i.position&&n[i.position]()};o.style.position="absolute",o.style.zIndex=999,l(),window.onresize=l}if(o.id="".concat(i.id,"_iframe"),o.onload=function(){wc(o.contentWindow.document.body);var e=document.getElementById("".concat(i.id,"_iframe")),t=/<script>(.|\n)*?<\/script>/gm,n=i.script.match(t),r=i.script.replace(t,"");if(n&&n.length){var s=n[0].replace("<script>","").replace("<\/script>",""),a=document.createElement("script");a.type="text/javascript",a.innerHTML=s,e.contentWindow.document.body.innerHTML="".concat(r),e.contentWindow.document.body.appendChild(a)}else e.contentWindow.document.body.innerHTML="".concat(r);e.contentWindow.document.body.style="padding:0;margin:0"},a.appendChild(o),i.skipButton){var c=document.createElement("button");c.innerHTML="Continuar assistindo",hd(c,"cta-skip-button"),c.onclick=function(){window.postMessage({type:"play"},"*")},a.appendChild(c)}s.appendChild(a),a.style.opacity=1}var d=player_configs.ctas.find((function(t){return!!document.getElementById(t.id)&&(t.time+t.duration<e||t.time>e)}));if(d){var u,h=document.getElementById(d.id);h&&(null!=d&&null!==(u=d.metadata)&&void 0!==u&&u.isMiniTrigger?(h.style.transition="opacity ".concat(d.metadata.fadeConfigs.fadeOutMs,"ms"),h.style.opacity=0,setTimeout((function(){h.remove()}),d.metadata.fadeConfigs.fadeOutMs)):h.remove())}}}function c(){"http"===player_configs.endThumbnail.substr(0,4)&&(player_configs.ctas=player_configs.ctas.filter((function(e){return"end"!==e.type})),player_configs.ctas.push({type:"end",id:"endThumb",script:"<img src='".concat(player_configs.endThumbnail,"' style='object-fit:cover; width:100%; height:100%;'><script>document.querySelector('img').onclick=function() { window.parent.postMessage({type: 'cta_play',}, '*') }</scr")+"ipt>"})),"http"===player_configs.pauseThumbnail.substr(0,4)&&(player_configs.ctas||(player_configs.ctas=[]),player_configs.ctas=player_configs.ctas.filter((function(e){return"pause"!==e.type})),player_configs.ctas.push({type:"pause",id:"pauseThumb",script:"<img src='".concat(player_configs.pauseThumbnail,"' style='object-fit:cover; width:100%; height:100%;'><script>document.querySelector('img').onclick=function() { window.parent.postMessage({type: 'cta_play',}, '*') }</scri")+"pt>"})),player_configs.ctas&&player_configs.ctas.length>0&&(t.on("play",(function(){var e=document.getElementById("end-cta");e&&hd(e,"disabled");var t,i=sl(document.getElementsByClassName("pause-cta"));try{for(i.s();!(t=i.n()).done;)hd(t.value,"disabled")}catch(e){i.e(e)}finally{i.f()}})),t.on("pause",(function(){var e=parseInt(t.currentTime,10),i=parseInt(t.duration,10);if(!t.seeking&&e!==i){var n=player_configs.ctas.find((function(t){return"pause"===t.type&&(void 0===t.startTime||void 0===t.endTime||t.startTime<e&&t.endTime>e)}));if(!n)return;var r=document.getElementById(n.id);r&&pd(r,"disabled")}})),t.on("ended",(function(){window.onEnd&&window.onEnd()})),t.on("timeupdate",l))}function d(){var e=parseInt(t.currentTime.toFixed(0),10);if(parseInt(t.duration.toFixed(0),10)-e>30){var i=document.getElementById("live-time-indicator");i&&hd(i,"not-realtime"),h=!1}else{h=!0;var n=document.querySelector(".plyr__progress input");n&&(hd(n,"hide-slyder-badge"),n.style="--value: 100%;"),pd(document.getElementById("live-time-indicator"),"not-realtime")}if(!h){var r=document.querySelector(".plyr__progress input");r&&pd(r,"hide-slyder-badge")}}if(setInterval((function(){t.speed!==a&&(a=t.speed,v(),window.parent.postMessage({message:"panda_speed_update",video:xl,speed:t.speed},"*"))}),50),t.on("timeupdate",(function(e){var i=parseInt(t.currentTime,10);i%5==wl%5&&wl!==i&&ld({}),t.currentTime>0&&ic.length&&(ic.forEach((function(e){"currentTime"===e.type&&t.playing&&(t.currentTime=e.value)})),ic=[])})),t.on("play",(function(){ic.length&&(ic.forEach((function(e){"currentTime"===e.type&&t.playing&&(t.currentTime=e.value)})),ic=[])})),player_configs.restartAfterEnd&&(player_configs.onlyLoopMuted?t.muted&&t.on("ended",(function(){o(0),t.play().catch((function(){}))})):t.on("ended",(function(){o(0),t.play().catch((function(){}))}))),c(),player_configs.alternativeProgress&&t.on("timeupdate",(function(){var e,i=parseFloat(t.currentTime.toFixed(3),10),n=parseFloat(t.duration.toFixed(3),10),r=document.querySelector(".alternative-progress");if(player_configs.alternativeProgressDefaultVelocity){var s=i/n;e=100*Math.sqrt(1-(s-=1)*s)}else{var a=player_configs.alternativeProgress2xLimit,o=player_configs.alternativeProgressVelocity,l=a/100/o;e=i<n*l?(e=100*i/n*o).toFixed(2):a+(i-n*l)*(100-a)/(n*(1-l))}r&&e&&(r.style="--value-progress: "+e+"%;"),player_configs.alternativeProgressHeight&&r&&(r.style="--value-progress: "+e+"%;height: "+player_configs.alternativeProgressHeight+"px;")})),"boolean"==typeof player_configs.hideControlsOnStart&&player_configs.hideControlsOnStart||"string"==typeof player_configs.hideControlsOnStart&&"true"==player_configs.hideControlsOnStart.toLowerCase()){var u=document.querySelector(".plyr__controls");u&&hd(u,"disabled"),t.on("play",(function(e){var t=document.querySelector(".plyr__controls");t&&pd(t,"disabled")}))}Al&&"online"===jl&&(t.on("timeupdate",d),t.on("seeking",(function(){pd(document.querySelector(".plyr__progress input"),"hide-slyder-badge"),d()})),t.on("seeked",(function(){var e=parseInt(t.currentTime.toFixed(0),10),i=parseInt(t.duration.toFixed(0),10);i-e>10&&i-e<30&&window.postMessage({type:"currentTime",parameter:-1},"*")}))),player_configs.saveProgress&&t.on("timeupdate",(function(){var e=parseInt(t.currentTime.toFixed(0),10),i=parseInt(t.duration.toFixed(0),10);if(0!=e&&Jl)if(100*e/i>90)try{localStorage.removeItem("panda_video:"+xl)}catch(e){}else try{localStorage.setItem("panda_video:"+xl,e)}catch(e){}}));var h=!0,p=0,f=[],m=[];function g(i){if(player_configs.saveProgressScreen){var n=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');player_configs.autoplay?(t.muted=!0,t.play()):(t.pause(),hd(n,"disabled")),e.style.visibility="hidden";var r=document.querySelector(".container"),s=document.createElement("div");hd(s,"panda-resume-screen-wrapper"),s.style="opacity: "+player_configs.saveProgressBackgroundOpacity+";";var a=document.createElement("p");a.innerText=player_configs.saveProgressTitle;var o=document.createElement("div");hd(o,"panda-resume-screen-buttons");var l=document.createElement("button");l.innerHTML='<svg viewBox="0 0 24 24">\n                                  <path fill="var(--plyr-video-control-color)" d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z" />\n                              </svg><span>'+player_configs.saveProgressButton1Title+"</span>",l.onclick=function(){Nl?(t.currentTime=i-1,d()):(window.onLoadVideoWithoutPreload||(window.onLoadVideoWithoutPreload=[]),window.onLoadVideoWithoutPreload.push((function(){t.currentTime=i,d()})),window.onLoadVideoWithoutPreload.forEach((function(e){return e()}))),cd({})};var c=document.createElement("button");c.innerHTML='<svg viewBox="0 0 24 24">\n                                  <path fill="var(--plyr-video-control-color)" d="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z" />\n                              </svg><span>'+player_configs.saveProgressButton2Title+"<span>",c.onclick=function(){t.currentTime=0,d()},o.appendChild(l),o.appendChild(c),s.appendChild(a),s.appendChild(o),r.appendChild(s)}function d(){var i;setTimeout((function(){try{try{t.play().catch((function(){})),Jl=!0}catch(e){}}catch(e){}}),0),pd(n,"disabled"),(i=document.getElementById("wrapper-progress"))&&pd(i,"disabled"),hd(s,"disabled"),e.style.visibility="visible",t.volume=1,cd({})}}t.on("timeupdate",(function(){var e=parseInt(t.currentTime.toFixed(0),10),i=parseInt(t.duration.toFixed(0),10);if("online"===jl&&Kl&&!h&&window.pb.updateLengthForLiveStream(i),0!==e&&!1===t.muted){var n=parseInt(100*e/i,10);if(!f.includes(n)){var r,s=player_configs.customPixels.filter((function(e){return"percentage"===e.conditionType&&e.conditionValue===n})),a=sl(s);try{for(a.s();!(r=a.n()).done;){var o=r.value,l=new Function(o.script);try{l()}catch(e){}}}catch(e){a.e(e)}finally{a.f()}f.push(n)}if(!m.includes(e)){var c,d=player_configs.customPixels.filter((function(t){return"absolute"===t.conditionType&&t.conditionValue===e})),u=sl(d);try{for(u.s();!(c=u.n()).done;){var g=c.value,y=new Function(g.script);try{y()}catch(e){}}}catch(e){u.e(e)}finally{u.f()}m.push(e)}if(n%10!=0||n===p)return;if(p=n,player_configs.fbPixel.length>0)try{fbq("track","pandavideo_watchtime",{percent:n,video_id:xl,library_id:"b-"+Sl,duration:i,current_time:e})}catch(e){}if(player_configs.gtagIds.length>0)try{gtag("event","pandavideo_watchtime",{percent:n,video_id:xl,library_id:"b-"+Sl,duration:i,current_time:e})}catch(e){}}})),t.once("play",(function(e){if(!player_configs.autoplay){try{player_configs.controls.includes("volume")||(t.volume=1),cd({})}catch(e){}Jl=!0}var i=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');if(i&&pd(i,"disabled"),hd(document.getElementsByClassName("loading-icon")[0],"disabled"),hd(document.querySelector("div.plyr__poster"),"disabled"),player_configs.initSubtitle){var n=document.querySelector(".plyr__controls");n&&pd(n,"disabled")}Nl||Il||td()})),t.once("canplay",(function(){var i;$l&&Qc();try{i=localStorage.getItem("panda_video:"+xl)}catch(e){}t.speed=player_configs.defaultSpeed,i&&player_configs.saveProgressScreen||!player_configs.autoplay||Jl?(t.volume<.5||t.muted)&&(t.muted=!1,t.volume=1):player_configs.smartAutoplay?(t.muted=!1,t.volume=1,t.play().then((function(){Cc(),Lc()})).catch((function(e){"NotAllowedError"===e.name&&(t.muted=!0,t.play())})),e.autoplay=""):(t.muted=!0,t.play()),player_configs.saveProgressScreen&&i&&player_configs.autoplay?(t.muted=!0,t.play()):player_configs.saveProgressScreen&&i&&!player_configs.autoplay?t.pause():i&&player_configs.saveProgress&&o(parseInt(i)),hl.searchParams.get("startTime")&&o(parseInt(hl.searchParams.get("startTime"),10)),Nl||window.onLoadVideoWithoutPreload&&window.onLoadVideoWithoutPreload.forEach((function(e){return e()}))})),t.on("ready",(function(i){if(function(){!function(){try{var e=document.getElementById("copy-paste");e&&e.remove()}catch(e){}}();try{var e=document.createElement("div");e.id="report-problem-dialog",e.innerHTML='<div id="copy-paste" class="disabled"><header> <p class="report-problem-text">'.concat(sc[nc].reportModalTitle,'</p></header> <div id="report-first-step"> <section id="radio-section"> <div> <input type="radio" id="report-not-loading" name="issue-reported" value="report-not-loading" checked> <label for="report-not-loading">').concat(sc[nc].reportModalOption1,'</label><br></div><div> <input type="radio" id="report-unmatch-description" name="issue-reported" value="report-unmatch-description"> <label for="report-unmatch-description">').concat(sc[nc].reportModalOption2,'</label> </div><div> <input type="radio" id="report-low-quality" name="issue-reported" value="report-low-quality"> <label for="report-low-quality">').concat(sc[nc].reportModalOption3,'</label> </div><div> <input type="radio" id="report-other" name="issue-reported" value="report-other"> <label for="report-other">').concat(sc[nc].reportModalOption4,'</label><br></div><div class="report-textfield-card"> <div id="other-input-wrapper" class="disabled"> <input class="other-input" type="text" id="other-input" name="other" placeholder="').concat(sc[nc].reportModalField,'"> </div></div></section> <footer> <button id="report-second-step-btn" class="report-problem-dialog-button">').concat(sc[nc].reportModalAction1,'</button> <button id="report-close-dialog-btn" class="report-problem-dialog-button">').concat(sc[nc].reportModalAction2,'</button> </footer> </div><div id="report-second-step" class="disabled"> <div id="loading-div"> <svg viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve"> <path fill="#4874F1" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"> <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite"/> </path> </svg> </div><p id="second-step-text">').concat(sc[nc].reportModalText1," <br/> ").concat(sc[nc].reportModalText2,'</p></div><div id="report-third-step" class="disabled ').concat(kl?"":"alone",'"> <header> ').concat(kl?'<img id="panda-last-step-img" src="./icons/pandacheck.svg"/>':"",' </header> <p class="report-problem-text">').concat(sc[nc].reportModalText3,'</p><footer> <button id="report-ok-btn" class="report-problem-dialog-button">OK</button> </footer> </div></div>'),document.getElementById("video-container").insertAdjacentElement("afterbegin",e)}catch(e){}!function(){try{var e=document.getElementsByClassName("plyr__control plyr__control--forward")[0].parentElement,t=document.createElement("button"),i=window.getComputedStyle(document.body,null).getPropertyValue("--plyr-color-main");t.textContent=sc[nc].reportModalTitle,t.classList.add("customSettingsBtn"),t.id="custom-plyr-btn",t.setAttribute("data-plyr","settings"),t.setAttribute("type","button"),t.setAttribute("role","menuitem"),t.setAttribute("aria-haspopup","true"),e.appendChild(t),document.getElementById("custom-plyr-btn").addEventListener("click",(function(){gc(),document.getElementsByClassName("plyr__controls__item plyr__menu")[0].click()})),t.onmouseover=function(){t.style.backgroundColor=i},t.onmouseleave=function(){t.style.removeProperty("background-color")};var n=document.getElementById("video-container"),r=document.querySelector(".plyr__menu button");n&&(n.onclick=function(e){if(r){var t=document.getElementsByClassName("plyr__controls")[0];try{pd(t,"plyr-controls-fix-index")}catch(e){}}}),r&&(r.onclick=function(){var e=document.getElementsByClassName("plyr__controls")[0];e&&("true"===r.getAttribute("aria-expanded")?hd(e,"plyr-controls-fix-index"):pd(e,"plyr-controls-fix-index"))})}catch(e){}}()}(),t.media.load(),player_configs.ctas.length>0&&l(),player_configs.saveProgress){var n;try{n=localStorage.getItem("panda_video:"+xl)}catch(e){}player_configs.saveProgressScreen&&n?"online"!==jl&&g(parseInt(n,10)):player_configs.mutedIndicatorIcon&&Dc()}var r,s,a;player_configs.captionsFontSize&&(r=Number(player_configs.captionsFontSize),s="\n        .plyr__captions {\n            font-size: ".concat(r,"px;\n        }\n\n        @media (min-width: 480px) {\n            .plyr__captions {\n                font-size: ").concat(r>34?r-8:r,"px;\n            }\n        }\n\n        @media (max-width: 480px) {\n            .plyr__captions {\n                font-size: ").concat(r>=26?r-12:r,"px;\n            }\n        }\n\n        @media (max-width: 460px) {\n            .plyr__captions {\n                font-size: 14px;\n            }\n        }\n\n        @media (min-width: 768px) {\n            .plyr__captions {\n                font-size: ").concat(r+3,"px;\n            }\n        }\n\n        @media (min-width: 1024px) {\n            .plyr:-webkit-full-screen .plyr__captions, .plyr:fullscreen .plyr__captions, .plyr__captions {\n                font-size: ").concat(r+6,"px;\n            }\n        }\n    "),(a=document.createElement("style")).innerText=s,document.head.appendChild(a)),player_configs.defaultSubtitle&&(window.player.toggleCaptions(!0),window.player.language=player_configs.defaultSubtitle.toLowerCase().replace("-","")),e.style.visibility="visible",Nl&&gl&&ed({abrEwmaDefaultEstimate:5e6,maxBufferLength:20,autoStartLoad:!0,fragLoadingTimeOut:15e3}),Al&&setInterval((function(){fetch("https://hit-realtime.pandavideo.com/icon.gif?u="+mc+"&v="+xl)}),5e3)}));var y=!1;function v(){var e;try{e=localStorage.getItem("panda_video:"+xl)}catch(e){}var i=t.currentTime;e&&0===i&&(i=parseFloat(e));var n=Wl.style.getPropertyValue("--plyr-color-main"),r=Wl.style.getPropertyValue("--plyr-captions-text-color"),s=Wl.style.getPropertyValue("--plyr-captions-background"),a=Wl.style.getPropertyValue("--plyr-video-control-color"),o=Wl.style.getPropertyValue("--plyr-menu-color"),l=y?t.duration:0,c={paused:t.paused,hasAudio:t.hasAudio,muted:t.muted,pip:t.pip,volume:t.volume,speed:t.config.speed,captions:t.captions,currentTime:i,duration:l,fullscreen:t.fullscreen.active,colors:{primaryColor:n,captionsColor:r,captionsBackgroundColor:s,controlsColor:a,menuColor:o}};window.parent.postMessage({message:"panda_allData",video:hl.searchParams.get("v"),playerData:JSON.parse(JSON.stringify(c))},"*")}t.on("loadedmetadata",(function(e){y=!0})),n.forEach((function(e){t.on(e,v)})),window.onmessage=function(e){var i=e.data,n=document.querySelector(":root");if("currentTime"!==i.type){if("muted_indicator_play"===i.type&&Cc(),"cta_play"===i.type&&t.play().catch((function(){})),"volume"===i.type)return t.volume=i.parameter,void(!Jl&&i.parameter>0&&cd({}));if("speed"!==i.type)if("play_toggle"!==i.type){if("colors"===i.type){var r=i.parameter.colors;return r.primaryColor&&n.style.setProperty("--plyr-color-main",r.primaryColor),r.captionsColor&&n.style.setProperty("--plyr-captions-text-color",r.captionsColor),r.captionsBackgroundColor&&n.style.setProperty("--plyr-captions-background",r.captionsBackgroundColor),r.controlsColor&&(n.style.setProperty("--plyr-video-control-color",r.controlsColor),n.style.setProperty("--plyr-video-control-color-hover",r.controlsColor)),r.menuColor&&n.style.setProperty("--plyr-menu-color",r.menuColor),r.mutedIndicatorBackgroundColor&&n.style.setProperty("--muted-indicator-background",r.mutedIndicatorBackgroundColor),void(r.mutedIndicatorTextColor&&n.style.setProperty("--muted-indicator-text",r.mutedIndicatorTextColor))}if("ctas"===i.type){var s=i.parameter.ctas;return Oc(),0===player_configs.ctas.length?(player_configs.ctas=s,Fc(),Nc(),c()):(player_configs.ctas=s,Nc(),Fc()),void l()}if("remove_cta"===i.type){var a=i.parameter,d=document.getElementById(a);player_configs.ctas=player_configs.ctas.filter((function(e){return e.id!==a})),d&&d.remove()}if("custom_muted_indicator"===i.type&&(player_configs.customMutedIndicatorData=i.parameter,player_configs.mutedIndicatorAnimation="custom",Rc()),"disable_control"===i.type){var u=i.parameter;("play"===u?document.querySelector('[data-plyr="play"]:not(.plyr__control--overlaid'):"play-large"===u?document.querySelector('[data-plyr="play"].plyr__control--overlaid'):document.querySelector('[data-plyr="'.concat(u,'"]'))).style.display="none"}if("enable_control"===i.type){var h=i.parameter;"play"===h?document.querySelector('[data-plyr="play"]:not(.plyr__control--overlaid').style.display="":"play-large"===h?document.querySelector('[data-plyr="play"].plyr__control--overlaid').style.display="flex":document.querySelector('[data-plyr="'.concat(h,'"]')).style.display=""}if("enable_all_controls"===i.type){var p=document.querySelector('[data-plyr="play"].plyr__control--overlaid');p&&(p.style.display="flex");var f=document.querySelector(".plyr__controls");f&&pd(f,"disabled");var m=document.getElementById("wrapper-progress");m&&pd(m,"disabled")}if("disable_all_controls"===i.type){var g=document.querySelector('[data-plyr="play"].plyr__control--overlaid');g&&(g.style.display="none");var y=document.querySelector(".plyr__controls");y&&hd(y,"disabled")}if("bookMarks"===i.type){var v=i.parameter.bookMarks;return player_configs.bookMarks=v,void Bc()}"fullscreen.toggle"!==i.type?"fullscreen.exit"!==i.type?null!=i.parameter?t[i.type]&&t[i.type](i.parameter):t[i.type]&&t[i.type]():t.fullscreen.exit():t.fullscreen.toggle()}else t.paused?t.play().catch((function(){})):t.pause();else t.speed=i.parameter}else-1===i.parameter?o(t.duration-2):o(i.parameter)}}()})),pandatag("playerLoaded",!0)}gl&&Fl?function(e){return sd.apply(this,arguments)}(i).then((function(e){if(e){var t=Math.ceil(e.duration/2);e.block_download&&gl&&(El=!0,document.querySelector("video").getElementsByTagName("source")[0].src+=i.includes("?")?"&":"?token="+rd());for(var r=[],s=0;s<t;s+=36)r.push("https://b-"+Sl+".tv.pandavideo.com.br/"+xl+"/seek/_"+r.length+".jpg");window.player_configs.showPreviewThumbs&&!Al&&(uc.thumbnail={enabled:!0,pic_num:t,width:300,height:168,col:6,row:6,offsetX:0,offsetY:0,urls:r}),e.m3u8Qualities.length>1?n([0].concat(function(e){if(Array.isArray(e))return ol(e)}(a=e.m3u8Qualities.sort((function(e,t){return t-e})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||al(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):n(e.m3u8Qualities)}var a})).catch((function(e){console.error("Error:",e),++ad<=3?setTimeout((function(){od()}),100):n()})):n()}function ld(e){var t=e.force,i=e.time,n=parseInt(player.currentTime,10);void 0!==i&&(n=i),(t||!player.muted&&Jl&&!player.paused&&!Pl&&"online"!==jl)&&(navigator.sendBeacon(ec+"/icon.gif?type=check&v="+xl+"&u="+mc+"&p="+Sl+"&current_time="+n+"&referrer="+encodeURIComponent(document.referrer)+"&visibily="+!document[ll]),wl=n)}function cd(e){var t=e.mutedIndicator;if(!Pl&&!Rl){try{navigator.sendBeacon(ec+"/icon.gif?type=play&v="+xl+"&u="+mc+"&p="+Sl+"&referrer="+encodeURIComponent(document.referrer)+"&visibily="+!document[ll])}catch(e){}try{gtag("event","play",{video_id:xl,library_id:"b-"+Sl})}catch(e){}try{fbq("track","play",{video_id:xl,library_id:"b-"+Sl})}catch(e){}var i,n=player_configs.customPixels.filter((function(e){return"play"===e.conditionType})),r=sl(n);try{for(r.s();!(i=r.n()).done;){var s=i.value,a=new Function(s.script);try{a()}catch(e){}}}catch(e){r.e(e)}finally{r.f()}ld({force:!0,time:t?0:void 0}),Rl=!0}}function dd(){var e=document.getElementById("body"),t=document.getElementById("video-container"),i=t.offsetHeight,n=e.offsetHeight;t.style.marginTop=(n-i)/2+"px"}function ud(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function hd(e,t){e&&(ud(e,t)||(e.className+=" "+t))}function pd(e,t){if(e&&ud(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}}dd(),window.addEventListener("resize",dd),document.onkeydown=function(e){27==(e=e||window.event).keyCode&&(player_configs.playOpensFullscreen?window.parent.postMessage({message:"panda_close_window_fullscreen",video:xl},"*"):player_configs.playOpensFullscreenNative&&window.postMessage({type:"fullscreen.exit"},"*"))}})()})();</script>
        <div class="container" id="video-container" style="margin-top: 0px;"><div id="report-problem-dialog"><div id="copy-paste" class="disabled"><header> <p class="report-problem-text">Reportar erro</p></header> <div id="report-first-step"> <section id="radio-section"> <div> <input type="radio" id="report-not-loading" name="issue-reported" value="report-not-loading" checked=""> <label for="report-not-loading">O vídeo não carrega, mesmo com boa conexão de internet</label><br></div><div> <input type="radio" id="report-unmatch-description" name="issue-reported" value="report-unmatch-description"> <label for="report-unmatch-description">O conteúdo do vídeo não corresponde com a descrição</label> </div><div> <input type="radio" id="report-low-quality" name="issue-reported" value="report-low-quality"> <label for="report-low-quality">O vídeo está em baixa qualidade ou pixelado</label> </div><div> <input type="radio" id="report-other" name="issue-reported" value="report-other"> <label for="report-other">Outro</label><br></div><div class="report-textfield-card"> <div id="other-input-wrapper" class="disabled"> <input class="other-input" type="text" id="other-input" name="other" placeholder="Descreva seu problema..."> </div></div></section> <footer> <button id="report-second-step-btn" class="report-problem-dialog-button">Enviar</button> <button id="report-close-dialog-btn" class="report-problem-dialog-button">Cancelar</button> </footer> </div><div id="report-second-step" class="disabled"> <div id="loading-div"> <svg viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve"> <path fill="#4874F1" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"> <animatetransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite"></animatetransform> </path> </svg> </div><p id="second-step-text">Aguarde um momento, seu feedback <br> está sendo enviado.</p></div><div id="report-third-step" class="disabled alone"> <header>  </header> <p class="report-problem-text">Obrigado por nos ajudar a melhorar!</p><footer> <button id="report-ok-btn" class="report-problem-dialog-button">OK</button> </footer> </div></div></div>
            <div tabindex="0" class="plyr plyr--full-ui plyr--video plyr--html5 plyr--fullscreen-enabled plyr--pip-supported plyr__poster-enabled plyr--paused"><div class="plyr__controls"><button class="plyr__controls__item plyr__control" type="button" data-plyr="rewind" aria-pressed="false">
              <svg style="width:24px;height:24px" viewBox="0 0 50 50">
                  <path fill="currentColor" d="M 7.984375 1.9863281 A 1.0001 1.0001 0 0 0 7 3 L 7 13 L 17 13 A 1.0001 1.0001 0 1 0 17 11 L 10.761719 11 C 14.363419 7.3233218 19.405802 5.0234375 25 5.0234375 C 36.109434 5.0234375 45 13.914004 45 25.023438 C 45 36.13287 36.109434 45.023438 25 45.023438 C 13.890566 45.023438 5 36.13287 5 25.023438 A 1.0001 1.0001 0 1 0 3 25.023438 C 3 37.204003 12.819434 47.023438 25 47.023438 C 37.180566 47.023438 47 37.204003 47 25.023438 C 47 12.842871 37.180566 3.0234375 25 3.0234375 C 18.685898 3.0234375 12.985264 5.693158 9 9.9414062 L 9 3 A 1.0001 1.0001 0 0 0 7.984375 1.9863281 z M 29.5 17 C 24.5 17 24.300781 21.7 24.300781 25 C 24.300781 27.5 24.1 33 29.5 33 C 34.4 33 34.699219 28.2 34.699219 25 C 34.699219 21.7 34.4 17 29.5 17 z M 19.5 17.099609 C 19.1 19.499609 17.4 19.999609 15 20.099609 L 15 21.599609 L 19.099609 21.599609 L 19.099609 32.900391 L 21 32.900391 L 21 17.099609 L 19.5 17.099609 z M 29.5 18.800781 C 33.4 18.800781 32.800781 24.699609 32.800781 25.099609 C 32.800781 28.399609 32.2 31.400391 29.5 31.400391 C 25.8 31.400391 26.199219 25.599609 26.199219 25.099609 C 26.199219 24.799609 25.6 18.800781 29.5 18.800781 z"></path>
              </svg></button><button class="plyr__controls__item plyr__control" type="button" data-plyr="play" aria-pressed="false" aria-label="Reproduzir"><svg class="icon--pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-pause"></use></svg><svg class="icon--not-pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-play"></use></svg><span class="label--pressed plyr__sr-only">Pausar</span><span class="label--not-pressed plyr__sr-only">Reproduzir</span></button><button class="plyr__controls__item plyr__control" type="button" data-plyr="fast-forward" aria-pressed="false" style="margin-right: auto;"><svg style="width:24px;height:24px" viewBox="0 0 50 50">
              <path fill="currentColor" d="M 41.984375 1.9863281 A 1.0001 1.0001 0 0 0 41 3 L 41 9.9414062 C 37.014556 5.692295 31.313104 3.0234375 25 3.0234375 C 12.819434 3.0234375 3 12.842871 3 25.023438 C 3 37.204003 12.819434 47.023438 25 47.023438 C 37.180566 47.023438 47 37.204003 47 25.023438 A 1.0001 1.0001 0 1 0 45 25.023438 C 45 36.13287 36.109434 45.023438 25 45.023438 C 13.890566 45.023438 5 36.13287 5 25.023438 C 5 13.914003 13.890566 5.0234375 25 5.0234375 C 30.593333 5.0234375 35.63652 7.322796 39.238281 11 L 33 11 A 1.0001 1.0001 0 1 0 33 13 L 43 13 L 43 3 A 1.0001 1.0001 0 0 0 41.984375 1.9863281 z M 29.5 17 C 24.5 17 24.300781 21.7 24.300781 25 C 24.300781 27.5 24.1 33 29.5 33 C 34.4 33 34.699219 28.2 34.699219 25 C 34.699219 21.7 34.4 17 29.5 17 z M 19.5 17.099609 C 19.1 19.499609 17.4 19.999609 15 20.099609 L 15 21.599609 L 19.099609 21.599609 L 19.099609 32.900391 L 21 32.900391 L 21 17.099609 L 19.5 17.099609 z M 29.5 18.800781 C 33.4 18.800781 32.800781 24.699609 32.800781 25.099609 C 32.800781 28.399609 32.2 31.400391 29.5 31.400391 C 25.8 31.400391 26.199219 25.599609 26.199219 25.099609 C 26.199219 24.799609 25.6 18.800781 29.5 18.800781 z"></path>
          </svg></button><div class="plyr__controls__item plyr__progress__container"><div class="plyr__progress"><div class="plyr__pb" style="pointer-events: none;"><div class="sp__base"><ul class="sp__progressbar"><li style="width: 1253px;"><div class="sp__container"><div class="sp__bg"></div><div class="sp__section" style="background-color: rgba(255, 255, 255, 0.533); z-index: 1; width: 0px;"></div><div class="sp__section" style="background-color: rgba(255, 255, 255, 0.314); z-index: 2; width: 1253px;"></div><div class="sp__section" style="background-color: var(--plyr-color-main); z-index: 3; width: 1115.67px;"></div></div></li></ul><div class="sp__title animated">test</div></div></div><input data-plyr="seek" type="range" min="0" max="100" step="0.01" value="0" autocomplete="off" role="slider" aria-label="Procurar" aria-valuemin="0" aria-valuemax="736.746666" aria-valuenow="655.974762" id="plyr-seek-7220" aria-valuetext="10:55 de 12:16" style="--value: 89.04%; top: -5px;" seek-value="88.87545344619105"><progress class="plyr__progress__buffer" min="0" max="100" value="100" role="progressbar" aria-hidden="true" style="top: 4px; opacity: 0.01;">% colocado na memória intermédia</progress><span class="plyr__tooltip" hidden="" style="left: 87.7469%;">10:46</span><div class="plyr__preview-thumb" style="left: 979px;"><div class="plyr__preview-thumb__image-container" style="height: 135px; width: 241px;"><img src="./_9.jpg" data-index="327" style="height: 810px; width: 1446px; left: -723.214px; top: 0px;"></div><div class="plyr__preview-thumb__time-container"><span>10:54</span></div></div></div></div><div class="plyr__controls__item plyr__time--current plyr__time" aria-label="Tempo atual">-01:20</div><div class="plyr__controls__item plyr__volume"><button type="button" class="plyr__control" data-plyr="mute" aria-pressed="false"><svg class="icon--pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-muted"></use></svg><svg class="icon--not-pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-volume"></use></svg><span class="label--pressed plyr__sr-only">Com som</span><span class="label--not-pressed plyr__sr-only">Sem som</span></button><input data-plyr="volume" type="range" min="0" max="1" step="0.05" value="1" autocomplete="off" role="slider" aria-label="Volume" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100" id="plyr-volume-7220" aria-valuetext="100.0%" style="--value: 100%;"></div><div class="plyr__controls__item plyr__menu"><button aria-haspopup="true" aria-controls="plyr-settings-7220" aria-expanded="false" type="button" class="plyr__control" data-plyr="settings" aria-pressed="false"><svg aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-settings"></use></svg><span class="plyr__sr-only">Definições</span></button><div class="plyr__menu__container" id="plyr-settings-7220" hidden=""><div style="max-height: calc(100vh - 50px);"><div id="plyr-settings-7220-home"><div role="menu"><button data-plyr="settings" type="button" class="plyr__control plyr__control--forward" role="menuitem" aria-haspopup="true" hidden=""><span>Legendas<span class="plyr__menu__value">Desativado</span></span></button><button data-plyr="settings" type="button" class="plyr__control plyr__control--forward" role="menuitem" aria-haspopup="true"><span>Qualidade<span class="plyr__menu__value">480p</span></span></button><button data-plyr="settings" type="button" class="plyr__control plyr__control--forward" role="menuitem" aria-haspopup="true"><span>Velocidade<span class="plyr__menu__value">Normal</span></span></button><button class="customSettingsBtn" id="custom-plyr-btn" data-plyr="settings" type="button" role="menuitem" aria-haspopup="true">Reportar erro</button></div></div><div id="plyr-settings-7220-captions" hidden=""><button type="button" class="plyr__control plyr__control--back"><span aria-hidden="true">Legendas</span><span class="plyr__sr-only">Voltar ao menu anterior</span></button><div role="menu"></div></div><div id="plyr-settings-7220-quality" hidden=""><button type="button" class="plyr__control plyr__control--back"><span aria-hidden="true">Qualidade</span><span class="plyr__sr-only">Voltar ao menu anterior</span></button><div role="menu"><button data-plyr="quality" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="0"><span>Auto</span></button><button data-plyr="quality" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="720"><span>720p<span class="plyr__menu__value"><span class="plyr__badge">HD</span></span></span></button><button data-plyr="quality" type="button" role="menuitemradio" class="plyr__control" aria-checked="true" value="480"><span>480p<span class="plyr__menu__value"><span class="plyr__badge">SD</span></span></span></button></div></div><div id="plyr-settings-7220-speed" hidden=""><button type="button" class="plyr__control plyr__control--back"><span aria-hidden="true">Velocidade</span><span class="plyr__sr-only">Voltar ao menu anterior</span></button><div role="menu"><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="0.5"><span>0.5×</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="0.75"><span>0.75×</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="true" value="1"><span>Normal</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="1.25"><span>1.25×</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="1.5"><span>1.5×</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="2"><span>2×</span></button></div></div></div></div></div><button class="plyr__controls__item plyr__control" type="button" data-plyr="pip" aria-pressed="false"><svg aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-pip"></use></svg><span class="plyr__sr-only">PIP</span></button><button class="plyr__controls__item plyr__control plyr__control--pressed" type="button" data-plyr="fullscreen" aria-pressed="true"><svg class="icon--pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-exit-fullscreen"></use></svg><svg class="icon--not-pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-enter-fullscreen"></use></svg><span class="label--pressed plyr__sr-only">Sair do modo de ecrã inteiro</span><span class="label--not-pressed plyr__sr-only">Entrar no modo de ecrã inteiro</span></button></div><div class="plyr__video-wrapper"><video crossorigin="" preload="auto" playsinline="" poster="https://b-vz-2ba20d04-520.tv.pandavideo.com.br/d51dc7fe-cd84-4591-b107-b94eecb90dc7/thumbnail.jpg" data-poster="https://b-vz-2ba20d04-520.tv.pandavideo.com.br/d51dc7fe-cd84-4591-b107-b94eecb90dc7/thumbnail.jpg" src="blob:https://player-vz-2ba20d04-520.tv.pandavideo.com.br/33224042-4db8-4f67-bd32-a7a23206952c" style="visibility: visible;"><source type="application/x-mpegURL" src="https://b-vz-2ba20d04-520.tv.pandavideo.com.br/d51dc7fe-cd84-4591-b107-b94eecb90dc7/playlist.m3u8"></video><div class="plyr__poster disabled" style="background-image: url(&quot;https://b-vz-2ba20d04-520.tv.pandavideo.com.br/d51dc7fe-cd84-4591-b107-b94eecb90dc7/thumbnail.jpg&quot;);"></div><div class="plyr__preview-scrubbing"></div></div><div class="plyr__captions" dir="auto"></div></div>
            <!-- Loading indicator -->
            <div id="error-indicator" class="disabled">
            </div>
            <div class="loading-icon disabled">
                <svg x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">
                    <path fill="#9e9e9e" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
                        <animatetransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite"></animatetransform>
                    </path>
                </svg>
            </div>
            
            <!-- Live -->
            <div class="live-offline-badge disabled">

                <img src="./panda-icon.svg" alt="">
                <p id="live-subtitle">AGUARDANDO LIVE STREAM</p>
                <p id="live-title"></p>
            </div>
            <div class="live-thumb disabled">
                <img src="./saved_resource" alt="Live Offline">
            </div>
        <div id="context-menu" class=" disabled"><ul> <li> <a href="https://pandavideo.com.br/" target="_blank" id="about-panda">Sobre a Panda Video</a> </li><li> <button id="report-problem">Reportar erro</button> </li></ul></div></div>
    </body></html>